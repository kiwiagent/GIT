<?xml version="1.0" encoding="UTF-8"?>
<concerto version="portal-serialization/2.0">
<application>
	<name>Context Switching</name>
	<access-controller>
		<allowed-group>
			<name>Generic Community User</name>
		</allowed-group>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
		<denied-group>
			<name>Administrators</name>
		</denied-group>
	</access-controller>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<description>Launch the MKM Validation Engine to provide Context Switching into ACTPAS.</description>
	<entry-point>
		<name>Context Switching - Demographics</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>true</apply-xsl-stylesheet>
				<css-stylesheet-url>/resources/css/concerto_rde.css</css-stylesheet-url>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Orion - Patient Searches &amp; Demographics</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Demographics</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.xml</url>
				<xsl-stylesheet-url>/resources/xsl/patientdemographics.xsl</xsl-stylesheet-url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Switch to ACTPAS</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens ACTPAS to the desired patient and screen.&#xD;
Arguments:&#xD;
 * loopback: The loopback ip of the local session.&#xD;
 * script: The MKM engine script to use</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>patientId</name>
					<index>0</index>
					<value>&lt;%if null != Request.patientId%&gt;&lt;%=Request.patientId%&gt;&lt;%else%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>script</name>
					<index>1</index>
					<value>&lt;%=Request.script%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>userId</name>
					<index>2</index>
					<value>&lt;%=User.userID%&gt;</value>
				</query-parameter>
				<redirection-key>ACTPAS Context Switching</redirection-key>
				<url>http://&lt;%=Request.loopback%&gt;:19004/ContextSwitch</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<login-redirection-script />
	<login-timeout>300000</login-timeout>
	<logout-redirection-script />
	<system-object>false</system-object>
	<windowlet>
		<name>Patient Demographics</name>
		<maximized-entry-point>
			<name>Context Switching - Demographics</name>
			<application>
				<name>Context Switching</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>Context Switching - Demographics</name>
			<application>
				<name>Context Switching</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>Forms</name>
	<access-controller>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>DesignerServerBase</name>
		<protected>false</protected>
		<value>/forms-designer</value>
	</application-variable>
	<application-variable>
		<name>ServerBase</name>
		<protected>false</protected>
		<value>/forms-5.5</value>
	</application-variable>
	<application-variable>
		<name>cDictionaryJdbcUrl</name>
		<protected>false</protected>
		<value>java:comp/env/jdbc/orion/dictionary</value>
	</application-variable>
	<application-variable>
		<name>cFormsJdbcUrl</name>
		<protected>false</protected>
		<value>java:comp/env/jdbc/orion/forms</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>OHCCM</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>2.4</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>displayPatientInformation</name>
		<protected>false</protected>
		<value>&lt;%if Context.Patient.Id.MRN &lt;&gt; "" || Context.Patient.Id.MPI &lt;&gt; "" || Context.Patient.Id.NationalIdNumber &lt;&gt; "" || Context.Patient.Id.Alternate &lt;&gt; ""%&gt;false&lt;%else%&gt;true&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>isAdministrator</name>
		<protected>false</protected>
		<value>&lt;%=User.isMemberOf("Forms Administrators")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation &lt;&gt; null &amp;&amp; SecureInformation.patientId &lt;&gt; ""%&gt;&lt;%=SecureInformation.patientId%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>renderer</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>userNamespace</name>
		<protected>false</protected>
		<value>clinical-portal-user</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;CaseManHome</url>
	</default-help-redirection>
	<description>Concerto Forms</description>
	<entry-point>
		<name>Add Document</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add New Document</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>true</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>&lt;%=SecureInformation.modelId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Clear Caches</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ClearCaches</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/data/data/data_refresh.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/ClearCaches.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Create New Form</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Open the Create New Form page</description>
		<display-name>Create New Form</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CreatingForms</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.DesignerServerBase%&gt;/CreateForm.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Create New Shared Lookup</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Open the Create New Shared Lookup page</description>
		<display-name>Create New Shared Lookup</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CreatingSharedLookups</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.DesignerServerBase%&gt;/EditLookup.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Discard Unsaved Changes</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Discard a user's unsaved changes to a document, so that other users can edit the document.</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>documentId</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.documentId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>userId</name>
					<index>1</index>
					<value>&lt;%=SecureInformation.userId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>2</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>3</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/DiscardUnsavedChanges.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Edit Existing Form</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Edit an existing Form</description>
		<display-name>Edit Form</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;EditingForms</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>modelId</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.get("Id")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>type</name>
					<index>1</index>
					<value>&lt;%=SecureInformation.get("Type")%&gt;</value>
				</query-parameter>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.DesignerServerBase%&gt;/FormDesigner.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Edit Existing Shared Lookup</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Open the Edit Shared Lookup page</description>
		<display-name>Edit Existing Shared Lookup</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;EditingSharedLookups</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>lookupIdentifier</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.get("Id")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>_eventName</name>
					<index>1</index>
					<value>showEditPage</value>
				</query-parameter>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.DesignerServerBase%&gt;/EditLookup.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Edit QuickTexts</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;QuickText</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<url>&lt;%=AppVars.ServerBase%&gt;/quicktext/DisplayQuickTextList.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Form Designer Main Page</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Open the Form Designer Search for Form</description>
		<display-name>Form Designer</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;SearchingForForms</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/objects and people/people/other/worker.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Forms</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Form Designer Search</value>
				</query-parameter>
				<query-parameter>
					<name>allowSavedSearches</name>
					<index>2</index>
					<value>false</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Preview Form</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>modelId</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.modelId%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.ServerBase%&gt;/Preview.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Resume Form Designer Session</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Chrome</allowed-custom-user-agent>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Resumes an existing Forms session.</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;EditingForms</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.DesignerServerBase%&gt;/FormDesigner.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Search for Shared Lookups</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Open the Shared Lookup Search</description>
		<display-name>Shared Lookups</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;SharedLookupSearch</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/objects and people/people/other/worker.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Forms</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Shared Lookup Search</value>
				</query-parameter>
				<query-parameter>
					<name>allowSavedSearches</name>
					<index>2</index>
					<value>false</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Document</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Team Leader - CN</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Displays the Document from the CDV tree.&#xD;
&#xD;
This is marked as Unsecure so it can receive the form token, but reads no other parameters from the request so does not sign any untrusted content. This must not be updated to read other parameters from the request.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CompletingTaskForms</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>formRequestToken</name>
					<index>0</index>
					<value>&lt;%=Request.formRequestToken%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>documentId</name>
					<index>1</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.documentId%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.modelId%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>3</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isPatientInContext%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>4</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.fromCdvTree%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>5</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.RepositoryName%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>responsible</name>
					<index>6</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.responsible%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>assigned</name>
					<index>7</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.assigned%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isDialog</name>
					<index>8</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isDialog%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>9</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>10</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>11</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>12</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>13</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>14</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>15</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>16</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>17</index>
					<value>GenderLookup</value>
				</content-parameter>
				<description>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.fromCdvTree%&gt;&lt;%end if%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Log in to the Forms Application</description>
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<query-parameter>
				<name>username</name>
				<index>0</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>isAdministrator</name>
				<index>1</index>
				<value>&lt;%=AppVars.isAdministrator%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>concertoHome</name>
				<index>2</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>3</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>applicationName</name>
				<index>4</index>
				<value>&lt;%=Application.Name%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userGivenName</name>
				<index>5</index>
				<value>&lt;%var givenName = User.getAttribute("Users", "Full Name.Given Name(s)")%&gt;&lt;%if givenName = "" %&gt;.&lt;%else%&gt;&lt;%= givenName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userFamilyName</name>
				<index>6</index>
				<value>&lt;%var familyName = User.getAttribute("Users", "Full Name.Family Name")%&gt;&lt;%if familyName = "" %&gt;&lt;%= User.UserID%&gt;&lt;%else%&gt;&lt;%= familyName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userLanguage</name>
				<index>7</index>
				<value>&lt;%=User.getLanguage()%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>namespace</name>
				<index>8</index>
				<value>&lt;%=AppVars.userNamespace%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>9</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<redirection-key>cForms</redirection-key>
			<url>&lt;%=AppVars.ServerBase%&gt;/login</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>600000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.ServerBase%&gt;/logout</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>Form Designer Search</name>
		<data-source-name>java:comp/env/jdbc/orion/formdefinition</data-source-name>
		<description>Search for Forms for the Form Designer</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>select&#xD;
   sfi.title as title,&#xD;
   sfi.dataTypeName as name,&#xD;
   sfi.itemType as type,&#xD;
   sfi.dataTypeId as modelId&#xD;
from XFM_SharedFormItem sfi &#xD;
where&#xD;
   (UPPER(sfi.dataTypeName) LIKE UPPER('%&lt;%=get("FormName").toString().replace("'", "''").replace("#", "##").replace("%", "#%").replace("_", "#_")%&gt;%') ESCAPE '#'&#xD;
   OR UPPER(sfi.title) LIKE UPPER('%&lt;%=get("FormName").toString().replace("'", "''").replace("#", "##").replace("%", "#%").replace("_", "#_")%&gt;%') ESCAPE '#')&#xD;
   AND (&#xD;
      sfi.itemType = ''&#xD;
      &lt;%if FormSearch = "Form" %&gt; OR sfi.itemType = 'Form' &lt;%end if%&gt;&#xD;
      &lt;%if FormComponentSearch = "FormComponent"%&gt; OR sfi.itemType = 'Component' &lt;%end if%&gt;&#xD;
   )&#xD;
AND UPPER(sfi.title) NOT LIKE '%DELETE%' &#xD;
AND UPPER(sfi.dataTypeName) NOT LIKE '%DELETE%'&#xD;
AND UPPER(sfi.title) NOT LIKE '%DONT%' &#xD;
AND UPPER(sfi.dataTypeName) NOT LIKE '%DONT%'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Create New</name>
				<index>2</index>
				<action>var application = new Application("Forms", "Create New Form");&#xD;
concerto.openApplication(application, '/concerto');</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Resume Editing Session</name>
				<index>3</index>
				<action>var application = new Application("Forms", "Resume Form Designer Session");&#xD;
concerto.openApplication(application, '/concerto');</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-field>
				<name>FormName</name>
				<index>0</index>
				<default-value />
				<display-name>Form Title/Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>LineBreak</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;/br&gt;")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>FormSearch</name>
				<index>2</index>
				<default-value>Form</default-value>
				<display-name>Search  For</display-name>
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Form", "Forms")%&gt;&lt;%exec config.setDefaultValue("Form")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>FormComponentSearch</name>
				<index>3</index>
				<default-value>FormComponent</default-value>
				<display-name />
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("FormComponent", "Form Component")%&gt;&lt;%exec config.setDefaultValue("FormComponent")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Type</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Id</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>openEntryPoint</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Shared Lookup Search</name>
		<data-source-name>java:comp/env/jdbc/orion/formdefinition</data-source-name>
		<description>Search for Shared Lookups</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>select
   sfi.title as title,
   sfi.dataTypeName as name,
   sfi.dataTypeId as modelId
from XFM_SharedFormItem sfi 
where
   (
       UPPER(sfi.dataTypeName) LIKE UPPER('%&lt;%=get("LookupName").toString().replace("'", "''").replace("#", "##").replace("%", "#%").replace("_", "#_")%&gt;%') ESCAPE '#'
   OR
       UPPER(sfi.title) LIKE UPPER('%&lt;%=get("LookupName").toString().replace("'", "''").replace("#", "##").replace("%", "#%").replace("_", "#_")%&gt;%') ESCAPE '#'
   ) AND
   sfi.itemType = 'Lookup'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Create New</name>
				<index>2</index>
				<action>var application = new Application("Forms", "Create New Shared Lookup");
concerto.openApplication(application, '/concerto');</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-field>
				<name>LookupName</name>
				<index>0</index>
				<default-value />
				<display-name>Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Shared Lookup</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Id</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>openEntryPoint</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<system-object>false</system-object>
</application>
<application>
	<name>Healthcare pathways - CCR</name>
	<access-controller>
		<allowed-group>
			<name>Generic Community Clinician</name>
		</allowed-group>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>DocType</name>
		<protected>false</protected>
		<value>DISDOC2</value>
	</application-variable>
	<application-variable>
		<name>DocTypeStatus</name>
		<protected>false</protected>
		<value>DISDOC</value>
	</application-variable>
	<application-variable>
		<name>Minor Patient Identifiers</name>
		<protected>false</protected>
		<value>&lt;%=Context.get("Patient.Id.Alternate")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>Referral Consumed SOAP Service</name>
		<protected>false</protected>
		<value>ReferralConsumedSoapService</value>
	</application-variable>
	<application-variable>
		<name>SMTdocumentDB</name>
		<protected>false</protected>
		<value>CDRPROD</value>
	</application-variable>
	<application-variable>
		<name>ServerBase</name>
		<protected>false</protected>
		<value>/forms-5.5</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>OHCCM</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>2.4</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>db_Audit</name>
		<protected>false</protected>
		<value>OH_CM_Audit</value>
	</application-variable>
	<application-variable>
		<name>db_CWSClinical</name>
		<protected>false</protected>
		<value>OH_CM_Clinical</value>
	</application-variable>
	<application-variable>
		<name>db_CWSCustom</name>
		<protected>false</protected>
		<value>OH_CM_Custom</value>
	</application-variable>
	<application-variable>
		<name>db_CWSDictionary</name>
		<protected>false</protected>
		<value>OH_CM_cDictionary</value>
	</application-variable>
	<application-variable>
		<name>db_CWSMedMan</name>
		<protected>false</protected>
		<value>OH_CM_medicationManagement</value>
	</application-variable>
	<application-variable>
		<name>db_CWSRepository</name>
		<protected>false</protected>
		<value>OH_CM_cRepository</value>
	</application-variable>
	<application-variable>
		<name>db_CWSTask</name>
		<protected>false</protected>
		<value>OH_CM_Task</value>
	</application-variable>
	<application-variable>
		<name>displayPatientInformation</name>
		<protected>false</protected>
		<value>true</value>
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>isAdministrator</name>
		<protected>false</protected>
		<value>&lt;%=User.isMemberOf("Forms Administrators")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation &lt;&gt; null &amp;&amp; SecureInformation.patientId &lt;&gt; ""%&gt;&lt;%=SecureInformation.patientId%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNHIList</name>
		<protected>false</protected>
		<value>&lt;%var idlist = ""%&gt;&lt;%var first = true%&gt;&lt;%var nhis = StringUtil.join(Context.get("Patient.Id.PatientIdList"), "," )%&gt;&lt;%if nhis.length() &gt; 0%&gt;&lt;%for each token in StringUtil.tokenize(nhis, ",", true)%&gt;&lt;%if token &lt;&gt; "" &amp;&amp; token &lt;&gt; "Emp"%&gt;&lt;%if first%&gt;&lt;%var first = false%&gt;&lt;%var idlist = token%&gt;&lt;%else%&gt;&lt;%var idlist = idlist+ "','" + token%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end for%&gt;&lt;%=idlist%&gt;&lt;%else%&gt;&lt;%=Context.get("Patient.Id.MRN")%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>patientURNList</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.("Patient ID")%&gt;&lt;%elseif Request.("Context.Patient")%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;% var minorids = AppVars.get("Minor Patient Identifiers").split(";")%&gt;&lt;%for each token in minorids%&gt;&lt;%if token &lt;&gt; ""%&gt;,&lt;%=token%&gt;&lt;%end if%&gt;&lt;%end for%&gt;</value>
	</application-variable>
	<application-variable>
		<name>renderer</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>userNamespace</name>
		<protected>false</protected>
		<value>clinical-portal-user</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;CaseManHome</url>
	</default-help-redirection>
	<description>::CCR:: Healthcare pathways application &#xD;
&#xD;
Description: The Healthcare pathways - CCR application contains the application variables, security access configuration, entry points, and searches that are required for CCR. Each of these will be outlined in this section.&#xD;
Includes Wound Searches.</description>
	<document-repository>
		<name>CCR Documents - Current</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<default-image-url />
		<description />
		<display-control-bar>false</display-control-bar>
		<display-control-bar-title>false</display-control-bar-title>
		<entry-point>
			<name>View Document</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name>Community Documents</parent-folder-name>
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>Author</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>modelId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>modelId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>isPatientInContext</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value>true</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>isPatientInContext</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.columnName</name>
			<value>fromCdvTree</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.defaultValue</name>
			<value>true</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.name</name>
			<value>fromCdvTree</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.columnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.name</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.columnName</name>
			<value>URL</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.name</name>
			<value>taskIdentifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.columnName</name>
			<value>repositoryName</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.defaultValue</name>
			<value>Community</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.name</name>
			<value>repositoryName</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/orion/task</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>Date</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value>Form Document</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value>Service</value>
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>SELECT DISTINCT pt.taskIdentifier AS 'URL',&#xD;
	pt.dataId AS 'ID',&#xD;
	TaskType.identifyingName AS 'Title', &#xD;
	pt.creationTime AS 'Date',&#xD;
	pe.pathwayIdentifier AS 'Category', &#xD;
	pt.creationTime  AS 'Subcategory', &#xD;
	'' AS 'Service',&#xD;
	'' AS 'Author',&#xD;
pt.modelId as 'modelId' &#xD;
FROM PersistentTask pt&#xD;
	INNER JOIN SchedulableTaskGroup stg ON pt.owner = stg.uniqueId&#xD;
	INNER JOIN PatientId patient ON stg.patient = patient.uniqueId&#xD;
	INNER JOIN TaskType on pt.taskType = TaskType.uniqueId&#xD;
	INNER JOIN TaskStatus on pt.taskStatus = TaskStatus.uniqueId&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe &#xD;
	ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_DeactivationReason dr ON (dr.uniqueId = pe.deactivationReasonId) OR (pe.deactivationReasonId IS NULL )&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.CodeSet.CodeDefinition cd ON cd.code = dr.code&#xD;
WHERE 1=2&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
	AND patient.id IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;  AND TaskStatus.mappedStatus = 'COMPLETED'&#xD;
AND pt.modelId is not null</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>SubCategory</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Title</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>URL</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>false</value>
		</repository-parameter>
	</document-repository>
	<document-repository>
		<name>CCR Documents - Historic</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<default-image-url />
		<description />
		<display-control-bar>false</display-control-bar>
		<display-control-bar-title>false</display-control-bar-title>
		<document-control-bar-button>
			<name>Print</name>
			<index>0</index>
			<action>cdvDocument.print();</action>
			<disable />
			<display>true</display>
			<display-name>Print</display-name>
		</document-control-bar-button>
		<entry-point>
			<name>View Document</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name>Historic Community Documents</parent-folder-name>
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>Author</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>modelId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>modelId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>isPatientInContext</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value>true</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>isPatientInContext</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.columnName</name>
			<value>fromCdvTree</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.defaultValue</name>
			<value>true</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.name</name>
			<value>fromCdvTree</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.columnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.name</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.columnName</name>
			<value>URL</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.name</name>
			<value>taskIdentifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/orion/task</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>Date</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value>Form Document</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value>Service</value>
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value>/*TO BE REMOVE*/&#xD;
&#xD;
&#xD;
SELECT pt.taskIdentifier AS 'URL',&#xD;
	pt.dataId AS 'ID',&#xD;
	TaskType.identifyingName AS 'Title', &#xD;
	pt.creationTime AS 'Date',&#xD;
	pe.pathwayIdentifier AS 'Category', &#xD;
	'' AS 'Subcategory', &#xD;
	'' AS 'Service',&#xD;
	'' AS 'Author',&#xD;
pt.modelId as 'modelId' &#xD;
FROM PersistentTask pt&#xD;
	INNER JOIN SchedulableTaskGroup stg ON pt.owner = stg.uniqueId&#xD;
	INNER JOIN PatientId patient ON stg.patient = patient.uniqueId&#xD;
	INNER JOIN TaskType on pt.taskType = TaskType.uniqueId&#xD;
	INNER JOIN TaskStatus on pt.taskStatus = TaskStatus.uniqueId&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe &#xD;
	ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_DeactivationReason dr ON (dr.uniqueId = pe.deactivationReasonId) OR (pe.deactivationReasonId IS NULL )&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.CodeSet.CodeDefinition cd ON cd.code = dr.code&#xD;
WHERE pt.taskIdentifier = '&lt;%=documentID%&gt;'&#xD;
AND pt.modelId is not null&#xD;
&#xD;
AND 1=2</value>
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>/*TO BE REMOVE*/&#xD;
&#xD;
&#xD;
SELECT DISTINCT pt.taskIdentifier AS 'URL',&#xD;
	pt.dataId AS 'ID',&#xD;
	TaskType.identifyingName AS 'Title', &#xD;
	pt.creationTime AS 'Date',&#xD;
	pe.pathwayIdentifier AS 'Category', &#xD;
	pt.creationTime  AS 'Subcategory', &#xD;
	'' AS 'Service',&#xD;
	'' AS 'Author',&#xD;
pt.modelId as 'modelId' &#xD;
FROM PersistentTask pt&#xD;
	INNER JOIN SchedulableTaskGroup stg ON pt.owner = stg.uniqueId&#xD;
	INNER JOIN PatientId patient ON stg.patient = patient.uniqueId&#xD;
	INNER JOIN TaskType on pt.taskType = TaskType.uniqueId&#xD;
	INNER JOIN TaskStatus on pt.taskStatus = TaskStatus.uniqueId&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe &#xD;
	ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_DeactivationReason dr ON (dr.uniqueId = pe.deactivationReasonId) OR (pe.deactivationReasonId IS NULL )&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.CodeSet.CodeDefinition cd ON cd.code = dr.code&#xD;
&#xD;
WHERE 1=2&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
	AND patient.id IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;  &#xD;
AND TaskStatus.mappedStatus = 'COMPLETED'&#xD;
AND pt.modelId is not null</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>SubCategory</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Title</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>URL</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>true</value>
		</repository-parameter>
	</document-repository>
	<document-repository>
		<name>Event Status - Community</name>
		<access-controller>
			<allowed-group>
				<name>Clinical User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<default-image-url />
		<description />
		<display-control-bar>true</display-control-bar>
		<display-control-bar-title>true</display-control-bar-title>
		<document-control-bar-button>
			<name>Print</name>
			<index>0</index>
			<action>cdvDocument.print();</action>
			<disable />
			<display>true</display>
			<display-name>Print</display-name>
		</document-control-bar-button>
		<entry-point>
			<name>Document Direct Access</name>
			<application>
				<name>Soprano Workflow Medical Templates</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name>Community Documents</parent-folder-name>
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>requestCreatorIdentifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>documentType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value>DISDOC</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>documentType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>Template</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>Template</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.10.columnName</name>
			<value>eventId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.10.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.10.name</name>
			<value>eventId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.11.columnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.11.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.11.name</name>
			<value>url</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.columnName</name>
			<value>DocType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.name</name>
			<value>DocType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.columnName</name>
			<value>Location</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.name</name>
			<value>Location</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.columnName</name>
			<value>Facility</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.name</name>
			<value>Facility</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.columnName</name>
			<value>specialtyCode</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.name</name>
			<value>specialtyCode</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.6.columnName</name>
			<value>episodeType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.6.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.6.name</name>
			<value>episodeType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.7.columnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.7.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.7.name</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.8.columnName</name>
			<value>docStatus</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.8.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.8.name</name>
			<value>docStatus</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.9.columnName</name>
			<value>panelMode</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.9.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.9.name</name>
			<value>panelMode</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/cwsclinical</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>resolutionTime</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>gmtOffsetColumnName</name>
			<value>dischargeDateOffset</value>
		</repository-parameter>
		<repository-parameter>
			<name>highImportanceMappings</name>
			<value>1</value>
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>importanceColumnName</name>
			<value>urgent</value>
		</repository-parameter>
		<repository-parameter>
			<name>lowImportanceMappings</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>normalImportanceMappings</name>
			<value>0</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value>Assignee</value>
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>SELECT DISTINCT&#xD;
    r.urgent,&#xD;
    r.sourceReferralId, &#xD;
    r.receivedDate as resolutionTime,&#xD;
    r.patientIdentifier as patientId,&#xD;
    r.patientNamespace as patientNamespace,&#xD;
    r.referralRequestID,&#xD;
    r.version,&#xD;
    'Event Status Update' +' '+ d.status as Title,&#xD;
    (CASE &#xD;
      WHEN pathwayIdentifiers.PathwayType = 'SUB' THEN &#xD;
      (CASE &#xD;
        WHEN typeCode = 'BurnScald' THEN 'Burn or Scald Wound Pathway'&#xD;
        WHEN typeCode = 'FootUlcer' THEN 'Foot Ulcer Wound Pathway'  &#xD;
        WHEN typeCode = 'LegUlcer' THEN 'Leg Ulcer Wound Pathway'    &#xD;
        WHEN typeCode = 'Malignant' THEN 'Malignant Wound Pathway'   &#xD;
        WHEN typeCode = 'Other' THEN 'Other Wound Pathway'   &#xD;
        WHEN typeCode = 'PressureSores' THEN 'Pressure Injury Wound Pathway' &#xD;
        WHEN typeCode = 'SinusFistula' THEN 'Sinus / Fistula Wound Pathway'&#xD;
        WHEN typeCode = 'SkinTear' THEN 'Skin Tear Wound Pathway'&#xD;
        WHEN typeCode = 'Surgical' THEN 'Surgical Wound Pathway'&#xD;
        WHEN typeCode = 'BowelStoma' THEN 'Bowel Stoma Pathway'&#xD;
        WHEN typeCode = 'UrinaryStoma' THEN 'Urinary Stoma Pathway'&#xD;
        ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
      END)&#xD;
      ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
    END ) as  Pathway,  &#xD;
  CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN '(Closed)' ELSE '(Open)' END +' '+&#xD;
  (CASE &#xD;
      WHEN pathwayIdentifiers.PathwayType = 'SUB' THEN &#xD;
      (CASE &#xD;
        WHEN typeCode = 'BurnScald' THEN 'Burn or Scald Wound Pathway'&#xD;
        WHEN typeCode = 'FootUlcer' THEN 'Foot Ulcer Wound Pathway'  &#xD;
        WHEN typeCode = 'LegUlcer' THEN 'Leg Ulcer Wound Pathway'    &#xD;
        WHEN typeCode = 'Malignant' THEN 'Malignant Wound Pathway'   &#xD;
        WHEN typeCode = 'Other' THEN 'Other Wound Pathway'   &#xD;
        WHEN typeCode = 'PressureSores' THEN 'Pressure Injury Wound Pathway' &#xD;
        WHEN typeCode = 'SinusFistula' THEN 'Sinus / Fistula Wound Pathway'&#xD;
        WHEN typeCode = 'SkinTear' THEN 'Skin Tear Wound Pathway'&#xD;
        WHEN typeCode = 'Surgical' THEN 'Surgical Wound Pathway'&#xD;
        WHEN typeCode = 'BowelStoma' THEN 'Bowel Stoma Pathway'&#xD;
        WHEN typeCode = 'UrinaryStoma' THEN 'Urinary Stoma Pathway'&#xD;
        ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
      END)&#xD;
      ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
    END )  +' '+ CONVERT(varchar(20), r.receivedDate , 113)  as "Category",  &#xD;
    (CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN 'CLOSED' ELSE pe.enrollmentStatus END) as enrollmentStatus,&#xD;
    r.statusCode, &#xD;
    r.requestCreatorIdentifier,&#xD;
    r.identifier,&#xD;
    r.statusCode as ViewId,&#xD;
    r.requiresReview,&#xD;
    rcd.shortDescription as Assignee&#xD;
&#xD;
&#xD;
,'INPAT' AS Template &#xD;
,'DISDOC' AS DocType &#xD;
,'CHCACT' AS Location&#xD;
,'CHHS' AS Facility&#xD;
,r.referralViewId as EpisodeId&#xD;
,'CCR' AS specialtyCode&#xD;
,'COM' AS episodeType   &#xD;
,r.identifier as eventId&#xD;
,d.dischargeEventId documentId  &#xD;
,d.dischargeEventId url  &#xD;
,d.status AS docStatus&#xD;
,'popup' as panelMode&#xD;
FROM&#xD;
  Referral.ERF_ReferralView r&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.vw_pathwayEnrollment AS pe ON pe.patientId = r.patientIdentifier&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.id = r.referralViewId &#xD;
  INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V_DOCUMENT document ON refmeta.dataId = document.documentIdentifier &#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = document.documentId&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K  &#xD;
&#xD;
  INNER JOIN Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem&#xD;
  INNER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_PatientDemographics demographic ON demographic.patientID = r.patientIdentifier&#xD;
  INNER JOIN (  &#xD;
    SELECT DISTINCT psm.SubPathwayEnrolmentId as PathwayEnrolmentId,rtpm.referral_identifier, psm.SubEnrolmentStatus as pathway_status, 'SUB' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE psm.SubPathwayEnrolmentId IS NOT NULL&#xD;
    UNION ALL &#xD;
    SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
    rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
  ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier AND pathwayIdentifiers.referral_identifier = r.identifier&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.EventStatus_Mappings AS em ON pathwayIdentifiers.PathwayEnrolmentId = em.PathwayEnrollmentId&#xD;
  INNER JOIN &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d ON CAST(r.referralViewId as varchar) = CAST(d.extEventId as varchar) AND em.dischargeStatusId = d.dischargeEventId&#xD;
&#xD;
  AND (d.documentType = 'DISDOC')&#xD;
  AND (d.inActive IS NULL OR d.inActive &lt;&gt; 'Y')&#xD;
&#xD;
WHERE  r.patientIdentifier IN ( &lt;%=AppVars.get("patientURNList") %&gt; )</value>
		</repository-parameter>
		<repository-parameter>
			<name>statusColumnName</name>
			<value>docStatus</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>Pathway</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Title</value>
		</repository-parameter>
		<repository-parameter>
			<name>trueString</name>
			<value>true</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value>/concerto/ApplicationRedirector.htm?applicationName=Soprano+Workflow+Medical+Templates&amp;entryPointName=Document+Direct+Access&amp;documentId=&lt;%=URL%&gt;&amp;panelMode=popup</value>
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>true</value>
		</repository-parameter>
	</document-repository>
	<document-repository>
		<name>Event Summary - CCR WIC</name>
		<access-controller>
			<allowed-group>
				<name>Clinical User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<default-image-url />
		<description />
		<display-control-bar>true</display-control-bar>
		<display-control-bar-title>true</display-control-bar-title>
		<document-control-bar-button>
			<name>Print</name>
			<index>0</index>
			<action>cdvDocument.print();</action>
			<disable />
			<display>true</display>
			<display-name>Print</display-name>
		</document-control-bar-button>
		<entry-point>
			<name>Document Direct Access</name>
			<application>
				<name>Soprano Workflow Medical Templates</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name>Community Documents</parent-folder-name>
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>Author</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>documentType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value>DISDOC2</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>documentType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>Template</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>Template</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.10.columnName</name>
			<value>eventId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.10.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.10.name</name>
			<value>eventId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.11.columnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.11.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.11.name</name>
			<value>url</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.columnName</name>
			<value>DocType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.name</name>
			<value>DocType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.columnName</name>
			<value>Location</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.name</name>
			<value>Location</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.columnName</name>
			<value>Facility</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.name</name>
			<value>Facility</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.columnName</name>
			<value>specialtyCode</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.name</name>
			<value>specialtyCode</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.6.columnName</name>
			<value>episodeType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.6.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.6.name</name>
			<value>episodeType</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.7.columnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.7.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.7.name</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.8.columnName</name>
			<value>docStatus</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.8.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.8.name</name>
			<value>docStatus</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.9.columnName</name>
			<value>panelMode</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.9.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.9.name</name>
			<value>panelMode</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/cwsclinical</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>resolutionTime</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>gmtOffsetColumnName</name>
			<value>dischargeDateOffset</value>
		</repository-parameter>
		<repository-parameter>
			<name>highImportanceMappings</name>
			<value>1</value>
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>url</value>
		</repository-parameter>
		<repository-parameter>
			<name>importanceColumnName</name>
			<value>urgent</value>
		</repository-parameter>
		<repository-parameter>
			<name>lowImportanceMappings</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>normalImportanceMappings</name>
			<value>0</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value>Service</value>
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>SELECT DISTINCT &#xD;
    r.urgent,&#xD;
    r.sourceReferralId, &#xD;
    ISNULL(refMeta.eventDate,r.receivedDate ) as resolutionTime,&#xD;
    r.patientIdentifier as patientId,&#xD;
    r.patientNamespace as patientNamespace,&#xD;
    r.referralRequestID,&#xD;
    r.version, &#xD;
    case when d.documentType = 'DISDOC' then 'Community Status Update'&#xD;
    when d.documentType = 'DISDOC2' then 'Community Event Summary'&#xD;
    when d.documentType = 'WIC' then 'Walk-in Centre Event Summary'&#xD;
    else d.templateDescription END AS Title, &#xD;
&#xD;
    replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa') as  Pathway,  &#xD;
  CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN '(Closed)' ELSE '(Open)' END +' '+&#xD;
  replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')  +' '+ CONVERT(varchar(20), ISNULL(refMeta.eventDate,r.receivedDate ) , 113)  as "Category",   &#xD;
    pe.enrollmentStatus as enrollmentStatus,&#xD;
    r.statusCode, &#xD;
    d.lastUpdateUserName as Author,&#xD;
    r.identifier,&#xD;
    r.statusCode as ViewId,&#xD;
    r.requiresReview,&#xD;
    rcd.shortDescription as Assignee&#xD;
,'INPAT' AS Template &#xD;
,'DISDOC2' AS DocType &#xD;
,'CHCACT' AS Location&#xD;
,'CHHS' AS Facility&#xD;
,r.referralViewId as EpisodeId&#xD;
,'CCR' AS specialtyCode&#xD;
,'COM' AS episodeType   &#xD;
,r.identifier as eventId&#xD;
,d.dischargeEventId documentId  &#xD;
,d.dischargeEventId url  &#xD;
,d.status AS docStatus&#xD;
,'popup' as panelMode&#xD;
FROM&#xD;
  &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralView r&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.vw_pathwayEnrollment AS pe ON pe.patientId = r.patientIdentifier&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.id = r.referralViewId &#xD;
  INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V_DOCUMENT document ON refmeta.dataId = document.documentIdentifier &#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = document.documentId&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K  &#xD;
&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem&#xD;
  INNER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_PatientDemographicsMini demographic ON demographic.patientID = r.patientIdentifier&#xD;
  INNER JOIN (   &#xD;
    SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType, psm.typeCode as typeCode, rtpm.dischargeSummaryId as dischargeId FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
    rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
  ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier AND pathwayIdentifiers.referral_identifier = r.identifier&#xD;
  INNER JOIN &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d ON CAST(r.sourceReferralId as varchar) = CAST(d.extEventId as varchar) AND pathwayIdentifiers.dischargeId = d.dischargeEventId&#xD;
  AND (d.documentType = 'DISDOC2')&#xD;
  AND (d.inActive IS NULL OR d.inActive &lt;&gt; 'Y')&#xD;
&#xD;
WHERE  r.patientIdentifier IN ( &lt;%=AppVars.get("patientURNList") %&gt; )&#xD;
&#xD;
UNION ALL&#xD;
&#xD;
SELECT DISTINCT &#xD;
    r.urgent,&#xD;
    r.sourceReferralId, &#xD;
    ISNULL(refMeta.eventDate,r.receivedDate ) as resolutionTime,&#xD;
    r.patientIdentifier as patientId,&#xD;
    r.patientNamespace as patientNamespace,&#xD;
    r.referralRequestID,&#xD;
    r.version, &#xD;
    case when d.documentType = 'DISDOC' then 'Community Status Update'&#xD;
    when d.documentType = 'DISDOC2' then 'Community Event Summary'&#xD;
    when d.documentType = 'WIC' then 'Walk-in Centre Event Summary'&#xD;
    else d.templateDescription END AS Title, &#xD;
&#xD;
&#xD;
    replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa') as  Pathway,  &#xD;
  CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN '(Closed)' ELSE '(Open)' END +' '+&#xD;
  replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa') +' '+ CONVERT(varchar(20), ISNULL(refMeta.eventDate,r.receivedDate ) , 113)  as "Category", &#xD;
    pe.enrollmentStatus as enrollmentStatus,&#xD;
    r.statusCode, &#xD;
    d.lastUpdateUserName as Author,&#xD;
    r.identifier,&#xD;
    r.statusCode as ViewId,&#xD;
    r.requiresReview,&#xD;
    rcd.shortDescription as Assignee&#xD;
,'INPAT' AS Template &#xD;
,'WIC' AS DocType &#xD;
,'CHCACT' AS Location&#xD;
,'CHHS' AS Facility&#xD;
,r.referralViewId as EpisodeId&#xD;
,'CCR' AS specialtyCode&#xD;
,'COM' AS episodeType   &#xD;
,r.identifier as eventId&#xD;
,d.dischargeEventId documentId  &#xD;
,d.dischargeEventId url  &#xD;
,d.status AS docStatus&#xD;
,'popup' as panelMode&#xD;
FROM&#xD;
  &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralView r&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.vw_pathwayEnrollment AS pe ON pe.patientId = r.patientIdentifier&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.id = r.referralViewId &#xD;
  INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V_DOCUMENT document ON refmeta.dataId = document.documentIdentifier &#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = document.documentId&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K  &#xD;
&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem&#xD;
  INNER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_PatientDemographicsMini demographic ON demographic.patientID = r.patientIdentifier&#xD;
  INNER JOIN (   &#xD;
    SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType, psm.typeCode as typeCode, rtpm.dischargeSummaryId as dischargeId FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
    rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
  ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier AND pathwayIdentifiers.referral_identifier = r.identifier&#xD;
  INNER JOIN &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d ON CAST(r.sourceReferralId as varchar) = CAST(d.extEventId as varchar) AND pathwayIdentifiers.dischargeId = d.dischargeEventId&#xD;
  AND (d.documentType = 'WIC')&#xD;
  AND (d.inActive IS NULL OR d.inActive &lt;&gt; 'Y')&#xD;
  &#xD;
WHERE  r.patientIdentifier IN ( &lt;%=AppVars.get("patientURNList") %&gt; )</value>
		</repository-parameter>
		<repository-parameter>
			<name>statusColumnName</name>
			<value>status</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>Pathway</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Title</value>
		</repository-parameter>
		<repository-parameter>
			<name>trueString</name>
			<value>true</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>url</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value>/concerto/ApplicationRedirector.htm?applicationName=Soprano+Workflow+Medical+Templates&amp;entryPointName=Document+Direct+Access&amp;documentId=&lt;%=URL%&gt;&amp;panelMode=popup</value>
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>true</value>
		</repository-parameter>
	</document-repository>
	<document-repository>
		<name>Healthcare Pathways - Current</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<default-image-url />
		<description>All Durations of Care documents - Contents homepage</description>
		<display-control-bar>true</display-control-bar>
		<display-control-bar-title>true</display-control-bar-title>
		<document-control-bar-button>
			<name>Print</name>
			<index>0</index>
			<action>cdvDocument.print();</action>
			<disable />
			<display>true</display>
			<display-name>Print</display-name>
		</document-control-bar-button>
		<entry-point>
			<name>DR_Duration of care EP</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name>Community Documents</parent-folder-name>
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>Author</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>Status</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>status</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.columnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.name</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/cwsclinical</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>enrollTime</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>SELECT DISTINCT pts.SubPathwayEnrolmentId as ID,&#xD;
	pe.pathwayIdentifier +' '+ CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN '(Closed)' ELSE '(Open)' END  as Title,&#xD;
	pe.enrollmentTime as enrollTime,&#xD;
	pe.modificationTime as endTime,&#xD;
	pts.SubPathwayName  +' '+ CONVERT(varchar(20),pe.enrollmentTime, 113)+' '+ CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN '(Closed)' ELSE '(Open)' END  as Category,&#xD;
	CASE &#xD;
	 WHEN pe.deactivationReasonId IS NULL THEN NULL&#xD;
	 ELSE cd.description &#xD;
	 END as enrollDescription,&#xD;
	 CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN '(Closed)' ELSE 'Active' END as Status, &#xD;
         pe.modifierUserId as Author &#xD;
    &#xD;
	FROM PathwayEnrollment.PES_PathwayEnrollment pe &#xD;
	INNER JOIN PathwayEnrollment.PES_DeactivationReason dr ON (dr.uniqueId = pe.deactivationReasonId) OR (pe.deactivationReasonId IS NULL )&#xD;
	INNER JOIN CodeSet.CodeDefinition cd ON cd.code = dr.code&#xD;
	INNER JOIN OH_CM_Custom.dbo.PathwayToSubpathway_Mapping pts ON pts.PathwayEnrolmentId = pe.enrollmentIdentifier&#xD;
	WHERE pe.patientNamespace = 'OHCP' 		 	&#xD;
AND pe.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )</value>
		</repository-parameter>
		<repository-parameter>
			<name>statusColumnName</name>
			<value>Status</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>enrollDescription</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Title</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value>DocumentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>true</value>
		</repository-parameter>
	</document-repository>
	<document-repository>
		<name>Healthcare Pathways - Historic</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<default-image-url />
		<description>Completed Durations of Care</description>
		<display-control-bar>true</display-control-bar>
		<display-control-bar-title>true</display-control-bar-title>
		<document-control-bar-button>
			<name>Print</name>
			<index>0</index>
			<action>cdvDocument.print();</action>
			<disable />
			<display>true</display>
			<display-name>Print</display-name>
		</document-control-bar-button>
		<entry-point>
			<name>DR_Duration of care EP</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name>Community Documents</parent-folder-name>
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>Author</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>Status</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>status</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/cwsclinical</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>enrollTime</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>SELECT DISTINCT pe.enrollmentIdentifier as ID,&#xD;
	pe.pathwayIdentifier as Title,&#xD;
	pe.enrollmentTime as enrollTime,&#xD;
	pe.modificationTime as endTime,&#xD;
	pe.pathwayIdentifier as Category,&#xD;
	CASE &#xD;
	 WHEN pe.deactivationReasonId IS NULL THEN NULL&#xD;
	 ELSE cd.description &#xD;
	 END as enrollDescription,&#xD;
	pe.enrollmentStatus as Status  &#xD;
	FROM PathwayEnrollment.PES_PathwayEnrollment pe &#xD;
	INNER JOIN PathwayEnrollment.PES_DeactivationReason dr ON (dr.uniqueId = pe.deactivationReasonId) OR (pe.deactivationReasonId IS NULL )&#xD;
	INNER JOIN CodeSet.CodeDefinition cd ON cd.code = dr.code&#xD;
	WHERE pe.patientNamespace = 'OHCP' 	 	&#xD;
AND pe.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
AND pe.enrollmentStatus = 'DEACTIVATED'</value>
		</repository-parameter>
		<repository-parameter>
			<name>statusColumnName</name>
			<value>Status</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>enrollDescription</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value>DocumentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>true</value>
		</repository-parameter>
	</document-repository>
	<entry-point>
		<name>Add New Access Code</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Opens and creates a new document in a Patient Context.</description>
		<display-name>Add Access Code</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_f3604b97-2bb8-4c03-8f84-9d1cd24fe5cd</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Care Plan</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add Care Plan</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_4832b237-a681-4b27-9a33-fc419b38433c</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New HACC</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation. leannl</description>
		<display-name>Add New HACC Assessment</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_16b75436-2b2f-4f28-bc02-6a41497c568d</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Home Visit</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add Care Plan</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_e0a7b2d1-1fbf-4db9-9ac9-f508b8cfa452</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Immunisation</name>
		<access-controller>
			<allowed-group>
				<name>Community Nurse Practitioner - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>Community Nursing</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add Immunisation</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_d283c6da-21b3-46f2-9965-ce6706226249</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Manual Handling Assessment</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation - BrettH</description>
		<display-name>Add Manual Handling Assessment</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_71a66ade-e47c-4787-985a-fe5348953f7b</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userSpecialty</name>
					<index>21</index>
					<value>&lt;%=User.getAttribute("Community","CommunitySpeciality")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userId</name>
					<index>22</index>
					<value>&lt;%=User.userID%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Medical History</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation. leannl</description>
		<display-name>Add Medical History</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_6310bfd3-8e02-4f44-910c-2499012114d1</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Medication Order</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add Medication Order</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_4ef30af0-b58b-11e4-9f5c-0800200c9a66</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userSpecialty</name>
					<index>21</index>
					<value>&lt;%=User.getAttribute("Community","CommunitySpeciality")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userId</name>
					<index>22</index>
					<value>&lt;%=User.userID%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Non Response</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation</description>
		<display-name>Add New Non Response to a Scheduled Visit</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_0c6f9c6b-210f-4e7d-9b19-f6ab187878d0</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Observations Vitals</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add Vital Signs and Observations</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_5cccf120-ea13-11e3-ac10-0800200c9a66</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userSpecialty</name>
					<index>21</index>
					<value>&lt;%=User.getAttribute("Community","CommunitySpeciality")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userId</name>
					<index>22</index>
					<value>&lt;%=User.userID%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Obstetric History</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation. leannl</description>
		<display-name>Add Obstetric History</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_c55d2edb-5842-4094-8948-8a381efad4ac</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description>uuid_c55d2edb-5842-4094-8948-8a381efad4ac</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Progress Note</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add Progress Note</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_aa226254-a10a-4cdd-94c7-2e57af1006a4</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>true</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userSpecialty</name>
					<index>21</index>
					<value>&lt;%=User.getAttribute("Community","userSpecialty")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userId</name>
					<index>22</index>
					<value>&lt;%=User.userID%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>source</name>
					<index>23</index>
					<value>&lt;%=SecureInformation.Source%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>pathwayId</name>
					<index>24</index>
					<value>&lt;%=Request.pathwayId%&gt;</value>
				</content-parameter>
				<description>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Social Information</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add Social History</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_5ffadbb8-8637-4f6a-a69f-1a6b4083f5f5</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userID</name>
					<index>20</index>
					<value>&lt;%=User.userID%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Social Observation</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add Lifestyle Factors</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_2798de20-b208-4817-9806-21320a4aa18f</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Surgical History</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation. leannl</description>
		<display-name>Add Surgical History</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_8bd561dc-0cfa-4625-b103-1ef5f3af0ca6</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Treatment Order</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add Treatment Order</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_617b72ba-5dee-4c61-8ab4-e51fdf7bf71d</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userSpecialty</name>
					<index>21</index>
					<value>&lt;%=User.getAttribute("Community","CommunitySpeciality")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userId</name>
					<index>22</index>
					<value>&lt;%=User.userID%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add New Waterlow Assessment</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation - BrettH</description>
		<display-name>Add Waterlow Assessment</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_cd8c103a-c601-40c0-9c71-21d2daa6a089</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userSpecialty</name>
					<index>21</index>
					<value>&lt;%=User.getAttribute("Community","CommunitySpeciality")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userId</name>
					<index>22</index>
					<value>&lt;%=User.userID%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR DR Dynamic Patient Summary (Admin View)</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Dynamic patient summary view for Community view only</description>
		<display-name>Patient Summary (Community)</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/objects and people/people/dudes/dude3.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>cdvViewName</name>
					<index>0</index>
					<value>Community Patient Summary</value>
				</query-parameter>
				<query-parameter>
					<name>openRepositoryName</name>
					<index>1</index>
					<value>Referrals Repository - EoC</value>
				</query-parameter>
				<query-parameter>
					<name>openDocumentID</name>
					<index>2</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>OpenFolderName</name>
					<index>3</index>
					<value>Community Documents</value>
				</query-parameter>
				<query-parameter>
					<name>fromCdvTree</name>
					<index>4</index>
					<value>true</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/cdv/ClinicalDocumentView.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR DR Referral Context</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Dynamic patient summary view for Referral Context purposes only</description>
		<display-name>CHHS Referral</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_green.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>cdvViewName</name>
					<index>0</index>
					<value>Community</value>
				</query-parameter>
				<query-parameter>
					<name>openRepositoryName</name>
					<index>1</index>
					<value>&lt;%if SecureInformation.get("Status") &lt;&gt; "Draft"%&gt;Referrals Repository - EoC&lt;%else%&gt;Referrals Repository - Drafts&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>openDocumentID</name>
					<index>2</index>
					<value>&lt;%if Context.get("Referral.Id.ReferralId")%&gt;&lt;%=Context.get("Referral.Id.ReferralId")%&gt;&lt;%elseif SecureInformation.get("Referral ID")%&gt;&lt;%=SecureInformation.get("Referral ID")%&gt;&lt;%else%&gt;&lt;%=SecureInformation.get("Referral ID")%&gt;&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>openFolderName</name>
					<index>3</index>
					<value>Community Documents</value>
				</query-parameter>
				<query-parameter>
					<name>fromCdvTree</name>
					<index>4</index>
					<value>true</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/cdv/ClinicalDocumentView.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Image Search</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Wound Images search - using cViewer</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Call image search for current patient</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>name</name>
					<index>0</index>
					<value>CCRImageSearch</value>
				</query-parameter>
				<query-parameter>
					<name>PatientId</name>
					<index>1</index>
					<value>&lt;%if SecureInformation.get("Patient ID")&lt;&gt; ""%&gt;&lt;%=SecureInformation.get("Patient ID")%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<redirection-key>cViewer User Key</redirection-key>
				<url>/cViewer/process.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Patient Profile</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Dynamic patient summary view for Community Demo purposes only</description>
		<display-name>Patient Profile</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/objects and people/city/buildings/houses.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>cdvViewName</name>
					<index>0</index>
					<value>Community</value>
				</query-parameter>
				<query-parameter>
					<name>openRepositoryName</name>
					<index>1</index>
					<value>Referrals Repository - EoC</value>
				</query-parameter>
				<query-parameter>
					<name>openDocumentID</name>
					<index>2</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>OpenFolderName</name>
					<index>3</index>
					<value>Community Documents</value>
				</query-parameter>
				<query-parameter>
					<name>fromCdvTree</name>
					<index>4</index>
					<value>true</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/cdv/ClinicalDocumentView.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CDV_Assessments (context)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Assessments</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient_Overview - All Assessments</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CDV_CCR Patient Summary</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Patient Summary screen for Community Demo purposes only</description>
		<display-name>Patient Summary (Community)</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/objects and people/people/dudes/dude3.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Community Patient Summary</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.name</name>
					<index>1</index>
					<value>Demographics</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.minHeight</name>
					<index>2</index>
					<value>250</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.1.name</name>
					<index>3</index>
					<value>Open Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.1.minHeight</name>
					<index>4</index>
					<value>10</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.1.maxHeight</name>
					<index>5</index>
					<value>230</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.2.name</name>
					<index>6</index>
					<value>Patient Enrollment</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.2.minHeight</name>
					<index>7</index>
					<value>10</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.2.maxHeight</name>
					<index>8</index>
					<value>600</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CDV_Correspondence</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Correspondence</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/document_exchange.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Community Correspondence</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CDV_Patient Care Plan (context)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Care Plans</display-name>
		<help-redirection>
			<index>0</index>
			<method>GET</method>
			<url />
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/address/address_book2.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Care Plan</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CDV_Patient Overview</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>::: Patient Profile :::</description>
		<display-name>Patient Profile</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP%20Style/objects%20and%20people/city/buildings/houses.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Community Patient Overview</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.name</name>
					<index>1</index>
					<value>Global Forms</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.minHeight</name>
					<index>2</index>
					<value>480</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.maxHeight</name>
					<index>3</index>
					<value>480</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.1.name</name>
					<index>4</index>
					<value>Progress Notes</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.1.minHeight</name>
					<index>5</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.1.maxHeight</name>
					<index>6</index>
					<value>300</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.2.name</name>
					<index>7</index>
					<value>Treatment Orders</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.2.minHeight</name>
					<index>8</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.2.maxHeight</name>
					<index>9</index>
					<value>300</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.3.name</name>
					<index>10</index>
					<value>Surgical History</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.3.minHeight</name>
					<index>11</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.3.maxHeight</name>
					<index>12</index>
					<value>320</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.4.name</name>
					<index>13</index>
					<value>Medications History</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.4.minHeight</name>
					<index>14</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.4.maxHeight</name>
					<index>15</index>
					<value>300</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.5.name</name>
					<index>16</index>
					<value>Pathway Enrollment</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.5.minHeight</name>
					<index>17</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.5.maxHeight</name>
					<index>18</index>
					<value>200</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CDV_Progress_Notes (context)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Progress Notes</display-name>
		<help-redirection>
			<index>0</index>
			<method>GET</method>
			<url />
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_pinned.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - ProgressNote_Max</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CDV_Referrals</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Referrals</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/document_attachment.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Community Referrals Overview</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.name</name>
					<index>1</index>
					<value>Create_Referral_Request</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.minHeight</name>
					<index>2</index>
					<value>200</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.maxHeight</name>
					<index>3</index>
					<value>200</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DR_Duration of care EP</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>cViewer - Dynamic creation of DoC Documentation</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>cViewer process action</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>name</name>
					<index>0</index>
					<value>Referral Summary</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=Context.Patient.Id.MRN%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>ID</name>
					<index>2</index>
					<value>&lt;%=SecureInformation.ID%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/cViewer/process.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Careplan</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink_Care Plan</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_HACC</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Global Forms</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Windowlet on the Patient Overview</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - HACC</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Home Visit</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Global Forms</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Windowlet on the Patient Overview</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - Home Visit</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_LifestyleFactors</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>&lt;%if Request.formOpen%&gt;Context_DocumentLink - LifestyleFactors_Context&lt;%else%&gt;Context_DocumentLink - LifestyleFactors&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>fromCdvTree</name>
					<index>2</index>
					<value>false</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_LifestyleFactors  Search</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - LifestyleFactors_Context</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Manual Handling</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Global Forms</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Windowlet on the Patient Overview</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - Manual Handling</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Medication_Order</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - Medication_Orders</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Non Response</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Global Forms</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Windowlet on the Patient Overview</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - Non Response</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Obstetric History</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Obstetric Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_ProgressNote</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - ProgressNote</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Social History</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink_SocialHistory</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Social History HTTP</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>&lt;%if Request.formOpen%&gt;Context_DocumentLink_SocialHistory_Context&lt;%else%&gt;Context_DocumentLink_SocialHistory&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>formOpen</name>
					<index>2</index>
					<value>&lt;%=Request.formOpen%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Treatment_Order</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - Treatment_Orders</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_VitalSigns</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Vital Signs and Observations</description>
		<display-name>Vital Signs and Observations</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Vital Signs and Observations</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink_Observations and Vitals</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Waterlow</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink_Waterlow Score</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP_Oncology Assessment Tool Results</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Oncology Assessment Tool Results</value>
				</query-parameter>
				<query-parameter>
					<name>documentId</name>
					<index>2</index>
					<value>&lt;%=Request.get("documentId")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP_Oncology Initial Assessments</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Oncology Initial Assessments</value>
				</query-parameter>
				<query-parameter>
					<name>documentId</name>
					<index>2</index>
					<value>&lt;%=Request.get("documentId")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP_Select Oncology Initial Assessment</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Oncology Initial Assessments Select</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP_Task Audit Search</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Global Forms</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Audit track</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Document Update Audit Log</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Form Header - Stoma Review</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View Stoma Sites (initial review) -leannl</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Stoma Form Header Review</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Homepage - CHI 1</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Attempt at setting up a new homepage for eth CHI 1 user however couldn't get past an in=sufficient proivileges error</description>
		<display-name>Home Page</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>CCR CHI1 Home Page</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Homepage - CHI 2</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Home Page</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>CCR CHI2 Home Page</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Homepage - CHI Service</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Home Page</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>CCR Service Home Page</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Homepage - Clerical</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Home Page</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Clerical Homepage</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Homepage - Community Clinician Homepage</name>
		<access-controller>
			<allowed-group>
				<name>Community Service</name>
			</allowed-group>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Home Page</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>CCR Community Clinician Homepage</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Homepage - Community Teamleader</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Home Page</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>CCR Teamleader Home Page</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Manual Handling Risk Assessment Search</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Search for Manual Handling Risk Assessments</description>
		<display-name>Manual Handling</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Task - Manual Handling</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Observations and Vital Signs</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Vital Signs and Observations</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/patient/holter.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>false</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_5cccf120-ea13-11e3-ac10-0800200c9a66</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userSpecialty</name>
					<index>21</index>
					<value>&lt;%=User.getAttribute("Community","CommunitySpeciality")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>userId</name>
					<index>22</index>
					<value>&lt;%=User.userID%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>PP - View Ulcer ABPI Doppler Results</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View ABPI Doppler results for Leg Ulcers - leannl</description>
		<display-name>Leg Ulcer - Ankle Brachial Pressure Index (ABPI) Doppler Results</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound - Ulcer Doppler Results</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>PP_DemographicContextSwitch</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Community Demographic Context Switch</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>PP_Wound Care Assessment</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Wounds assessments portal page</description>
		<display-name>Wound Assessments</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/objects and people/people/other/nurse2.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Community Wound Assessment</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Treating Facilities</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>ACTPAS_CDR_VIEW</description>
		<display-name>Treating Facilities</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Oncology Treating Facilities</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Document</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Displays the Document from the CDV tree.&#xD;
&#xD;
This is marked as Unsecure so it can receive the form token, but reads no other parameters from the request so does not sign any untrusted content. This must not be updated to read other parameters from the request.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CompletingTaskForms</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>formRequestToken</name>
					<index>0</index>
					<value>&lt;%=Request.formRequestToken%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>documentId</name>
					<index>1</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.documentId%&gt;&#xD;
&lt;%elseif Request.documentIdentifier%&gt;&#xD;
&lt;%=Request.documentIdentifier%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.modelId%&gt;&lt;%elseif Request.modelId%&gt;&lt;%=Request.modelId%&gt;&lt;%else%&gt;uuid_aa226254-a10a-4cdd-94c7-2e57af1006a4&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>3</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isPatientInContext%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>4</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.fromCdvTree%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>5</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%if SecureInformation.repositoryName &lt;&gt;""%&gt;&lt;%=SecureInformation.repositoryName%&gt;&lt;%else%&gt;Community&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>responsible</name>
					<index>6</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.responsible%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>assigned</name>
					<index>7</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.assigned%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isDialog</name>
					<index>8</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isDialog%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>9</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>10</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>11</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>12</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>13</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>14</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>15</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>16</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>17</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>18</index>
					<value>view</value>
				</content-parameter>
				<description>&lt;%if SecureInformation.formModeLock%&gt;edit&lt;%else%&gt;view&lt;%end if%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Access_Code</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - AccessCode</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_All_Assessments</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient_Overview - All Assessments</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Care Plan</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<method>GET</method>
			<url />
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Care Plan</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Care Plan_max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<method>GET</method>
			<url />
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Care Plan</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Global_Tasks</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Global Forms</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Windowlet on the Patient Overview</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Global Forms</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Latest_Nurse_Assessment</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink_Referrals (Active in Assessments)</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medical History</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Medical Hx</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Nursing_Assessments</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient_Overview - Nursing Assessments</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Obstetric History</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Obstetric Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_OtherInvolvedPractitioners</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>EP - Other Practitioners involved in patient care  -leannl</description>
		<display-name>Other Involved Practitioners</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient_Overview - Other Involved Practitioners</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Pathway Functions</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Pathway - Current Enrolled Pathways</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Patient Profile Check</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Patient Profile</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>The Patient Profile setup for the CCR community profile</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>zzzzProfile Search Static</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Patient_Care Plan</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink_Care Plan</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Patient_Social_History</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - LifestyleFactors</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Patient_Treatment_Order</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient_Overview - Treatment Order</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Patient_Treatment_Order_max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient_Overview - Treatment Order</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Progress_Notes</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Progress Notes</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/document_attachment.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - ProgressNote_Max</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Progress_Notes_max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Progress Notes</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/document_attachment.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - ProgressNote</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Stoma_Assessments</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Previous Stoma Assessments - used on the Stoma Assessment review</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Stoma Assessments Bowel</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Stoma_Reviews</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Display Stoma Review form data  -leannl</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Stoma Form Header Review</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Stoma_Site_Initial</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View Stoma Sites (initial review) -leannl</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient_Overview - Pathways</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Stoma_Urinary_Assessments</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>display Stoma Assessments and Review -leannl</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Stoma Assessments Urinary</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Surgical History</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Surgical Hx</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Surgical History_max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Medical Surgical Obstetric History</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Medical Surgical Obstetric History</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Surgical Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_View Medications</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Medication Summary</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_View Medications_max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Medication Summary</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Vital Signs and Observations</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Vital Signs and Observations</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink_Observations and Vitals</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Vital Signs and Observations Flowsheet</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<url />
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Images</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Display the last 3 wound images</description>
		<display-name>Previous Wound Images</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>name</name>
					<index>0</index>
					<value>CCRImageSearch</value>
				</query-parameter>
				<query-parameter>
					<name>PatientId</name>
					<index>1</index>
					<value>11330075</value>
				</query-parameter>
				<url>/cViewer/process.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Observations</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View Wound Observations - leannl</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Observations</value>
				</query-parameter>
				<query-parameter>
					<name>pathwayId</name>
					<index>2</index>
					<value>&lt;%=Request.get("pathwayId")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound SIte Information</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - All</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Site Burns</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Burn or Scald Assessment</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Site Foot Ulcer</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Foot Ulcer</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Site Leg Ulcer</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Leg Ulcer</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Site Malignant</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Malignant</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Site Other</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Other</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Site Pressure Sore</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Pressure Sore</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Site Sinus Fistula</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Sinus Fistula</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Site Skin Tear</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Skin tear</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Wound Site Surgical</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Wound Site - Surgical</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Waterlow Risk Assessment</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Task - Waterlow Assessment</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Waterlow Score</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Waterlow Assessments</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Log in to the Forms Application</description>
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<query-parameter>
				<name>username</name>
				<index>0</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>isAdministrator</name>
				<index>1</index>
				<value>&lt;%=AppVars.isAdministrator%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>concertoHome</name>
				<index>2</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>3</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>applicationName</name>
				<index>4</index>
				<value>&lt;%=Application.Name%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userGivenName</name>
				<index>5</index>
				<value>&lt;%var givenName = User.getAttribute("Users", "Full Name.Given Name(s)")%&gt;&lt;%if givenName = "" %&gt;.&lt;%else%&gt;&lt;%= givenName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userFamilyName</name>
				<index>6</index>
				<value>&lt;%var familyName = User.getAttribute("Users", "Full Name.Family Name")%&gt;&lt;%if familyName = "" %&gt;&lt;%= User.UserID%&gt;&lt;%else%&gt;&lt;%= familyName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userLanguage</name>
				<index>7</index>
				<value>&lt;%=User.getLanguage()%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>namespace</name>
				<index>8</index>
				<value>&lt;%=AppVars.userNamespace%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>9</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<redirection-key>cForms</redirection-key>
			<url>&lt;%=AppVars.ServerBase%&gt;/login</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>600000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.ServerBase%&gt;/logout</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>Document Update Audit Log</name>
		<data-source-name>java:comp/env/jdbc/orion/audit</data-source-name>
		<description>::: Audit Requirement ::: Jira: CCR-791 - Purpose to have an audit history for amendments.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>1 DESC</order-by>
		<query-string>SELECT DISTINCT results.eventId, &#xD;
results.UserId,  &#xD;
results.loggedTime, &#xD;
ISNULL(xfm.title,tt.identifyingName) as title,  &#xD;
results.EventReason, &#xD;
referralResults.referral_identifier,  &#xD;
ISNULL(pt.dataId,results.documentId) as documentIdentifier,&#xD;
ISNULL(LTRIM(results.ModelId),pt.modelId) as modelId, &#xD;
results.URN, &#xD;
results.eventType&#xD;
FROM (&#xD;
  SELECT DISTINCT ae.eventId,&#xD;
    cast (( STUFF((SELECT ', ' + avp1.value&#xD;
                  FROM OH_CM_Audit.[dbo].[AuditEvent] ae1&#xD;
  INNER JOIN OH_CM_Audit.dbo.AuditEventParameter avp1 ON avp1.eventID = ae1.eventID&#xD;
                  where ae.eventID = ae1.eventID and avp1.name IN ( 'EventReason','reopenReason' )&#xD;
                  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'EventReason'&#xD;
  ,cast (( STUFF((SELECT ', ' + avp1.value&#xD;
                  FROM OH_CM_Audit.[dbo].[AuditEvent] ae1&#xD;
  INNER JOIN OH_CM_Audit.dbo.AuditEventParameter avp1 ON avp1.eventID = ae1.eventID&#xD;
                  where ae.eventID = ae1.eventID and avp1.name IN ( 'DocumentId','taskId' )&#xD;
                  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'DocumentId'&#xD;
  ,cast (( STUFF((SELECT ', ' + avp1.value&#xD;
                  FROM OH_CM_Audit.[dbo].[AuditEvent] ae1&#xD;
  INNER JOIN OH_CM_Audit.dbo.AuditEventParameter avp1 ON avp1.eventID = ae1.eventID&#xD;
                  where ae.eventID = ae1.eventID and avp1.name IN ( 'ModelId' )&#xD;
                  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'ModelId'&#xD;
  &#xD;
  ,cast (( STUFF((SELECT ', ' + avp1.value&#xD;
                  FROM OH_CM_Audit.[dbo].[AuditEvent] ae1&#xD;
  INNER JOIN OH_CM_Audit.dbo.AuditEventParameter avp1 ON avp1.eventID = ae1.eventID&#xD;
                  where ae.eventID = ae1.eventID and avp1.name IN ( 'Patient.Id.ResolvingIdentifier.id' )&#xD;
                  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'URN' &#xD;
  , ae.userID , [eventType] , loggedTime&#xD;
  FROM OH_CM_Audit.[dbo].[AuditEvent] ae&#xD;
  LEFT OUTER JOIN OH_CM_Audit.dbo.AuditEventParameter avp ON avp.eventID = ae.eventID&#xD;
  where [eventType] IN ('Edit Final Document','Edit Referral','Update Text','Set Provider','Edit Document','Update Referral Request','Task Updated', 'Task Reopened') and avp.name IN ( 'EventReason' ,'DocumentId','ModelId','Patient.Id.ResolvingIdentifier.id','reopenReason')&#xD;
) as results&#xD;
LEFT OUTER JOIN OH_CM_Task.[dbo].[PersistentTask] pt ON pt.dataId = LTRIM(results.documentId)  OR LTRIM(results.documentId) = pt.taskIdentifier&#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v_AllDocumentIdentifier ad ON ad.documentIdentifier = pt.dataId&#xD;
LEFT OUTER JOIN OH_CM_cDictionary.[dbo].[XFM_SharedFormItem] xfm ON xfm.dataTypeId = pt.modelId &#xD;
LEFT OUTER JOIN OH_CM_Task.dbo.TaskType tt ON tt.uniqueId = pt.taskType&#xD;
LEFT OUTER JOIN (&#xD;
  SELECT DISTINCT rpm.referral_identifier, rpm.pathway_enrollmentIdentifier &#xD;
  FROM OH_CM_Custom.dbo.ReferralToPathwayMapping rpm&#xD;
  UNION ALL&#xD;
  SELECT DISTINCT rpm.referral_identifier, rspm.SubPathwayEnrolmentId FROM OH_CM_Custom.dbo.PathwayToSubpathway_Mapping rspm INNER JOIN OH_CM_Custom.dbo.ReferralToPathwayMapping rpm ON rpm.pathway_enrollmentIdentifier = rspm.PathwayEnrolmentId&#xD;
  &#xD;
) as referralResults ON REPLACE( pt.subjectKey, 'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:', '') = referralResults.pathway_enrollmentIdentifier &#xD;
 &#xD;
WHERE LTRIM(results.URN) IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
AND results.DocumentId is not null &#xD;
AND results.EventReason is not null</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Document Title</name>
				<index>0</index>
				<default-value />
				<display-name>Document Title</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/orion/audit")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT \r\nISNULL(xfm.title,tt.identifyingName) as title \r\nFROM (\r\n  SELECT DISTINCT ae.eventId,\r\n    cast (( STUFF((SELECT ', ' + avp1.value\r\n                  FROM " + SD + "=AppVars.db_Audit" + ED + ".[dbo].[AuditEvent] ae1\r\n  INNER JOIN " + SD + "=AppVars.db_Audit" + ED + ".dbo.AuditEventParameter avp1 ON avp1.eventID = ae1.eventID\r\n                  where ae.eventID = ae1.eventID and avp1.name IN ( 'EventReason','reopenReason' )\r\n                  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'EventReason'\r\n  ,cast (( STUFF((SELECT ', ' + avp1.value\r\n                  FROM " + SD + "=AppVars.db_Audit" + ED + ".[dbo].[AuditEvent] ae1\r\n  INNER JOIN " + SD + "=AppVars.db_Audit" + ED + ".dbo.AuditEventParameter avp1 ON avp1.eventID = ae1.eventID\r\n                  where ae.eventID = ae1.eventID and avp1.name IN ( 'DocumentId','taskId' )\r\n                  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'DocumentId'\r\n  ,cast (( STUFF((SELECT ', ' + avp1.value\r\n                  FROM " + SD + "=AppVars.db_Audit" + ED + ".[dbo].[AuditEvent] ae1\r\n  INNER JOIN " + SD + "=AppVars.db_Audit" + ED + ".dbo.AuditEventParameter avp1 ON avp1.eventID = ae1.eventID\r\n                  where ae.eventID = ae1.eventID and avp1.name IN ( 'ModelId' )\r\n                  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'ModelId'\r\n  \r\n  ,cast (( STUFF((SELECT ', ' + avp1.value\r\n                  FROM " + SD + "=AppVars.db_Audit" + ED + ".[dbo].[AuditEvent] ae1\r\n  INNER JOIN " + SD + "=AppVars.db_Audit" + ED + ".dbo.AuditEventParameter avp1 ON avp1.eventID = ae1.eventID\r\n                  where ae.eventID = ae1.eventID and avp1.name IN ( 'Patient.Id.ResolvingIdentifier.id' )\r\n                  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'URN' \r\n  , ae.userID , [eventType] , loggedTime\r\n  FROM " + SD + "=AppVars.db_Audit" + ED + ".[dbo].[AuditEvent] ae\r\n  INNER JOIN " + SD + "=AppVars.db_Audit" + ED + ".dbo.AuditEventParameter avp ON avp.eventID = ae.eventID\r\n  where [eventType] IN ('Edit Final Document','Edit Referral','Update Text','Set Provider','Edit Document','Update Referral Request','Task Updated', 'Task Reopened') and avp.name IN ( 'EventReason' ,'DocumentId','ModelId','Patient.Id.ResolvingIdentifier.id','reopenReason')\r\n) as results\r\nLEFT OUTER JOIN " + SD + "=AppVars.db_CWSDictionary" + ED + ".[dbo].[XFM_SharedFormItem] xfm ON xfm.dataTypeId = LTRIM(results.ModelId)\r\nLEFT OUTER JOIN " + SD + "=AppVars.db_CWSTask" + ED + ".[dbo].[PersistentTask] pt ON pt.taskIdentifier = LTRIM(results.DocumentId) \r\nLEFT OUTER JOIN " + SD + "=AppVars.db_CWSTask" + ED + ".dbo.TaskType tt ON tt.uniqueId = pt.taskType\r\nLEFT OUTER JOIN (\r\n\r\n  SELECT DISTINCT rpm.referral_identifier, rpm.pathway_enrollmentIdentifier, rspm.SubPathwayEnrolmentId FROM " + SD + "=AppVars.db_CWSCustom" + ED + ".dbo.ReferralToPathwayMapping rpm\r\n  INNER JOIN " + SD + "=AppVars.db_CWSCustom" + ED + ".dbo.PathwayToSubpathway_Mapping rspm ON rpm.pathway_enrollmentIdentifier = rspm.PathwayEnrolmentId \r\n  \r\n) as referralResults ON REPLACE( pt.subjectKey, 'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:', '') = referralResults.pathway_enrollmentIdentifier OR referralResults.SubPathwayEnrolmentId = REPLACE( pt.subjectKey, 'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:', '')\r\n\r\nWHERE LTRIM(results.URN) IN ( " + SD + "=AppVars.get(\"patientURNList\")" + ED + " )\r\nAND results.DocumentId is not null \r\nAND results.EventReason is not null \r\n")%&gt;&lt;%exec config.setOptionColumnName("title")%&gt;&lt;%exec config.setDisplayColumnName("title")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Last Updated Date and Time</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral Id</name>
				<index>2</index>
				<default-value />
				<display-name>Referral Id</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Updated By</name>
				<index>3</index>
				<default-value />
				<display-name>Updated By</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>eventId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document Title</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Update Reason</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Event Type</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.addQueryParameter("documentIdentifier", row.get(6) );&#xD;
application.addQueryParameter("modelId", row.get(7) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Oncology Assessment Tool Results</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: Oncology Assessment Tool Results</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
   FormInfo.documentIdentifier AS documentId &#xD;
  , DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ) as datetimeCompleted&#xD;
  ,meta.cD_userId_PLU2# AS AssessedBy&#xD;
  ,PA.[SkinToxicity_GQGX5_desc] AS SkinToxicity&#xD;
  ,PA.[OralMucositis_74G$Y_desc] AS OralMucositis&#xD;
  ,PA.[Fatigue_#WOCY_desc] AS Fatigue&#xD;
  ,PA.[Nausea_YFQ47_desc] AS Nausea&#xD;
  ,PA.[Vomiting_6R9D0_desc] AS Vomiting&#xD;
  ,PA.[Diarrhoea_3OIFK_desc] AS Diarrhoea&#xD;
  ,PA.[Constipation_I$8CK_desc] AS Consipation&#xD;
  ,PA.[Pain_31S96_desc] AS Pain&#xD;
  ,PA.[PrphrlNrpthy_XFSGY_desc] AS PeripheralNeuropathy &#xD;
  ,'uuid_' + FormInfo.modelId AS ModelId&#xD;
  ,'' AS ResultType&#xD;
  ,'' AS ResultValue&#xD;
&#xD;
   &#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.[dbo].[v2_CCRonclgyPtntAsmntTl_2VCMQ] PA&#xD;
INNER JOIN v_Document FormInfo ON FormInfo.DocumentId = PA.DOCUMENTID&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = forminfo.documentId &#xD;
INNER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PMD on META.v2_DocumentMetaData_0Z14K = PMD.v2_DocumentMetaData_0Z14K&#xD;
WHERE meta.status_TDES0 = 'FINAL' &#xD;
AND PMD.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
ORDER BY datetimeCompleted DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none;</style>
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>10</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Oncology/Chemotherapy Management Patient Assessment Tool</name>
				<index>0</index>
				<action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessed By</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;table width="40"&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;/table&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Skin Toxicity</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Oral Mucositis</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Fatigue</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Nausea</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Vomiting</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Diarrhoea</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Consipation</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pain</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Peripheral Neuropathy</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessed</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;span style="text-align:right; background-color: #EDEDED; border-color: #EDEDED; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Skin Toxicity: - &lt;%=row.get(3).getDisplayValue%&gt;&lt;/span&gt;&lt;br&gt;&#xD;
&lt;span style="text-align:right; background-color: #EDEDED; border-color: #EDEDED; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Oral Mucositis: - &lt;%=row.get(4).getDisplayValue%&gt;&lt;/span&gt;&lt;br&gt;&#xD;
&lt;span style="text-align:right; background-color: #EDEDED; border-color: #EDEDED; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Fatigue: - &lt;%=row.get(5).getDisplayValue%&gt;&lt;/span&gt;&lt;br&gt;&#xD;
&lt;span style="text-align:right; background-color: #EDEDED; border-color: #EDEDED; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Nausea: - &lt;%=row.get(6).getDisplayValue%&gt;&lt;/span&gt;&lt;br&gt;&#xD;
&lt;span style="text-align:right; background-color: #EDEDED; border-color: #EDEDED; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Vomiting: - &lt;%=row.get(7).getDisplayValue%&gt;&lt;/span&gt;&lt;br&gt;&#xD;
&lt;span style="text-align:right; background-color: #EDEDED; border-color: #EDEDED; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Diarrhoea: - &lt;%=row.get(8).getDisplayValue%&gt;&lt;/span&gt;&lt;br&gt;&#xD;
&lt;span style="text-align:right; background-color: #EDEDED; border-color: #EDEDED; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Constipation: - &lt;%=row.get(9).getDisplayValue%&gt;&lt;/span&gt;&lt;br&gt;&#xD;
&lt;span style="text-align:right; background-color: #EDEDED; border-color: #EDEDED; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Pain: - &lt;%=row.get(10).getDisplayValue%&gt;&lt;/span&gt;&lt;br&gt;&#xD;
&lt;span style="text-align:right; background-color: #EDEDED; border-color: #EDEDED; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Peripheral Neuropathy: - &lt;%=row.get(11).getDisplayValue%&gt;&lt;/span&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Result</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(3).originalValue = "Mild"%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 1 &lt;/span&gt;&#xD;
        &lt;%end if%&gt;&#xD;
        &lt;%if row.get(3).originalValue = "Moderate"%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 2 &lt;/span&gt;&#xD;
        &lt;%end if%&gt;&#xD;
        &lt;%if row.get(3).originalValue = "Severe"%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 3 &lt;/span&gt;&#xD;
        &lt;%end if%&gt;&#xD;
        &lt;%if row.get(3).originalValue = "Life Threatening"%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #f5d8d8; border-color: #be0000; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 4 &lt;/span&gt;&#xD;
        &lt;%end if%&gt;&#xD;
        &lt;%if row.get(3).originalValue = "Nil"%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #DCDCDC; border-color: #5B5B5B; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; NIL &lt;/span&gt;&#xD;
        &lt;%end if%&gt; &#xD;
        &lt;%if row.get(3).originalValue = ""%&gt;&#xD;
            &lt;span style="text-align:right;display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: none; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; - &lt;/span&gt;&#xD;
        &lt;%end if%&gt;&#xD;
&lt;br&gt; &#xD;
 &#xD;
    &lt;%if row.get(4).originalValue = "Mild"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 1 &lt;/span&gt;&#xD;
     &lt;%end if%&gt;&#xD;
     &lt;%if row.get(4).originalValue = "Moderate"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 2 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(4).originalValue = "Severe"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 3 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(4).originalValue = "Life Threatening"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #f5d8d8; border-color: #be0000; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 4 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(4).originalValue = "Nil"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #DCDCDC; border-color: #5B5B5B; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; NIL &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if row.get(4).originalValue = ""%&gt;&#xD;
        &lt;span style="text-align:right;display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: none; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; - &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
&lt;br&gt;  &#xD;
&#xD;
    &lt;%if row.get(5).originalValue = "Mild"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 1 &lt;/span&gt;&#xD;
     &lt;%end if%&gt;&#xD;
     &lt;%if row.get(5).originalValue = "Moderate"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 2 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(5).originalValue = "Severe"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 3 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(5).originalValue = "Nil"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #DCDCDC; border-color: #5B5B5B; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; NIL &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if row.get(5).originalValue = ""%&gt;&#xD;
        &lt;span style="text-align:right;display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: none; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; - &lt;/span&gt;&#xD;
    &lt;%end if%&gt;  &#xD;
&lt;br&gt;&#xD;
&#xD;
&#xD;
     &lt;%if row.get(6).originalValue = "Mild"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 1 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(6).originalValue = "Moderate"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 2 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(6).originalValue = "Severe"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 3 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(6).originalValue = "Life Threatening"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #f5d8d8; border-color: #be0000; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 4 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(6).originalValue = "Nil"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #DCDCDC; border-color: #5B5B5B; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; NIL &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if row.get(6).originalValue = ""%&gt;&#xD;
        &lt;span style="text-align:right;display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: none; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; - &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
&lt;br&gt;&#xD;
&#xD;
&#xD;
    &lt;%if row.get(7).originalValue = "Mild"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 1 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(7).originalValue = "Moderate"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 2 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(7).originalValue = "Severe"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 3 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(7).originalValue = "Life Threatening"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #f5d8d8; border-color: #be0000; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 4 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(7).originalValue = "Nil"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #DCDCDC; border-color: #5B5B5B; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; NIL &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if row.get(7).originalValue = ""%&gt;&#xD;
        &lt;span style="text-align:right;display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: none; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; - &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
&lt;br&gt;&#xD;
&#xD;
&#xD;
    &lt;%if row.get(8).originalValue = "Mild"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 1 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(8).originalValue = "Moderate"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 2 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(8).originalValue = "Severe"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 3 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(8).originalValue = "Life Threatening"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #f5d8d8; border-color: #be0000; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 4 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(8).originalValue = "Nil"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #DCDCDC; border-color: #5B5B5B; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; NIL &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if row.get(8).originalValue = ""%&gt;&#xD;
        &lt;span style="text-align:right;display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: none; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; - &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
&lt;br&gt;&#xD;
&#xD;
&#xD;
    &lt;%if row.get(9).originalValue = "Mild"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 1 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(9).originalValue = "Moderate"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 2 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(9).originalValue = "Severe"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 3 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(9).originalValue = "Life Threatening"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #f5d8d8; border-color: #be0000; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 4 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if row.get(9).originalValue = "Nil"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #DCDCDC; border-color: #5B5B5B; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; NIL &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if row.get(9).originalValue = ""%&gt;&#xD;
        &lt;span style="text-align:right;display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: none; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; - &lt;/span&gt;&#xD;
    &lt;%end if%&gt;  &#xD;
&lt;br&gt;&#xD;
&#xD;
 &#xD;
    &lt;%if row.get(10).originalValue = "Mild"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 1 &lt;/span&gt;&#xD;
     &lt;%end if%&gt;&#xD;
     &lt;%if row.get(10).originalValue = "Moderate"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 2 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(10).originalValue = "Severe"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 3 &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
     &lt;%if row.get(10).originalValue = "Nil"%&gt;&#xD;
        &lt;span style="text-align:right; background-color: #DCDCDC; border-color: #5B5B5B; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; NIL &lt;/span&gt;&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if row.get(10).originalValue = ""%&gt;&#xD;
        &lt;span style="text-align:right;display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: none; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; - &lt;/span&gt;&#xD;
    &lt;%end if%&gt;&#xD;
&lt;br&gt;&#xD;
&#xD;
 &lt;%if row.get(11).originalValue = "Mild"%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 1 &lt;/span&gt;&#xD;
         &lt;%end if%&gt;&#xD;
         &lt;%if row.get(11).originalValue = "Moderate"%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 2 &lt;/span&gt;&#xD;
        &lt;%end if%&gt;&#xD;
         &lt;%if row.get(11).originalValue = "Severe"%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; GRADE 3 &lt;/span&gt;&#xD;
        &lt;%end if%&gt;&#xD;
         &lt;%if row.get(11).originalValue = "Nil"%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #DCDCDC; border-color: #5B5B5B; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; NIL &lt;/span&gt;&#xD;
        &lt;%end if%&gt; &#xD;
        &lt;%if row.get(11).originalValue = ""%&gt;&#xD;
            &lt;span style="text-align:right;display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: none; border-radius: 3px; padding: 1px 6px; font-size: 10.25px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; - &lt;/span&gt;&#xD;
        &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Oncology Initial Assessments</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: Oncology Initial Assessments</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>SELECT DISTINCT&#xD;
FormInfo.documentIdentifier AS DocumentId,&#xD;
DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ) as datetimeCompleted,&#xD;
RGMN.v2_CCRCncrTrtmntRgmn_4U82O AS Treatment,&#xD;
CAST(FAC.TreatingFacility_BOKM2 as varchar(50)) AS Facility,&#xD;
Meta.cD_userId_PLU2# AS AssessedBy,&#xD;
meta.status_TDES0,&#xD;
'uuid_' + FormInfo.modelId AS ModelId&#xD;
FROM v2_CCROnclgyIntlAssssmnt_Y520C ONCA&#xD;
LEFT OUTER JOIN v2_CCROIA_Y520C_TrtFcl_BOKM2 FAC ON ONCA.v2_CCROnclgyIntlAssssmnt_Y520C = FAC.v2_CCROnclgyIntlAssssmnt_Y520C &#xD;
LEFT OUTER JOIN v2_CCROIA_Y520C_Regimin_0GCHT RGMN ON ONCA.v2_CCROnclgyIntlAssssmnt_Y520C = RGMN.v2_CCROnclgyIntlAssssmnt_Y520C&#xD;
LEFT OUTER JOIN v2_CCRCncrTrtmntRgmn_4U82O TMNT ON TMNT.v2_CCRCncrTrtmntRgmn_4U82O = RGMN.v2_CCRCncrTrtmntRgmn_4U82O&#xD;
INNER JOIN v_Document FormInfo ON FormInfo.DocumentId = ONCA.DocumentId&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = forminfo.documentId &#xD;
INNER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE meta.status_TDES0 = 'FINAL' &#xD;
AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
&lt;%if Request.get("documentId") &lt;&gt; ""%&gt;&#xD;
  AND DocumentId='&lt;%=Request.get("documentId")%&gt;' &#xD;
&lt;%end if%&gt;&#xD;
ORDER BY datetimeCompleted DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Update Social Information</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none;</style>
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>location.reload(false);</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none;</style>
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>2</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none;</style>
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>3</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none;</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>1</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Oncology/Chemotherapy Management Assessment</name>
				<index>0</index>
				<action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Treatment Type</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Oncology Initial Assessments Select</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: PersOncology Initial Assessments</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>SELECT&#xD;
FormInfo.documentIdentifier AS DocumentId,&#xD;
DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ) as datetimeCompleted,&#xD;
RGMN.v2_CCRCncrTrtmntRgmn_4U82O AS Treatment,&#xD;
CAST(FAC.TreatingFacility_BOKM2 as varchar(50)) AS Facility,&#xD;
Meta.cD_userId_PLU2# AS AssessedBy,&#xD;
meta.status_TDES0,&#xD;
'uuid_' + FormInfo.modelId AS ModelId&#xD;
FROM v2_CCROnclgyIntlAssssmnt_Y520C ONCA&#xD;
JOIN v2_CCROIA_Y520C_TrtFcl_BOKM2 FAC ON ONCA.v2_CCROnclgyIntlAssssmnt_Y520C = FAC.v2_CCROnclgyIntlAssssmnt_Y520C AND FAC.ordering = 0&#xD;
JOIN v2_CCROIA_Y520C_Regimin_0GCHT RGMN ON ONCA.v2_CCROnclgyIntlAssssmnt_Y520C = RGMN.v2_CCROnclgyIntlAssssmnt_Y520C&#xD;
JOIN v2_CCRCncrTrtmntRgmn_4U82O TMNT ON TMNT.v2_CCRCncrTrtmntRgmn_4U82O = RGMN.v2_CCRCncrTrtmntRgmn_4U82O&#xD;
INNER JOIN v_Document FormInfo ON FormInfo.DocumentId = ONCA.DocumentId&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = forminfo.documentId &#xD;
INNER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE meta.status_TDES0 = 'FINAL' &#xD;
AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
ORDER BY datetimeCompleted</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>Patient - Select Oncology Initial Assessments</display-name>
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>1</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Treatment Type</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Oncology Treating Facilities</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>Oncology/Cancer Treamnet Facilities</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT results.* FROM (&#xD;
SELECT DISTINCT [code]&#xD;
      ,[description]&#xD;
  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_facilities]&#xD;
  where description like '%Haema%' or description like '%Zita%' or code like '%TCHSTA%'&#xD;
  &#xD;
  UNION ALL &#xD;
  &#xD;
 SELECT DISTINCT 'NCH' AS code,&#xD;
				'National Capital Hospital' AS description) results&#xD;
				ORDER BY results.description ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Treating Facilities&lt;/h2&gt;</custom-html>
			<display-name>CCR Get Cancer Treatment Locations</display-name>
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Description</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Pathway - Current Enrolled Pathways</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>CWSCLINICAL: list of current enrolled pathways for a patient</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT DISTINCT pe.enrollmentIdentifier as ID,&#xD;
	pe.pathwayIdentifier as Title,&#xD;
	pe.enrollmentStatus as Status,&#xD;
	pe.modificationTime as endTime,&#xD;
	pe.patientId as PatientId  &#xD;
	FROM PathwayEnrollment.PES_PathwayEnrollment pe &#xD;
 	WHERE pe.patientNamespace = 'OHCP' 	 	&#xD;
        &lt;%if Context.Patient.Id.MRN%&gt;&#xD;
         AND pe.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
        &lt;%end if%&gt;&#xD;
         AND pe.deactivationReasonId IS NULL</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open Single Task</name>
				<application>
					<name>Task List</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>pathwayIdentifier</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Due Date</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if Request.getServletPath().endsWith(".htm")%&gt;&#xD;
&lt;%var now = new java.util.Calendar()%&gt;&#xD;
&lt;%exec now.set(now.HOUR, 0)%&gt;&#xD;
&lt;%exec now.set(now.MINUTE, 0)%&gt;&#xD;
&lt;%var nextCalendar = new java.util.Calendar()%&gt;&#xD;
&lt;%var vyear = new java.lang.Integer(value.toString().substring(0,4))%&gt;&#xD;
&lt;%var vmonth = new java.lang.Integer(value.toString().substring(4,6))%&gt;&#xD;
&lt;%var vmonth = vmonth - 1%&gt;&#xD;
&lt;%var vday = new java.lang.Integer(value.toString().substring(6,8))%&gt;&#xD;
&lt;%exec nextCalendar.set(nextCalendar.YEAR, vyear)%&gt;&#xD;
&lt;%exec nextCalendar.set(nextCalendar.MONTH, vmonth)%&gt;&#xD;
&lt;%exec nextCalendar.set(nextCalendar.DAY_OF_MONTH, vday)%&gt;&#xD;
&lt;%exec nextCalendar.set(nextCalendar.HOUR, 0)%&gt;&#xD;
&lt;%exec nextCalendar.set(nextCalendar.MINUTE, 0)%&gt;&#xD;
	&lt;%if !nextCalendar.after(now)%&gt;&#xD;
	   &lt;span style="color:red"&gt;&lt;b&gt;&lt;%=DateFormat.format(value, "dd/MM/yyyy")%&gt;&lt;/b&gt;&lt;/span&gt;&#xD;
	&lt;%else%&gt;&#xD;
	   &lt;%exec now.add(now.WEEK_OF_YEAR, 2)%&gt;&#xD;
	   &lt;%exec now.set(now.HOUR, 0)%&gt;&#xD;
	   &lt;%exec now.set(now.MINUTE, 0)%&gt;&#xD;
	   &lt;%if nextCalendar.before(now)%&gt;&#xD;
		  &lt;span style="color:orange"&gt;&lt;%=DateFormat.format(value, "dd/MM/yyyy")%&gt;&lt;/span&gt;&#xD;
	   &lt;%else%&gt;&#xD;
		  &lt;span style="color:black"&gt;&lt;%=DateFormat.format(value, "dd/MM/yyyy")%&gt;&lt;/span&gt;&#xD;
	   &lt;%end if%&gt;&#xD;
	&lt;%end if%&gt;&#xD;
&lt;%else%&gt;&lt;%=DateFormat.format(value, "dd/MM/yyyy")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient Id</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Patient_Overview - Other Involved Practitioners</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Displays other Practitioners involved in Patient's care -leannl</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>select &#xD;
  di.documentIdentifier as documentId&#xD;
  , prac.Type_9PC7N_desc + ' ' + coalesce(prac.OtherDetails_9UPRF , '')  as Practitioner_Type&#xD;
  , prac.PractitionerName_DED4E as Name_of_Practitioner&#xD;
  , prac.PracticeName_19T6D as Name_of_Practice&#xD;
  , prac.ContactDetails_OOZ20&#xD;
  , cast (prac.Comments_Q4W$N as varchar(255)) as Comments&#xD;
  , 'uuid_' + FormInfo.[modelId] AS modelId&#xD;
&#xD;
 &#xD;
from &lt;%=AppVars.db_CWSRepository%&gt;.[dbo].v2_CCR#GBL#Practitioners_P#0TA prac&#xD;
  	INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = prac.DocumentId&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = prac.DOCUMENTID&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
&#xD;
WHERE meta.status_TDES0 = 'FINAL'&#xD;
&#xD;
 &lt;%if Context.Patient.Id.MRN%&gt;&#xD;
AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Practitioner');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>location.reload(false);</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>2</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Type</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Practitioner Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Practice</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Contact Details</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Task - Get Interventions and Goals</name>
		<data-source-name>java:comp/env/jdbc/orion/task</data-source-name>
		<description>Returns a list of either Goals, Treatments, Referrals filtered by Type and Form Name</description>
		<escape-quote-as>"</escape-quote-as>
		<order-by>Item</order-by>
		<query-string>SELECT DISTINCT ItemCode&#xD;
      ,Item&#xD;
      ,ItemType&#xD;
      ,ItemService&#xD;
      ,Form&#xD;
FROM &lt;%=AppVars.db_CWSCustom%&gt;.[dbo].[TBL_CWS_Goals_Interventions_Treatment]&#xD;
WHERE 1=1 &#xD;
&lt;%if Request.get("ItemType") &lt;&gt; ""%&gt;&#xD;
  AND ItemType ='&lt;%=Request.get("ItemType")%&gt;' &#xD;
&lt;%end if%&gt;&#xD;
&lt;%if Request.get("FormName") &lt;&gt; ""%&gt;&#xD;
  AND Form='&lt;%=Request.get("FormName")%&gt;' &#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>Get Interventions and Goals</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>2</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open Single Task</name>
				<application>
					<name>Task List</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>ItemCode</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Selection</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ItemType</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ItemService</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Form</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (row.get(2) == "false")&#xD;
   var entryPoint = "CCR_Add Adhoc Task";&#xD;
else&#xD;
   var entryPoint = "Open Single Task";&#xD;
&#xD;
var concertoHome='&lt;%=ConcertoHome%&gt;';&#xD;
 &#xD;
 var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Task List&amp;entryPointName='&#xD;
  + entryPoint  + '&amp;infoToken=' + row.getSecureInformationToken();&#xD;
&#xD;
parent.parent.location.replace(url);&#xD;
//parent.location.openEntryPointWithBreadCrumb('Task List',entryPoint , row.getSecureInformationToken());</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Task - Healthcare pathway Search</name>
		<data-source-name>java:comp/env/jdbc/orion/task</data-source-name>
		<description>TASK: list of tasks from the persistant task db</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT --pt.modelId , pt.taskIdentifier AS 'URL',&#xD;
	patient.namespace,&#xD;
	patient.id,&#xD;
	--pt.dataId AS 'ID',&#xD;
	TaskType.identifyingName AS 'Title', --&#xD;
	pe.enrollmentTime AS 'enrollTime',&#xD;
	pe.modificationTime AS 'modificationTime', --&#xD;
	DATEDIFF(day,pe.enrollmentTime ,pe.modificationTime) as days, &#xD;
	pe.enrollmentStatus, --&#xD;
	cd.description--&#xD;
	--pt.note&#xD;
FROM PersistentTask pt&#xD;
	INNER JOIN SchedulableTaskGroup stg ON pt.owner = stg.uniqueId&#xD;
	INNER JOIN PatientId patient ON stg.patient = patient.uniqueId&#xD;
	INNER JOIN TaskType on pt.taskType = TaskType.uniqueId&#xD;
	INNER JOIN TaskStatus on pt.taskStatus = TaskStatus.uniqueId&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe &#xD;
	ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_DeactivationReason dr ON (dr.uniqueId = pe.deactivationReasonId) OR (pe.deactivationReasonId IS NULL )&#xD;
	INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.CodeSet.CodeDefinition cd ON cd.code = dr.code</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Namespace</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PatientId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Enrollment Date</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Modification Date</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Days</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Description</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Task - Manual Handling</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Manual Handling Risk Assessment search - BrettH</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
   di.documentIdentifier as documentId,&#xD;
   meta.dateSigned_OK9EW as Date,&#xD;
   cast(glbMHtask_IN1LF as varchar(255)) as Task,&#xD;
   meta.cD_userId_PLU2# as 'Clinician Id',&#xD;
      'uuid_' + FormInfo.[modelId] AS modelId&#xD;
FROM v2_GBLMnlHndlngRskAsmnt_RSFTE &#xD;
  INNER JOIN v2_GBLMHRA_RSFTE_glbMHts_BSKZI ON v2_GBLMnlHndlngRskAsmnt_RSFTE.v2_GBLMnlHndlngRskAsmnt_RSFTE = v2_GBLMHRA_RSFTE_glbMHts_BSKZI.v2_GBLMnlHndlngRskAsmnt_RSFTE&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = v2_GBLMnlHndlngRskAsmnt_RSFTE.DocumentId&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = v2_GBLMnlHndlngRskAsmnt_RSFTE.DOCUMENTID  &#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
  INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
&#xD;
WHERE meta.status_TDES0 = 'FINAL' &#xD;
 &lt;%if Context.Patient.Id.MRN%&gt;&#xD;
AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Manual Handling Assessment' );&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>New Manual Handling Assessment</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>location.reload(false);</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>2</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>3</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date &amp; Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Manual Handling Task</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Task - Medication List Search</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Medman Prescription List Popup Search</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT prescribingTerm as 'Prescribing Term'&#xD;
,brandName as 'Brand Name'&#xD;
,prescribingTerm +' - '+ brandName as 'Medication'&#xD;
&#xD;
FROM &lt;%=AppVars.db_CWSMedMan%&gt;.[dbo].[MedicationPrescription]&#xD;
WHERE 1=1&#xD;
&lt;%if get("prescribingTerm") &lt;&gt; ""%&gt; &#xD;
    AND prescribingTerm LIKE '%&lt;%=get("prescribingTerm")%&gt;%' &#xD;
&lt;%end if%&gt; &#xD;
&lt;%if get("brandName") &lt;&gt; ""%&gt; &#xD;
    AND brandName LIKE '%&lt;%=get("brandName")%&gt;%' &#xD;
&lt;%end if%&gt; &#xD;
Order by id</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>prescribingTerm</name>
				<index>0</index>
				<default-value />
				<display-name>Prescribing Term</display-name>
				<input-type>Autocomplete</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/orion/repository")%&gt;&lt;%exec config.setSQLQuery("SELECT prescribingTerm\r\nFROM OH_CM_medicationManagement.dbo.MedicationPrescription")%&gt;&lt;%exec config.setSubmitColumnName("prescribingTerm")%&gt;&lt;%exec config.setDisplayColumnName("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>brandName</name>
				<index>1</index>
				<default-value />
				<display-name>Brand Name</display-name>
				<input-type>Autocomplete</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/orion/repository")%&gt;&lt;%exec config.setSQLQuery("SELECT brandName\r\nFROM OH_CM_medicationManagement.dbo.MedicationPrescription")%&gt;&lt;%exec config.setSubmitColumnName("brandName")%&gt;&lt;%exec config.setDisplayColumnName("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Prescribing Term</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Brand Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medication</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Task - Waterlow Assessment</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Waterlow Risk Assessment search - BrettH</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT    di.documentIdentifier as documentId,&#xD;
  meta.cD_userId_PLU2# as 'Clinician Id',&#xD;
  meta.dateSigned_OK9EW as Date,&#xD;
  cast(waterlow.WaterlowScore_0N3F6 as varchar) as 'Waterlow Score',&#xD;
  'uuid_' + FormInfo.[modelId] AS modelId&#xD;
&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_GBLWtrlwRskAssssmntTl_JBK#0 waterlow&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = waterlow.DocumentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = waterlow.DOCUMENTID  &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE meta.status_TDES0 = 'FINAL'&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt; &#xD;
ORDER BY meta.dateSigned_OK9EW DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Waterlow Assessment');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>New Waterlow Assessment</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>location.reload(false);</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>2</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>ADD</name>
				<index>0</index>
				<action>function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Waterlow Assessment');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=Add+New+Waterlow+Assessment');&#xD;
}&#xD;
loadForm();</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last updated by</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date and Time</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Waterlow Score</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound - Ulcer Doppler Results</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>View Leg Ulcer ABPI Doppler Results -leannl</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>select&#xD;
	di.documentIdentifier as DocId&#xD;
	, abpi.DatePerformed_2X71Z&#xD;
	, abpi.ClinicianName_FCXK# &#xD;
	, CONVERT(DECIMAL(10,2),abpi.BrachialRight_7F$YZ)&#xD;
	, CONVERT(DECIMAL(10,2),abpi.DorsalisPedisRight_B19WL)&#xD;
	, CONVERT(DECIMAL(10,2),abpi.PosteriorTibialRight_J8WRS)&#xD;
	, CONVERT(DECIMAL(10,2),abpi.BrachialLeft_FEBJX)&#xD;
	, CONVERT(DECIMAL(10,2),abpi.DorsalisPedisLeft_JSYYL)&#xD;
	, CONVERT(DECIMAL(10,2),abpi.PosteriorTibialLeft_S$5$K)&#xD;
          , 'uuid_' +doc.modelId as modelId &#xD;
&#xD;
from &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CN#ABPIResults_OAHGK abpi &#xD;
&#xD;
		INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = abpi.DOCUMENTID&#xD;
		INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di ON di.documentId = meta.DOCUMENTID&#xD;
		INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
		INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document doc ON meta.DOCUMENTID = doc.DOCUMENTID 		&#xD;
	WHERE meta.status_TDES0 = 'FINAL'&#xD;
 and &#xD;
1=1 &#xD;
		&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
		 AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
		&lt;%end if%&gt;&#xD;
		&lt;%if get("Specialty") &lt;&gt; null%&gt;&#xD;
		 AND pn.userSpecialty_O3IJQ = &lt;%=SqlParameters.add(get("Specialty"))%&gt;&#xD;
		&lt;%end if%&gt;&#xD;
		&lt;%if get("Name") &lt;&gt; null%&gt;&#xD;
		 AND pn.userName_Z096R = &lt;%=SqlParameters.add(get("Name"))%&gt;&#xD;
		&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Leg Ulcer KPI');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Performed</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Performed by</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Right Brachial</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Left Brachial</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Right Dorsalis Pedis</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Left Dorsalis Pedis</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Right Posterior Tibial</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Left Posterior Tibial</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Observations</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Observations.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT 		&#xD;
			do.documentIdentifier as DocId&#xD;
			, wo.pathwayId_AXYV8&#xD;
			, wo.WoundType_GK673&#xD;
			, woc.Pink_T5E3T&#xD;
			, woc.RedGranulation_1P31Q&#xD;
			, woc.RedHypergranulation_S6NTP&#xD;
			, woc.Yellow_PEBUD&#xD;
			, woc.Green_Z5PUY&#xD;
			, woc.Black_SJS$8&#xD;
			, woc.isExposed_K#7NI&#xD;
			, woc.DetailsExposed_9PLKZ&#xD;
			, woc.isForeignBody_JO7K6 &#xD;
			, pt.modelId&#xD;
&#xD;
FROM			&lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId			&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndObsrvtn_CSBQX wo ON wo.DOCUMENTID = do.documentId&#xD;
JOIN			&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWO_CSBQX_WndObsr_ZFEZ4 wnd ON wo.v2_CCRCNWndObsrvtn_CSBQX = wnd.v2_CCRCNWndObsrvtn_CSBQX&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndObsrvtn_IHD8C woc ON woc.v2_CCRCNWndObsrvtn_IHD8C = wnd.v2_CCRCNWndObsrvtn_IHD8C&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = wo.DOCUMENTID&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE&#xD;
		meta.status_TDES0 = 'FINAL'&#xD;
		AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
		AND tt.identifyingName = 'Wound Review'&#xD;
		AND pe.enrollmentStatus = 'ENROLLED'&#xD;
		AND pe.enrollmentIdentifier = '&lt;%=Request.get("pathwayId")%&gt;'&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
 AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add new Wound Observation</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none !important</style>
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pathwayId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Type</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pink</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>red</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>red hyper</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>yellow</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>green</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>black</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>isExposed</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>detailsExposed</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>isForeignBody</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - All</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -leannl</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>7 desc</order-by>
		<query-string>/* CCR_CN_WoundSiteInfo_FootUlcer */&#xD;
SELECT		* FROM (	SELECT&#xD;
			do.documentIdentifier as DocId&#xD;
			, fu.OnsetDate_QK66N&#xD;
			, pe.pathwayIdentifier AS "WoundId" &#xD;
			, pt.modelId&#xD;
			, pe.enrollmentStatus&#xD;
			, 'Foot Ulcer Wound Assessment' as identifyingName&#xD;
			, fu.ObservationDate_OT8Q2&#xD;
            ,pe.modificationTime&#xD;
			,pe.modifierUserId&#xD;
			,pat.idNumber_9LV7R as patientId&#xD;
FROM			&lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndStInfFtUlcr_IQERB fu on fu.DOCUMENTID = do.documentId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = fu.DOCUMENTID&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
			meta.status_TDES0 = 'FINAL'&#xD;
			AND pe.enrollmentStatus = 'ENROLLED'&#xD;
			AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
			AND tt.identifyingName = 'Wound Site - Foot Ulcer' 		&#xD;
 			&#xD;
UNION			&#xD;
			&#xD;
SELECT		&#xD;
			do.documentIdentifier as DocId&#xD;
			, ps.OnsetDate_X2TPE&#xD;
			, pe.pathwayIdentifier &#xD;
			, pt.modelId&#xD;
			, pe.enrollmentStatus&#xD;
			, 'Pressure Injury Wound Assessment' as identifyingName&#xD;
			, ps.ObservationDate_1PBTR&#xD;
            ,pe.modificationTime&#xD;
			,pe.modifierUserId&#xD;
			,pat.idNumber_9LV7R as patientId&#xD;
FROM			&lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndStInfPrssrSr_4PIGC ps on ps.DOCUMENTID = do.documentId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = ps.DOCUMENTID&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
			meta.status_TDES0 = 'FINAL'&#xD;
			AND pe.enrollmentStatus = 'ENROLLED'&#xD;
			AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
			AND tt.identifyingName = 'Wound Site - Pressure Sore'&#xD;
 &#xD;
UNION			&#xD;
				&#xD;
SELECT		&#xD;
			do.documentIdentifier as DocId&#xD;
			, st.OnsetDate_6T1R6&#xD;
			, pe.pathwayIdentifier AS "WoundId" &#xD;
			, pt.modelId&#xD;
			, pe.enrollmentStatus&#xD;
			, 'Skin Tear Wound Assessment' as identifyingName&#xD;
			, st.ObservationDate_RD5WF&#xD;
            ,pe.modificationTime&#xD;
			,pe.modifierUserId&#xD;
			,pat.idNumber_9LV7R as patientId&#xD;
FROM			&lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndStInfSkntr_XMICA st on st.DOCUMENTID = do.documentId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = st.DOCUMENTID&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
			meta.status_TDES0 = 'FINAL'&#xD;
			AND pe.enrollmentStatus = 'ENROLLED'&#xD;
			AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
			AND tt.identifyingName = 'Wound Site - Skin tear'  &#xD;
 &#xD;
UNION			&#xD;
			&#xD;
SELECT		&#xD;
			do.documentIdentifier as DocId&#xD;
			, ts.OnsetDate_597JO&#xD;
			, pe.pathwayIdentifier &#xD;
			, pt.modelId&#xD;
			, pe.enrollmentStatus&#xD;
			, 'Surgical Wound Assessment' as identifyingName&#xD;
			, ts.ObservationDate_#S68M&#xD;
            ,pe.modificationTime&#xD;
			,pe.modifierUserId&#xD;
			,pat.idNumber_9LV7R as patientId&#xD;
FROM			&lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndStInfTrmtSrgc_8M0$D ts on ts.DOCUMENTID = do.documentId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = ts.DOCUMENTID&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
			meta.status_TDES0 = 'FINAL'&#xD;
			AND pe.enrollmentStatus = 'ENROLLED'&#xD;
			AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
			AND tt.identifyingName = 'Wound Site - Surgical'&#xD;
 &#xD;
UNION&#xD;
SELECT		&#xD;
			do.documentIdentifier as DocId&#xD;
			, ws.OnsetDate_WWU5R			&#xD;
			, pe.pathwayIdentifier &#xD;
			, pt.modelId&#xD;
			, pe.enrollmentStatus&#xD;
			, 'Sinus Fistula Wound Assessment'  as identifyingName&#xD;
			, ws.ObservationDate_TS9N3&#xD;
            ,pe.modificationTime&#xD;
			,pe.modifierUserId&#xD;
			,pat.idNumber_9LV7R as patientId&#xD;
FROM			&lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndSnsFstl_2F1CZ ws on ws.DOCUMENTID = do.documentId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = ws.DOCUMENTID&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
			meta.status_TDES0 = 'FINAL'&#xD;
			AND pe.enrollmentStatus = 'ENROLLED'&#xD;
			AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
			AND tt.identifyingName = 'Wound Site - Sinus Fistula' 		&#xD;
UNION&#xD;
			&#xD;
SELECT		&#xD;
			do.documentIdentifier as DocId&#xD;
			, mw.OnsetDate_5KY1F&#xD;
			, pe.pathwayIdentifier &#xD;
			, pt.modelId&#xD;
			, pe.enrollmentStatus&#xD;
			,'Malignant Wound Assessment' as identifyingName&#xD;
			, mw.ObservationDate_A38$W&#xD;
            ,pe.modificationTime&#xD;
			,pe.modifierUserId&#xD;
			,pat.idNumber_9LV7R as patientId&#xD;
FROM			&lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNMlgntWndAsmnt_0WP2I mw on mw.DOCUMENTID = do.documentId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = mw.DOCUMENTID&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
			meta.status_TDES0 = 'FINAL'&#xD;
			AND pe.enrollmentStatus = 'ENROLLED'&#xD;
			AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
			AND tt.identifyingName like 'Malignant%' &#xD;
UNION&#xD;
&#xD;
SELECT &#xD;
			do.documentIdentifier as DocId&#xD;
			, lu.OnsetDate_EZ2SU&#xD;
			, pe.pathwayIdentifier &#xD;
			, pt.modelId&#xD;
			, pe.enrollmentStatus&#xD;
			, 'Leg Ulcer Wound Assessment' as identifyingName&#xD;
			, lu.ObservationDate_BXAJW&#xD;
            ,pe.modificationTime&#xD;
			,pe.modifierUserId&#xD;
			,pat.idNumber_9LV7R as patientId&#xD;
FROM 			&lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNLgUlcrAssssmnt_LDQXT lu on lu.DOCUMENTID = do.documentId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = lu.DOCUMENTID&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
			meta.status_TDES0 = 'FINAL'&#xD;
			AND pe.enrollmentStatus = 'ENROLLED'&#xD;
			AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
			AND tt.identifyingName = 'Wound Site - Leg Ulcer' &#xD;
UNION&#xD;
SELECT &#xD;
			do.documentIdentifier as DocId&#xD;
			, bu.DateofBurn_WY4KI&#xD;
			, pe.pathwayIdentifier &#xD;
			, pt.modelId&#xD;
			, pe.enrollmentStatus&#xD;
			, 'Burn or Scald Wound Assessment' as identifyingName&#xD;
			, bu.ObservationDate_EDRA5&#xD;
            ,pe.modificationTime&#xD;
			,pe.modifierUserId&#xD;
			,pat.idNumber_9LV7R as patientId&#xD;
FROM 			&lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN		&lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CN#BurnsAssessment_SQZIX bu on bu.DOCUMENTID = do.documentId&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = bu.DOCUMENTID&#xD;
INNER JOIN 		&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
			meta.status_TDES0 = 'FINAL'&#xD;
			AND pe.enrollmentStatus = 'ENROLLED'&#xD;
			AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
			AND tt.identifyingName = 'Burns Assessment'&#xD;
 ) as results&#xD;
   WHERE results.patientId IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>1</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none !important</style>
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>2</index>
				<action>location.reload(false);</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Onset Date</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Observation Date</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Burn or Scald Assessment</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -Burns</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>pt.modificationTime desc</order-by>
		<query-string>SELECT &#xD;
      do.documentIdentifier as DocId&#xD;
      , burns.DateOfBurn&#xD;
      , pe.pathwayIdentifier &#xD;
      , pt.modelId&#xD;
      , pe.enrollmentStatus&#xD;
      , burns.title&#xD;
      , burns.obDate&#xD;
      ,pt.modificationTime&#xD;
      ,pr.id&#xD;
      ,pat.idNumber_9LV7R as patientId &#xD;
FROM      &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.ProviderRef AS pr ON pt.resolvedBy = pr.uniqueId&#xD;
LEFT OUTER JOIN (&#xD;
  SELECT bu.DateofBurn_WY4KI as DateOfBurn , bu.ObservationDate_EDRA5 as obDate, 'Burn or Scald Wound Assessment' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CN#BurnsAssessment_SQZIX bu  &#xD;
  UNION ALL&#xD;
  SELECT null as DateOfBurn , null as obDate, 'Burn or Scald Wound Assessment Review' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNBrnWndObsrvtn_PP62$ bur  &#xD;
  ) as burns ON burns.DOCUMENTID = do.documentId&#xD;
&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = burns.DOCUMENTID&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
      meta.status_TDES0 = 'FINAL'&#xD;
      AND pe.enrollmentStatus = 'ENROLLED'&#xD;
      AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
      AND tt.identifyingName IN ('Burns Assessment','Burns or Scald Review') &#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Onset Date</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Observation Date</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Foot Ulcer</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -Foot Ulcer</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT&#xD;
      do.documentIdentifier as DocId&#xD;
      , pe.pathwayIdentifier AS "WoundId" &#xD;
      , pt.modelId&#xD;
      , pe.enrollmentStatus&#xD;
      , wound.title&#xD;
      , pt.modificationTime&#xD;
      , pe.modifierUserId&#xD;
      , pat.idNumber_9LV7R as patientId&#xD;
FROM      &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN  &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN  &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId&#xD;
LEFT OUTER JOIN (&#xD;
  SELECT 'Foot Ulcer Wound Assessment' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndStInfFtUlcr_IQERB bu  &#xD;
  UNION ALL&#xD;
  SELECT 'Foot Ulcer Wound Assessment Review' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNFtWndObsrvtn_1Q4XC   &#xD;
  ) as wound ON wound.DOCUMENTID = do.documentId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = wound.DOCUMENTID&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
      meta.status_TDES0 = 'FINAL'&#xD;
      AND pe.enrollmentStatus = 'ENROLLED'&#xD;
      AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
      AND tt.identifyingName IN ('Wound Site - Foot Ulcer' ,'Foot Ulcer Review')    &#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt;  )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Leg Ulcer</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -Leg ulcer</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT &#xD;
      do.documentIdentifier as DocId&#xD;
      , pe.pathwayIdentifier &#xD;
      , pt.modelId&#xD;
      , pe.enrollmentStatus&#xD;
      , wound.title&#xD;
      ,pt.modificationTime&#xD;
      ,pe.modifierUserId&#xD;
      ,pat.idNumber_9LV7R as patientId&#xD;
FROM      &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId &#xD;
&#xD;
LEFT OUTER JOIN (&#xD;
  SELECT 'Leg Ulcer Wound Assessment' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNLgUlcrAssssmnt_LDQXT &#xD;
  UNION ALL&#xD;
  SELECT 'Leg Ulcer Wound Assessment Review' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNLgWndObsrvtn_I0T8G   &#xD;
  ) as wound ON wound.DOCUMENTID = do.documentId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = wound.DOCUMENTID&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
      meta.status_TDES0 = 'FINAL'&#xD;
      AND pe.enrollmentStatus = 'ENROLLED'&#xD;
      AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
      AND tt.identifyingName IN ('Wound Site - Leg Ulcer' ,'Leg Ulcer Review')&#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Malignant</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -Malignant</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT    &#xD;
      do.documentIdentifier as DocId&#xD;
      , pe.pathwayIdentifier &#xD;
      , pt.modelId&#xD;
      , pe.enrollmentStatus&#xD;
      , wound.title&#xD;
      ,pt.modificationTime&#xD;
      ,pe.modifierUserId&#xD;
      ,pat.idNumber_9LV7R as patientId&#xD;
FROM      &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId &#xD;
LEFT OUTER JOIN (&#xD;
  SELECT 'Malignant Wound Assessment' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNMlgntWndAsmnt_0WP2I  &#xD;
  UNION ALL&#xD;
  SELECT 'Malignant Wound Assessment Review' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNMlgnntWndObsrvtn_3R0OJ  &#xD;
  ) as wound ON wound.DOCUMENTID = do.documentId &#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = wound.DOCUMENTID&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
      meta.status_TDES0 = 'FINAL'&#xD;
      AND pe.enrollmentStatus = 'ENROLLED'&#xD;
      AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
      AND tt.identifyingName like '%Malignant%' &#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Other</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -other</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>7 desc</order-by>
		<query-string>SELECT    &#xD;
      do.documentIdentifier as DocId&#xD;
      , pe.pathwayIdentifier &#xD;
      , pt.modelId&#xD;
      , pe.enrollmentStatus&#xD;
      , wound.title&#xD;
      ,pt.modificationTime&#xD;
      ,pe.modifierUserId&#xD;
      ,pat.idNumber_9LV7R as patientId&#xD;
FROM      &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId &#xD;
&#xD;
LEFT OUTER JOIN (&#xD;
  SELECT 'Other Wound Assessment' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndStInfOthr_6B85W  &#xD;
  UNION ALL&#xD;
  SELECT 'Other Wound Assessment Review' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNOthrWndObsrvtn_UDY5N  &#xD;
  ) as wound ON wound.DOCUMENTID = do.documentId&#xD;
&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = wound.DOCUMENTID&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
      meta.status_TDES0 = 'FINAL'&#xD;
      AND pe.enrollmentStatus = 'ENROLLED'&#xD;
      AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
      AND tt.identifyingName like '%Other%'&#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Pressure Sore</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -Pressoure Sore</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT    &#xD;
      do.documentIdentifier as DocId &#xD;
      , pe.pathwayIdentifier &#xD;
      , pt.modelId&#xD;
      , pe.enrollmentStatus&#xD;
      , wound.title&#xD;
      ,pt.modificationTime&#xD;
      ,pe.modifierUserId&#xD;
      ,pat.idNumber_9LV7R as patientId&#xD;
FROM      &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId &#xD;
LEFT OUTER JOIN (&#xD;
  SELECT 'Pressure Injury Wound Assessment' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndStInfPrssrSr_4PIGC  &#xD;
  UNION ALL&#xD;
  SELECT 'Pressure Injury Wound Assessment Review' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNPrssrWndObsrvtn_6FX4H&#xD;
  ) as wound ON wound.DOCUMENTID = do.documentId&#xD;
&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = wound.DOCUMENTID&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
      meta.status_TDES0 = 'FINAL'&#xD;
      AND pe.enrollmentStatus = 'ENROLLED'&#xD;
      AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
      AND tt.identifyingName like '%Pressure Sore%'&#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Sinus Fistula</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -Sinus Fistula</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT    &#xD;
      do.documentIdentifier as DocId      &#xD;
      , pe.pathwayIdentifier &#xD;
      , pt.modelId&#xD;
      , pe.enrollmentStatus&#xD;
      , wound.title &#xD;
      ,pt.modificationTime&#xD;
      ,pe.modifierUserId&#xD;
      ,pat.idNumber_9LV7R as patientId&#xD;
FROM      &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId &#xD;
LEFT OUTER JOIN (&#xD;
  SELECT 'Sinus / Fistula Wound Assessment' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndSnsFstl_2F1CZ  &#xD;
  UNION ALL&#xD;
  SELECT 'Sinus / Fistula Wound Assessment Review' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNSnsWndObsrvtn_XFZ7Q   &#xD;
  ) as wound ON wound.DOCUMENTID = do.documentId&#xD;
&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = wound.DOCUMENTID&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
      meta.status_TDES0 = 'FINAL'&#xD;
      AND pe.enrollmentStatus = 'ENROLLED'&#xD;
      AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
      AND tt.identifyingName like '%Sinus%'     &#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Skin tear</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -Skin Tear</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT    &#xD;
      do.documentIdentifier as DocId &#xD;
      , pe.pathwayIdentifier AS "WoundId" &#xD;
      , pt.modelId&#xD;
      , pe.enrollmentStatus&#xD;
      , wound.title &#xD;
      ,pt.modificationTime&#xD;
      ,pe.modifierUserId&#xD;
      ,pat.idNumber_9LV7R as patientId&#xD;
FROM      &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId &#xD;
LEFT OUTER JOIN (&#xD;
  SELECT 'Skin Tear Wound Assessment' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndStInfSkntr_XMICA  &#xD;
  UNION ALL&#xD;
  SELECT 'Skin Tear Wound Assessment Review' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNSknWndObsrvtn_$RGII   &#xD;
  ) as wound ON wound.DOCUMENTID = do.documentId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = wound.DOCUMENTID&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
      meta.status_TDES0 = 'FINAL'&#xD;
      AND pe.enrollmentStatus = 'ENROLLED'&#xD;
      AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
      AND tt.identifyingName like '%skin tear%'  &#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Stoma Assessments Bowel</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: Used in Stoma Review form for only BOWEL</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>/*BOWEL*/&#xD;
&#xD;
with file_v as(&#xD;
 select&#xD;
    pat.idNumber_9LV7R &#xD;
        ,  sa.DOCUMENTID as 'DocumentId'&#xD;
        , pe.enrollmentIdentifier  as 'PathwayId'&#xD;
        , pe.pathwayIdentifier&#xD;
        , pathwayIdentifiers.typeCode&#xD;
        , DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ) as 'DateSubmitted' &#xD;
        , meta.sD_userId_L2ZQP  as 'ClinicianUserId'&#xD;
        , sa.TypeOfStoma_PN3SP_desc  as 'TypeOfStoma'&#xD;
        , sa.StomaState_4BVY9_desc  as 'State'&#xD;
        , ( case when sa.isActiveFaecal_3FKVX = 1 then 'Faecal Discharge Active'&#xD;
        when sa.isActiveUrinary_OIBN4 = 1 then 'Urinary Discharge Active'&#xD;
        else 'Discharge Not Active'&#xD;
        end ) as 'DischargeActive'&#xD;
        , cast (sa.Size_RLTEQ as varchar(10)) as 'Size'&#xD;
        , sa.Shape_0MB2O_desc  as 'Shape'&#xD;
        , 'uuid_' + FormInfo.modelId as modelId&#xD;
        , di.DocumentIdentifier as DocumentIdentifier&#xD;
&#xD;
    FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgIntl_OPLHZ si  on sa.DOCUMENTID = si.DOCUMENTID &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDI_OPLHZ_StmAsmn_SPYRX sdi on sdi.v2_CCRCNStmDschrgIntl_OPLHZ = si.v2_CCRCNStmDschrgIntl_OPLHZ&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = sa.DocumentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = sa.DOCUMENTID&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt ON di.documentIdentifier = pt.dataId &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
     &#xD;
    INNER JOIN (  &#xD;
          SELECT DISTINCT psm.SubPathwayEnrolmentId as PathwayEnrolmentId,rtpm.referral_identifier, psm.SubEnrolmentStatus as pathway_status, 'SUB' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE psm.SubPathwayEnrolmentId IS NOT NULL&#xD;
          UNION ALL &#xD;
          SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
       rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
      ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
      WHERE meta.status_TDES0 = 'FINAL'&#xD;
      AND 1=1   &#xD;
           AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
          &lt;%if get("Specialty") &lt;&gt; null%&gt;&#xD;
           AND pn.userSpecialty_O3IJQ = &lt;%=SqlParameters.add(get("Specialty"))%&gt;&#xD;
          &lt;%end if%&gt;&#xD;
          &lt;%if get("Name") &lt;&gt; null%&gt;&#xD;
           AND pn.userName_Z096R = &lt;%=SqlParameters.add(get("Name"))%&gt;&#xD;
          &lt;%end if%&gt;&#xD;
      &#xD;
      UNION ALL&#xD;
      &#xD;
SELECT&#xD;
        pat.idNumber_9LV7R&#xD;
        , sr.DOCUMENTID as 'DocumentId'&#xD;
        , pe.enrollmentIdentifier  as 'PathwayId'&#xD;
        , pe.pathwayIdentifier&#xD;
        , pathwayIdentifiers.typeCode&#xD;
        , DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ) as 'DateSubmitted'&#xD;
        , meta.sD_userId_L2ZQP as 'UserId'&#xD;
        , sr.TypeOfStoma_#KFN5 as 'TypeOfStoma'&#xD;
        , sr.StomaState_RPLPZ_cde as 'StateOfStoma'&#xD;
        , ( case when sr.isActiveFaecal_$EMJW = 1 then 'Faecal Discharge Active'&#xD;
          when sr.isActiveUrinary_#BAGM = 1 then 'Urinary Discharge Active'&#xD;
          else 'Discharge Not Active'&#xD;
          end ) as 'DischargeActive'&#xD;
        , ( cast (sdt.Size_Q594Z as varchar(10)) + ', ' + sdt.SizeKey_7MBRN_desc ) as 'Size'&#xD;
        , ( sdt.Shape_W#67F_desc + ', ' + sdt.ShapeKey_W##YZ_desc ) as 'Shape'&#xD;
        , 'uuid_' + FormInfo.modelId as modelId&#xD;
        , di.DocumentIdentifier as DocumentIdentifier&#xD;
  &#xD;
&#xD;
  FROM dbo.v2_BwlStmAssssmntRvw_$LJZ5 sr &#xD;
  LEFT OUTER JOIN dbo.v2_BSAR_$LJZ5_StmRvw_N7PM3 str ON sr.v2_BwlStmAssssmntRvw_$LJZ5 = str.v2_BwlStmAssssmntRvw_$LJZ5&#xD;
  LEFT OUTER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt ON sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = str.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
  INNER JOIN dbo.v_Document FormInfo ON FormInfo.DocumentId = sr.DocumentId&#xD;
  INNER JOIN dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = sr.DOCUMENTID&#xD;
  INNER JOIN dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt ON di.documentIdentifier = pt.dataId &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
     &#xD;
    INNER JOIN (  &#xD;
          SELECT DISTINCT psm.SubPathwayEnrolmentId as PathwayEnrolmentId,rtpm.referral_identifier, psm.SubEnrolmentStatus as pathway_status, 'SUB' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE psm.SubPathwayEnrolmentId IS NOT NULL&#xD;
          UNION ALL &#xD;
          SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
       rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
      ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier&#xD;
  &#xD;
  INNER JOIN dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
      WHERE meta.status_TDES0 = 'FINAL'&#xD;
      AND 1=1 &#xD;
&#xD;
          &lt;%if Context.Patient.Id.MRN&lt;&gt;""%&gt;&#xD;
           AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
          &lt;%end if%&gt;&#xD;
          &lt;%if get("Specialty") &lt;&gt; null%&gt;&#xD;
           AND pn.userSpecialty_O3IJQ = &lt;%=SqlParameters.add(get("Specialty"))%&gt;&#xD;
          &lt;%end if%&gt;&#xD;
          &lt;%if get("Name") &lt;&gt; null%&gt;&#xD;
           AND pn.userName_Z096R = &lt;%=SqlParameters.add(get("Name"))%&gt;&#xD;
          &lt;%end if%&gt;&#xD;
)&#xD;
&#xD;
  SELECT file_v.DocumentId&#xD;
    , file_v.PathwayId&#xD;
    , file_v.DateSubmitted&#xD;
    , file_v.ClinicianUserId&#xD;
    , file_v.TypeOfStoma&#xD;
    , file_v.State&#xD;
    , file_v.DischargeActive&#xD;
    , file_v.Size&#xD;
    , file_v.Shape&#xD;
    , file_v.modelId &#xD;
    , file_v.DocumentIdentifier &#xD;
    , ISNULL( cast (( STUFF((SELECT ', ' + sap."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_StmAprn_6Y8OY sap&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = sap.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) &#xD;
          , cast (( STUFF((SELECT ', ' + sap."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_StmAprn_BOMOX sap&#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = sap.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255))) as 'Stoma Appearance'&#xD;
     &#xD;
     , ISNULL( cast (( STUFF((SELECT ', ' + mct."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_MctJnc_SQ8R3 mct&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = mct.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255))  &#xD;
          , cast (( STUFF((SELECT ', ' + mcj."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_MctJnc_#NZ43 mcj&#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = mcj.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) ) as 'Mucocutaneous Junction'&#xD;
          &#xD;
  , ISNULL (cast (( STUFF((SELECT ', ' + pst."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_PrstSkn_VFY2D pst&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = pst.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255))&#xD;
          , cast (( STUFF((SELECT ', ' + pst."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_PrstSkn_D4K7X pst &#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = pst.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) ) as 'Peristomal Skin'&#xD;
          &#xD;
  , ISNULL ( cast (( STUFF((SELECT ', ' + lpt."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_Lprtmy_1P3DY lpt&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = lpt.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) &#xD;
      , cast (( STUFF((SELECT ', ' + lpt."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_IncLpr_AQWJG lpt&#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = lpt.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) ) as 'Laparotomy'&#xD;
          &#xD;
    , ISNULL (cast (( STUFF((SELECT ', ' + prn."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_PrnInc_CBP7C prn&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = prn.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) &#xD;
          , cast (( STUFF((SELECT ', ' + prn."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_IncPrn_IQD7A prn&#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = prn.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) ) as 'Perineal Incision'&#xD;
      ,''&#xD;
    from file_v&#xD;
    WHERE file_v.typeCode = 'BowelStoma'&#xD;
    AND file_v.PathwayId is not null&#xD;
order by file_v.DateSubmitted desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>1</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>SELECT</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
application.addQueryParameter("documentIdentifier", row.get(10) );&#xD;
application.addQueryParameter("modelId", row.get(9) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pathwayId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment Date</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Type of Stoma</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Stoma State</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Discharge Active</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Size</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Shape</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document ID</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Stoma Appearance</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Mucocutaneous Junction</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Peristomal Skin</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Laparotomy</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Perineal Incision</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Review</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;b&gt;Type of Stoma:&lt;/b&gt; &lt;%=(html)row.get(4).getOriginalValue%&gt; &lt;br/&gt;&#xD;
&lt;br/&gt;&#xD;
&#xD;
&lt;b&gt;Stoma State:&lt;/b&gt; &lt;%=(html)row.get(5).getOriginalValue%&gt; &lt;br/&gt;&#xD;
&lt;b&gt;Discharge Active:&lt;/b&gt; &lt;%=(html)row.get(6).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Size:&lt;/b&gt; &lt;%=(html)row.get(7).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Shape:&lt;/b&gt; &lt;%=(html)row.get(8).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Stoma Appearance:&lt;/b&gt; &lt;%=(html)row.get(11).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Mucocutaneous Junction:&lt;/b&gt; &lt;%=(html)row.get(12).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Peristomal Skin:&lt;/b&gt; &lt;%=(html)row.get(13).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Laparotomy:&lt;/b&gt; &lt;%=(html)row.get(14).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Perineal Incision:&lt;/b&gt; &lt;%=(html)row.get(15).getOriginalValue%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
application.addQueryParameter("documentIdentifier", row.get(10) );&#xD;
application.addQueryParameter("modelId", row.get(9) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Stoma Assessments Urinary</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: Used in Stoma Review form for only URINARY</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>/*URINARY*/&#xD;
&#xD;
with file_v as(&#xD;
 select&#xD;
    pat.idNumber_9LV7R &#xD;
        ,  sa.DOCUMENTID as 'DocumentId'&#xD;
        , si.pathwayId_$#NB#  as 'PathwayId'&#xD;
        , pe.pathwayIdentifier&#xD;
        , pathwayIdentifiers.typeCode&#xD;
        , DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ) as 'DateSubmitted' &#xD;
        , meta.sD_userId_L2ZQP  as 'ClinicianUserId'&#xD;
        , sa.TypeOfStoma_PN3SP_desc  as 'TypeOfStoma'&#xD;
        , sa.StomaState_4BVY9_desc  as 'State'&#xD;
        , ( case when sa.isActiveFaecal_3FKVX = 1 then 'Faecal Discharge Active'&#xD;
        when sa.isActiveUrinary_OIBN4 = 1 then 'Urinary Discharge Active'&#xD;
        else 'Discharge Not Active'&#xD;
        end ) as 'DischargeActive'&#xD;
        , cast (sa.Size_RLTEQ as varchar(10)) as 'Size'&#xD;
        , sa.Shape_0MB2O_desc  as 'Shape'&#xD;
        , 'uuid_' + FormInfo.modelId as modelId&#xD;
        , di.DocumentIdentifier as DocumentIdentifier&#xD;
&#xD;
    FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgIntl_OPLHZ si  on sa.DOCUMENTID = si.DOCUMENTID &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDI_OPLHZ_StmAsmn_SPYRX sdi on sdi.v2_CCRCNStmDschrgIntl_OPLHZ = si.v2_CCRCNStmDschrgIntl_OPLHZ&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = sa.DocumentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = sa.DOCUMENTID&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt ON di.documentIdentifier = pt.dataId &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
     &#xD;
    INNER JOIN (  &#xD;
            SELECT DISTINCT psm.SubPathwayEnrolmentId as PathwayEnrolmentId,rtpm.referral_identifier, psm.SubEnrolmentStatus as pathway_status, 'SUB' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE psm.SubPathwayEnrolmentId IS NOT NULL&#xD;
            UNION ALL &#xD;
            SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
         rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
        ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier&#xD;
    &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
      WHERE meta.status_TDES0 = 'FINAL'&#xD;
      AND 1=1  &#xD;
           AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
          &lt;%if get("Specialty") &lt;&gt; null%&gt;&#xD;
           AND pn.userSpecialty_O3IJQ = &lt;%=SqlParameters.add(get("Specialty"))%&gt;&#xD;
          &lt;%end if%&gt;&#xD;
          &lt;%if get("Name") &lt;&gt; null%&gt;&#xD;
           AND pn.userName_Z096R = &lt;%=SqlParameters.add(get("Name"))%&gt;&#xD;
          &lt;%end if%&gt;&#xD;
      &#xD;
      UNION ALL&#xD;
      &#xD;
SELECT&#xD;
        pat.idNumber_9LV7R&#xD;
        , sr.DOCUMENTID as 'DocumentId'&#xD;
        , sr.pathwayId_PW45G as 'PathwayId'&#xD;
        , pe.pathwayIdentifier&#xD;
        , pathwayIdentifiers.typeCode&#xD;
        , DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ) as 'DateSubmitted'&#xD;
        , meta.sD_userId_L2ZQP as 'UserId'&#xD;
        , sr.TypeOfStoma_0$R9B as 'TypeOfStoma'&#xD;
        , sr.StomaState_2TQFO_desc as 'StateOfStoma'&#xD;
        , ( case when sr.isActiveFaecal_WBTTR = 1 then 'Faecal Discharge Active'&#xD;
          when sr.isActiveUrinary_HFG7G = 1 then 'Urinary Discharge Active'&#xD;
          else 'Discharge Not Active'&#xD;
          end ) as 'DischargeActive'&#xD;
        , ( cast (sdt.Size_Q594Z as varchar(10)) + ', ' + sdt.SizeKey_7MBRN_desc ) as 'Size'&#xD;
        , ( sdt.Shape_W#67F_desc + ', ' + sdt.ShapeKey_W##YZ_desc ) as 'Shape'&#xD;
        , 'uuid_' + FormInfo.modelId as modelId&#xD;
        , di.DocumentIdentifier as DocumentIdentifier&#xD;
  &#xD;
&#xD;
  FROM dbo.v2_CCR#CN#Stoma#Review_2A2PN sr&#xD;
  LEFT OUTER JOIN dbo.v2_CCRCNSR_2A2PN_StmRvw_LVY7L str ON sr.v2_CCR#CN#Stoma#Review_2A2PN = str.v2_CCR#CN#Stoma#Review_2A2PN&#xD;
  LEFT OUTER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt ON sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = str.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = sr.DocumentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = sr.DOCUMENTID&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt ON di.documentIdentifier = pt.dataId &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','') &#xD;
&#xD;
    INNER JOIN (  &#xD;
            SELECT DISTINCT psm.SubPathwayEnrolmentId as PathwayEnrolmentId,rtpm.referral_identifier, psm.SubEnrolmentStatus as pathway_status, 'SUB' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE psm.SubPathwayEnrolmentId IS NOT NULL&#xD;
            UNION ALL &#xD;
            SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
         rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
        ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier &#xD;
&#xD;
  INNER JOIN dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
      WHERE meta.status_TDES0 = 'FINAL'&#xD;
      AND 1=1  &#xD;
           AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
          &lt;%if get("Specialty") &lt;&gt; null%&gt;&#xD;
           AND pn.userSpecialty_O3IJQ = &lt;%=SqlParameters.add(get("Specialty"))%&gt;&#xD;
          &lt;%end if%&gt;&#xD;
          &lt;%if get("Name") &lt;&gt; null%&gt;&#xD;
           AND pn.userName_Z096R = &lt;%=SqlParameters.add(get("Name"))%&gt;&#xD;
          &lt;%end if%&gt;&#xD;
)&#xD;
&#xD;
  SELECT file_v.DocumentId&#xD;
    , file_v.PathwayId&#xD;
    , file_v.DateSubmitted&#xD;
    , file_v.ClinicianUserId&#xD;
    , file_v.TypeOfStoma&#xD;
    , file_v.State&#xD;
    , file_v.DischargeActive&#xD;
    , file_v.Size&#xD;
    , file_v.Shape&#xD;
    , file_v.modelId &#xD;
    , file_v.DocumentIdentifier &#xD;
    , ISNULL( cast (( STUFF((SELECT ', ' + sap."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_StmAprn_6Y8OY sap&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = sap.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) &#xD;
          , cast (( STUFF((SELECT ', ' + sap."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_StmAprn_BOMOX sap&#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = sap.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255))) as 'Stoma Appearance'&#xD;
     &#xD;
     , ISNULL( cast (( STUFF((SELECT ', ' + mct."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_MctJnc_SQ8R3 mct&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = mct.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255))  &#xD;
          , cast (( STUFF((SELECT ', ' + mcj."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_MctJnc_#NZ43 mcj&#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = mcj.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) ) as 'Mucocutaneous Junction'&#xD;
          &#xD;
  , ISNULL (cast (( STUFF((SELECT ', ' + pst."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_PrstSkn_VFY2D pst&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = pst.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255))&#xD;
          , cast (( STUFF((SELECT ', ' + pst."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_PrstSkn_D4K7X pst &#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = pst.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) ) as 'Peristomal Skin'&#xD;
          &#xD;
  , ISNULL ( cast (( STUFF((SELECT ', ' + lpt."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_Lprtmy_1P3DY lpt&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = lpt.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) &#xD;
      , cast (( STUFF((SELECT ', ' + lpt."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_IncLpr_AQWJG lpt&#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = lpt.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) ) as 'Laparotomy'&#xD;
          &#xD;
    , ISNULL (cast (( STUFF((SELECT ', ' + prn."desc"&#xD;
          FROM  dbo.v2_CCR#DTR_ZD8R3_PrnInc_CBP7C prn&#xD;
          INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = prn.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
          where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) &#xD;
          , cast (( STUFF((SELECT ', ' + prn."desc"&#xD;
          FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#SDT_FKL#V_IncPrn_IQD7A prn&#xD;
          INNER JOIN   &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNStmDschrgTyp_FKL#V sa on sa.v2_CCRCNStmDschrgTyp_FKL#V = prn.v2_CCRCNStmDschrgTyp_FKL#V&#xD;
          where file_v.DOCUMENTID = sa.DOCUMENTID&#xD;
          FOR XML PATH('')), 1, 1, '') ) as varchar(255)) ) as 'Perineal Incision'&#xD;
    ,''&#xD;
    from file_v    &#xD;
    WHERE file_v.typeCode = 'UrinaryStoma'&#xD;
&#xD;
order by file_v.DateSubmitted desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>SELECT</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
application.addQueryParameter("documentIdentifier", row.get(10) );&#xD;
application.addQueryParameter("modelId", row.get(9) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pathwayId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment Date</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Type of Stoma</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Stoma State</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Discharge Active</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Size</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Shape</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document ID</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Stoma Appearance</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Mucocutaneous Junction</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Peristomal Skin</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Laparotomy</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Perineal Incision</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Review</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;b&gt;Type of Stoma:&lt;/b&gt; &lt;%=(html)row.get(4).getOriginalValue%&gt; &lt;br/&gt;&#xD;
&lt;br/&gt;&#xD;
&#xD;
&lt;b&gt;Stoma State:&lt;/b&gt; &lt;%=(html)row.get(5).getOriginalValue%&gt; &lt;br/&gt;&#xD;
&lt;b&gt;Discharge Active:&lt;/b&gt; &lt;%=(html)row.get(6).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Size:&lt;/b&gt; &lt;%=(html)row.get(7).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Shape:&lt;/b&gt; &lt;%=(html)row.get(8).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Stoma Appearance:&lt;/b&gt; &lt;%=(html)row.get(11).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Mucocutaneous Junction:&lt;/b&gt; &lt;%=(html)row.get(12).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Peristomal Skin:&lt;/b&gt; &lt;%=(html)row.get(13).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Laparotomy:&lt;/b&gt; &lt;%=(html)row.get(14).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Perineal Incision:&lt;/b&gt; &lt;%=(html)row.get(15).getOriginalValue%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
application.addQueryParameter("documentIdentifier", row.get(10) );&#xD;
application.addQueryParameter("modelId", row.get(9) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Stoma Form Header Review</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: Used in Stoma Review form header -leannl</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>with file_v as (&#xD;
&#xD;
	SELECT&#xD;
	sr.DOCUMENTID as 'DocumentId'&#xD;
	, sr.pathwayId_PW45G as 'PathwayId'&#xD;
	, meta.dateSubmitted_L0HOZ as 'DateSubmitted'&#xD;
	, meta.sD_userId_L2ZQP as 'UserId'&#xD;
         , sr.Location_ZMPZS as 'Location'&#xD;
	, sr.TypeOfStoma_0$R9B as 'TypeOfStoma'&#xD;
	, sr.StomaState_2TQFO_desc as 'StateOfStoma'&#xD;
	, ( case when sr.isActiveFaecal_WBTTR = 1 then 'Faecal Discharge Active'&#xD;
		when sr.isActiveUrinary_HFG7G = 1 then 'Urinary Discharge Active'&#xD;
		else 'Discharge Not Active'&#xD;
		end ) as 'DischargeActive'&#xD;
	, ( cast (sdt.Size_Q594Z as varchar(10)) + ', ' + sdt.SizeKey_7MBRN_desc ) as 'Size'&#xD;
	, ( sdt.Shape_W#67F_desc + ', ' + sdt.ShapeKey_W##YZ_desc ) as 'Shape'&#xD;
	&#xD;
&#xD;
	FROM dbo.v2_CCR#CN#Stoma#Review_2A2PN sr&#xD;
	INNER JOIN dbo.v2_CCRCNSR_2A2PN_StmRvw_LVY7L str ON sr.v2_CCR#CN#Stoma#Review_2A2PN = str.v2_CCR#CN#Stoma#Review_2A2PN&#xD;
	INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt ON sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = str.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
	INNER JOIN dbo.v_Document FormInfo ON FormInfo.DocumentId = sr.DocumentId&#xD;
	INNER JOIN dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = sr.DOCUMENTID&#xD;
	INNER JOIN dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
	INNER JOIN dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
			WHERE meta.status_TDES0 = 'FINAL'&#xD;
 				AND 1=1 &#xD;
					&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
					 AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
					&lt;%end if%&gt;&#xD;
                               &lt;%if Request.pathwayId &lt;&gt; null %&gt;&#xD;
				AND sr.pathwayId_PW45G = '&lt;%= Request.pathwayId %&gt;'&#xD;
                               &lt;%end if%&gt; 													&#xD;
)&#xD;
&#xD;
select &#xD;
	file_v.DocumentId&#xD;
	, file_v.PathwayId&#xD;
	, file_v.DateSubmitted&#xD;
	, file_v.UserId&#xD;
         , file_v.Location&#xD;
	, file_v.TypeOfStoma&#xD;
	, file_v.StateOfStoma&#xD;
	, file_v.DischargeActive&#xD;
	, file_v.Size&#xD;
	, file_v.Shape&#xD;
	, cast (( STUFF((SELECT ', ' + sap."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_StmAprn_6Y8OY sap&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = sap.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Stoma Appearance'&#xD;
	, cast (( STUFF((SELECT ', ' + mct."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_MctJnc_SQ8R3 mct&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = mct.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Mucocutaneous Junction'&#xD;
	, cast (( STUFF((SELECT ', ' + pst."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_PrstSkn_VFY2D pst&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = pst.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Peristomal Skin'&#xD;
	, cast (( STUFF((SELECT ', ' + lpt."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_Lprtmy_1P3DY lpt&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = lpt.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Laparotomy'&#xD;
	, cast (( STUFF((SELECT ', ' + prn."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_PrnInc_CBP7C prn&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = prn.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Perineal Incision'&#xD;
				  &#xD;
	&#xD;
	&#xD;
	from file_v&#xD;
	order by file_v.DateSubmitted desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pathwayId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment Date</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Location</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Type of Stoma</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Stoma State</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Discharge Active</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Size</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Shape</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Stoma Appearance</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Mucocutaneous Junction</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Peristomal Skin</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Laparotomy</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Perineal Incision</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Stoma Reviews</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: Used in Stoma Review.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>with file_v as (&#xD;
&#xD;
	SELECT&#xD;
	sr.DOCUMENTID as 'DocumentId'&#xD;
	, sr.pathwayId_PW45G as 'PathwayId'&#xD;
	, meta.dateSubmitted_L0HOZ as 'DateSubmitted'&#xD;
	, meta.sD_userId_L2ZQP as 'UserId'&#xD;
         , sr.Location_ZMPZS as 'Location'&#xD;
	, sr.TypeOfStoma_0$R9B as 'TypeOfStoma'&#xD;
	, sr.StomaState_2TQFO_desc as 'StateOfStoma'&#xD;
	, ( case when sr.isActiveFaecal_WBTTR = 1 then 'Faecal Discharge Active'&#xD;
		when sr.isActiveUrinary_HFG7G = 1 then 'Urinary Discharge Active'&#xD;
		else 'Discharge Not Active'&#xD;
		end ) as 'DischargeActive'&#xD;
	, ( cast (sdt.Size_Q594Z as varchar(10)) + ', ' + sdt.SizeKey_7MBRN_desc ) as 'Size'&#xD;
	, ( sdt.Shape_W#67F_desc + ', ' + sdt.ShapeKey_W##YZ_desc ) as 'Shape'&#xD;
	&#xD;
&#xD;
	FROM dbo.v2_CCR#CN#Stoma#Review_2A2PN sr&#xD;
	INNER JOIN dbo.v2_CCRCNSR_2A2PN_StmRvw_LVY7L str ON sr.v2_CCR#CN#Stoma#Review_2A2PN = str.v2_CCR#CN#Stoma#Review_2A2PN&#xD;
	INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt ON sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = str.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
	INNER JOIN dbo.v_Document FormInfo ON FormInfo.DocumentId = sr.DocumentId&#xD;
	INNER JOIN dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = sr.DOCUMENTID&#xD;
	INNER JOIN dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
	INNER JOIN dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
			WHERE meta.status_TDES0 = 'FINAL'&#xD;
 			AND 1=1 &#xD;
			&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
				AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
			&lt;%end if%&gt;&#xD;
                          &lt;%if Request.pathwayId &lt;&gt; null %&gt;&#xD;
				AND sr.pathwayId_PW45G = '&lt;%= Request.pathwayId %&gt;'&#xD;
                               &lt;%end if%&gt; 													&#xD;
)&#xD;
&#xD;
select &#xD;
	file_v.DocumentId&#xD;
	, file_v.PathwayId&#xD;
	, file_v.DateSubmitted&#xD;
	, file_v.UserId&#xD;
         , file_v.Location&#xD;
	, file_v.TypeOfStoma&#xD;
	, file_v.StateOfStoma&#xD;
	, file_v.DischargeActive&#xD;
	, file_v.Size&#xD;
	, file_v.Shape&#xD;
	, cast (( STUFF((SELECT ', ' + sap."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_StmAprn_6Y8OY sap&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = sap.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Stoma Appearance'&#xD;
	, cast (( STUFF((SELECT ', ' + mct."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_MctJnc_SQ8R3 mct&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = mct.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Mucocutaneous Junction'&#xD;
	, cast (( STUFF((SELECT ', ' + pst."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_PrstSkn_VFY2D pst&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = pst.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Peristomal Skin'&#xD;
	, cast (( STUFF((SELECT ', ' + lpt."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_Lprtmy_1P3DY lpt&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = lpt.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Laparotomy'&#xD;
	, cast (( STUFF((SELECT ', ' + prn."desc"&#xD;
				  FROM  dbo.v2_CCR#DTR_ZD8R3_PrnInc_CBP7C prn&#xD;
				  INNER JOIN dbo.v2_CCRCNStmDschrgTypRvw_ZD8R3 sdt on sdt.v2_CCRCNStmDschrgTypRvw_ZD8R3 = prn.v2_CCRCNStmDschrgTypRvw_ZD8R3&#xD;
				  where file_v.DOCUMENTID = sdt.DOCUMENTID&#xD;
				  FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Perineal Incision'&#xD;
				  &#xD;
	&#xD;
	,''&#xD;
	from file_v&#xD;
	order by file_v.DateSubmitted desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>1</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>2</index>
				<action>location.reload(false);</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pathwayId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment Date</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Location</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Type of Stoma</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Stoma State</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Discharge Active</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Size</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Shape</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Stoma Appearance</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Mucocutaneous Junction</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Peristomal Skin</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Laparotomy</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Perineal Incision</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Reviews</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;b&gt;Type of Stoma:&lt;/b&gt; &lt;%=(html)row.get(5).getOriginalValue%&gt; &lt;br/&gt;&#xD;
&lt;b&gt;Location:&lt;/b&gt; &lt;%=(html)row.get(4).getOriginalValue%&gt; &lt;br/&gt;&#xD;
&lt;br/&gt;&#xD;
&#xD;
&lt;b&gt;Stoma State:&lt;/b&gt; &lt;%=(html)row.get(6).getOriginalValue%&gt; &lt;br/&gt;&#xD;
&lt;b&gt;Discharge Active:&lt;/b&gt; &lt;%=(html)row.get(7).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Size:&lt;/b&gt; &lt;%=(html)row.get(8).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Shape:&lt;/b&gt; &lt;%=(html)row.get(9).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Stoma Appearance:&lt;/b&gt; &lt;%=(html)row.get(10).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Mucocutaneous Junction:&lt;/b&gt; &lt;%=(html)row.get(11).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Peristomal Skin:&lt;/b&gt; &lt;%=(html)row.get(12).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Laparotomy:&lt;/b&gt; &lt;%=(html)row.get(13).getOriginalValue%&gt;&lt;br/&gt;&#xD;
&lt;b&gt;Perineal Incision:&lt;/b&gt; &lt;%=(html)row.get(14).getOriginalValue%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Wound Site - Surgical</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>REPOSITORY: View Wound Site.  Generic search to return Wound Site information for patient's open (not healed) wounds -Surgical</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT    &#xD;
      do.documentIdentifier as DocId &#xD;
      , pe.pathwayIdentifier &#xD;
      , pt.modelId&#xD;
      , pe.enrollmentStatus&#xD;
      , wound.title&#xD;
      ,pt.modificationTime&#xD;
      ,pe.modifierUserId&#xD;
      ,pat.idNumber_9LV7R as patientId&#xD;
FROM      &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt on pe.enrollmentIdentifier  = SUBSTRING(pt.subjectKey, CHARINDEX(':', pt.subjectKey, 5) +1, (len(pt.subjectKey) - ( CHARINDEX(':', pt.subjectKey, 5) -1)))&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType AS tt ON pt.taskType = tt.uniqueId &#xD;
LEFT OUTER JOIN (&#xD;
  SELECT 'Surgical Wound Assessment' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNWndStInfTrmtSrgc_8M0$D  &#xD;
  UNION ALL&#xD;
  SELECT 'Surgical Wound Assessment Review' as title ,documentId FROM  &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRCNSrgclWndObsrvtn_BJUHB   &#xD;
  ) as wound ON wound.DOCUMENTID = do.documentId&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta on meta.DOCUMENTID = wound.DOCUMENTID&#xD;
INNER JOIN    &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE  &#xD;
      meta.status_TDES0 = 'FINAL'&#xD;
      AND pe.enrollmentStatus = 'ENROLLED'&#xD;
      AND pe.pathwayIdentifier = 'Wound care pathway'&#xD;
      AND tt.identifyingName like '%Surgical%'&#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Show Observation Results</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WoundId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Wound Assessment Type</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<system-object>false</system-object>
	<windowlet>
		<name>Care Plan</name>
		<maximized-entry-point>
			<name>WD_Care Plan_max</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Care Plan</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Manual Handling Interim Care plan</name>
		<minimized-entry-point>
			<name>Manual Handling Risk Assessment Search</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Pathway Enrollments</name>
		<minimized-entry-point>
			<name>Add New Access Code</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Patient Profile Check</name>
		<minimized-entry-point>
			<name>WD_Patient Profile Check</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Stoma - Initial Assessment</name>
		<minimized-entry-point>
			<name>WD_Stoma_Site_Initial</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Stoma Site Reviews</name>
		<minimized-entry-point>
			<name>WD_Stoma_Reviews</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>View Other Involved Practitioners</name>
		<minimized-entry-point>
			<name>WD_OtherInvolvedPractitioners</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Waterlow Assessment</name>
		<minimized-entry-point>
			<name>Waterlow Risk Assessment</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Wound Observations</name>
		<minimized-entry-point>
			<name>WD_Wound Observations</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Wounds</name>
		<minimized-entry-point>
			<name>WD_Wound SIte Information</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>Healthcare pathways - CCR ACTPAS</name>
	<access-controller>
		<allowed-group>
			<name>Administrators</name>
		</allowed-group>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>CCR Clinic</name>
		<protected>false</protected>
		<value>&lt;%=User.getAttribute("Community","ACTPASClinic").replace(";", "','")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>CCR Clinician ID</name>
		<protected>false</protected>
		<value>&lt;%=User.getAttribute("Community","ACTPAS Clinician ID").replace(";", "','")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>CCR Specialty</name>
		<protected>false</protected>
		<value>&lt;%=User.getAttribute("Community", "ACTPAS Speciality").replace(";", "','")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>CCR Staff Team</name>
		<protected>false</protected>
		<value>&lt;%=User.getAttribute("Community","ACTPAS Staff Team").replace(";", "','")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>Minor Patient Identifiers</name>
		<protected>false</protected>
		<value>&lt;%=Context.get("Patient.Id.Alternate")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>db_CWSClinical</name>
		<protected>false</protected>
		<value>OH_CM_Clinical</value>
	</application-variable>
	<application-variable>
		<name>db_CWSCustom</name>
		<protected>false</protected>
		<value>OH_CM_Custom</value>
	</application-variable>
	<application-variable>
		<name>db_CWSMedMan</name>
		<protected>false</protected>
		<value>OH_CM_medicationManagement</value>
	</application-variable>
	<application-variable>
		<name>db_CWSRepository</name>
		<protected>false</protected>
		<value>OH_CM_cRepository</value>
	</application-variable>
	<application-variable>
		<name>db_CWSTask</name>
		<protected>false</protected>
		<value>OH_CM_Task</value>
	</application-variable>
	<application-variable>
		<name>patientURNList</name>
		<protected>false</protected>
		<value>'&lt;%=Context.Patient.Id.MRN%&gt;'&lt;% var minorids = AppVars.get("Minor Patient Identifiers").split(";")%&gt;&lt;%for each token in minorids%&gt;&lt;%if token &lt;&gt; ""%&gt;,'&lt;%=token%&gt;'&lt;%end if%&gt;&lt;%end for%&gt;</value>
	</application-variable>
	<application-variable>
		<name>userNamespace</name>
		<protected>false</protected>
		<value>clinical-portal-user</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<description>::CCR:: Community Care Record Solution.</description>
	<entry-point>
		<name>CCR ACTPAS - Allergies &amp; Alerts</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>returns Allergies and alerts from ACTPAS</description>
		<display-name>Adverse Reactions &amp; Alerts (ACTPAS)</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/status/warning.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Allergies and Alerts</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR ACTPAS - Allergies &amp; Alerts_context</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>returns Allergies and alerts from ACTPAS</description>
		<display-name>Adverse Reactions &amp; Alerts</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/status/warning.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Allergies and Alerts</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Clinician Appointments</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Finds Clinicians based upon the "My Locations" and "Speciality" user attributes on the Community group. Appointments are limited to those that have not yet ended or that have an end date since midnight last night.</description>
		<display-name>My Appointments (ACTPAS)</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/date and time/calendar.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Clinician Appointments</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>referralId</name>
					<index>3</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.get("ACTPASID")%&gt;&lt;%else%&gt;&lt;%=Request.get("ACTPASID")%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>appointmentOID</name>
					<index>4</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.get("appointmentOID")%&gt;&lt;%else%&gt;&lt;%=Request.get("appointmentOID")%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Clinician Appointments Homepage</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Finds Clinicians based upon the "My Locations" and "Speciality" user attributes on the Community group. Appointments are limited to those that have not yet ended or that have an end date since midnight last night.</description>
		<display-name>Appointments (ACTPAS)</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/date and time/calendar.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Clinician Appointments Homepage</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>20</value>
				</query-parameter>
				<query-parameter>
					<name>referralId</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.get("ACTPASID")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Clinician Appointments Homepage_max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Finds Clinicians based upon the "My Locations" and "Speciality" user attributes on the Community group. Appointments are limited to those that have not yet ended or that have an end date since midnight last night.</description>
		<display-name>Appointments (ACTPAS)</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/date and time/calendar.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Clinician Appointments Homepage</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>200</value>
				</query-parameter>
				<query-parameter>
					<name>referralId</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.get("ACTPASID")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Clinician Appointments_max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Finds Clinicians based upon the "My Locations" and "Speciality" user attributes on the Community group. Appointments are limited to those that have not yet ended or that have an end date since midnight last night.</description>
		<display-name>Current Appointments</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/date and time/calendar.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Clinician Appointments</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Clinician Search</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>ACTPAS_CDR_VIEW: Entry point to access Clinician Search Screen</description>
		<display-name>Clinician by Specialty Search</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/concerto/search.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Clinician Specialty Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Clinicians</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>ACTPAS_CDR_VIEW: Entry point to access Clinician Search Screen</description>
		<display-name>Clinician by Specialty Search</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/concerto/search.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Clinician Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Community Clinics</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Displays all Community Clinics for CCR</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Community Clinics</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Contacts - List contacts</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Displays a list of contacts filtered by a users specialty</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Contacts - List of contacts</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>2</index>
					<value>&lt;%if SecureInfomation.URN%&gt;&lt;%=SecureInfomation.URN%&gt;&lt;%else%&gt;&lt;%=Request.patientId%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Contacts - List contacts (maximised)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Mazimised windowlet for all Contacts</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Contacts - List of contacts (maximised)</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR GP Lookup</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>ACTPAS_CDR_VIEW: Entry point to access GP Search Screen</description>
		<display-name>GP Search</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/concerto/search.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR GP Lookup</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Location Search</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Location search</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Location Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR My Contacts</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Finds Contacts based upon the "Community Carers" user attribute on the Community group. Contacts are limited to those that have not yet ended or that have an end date since midnight last night.</description>
		<display-name>My Contacts</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/date and time/calendar_preferences.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Clinician Contacts</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR My Selected Locations</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Selected location for clinics</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR My Selected Locations</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Patient Contacts Search List</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Entry point to the patient contacts search results screen</description>
		<display-name>Patient Contacts</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Patient Contacts</value>
				</query-parameter>
				<query-parameter>
					<name>allowSavedSearches</name>
					<index>2</index>
					<value>false</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Specialty Search</name>
		<access-controller>
			<allowed-group>
				<name>Generic User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>ACT PAS Specialties</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Specialty Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Staff Team</name>
		<access-controller>
			<allowed-group>
				<name>Generic User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>ACT PAS Specialties</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Staff Team</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>CCR Staff and Specialty</name>
		<access-controller>
			<allowed-group>
				<name>Generic User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>ACT PAS Specialties</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Staff and Specialty Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>PP_AppointmentContextSwitch</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Community context switching application</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Community Appointment Context Switch</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Patient Context Switch</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Context switching from the Patient Summary.</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>name</name>
					<index>0</index>
					<value>ContextSwtichActpasCurrentPatient</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/cViewer/process.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Referrals (ACTPAS)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>List of Referrals from ACTPAS Only.</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CCR Referrals - List of referrals</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<login-redirection-script />
	<login-timeout>300000</login-timeout>
	<logout-redirection-script />
	<search>
		<name>CCR Clinician Appointments</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: 15122014 FM : note this search is currently configured to show all the appointments from the current patient - no further restrictions. If you change the number of the result columns or the order you need to change the executed javascript : the javascript must retrieve the Appointment OID (row 7)  and the Clinician ID (row 12)  for the Update execution to work correctly. &#xD;
 Finds Clinicians based upon the "My Locations" and "Community Carers" user attributes on the Community group.</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>select distinct&#xD;
 cap.patientId as urn,&#xD;
 UPPER(pd.familyName) + ', ' + pd.givenName  + ' ' + pd.middleInitialOrName &#xD;
 ,pd.familyName&#xD;
 ,pd.middleInitialOrName&#xD;
 ,pd.givenName&#xD;
 ,pd.dateTimeOfBirth&#xD;
 ,pd.sex&#xD;
 ,cap.AppointmentNumber as appointment&#xD;
 ,cap.AppointmentDttm as startDate&#xD;
 ,cap.clinicCode as clinic&#xD;
 ,cap.ClinicName&#xD;
 ,cap.AppointmentType as visitType&#xD;
 ,cap.clinicianId as ClinicianId&#xD;
 ,c1.title + ' ' + c1.givenname + ' ' + UPPER(c1.familyname) as Clinician&#xD;
 ,AttendStatus&#xD;
 ,ISNULL(rm.referral_identifier,cap.referralID ) as referralId&#xD;
 ,cs.Specialty as speciality&#xD;
 ,cst.CODE as staffteam&#xD;
 ,cst.DESCRIPTION as staffteamdesc&#xD;
 ,cap.ArrivedAt &#xD;
 ,cap.CalledAt&#xD;
 ,cap.SeenAt&#xD;
 ,cap.DepartedAt&#xD;
 ,cap.CancelledAt&#xD;
FROM dbo.Orion_CWSAppointments cap&#xD;
INNER JOIN orion_patientDemographicsMini pd WITH(NOLOCK) ON cap.patientId = pd.patientId &#xD;
INNER JOIN Orion_CWSCurrentClinicians c1 WITH(NOLOCK) ON cap.clinicianId = c1.clinicianID &#xD;
INNER JOIN Orion_CWSClinicians c WITH(NOLOCK) ON c.ClinicianID = c1.clinicianID&#xD;
INNER JOIN Orion_CWSCliniciansSpecialty cs WITH(NOLOCK) ON c.PROCA_REFNO = cs.PROCA_REFNO &#xD;
INNER JOIN orion_CWSClinicianStaffTeams st WITH(NOLOCK) ON st.PROCA_REFNO = c.PROCA_REFNO &#xD;
INNER JOIN Orion_CWSStaffTeams cst WITH(NOLOCK) ON st.staffTeamID = cst.staffTeamID&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rm WITH(NOLOCK) ON rm.ACTPASID = cap.referralID &#xD;
&#xD;
WHERE 1=1&#xD;
&lt;%if Context.Patient.Id.MRN &lt;&gt;""%&gt;&#xD;
        AND cap.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
&lt;%end if%&gt;&#xD;
&#xD;
/*User Attribute for Filtered lists*/&#xD;
-- &lt;%if User.getAttribute("Community", "ACTPAS Clinician ID") &lt;&gt; "" %&gt;&#xD;
--   AND cc.ClinicianID IN ('&lt;%=AppVars.get("CCR Clinician ID")%&gt;')&#xD;
-- &lt;%end if%&gt;&#xD;
-- &lt;%if User.getAttribute("Community", "ACTPAS Speciality") &lt;&gt; "" %&gt;&#xD;
--   AND cs.SpecialtyCode IN ('&lt;%=AppVars.get("CCR Specialty")%&gt;')&#xD;
-- &lt;%end if%&gt;&#xD;
-- &lt;%if User.getAttribute("Community", "ACTPAS Staff Team") &lt;&gt; "" %&gt;&#xD;
--   AND cst.CODE IN ('&lt;%=AppVars.get("CCR Staff Team")%&gt;')&#xD;
-- &lt;%end if%&gt; &#xD;
-- &lt;%if User.getAttribute("Community", "ACTPASClinic") &lt;&gt; "" %&gt;&#xD;
--   AND cap.clinicCode IN ('&lt;%=AppVars.get("CCR Clinic")%&gt;')&#xD;
-- &lt;%end if%&gt; &#xD;
&#xD;
/*Filtered List of Parameters*/&#xD;
&lt;%if Request.get("appointmentOID")&lt;&gt;""%&gt;&#xD;
 AND cap.AppointmentNumber = &lt;%=Request.get("appointmentOID")%&gt;&#xD;
&lt;%else%&gt;&#xD;
&#xD;
&lt;%if Request.referralId &lt;&gt; ""%&gt;&#xD;
 AND cap.referralID = '&lt;%=Request.referralId%&gt;'&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("URN") &lt;&gt; ""%&gt;&#xD;
 AND cap.patientId = '&lt;%=get("URN")%&gt;'&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Appointment No") &lt;&gt; ""%&gt;&#xD;
 AND cap.AppointmentNumber = '&lt;%=get("Appointment No")%&gt;'&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Referral ID") &lt;&gt; ""%&gt;&#xD;
 AND ISNULL(rm.referral_identifier,cap.referralID) = '&lt;%=get("Referral ID")%&gt;'&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Status") &lt;&gt; ""%&gt;&#xD;
 AND AttendStatus = '&lt;%=get("Status")%&gt;'&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
&lt;%if get("AppointmentsDateRange.low") &lt;&gt; "" &amp;&amp; get("AppointmentsDateRange.high") &lt;&gt; "" %&gt;&#xD;
  AND cap.AppointmentDttm Between &#xD;
  DATEADD(d,-1, '&lt;%=get("AppointmentsDateRange.low")%&gt;')  &#xD;
    AND&#xD;
  DATEADD(d, 1, '&lt;%=get("AppointmentsDateRange.high")%&gt;') &#xD;
&lt;%elseif get("AppointmentsDateRange.low") &lt;&gt; "" %&gt;&#xD;
  AND DATEADD(d,-1, '&lt;%=get("AppointmentsDateRange.low")%&gt;')  &lt;= cap.AppointmentDttm &#xD;
&lt;%elseif get("AppointmentsDateRange.high") &lt;&gt; "" %&gt;&#xD;
  AND cap.AppointmentDttm &lt;= DATEADD(d, 1, '&lt;%=get("AppointmentsDateRange.high")%&gt;')  &#xD;
 --Referral ID included, ignore default date range&#xD;
&lt;%elseif Request.referralId &lt;&gt; ""%&gt;&#xD;
&lt;%else%&gt;-- Apply default date range&#xD;
  AND (cap.AppointmentDttm &gt;= DATEADD(hh, -6, CONVERT(datetime, CONVERT(varchar, GETDATE(), 103), 103)))&#xD;
  AND (cap.AppointmentDttm &lt;= DATEADD(d, 7, CONVERT(datetime, CONVERT(varchar, GETDATE(), 103), 103)))&#xD;
&lt;% end if%&gt;&#xD;
&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
&#xD;
&#xD;
ORDER BY cap.AppointmentDttm ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>AppointmentsDateRange</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Select Date Range</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-MM-dd")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral ID</name>
				<index>2</index>
				<default-value />
				<display-name>Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Appointment No</name>
				<index>3</index>
				<default-value />
				<display-name>Appointment No</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>MyClinicsFilter</name>
				<index>4</index>
				<default-value />
				<display-name>Selected Clinic to Filter</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Community Clinics")%&gt;&lt;%exec config.setReturnValueName("Clinic Code")%&gt;&lt;%exec config.setDisplayValueName("Clinic Name")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Status</name>
				<index>5</index>
				<default-value />
				<display-name>Appointment Status</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [DESCRIPTION]\r\n      ,[MAIN_CODE]\r\n      \r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CWSReferenceValues]\r\n  WHERE [RFVDM_CODE] = 'ATTND' AND MAIN_CODE NOT IN ('DNA', 'CANCL', '3', '2', '0', 'UTA') \r\nORDER BY DESCRIPTION\r\n")%&gt;&lt;%exec config.setOptionColumnName("DESCRIPTION")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>200</maximum-results-per-page>
			<no-results-message>No appointments have been booked, please context switch to ACTPAS to make bookings.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Update Appointment</name>
				<index>0</index>
				<action>var appointmentOID = row.get(7);&#xD;
&#xD;
var appointTime = row.get(8);&#xD;
var arrivedAt = row.get(19);&#xD;
var calledAt = row.get(20);&#xD;
var seenAt = row.get(21);&#xD;
var departedAt = row.get(22);&#xD;
var cancelledAt = row.get(23);&#xD;
&#xD;
//get the application with the search required &#xD;
var ipmApplication = new Application ("iPM Web Services Integration", "Update Appointment") ;&#xD;
//add the values to pass to the generic search - appointment iD and the clinician&#xD;
//from the selected row&#xD;
&#xD;
ipmApplication.addQueryParameter("AppointmentOID", appointmentOID); &#xD;
ipmApplication.addQueryParameter("Patient ID", row.get(0)); &#xD;
ipmApplication.addQueryParameter("Seen By Clinician", row.get(12) ); &#xD;
 &#xD;
ipmApplication.addQueryParameter("appointTime", appointTime );  &#xD;
ipmApplication.addQueryParameter("ArrivedAt", arrivedAt  );  &#xD;
ipmApplication.addQueryParameter("SeenAt", seenAt  );  &#xD;
ipmApplication.addQueryParameter("CalledAt", calledAt );  &#xD;
ipmApplication.addQueryParameter("DepartedAt", departedAt  ); &#xD;
ipmApplication.addQueryParameter("cancelledAt", cancelledAt ); &#xD;
&#xD;
&#xD;
&#xD;
&#xD;
//use the singleton Concerto Object to Open the Application/search in a popup wondow&#xD;
//concerto.openApplicationInWindow(ipmApplication, null, null, 700, 900) ;&#xD;
concerto.openApplicationInModalDialog ( ipmApplication,600,1024,null,null,"resizable=yes");</action>
				<css-class>RENAME</css-class>
				<style />
			</result-action>
			<result-column>
				<name>URN</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>Middle Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.middleInitialOrName</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.givenName</subject-item-name>
			</result-column>
			<result-column>
				<name>Date of Birth</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ""%&gt;&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Appointment No</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointment Time</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ""%&gt;&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy HH:mm")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinic Code</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinic Name</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointment Type</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician Id</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Id</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team Code</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team Description</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Arrived At</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "HH:mm:ss")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Called At</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "HH:mm:ss")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Seen At</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "HH:mm:ss")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Departed At</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "HH:mm:ss")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Cancelled At</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "HH:mm:ss")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action>var appointmentOID = row.get(7);&#xD;
//get the application with the search required &#xD;
var ipmApplication = new Application ("iPM Web Services Integration", "Update Appointment") ;&#xD;
//add the values to pass to the generic search - appointment iD and the clinician&#xD;
//from the selected row&#xD;
&#xD;
ipmApplication.addQueryParameter("AppointmentOID", appointmentOID); &#xD;
ipmApplication.addQueryParameter("Patient ID", row.get(0)); &#xD;
ipmApplication.addQueryParameter("Seen By Clinician", row.get(12) ); &#xD;
&#xD;
//use the singleton Concerto Object to Open the Application/search in a popup wondow&#xD;
concerto.openApplicationInWindow(ipmApplication, null, null, 700, 900) ;</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>CCR Clinician Appointments Homepage</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: 15122014 FM : note this search is currently configured to show all the appointments from the current patient - no further restrictions. If you change the number of the result columns or the order you need to change the executed javascript : the javascript must retrieve the Appointment OID (row 7)  and the Clinician ID (row 12)  for the Update execution to work correctly. &#xD;
 Finds Clinicians based upon the "My Locations" and "Community Carers" user attributes on the Community group.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>cap.AppointmentDttm ASC</order-by>
		<query-string>select distinct&#xD;
 cap.patientId as urn,&#xD;
 UPPER(pd.familyName) + ', ' + pd.givenName  + ' ' + pd.middleInitialOrName &#xD;
 ,pd.familyName&#xD;
 ,pd.middleInitialOrName&#xD;
 ,pd.givenName&#xD;
 ,pd.dateTimeOfBirth&#xD;
 ,pd.sex&#xD;
 ,cap.AppointmentNumber as appointment&#xD;
 ,cap.AppointmentDttm as startDate&#xD;
 ,cap.clinicCode as clinic&#xD;
 ,cap.ClinicName&#xD;
 ,cap.AppointmentType as visitType&#xD;
 ,cap.clinicianId as ClinicianId&#xD;
 ,cl.title + ' ' + cl.givenname + ' ' + UPPER(cl.familyname) as Clinician&#xD;
 ,AttendStatus&#xD;
 ,rm.referral_identifier as referralId&#xD;
from  &#xD;
-- orion_CWSCurrentAppointments cap &#xD;
dbo.Orion_CWSAppointments cap&#xD;
&#xD;
left join Orion_CWSPatientDemographics pd on cap.patientId = pd.patientId  &#xD;
left join Orion_CWSClinicians cl on cap.clinicianId = cl.ClinicianID  &#xD;
left join &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rm ON rm.ACTPASID = cap.referralID &#xD;
&#xD;
where 1=1 &#xD;
&lt;%if Request.referralId &lt;&gt; ""%&gt;&#xD;
        AND cap.referralID = '&lt;%=Request.referralId%&gt;'&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
&lt;%if get("MyClinicsFilter") &lt;&gt; "" %&gt;&#xD;
AND cap.clinicCode = '&lt;%=get("MyClinicsFilter").replace(" ", "")%&gt;'&#xD;
&lt;% end if%&gt;&#xD;
&#xD;
&lt;%if get("AppointmentsDateRange.low") &lt;&gt; "" &amp;&amp; get("AppointmentsDateRange.high") &lt;&gt; "" %&gt;&#xD;
	AND cap.AppointmentDttm Between &#xD;
	DATEADD(d,-1, '&lt;%=get("AppointmentsDateRange.low")%&gt;')  &#xD;
		AND&#xD;
	DATEADD(d, 1, '&lt;%=get("AppointmentsDateRange.high")%&gt;') &#xD;
&lt;%elseif get("AppointmentsDateRange.low") &lt;&gt; "" %&gt;&#xD;
	AND DATEADD(d,-1, '&lt;%=get("AppointmentsDateRange.low")%&gt;')  &lt;= cap.AppointmentDttm &#xD;
&lt;%elseif get("AppointmentsDateRange.high") &lt;&gt; "" %&gt;&#xD;
	AND cap.AppointmentDttm &lt;= DATEADD(d, 1, '&lt;%=get("AppointmentsDateRange.high")%&gt;')	&#xD;
 --Referral ID included, ignore default date range&#xD;
&lt;%elseif Request.referralId &lt;&gt; ""%&gt;&#xD;
&lt;%else%&gt;-- Apply default date range&#xD;
	AND (cap.AppointmentDttm &gt;= DATEADD(hh, -6, CONVERT(datetime, CONVERT(varchar, GETDATE(), 103), 103)))&#xD;
	AND (cap.AppointmentDttm &lt;= DATEADD(d, 7, CONVERT(datetime, CONVERT(varchar, GETDATE(), 103), 103)))&#xD;
&lt;% end if%&gt;&#xD;
&#xD;
&lt;%if AppVars.get("patientURNList") &lt;&gt;""%&gt;&#xD;
        AND cap.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>MyClinicsFilter</name>
				<index>0</index>
				<default-value />
				<display-name>Selected Clinic to Filter</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Community Clinics")%&gt;&lt;%exec config.setReturnValueName("Clinic Code")%&gt;&lt;%exec config.setDisplayValueName("Clinic Name")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>AppointmentsDateRange</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Select Date Range</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("d-M-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-M-d")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>No appointments have been booked, please context switch to ACTPAS to make bookings.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Update Appointment</name>
				<index>0</index>
				<action>var appointmentOID = row.get(7);&#xD;
//get the application with the search required &#xD;
var ipmApplication = new Application ("iPM Web Services Integration", "Update OPD Appointment") ;&#xD;
//add the values to pass to the generic search - appointment iD and the clinician&#xD;
//from the selected row&#xD;
&#xD;
ipmApplication.addQueryParameter("AppointmentOID", appointmentOID); &#xD;
ipmApplication.addQueryParameter("Seen By Clinician", row.get(12) ); &#xD;
&#xD;
//use the singleton Concerto Object to Open the Application/search in a popup wondow&#xD;
concerto.openApplicationInWindow(ipmApplication, null, null, 700, 900) ;</action>
				<css-class>RENAME</css-class>
				<style />
			</result-action>
			<result-column>
				<name>URN</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>Middle Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.middleInitialOrName</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.givenName</subject-item-name>
			</result-column>
			<result-column>
				<name>Date of Birth</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ""%&gt;&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Appointment No</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointment Time</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ""%&gt;&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy HH:mm")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinic Code</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinic Name</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointment Type</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician Id</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Id</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var appointmentOID = row.get(7);&#xD;
//get the application with the search required &#xD;
var ipmApplication = new Application ("iPM Web Services Integration", "Update OPD Appointment") ;&#xD;
//add the values to pass to the generic search - appointment iD and the clinician&#xD;
//from the selected row&#xD;
&#xD;
ipmApplication.addQueryParameter("AppointmentOID", appointmentOID); &#xD;
ipmApplication.addQueryParameter("Seen By Clinician", row.get(12) ); &#xD;
&#xD;
//use the singleton Concerto Object to Open the Application/search in a popup wondow&#xD;
concerto.openApplicationInWindow(ipmApplication, null, null, 700, 900) ;</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>CCR Clinician Contacts</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Finds Contacts based upon the "Community Carers" user attribute on the Community group. Contacts are limited to those that have not yet ended or that have an end date since midnight last night.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
	cc.StartDateTime,&#xD;
	cc.ContactType,&#xD;
	cc.PatientId,&#xD;
	cpat.familyname,&#xD;
	cpat.middleInitialOrName,&#xD;
	cpat.givenname, &#xD;
	cpat.sex,&#xD;
	COALESCE ( cpat.givenname, '') + COALESCE (' ' + UPPER(cpat.familyname), '') AS Name,&#xD;
	cpat.dateTimeOfBirth,&#xD;
	Duration,&#xD;
	Status,&#xD;
	COALESCE (c1.title, '') + COALESCE (' ' + c1.givenname, '') + COALESCE (' ' + UPPER(c1.familyname), '') AS clinician,&#xD;
	outcome&#xD;
FROM dbo.orion_CWSCurrentContacts cc --dbo.Orion_CWSContacts cc&#xD;
	LEFT JOIN dbo.Orion_CWSPatientDemographics cpat&#xD;
		ON cc.PatientID = cpat.PatientID&#xD;
	LEFT JOIN dbo.Orion_CWSClinicians c1&#xD;
		on cc.ClinicianID = c1.ClinicianID&#xD;
WHERE 1=1&#xD;
	/* Limit results to contacts that haven't ended yet or that will end after midnight last night. */&#xD;
	AND (cc.endDatetime &gt; DATEADD(Day, 0, DATEDIFF(Day, 0, GetDate())) OR cc.endDatetime is null)</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>true</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Start Date / Time</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ""%&gt;&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy HH:mm")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Type</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>Middle Name</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.middleInitialOrName</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.givenName</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Of Birth</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Duration</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assigned Professional</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Outcome</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>CCR Clinician Search</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>Clinician Popup Search over the community users that are local to the users attributes.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2</order-by>
		<query-string>SELECT distinct oc.clinicianIDType+oc.clinicianID, isnull(oc.title,'') + ' ' + oc.givenName + ' ' + UPPER(oc.familyName) AS name, oc.familyName, oc.givenName, oc.title ,oc.clinicianID, oc.facility as Facility, linkdescription.value as Specialty, linkcode.value as SpCode&#xD;
&#xD;
FROM Orion_CWSClinicians oc &#xD;
INNER JOIN (&#xD;
 SELECT ocs2.ClinicianID id,  &#xD;
		STUFF(&#xD;
		    ( SELECT  ', ' + CAST (coms.Specialty as VARCHAR(255)) &#xD;
			FROM dbo.Orion_CWSClinicians  ocs  &#xD;
			INNER JOIN dbo.Orion_CWSCliniciansSpecialty coms ON coms.PROCA_REFNO = ocs.PROCA_REFNO&#xD;
			WHERE ocs.ClinicianID  = ocs2.ClinicianID  			&#xD;
			FOR XML PATH (''), TYPE).value('(./text())[1]','VARCHAR(255)'),1,2,'') as value&#xD;
			 &#xD;
		FROM dbo.Orion_CWSClinicians ocs2&#xD;
		GROUP BY ocs2.ClinicianID &#xD;
&#xD;
) linkdescription ON oc.ClinicianID = linkdescription.id&#xD;
INNER JOIN (&#xD;
 SELECT ocs2.ClinicianID id, &#xD;
		STUFF(&#xD;
		    ( SELECT  ', ' + CAST (coms.Specialty as VARCHAR(255)) &#xD;
			FROM dbo.Orion_CWSClinicians  ocs  &#xD;
			INNER JOIN dbo.Orion_CWSCliniciansSpecialty coms ON coms.PROCA_REFNO = ocs.PROCA_REFNO&#xD;
			WHERE ocs.ClinicianID  = ocs2.ClinicianID  			&#xD;
			FOR XML PATH (''), TYPE).value('(./text())[1]','VARCHAR(255)'),1,2,'') as value&#xD;
			 &#xD;
		FROM dbo.Orion_CWSClinicians ocs2&#xD;
		GROUP BY ocs2.ClinicianID &#xD;
&#xD;
) linkcode ON oc.ClinicianID = linkcode.id</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Name</name>
				<index>0</index>
				<default-value />
				<display-name>Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Facility</name>
				<index>1</index>
				<default-value />
				<display-name>Facility</display-name>
				<input-type>Autocomplete</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("select code, description FROM dbo.Orion_facilities\r\n\r\nUNION \r\n\r\nSELECT 'DHHCC' as code , 'ACT Health' as description \r\n\r\n\r\n order by description asc")%&gt;&lt;%exec config.setSubmitColumnName("code")%&gt;&lt;%exec config.setDisplayColumnName("description")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>2</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Autocomplete</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery(" SELECT DISTINCT \r\n ocs.SpecialtyCode AS code,\r\n ocs.Specialty AS description  \r\n FROM dbo.Orion_CWSCliniciansSpecialty ocs ")%&gt;&lt;%exec config.setSubmitColumnName("code")%&gt;&lt;%exec config.setDisplayColumnName("description")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Provider</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Provider.Id.ProviderIDAndType</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Provider.Co.ProviderName</subject-item-name>
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>clinicianID</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value.equals("ACTCC")%&gt;  ACT Health Public  &lt;%elseif value.equals("CHCACT")%&gt;  Calvary Health Care  &lt;%elseif value.equals("DHHCC")%&gt;  ACT Health  &lt;%else%&gt;  &lt;%=value%&gt;  &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialties</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SpecialtyCode</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>CCR Clinician Specialty Search</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Clinician Popup Search over the community users that are local to the users attributes.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2</order-by>
		<query-string>SELECT oc.clinicianIDType+oc.clinicianID as clinicianID , &#xD;
isnull(oc.title,'') + ' ' + oc.givenName + ' ' + UPPER(oc.familyName) AS name, oc.familyName, &#xD;
oc.givenName, oc.title ,oc.clinicianID, oc.facility as Facility, specialtyLink.Specialty as Specialty, &#xD;
specialtyLink.SpecialtyCode as SpCode&#xD;
,st.[CODE] as stcode&#xD;
,st.[DESCRIPTION] as stdescription&#xD;
&#xD;
FROM dbo.Orion_CWSClinicians  oc  &#xD;
LEFT OUTER JOIN dbo.Orion_CWSCliniciansSpecialty specialtyLink ON specialtyLink.PROCA_REFNO = oc.PROCA_REFNO &#xD;
&lt;%if get.("Staff Team")%&gt;&#xD;
LEFT OUTER JOIN [dbo].[orion_CWSCurrentClinicianStaffTeams] cst ON cst.PROCA_REFNO = specialtyLink.PROCA_REFNO &#xD;
LEFT OUTER JOIN [dbo].[Orion_CWSStaffTeams] st ON cst.[staffTeamID] = st.[staffTeamID]&#xD;
&lt;%else%&gt;&#xD;
LEFT OUTER JOIN [dbo].[orion_CWSCurrentClinicianStaffTeams] cst ON cst.PROCA_REFNO = specialtyLink.PROCA_REFNO &#xD;
LEFT OUTER JOIN [dbo].[Orion_CWSStaffTeams] st ON cst.[staffTeamID] = st.[staffTeamID]&#xD;
&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
WHERE 1=1 &#xD;
&lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;&#xD;
  AND oc.familyName LIKE '&lt;%=get("Name.Family Name")%&gt;%'&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;&#xD;
  AND oc.givenName LIKE '&lt;%=get("Name.Given Name")%&gt;%'&#xD;
&lt;%end if%&gt;&#xD;
/*&lt;%if get("Facility") &lt;&gt; ""%&gt;&#xD;
  AND oc.facility = '&lt;%=get("Facility")%&gt;'&#xD;
&lt;%end if%&gt;*/&#xD;
&lt;%if get("Specialty") &lt;&gt; ""%&gt;&#xD;
  AND specialtyLink.SpecialtyCode = '&lt;%=get("Specialty")%&gt;'&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>Clinician By Specialty</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Name</name>
				<index>0</index>
				<default-value />
				<display-name>Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>1</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Autocomplete</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("select distinct specialtyLink.SpecialtyCode as code, specialtyLink.Specialty as description \r\nFROM dbo.Orion_CWSCliniciansSpecialty specialtyLink \r\n")%&gt;&lt;%exec config.setSubmitColumnName("code")%&gt;&lt;%exec config.setDisplayColumnName("description")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Staff Team</name>
				<index>2</index>
				<default-value />
				<display-name />
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Y", "Staff Team")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Provider</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Provider.Id.ProviderIDAndType</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Provider.Co.ProviderName</subject-item-name>
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>clinicianID</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value.equals("ACTCC")%&gt;  ACT Health Public  &lt;%elseif value.equals("CHCACT")%&gt;  Calvary Health Care  &lt;%elseif value.equals("DHHCC")%&gt;  ACT Health  &lt;%else%&gt;  &lt;%=value%&gt;  &lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SpecialtyCode</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team Code</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>CCR Community Clinics</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: List of All Community Clinics to be used by User Attribute to get Clinics assigned to the Clinician</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>ClinicName</order-by>
		<query-string>SELECT [ClinicID] &#xD;
      ,[ClinicName] &#xD;
      ,[Facility]&#xD;
FROM dbo.[Orion_CWSClinics]&#xD;
WHERE 1=1&#xD;
&#xD;
&lt;%if get("ClinicCode")%&gt;&#xD;
 AND clinicId like '%&lt;%=get("ClinicCode")%&gt;%'   &#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("ClinicName")%&gt;&#xD;
 AND ClinicName like '%&lt;%=get("ClinicName")%&gt;%'   &#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>ClinicCode</name>
				<index>0</index>
				<default-value />
				<display-name>Clinic Code</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ClinicName</name>
				<index>1</index>
				<default-value />
				<display-name>Clinic Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Clinic Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinic Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>CCR Contacts - List of contacts</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Search for Contacts since mid 2012&#xD;
&#xD;
and cc.ClinicianID = '&lt;%=User.getAttribute("ACTPAS","ActpasUsername")%&gt;'</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>cc.StartDateTime desc</order-by>
		<query-string>SELECT cc.PatientId&#xD;
  , COALESCE (' ' + UPPER(cpat.familyname), '') +', '+ COALESCE ( cpat.givenname, '')  AS Name &#xD;
  , cc.contactID&#xD;
  , cc.ContactType&#xD;
  , cc.StartDateTime&#xD;
  , cc.endDatetime&#xD;
  , Duration&#xD;
  , Status&#xD;
  , COALESCE (c1.title, '') + COALESCE (' ' + c1.givenname, '') + COALESCE (' ' + UPPER(c1.familyname), '') AS clinician&#xD;
  , outcome&#xD;
  , cs.Specialty as speciality&#xD;
  ,c1.ClinicianID&#xD;
  ,cst.CODE&#xD;
  ,cst.DESCRIPTION&#xD;
  ,cst.teamType&#xD;
   FROM dbo.Orion_CWSCurrentContacts cc WITH(NOLOCK) -- CCR-101 &#xD;
INNER JOIN orion_patientDemographicsMini cpat WITH(NOLOCK) ON cpat.patientID=cc.patientID&#xD;
INNER JOIN Orion_CWSCurrentClinicians c1 WITH(NOLOCK) ON cc.ClinicianID = c1.clinicianID&#xD;
INNER JOIN Orion_CWSClinicians c WITH(NOLOCK) ON c.ClinicianID = c1.clinicianID&#xD;
LEFT OUTER JOIN  Orion_CWSCliniciansSpecialty cs WITH(NOLOCK) ON c.PROCA_REFNO = cs.PROCA_REFNO &#xD;
LEFT OUTER JOIN  orion_CWSClinicianStaffTeams st WITH(NOLOCK) ON st.PROCA_REFNO = c.PROCA_REFNO &#xD;
LEFT OUTER JOIN Orion_CWSStaffTeams cst WITH(NOLOCK) ON st.staffTeamID = cst.staffTeamID&#xD;
&#xD;
WHERE cc.outcome != 'Cancelled' AND cc.Status != 'Cancelled'&#xD;
  AND (cc.StartDateTime  &lt;= DATEADD(d, 7, CONVERT(datetime, CONVERT(varchar, GETDATE(), 103), 103)))&#xD;
&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
  AND  cc.PatientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if User.getAttribute("Community", "ACTPAS Clinician ID") &lt;&gt; "" %&gt;&#xD;
  AND cc.ClinicianID IN ('&lt;%=AppVars.get("CCR Clinician ID")%&gt;')&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if User.getAttribute("Community", "ACTPAS Speciality") &lt;&gt; "" %&gt;&#xD;
  AND cs.SpecialtyCode IN ('&lt;%=AppVars.get("CCR Specialty")%&gt;')&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if User.getAttribute("Community", "ACTPAS Staff Team") &lt;&gt; "" %&gt;&#xD;
  AND cst.CODE IN ( '&lt;%=AppVars.get("CCR Staff Team")%&gt;' )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;SCRIPT&gt;&#xD;
function validate( params ) {&#xD;
    // Validate Filter Fields Here&#xD;
    if (document.all.item( 'attribute.MRN' ).value == "" &amp;&amp; document.all.item( 'attribute.Clinician' ).value == "" &amp;&amp; document.all.item( 'attribute.Outpatient Clinic' ).value == "" &amp;&amp; document.all.item( 'attribute.Appointment Date' ).value == "" ) {&#xD;
        alert("Please include either an MRN, Clinician, Outpatient Clinic or Appointment Date in your search, and try again.");&#xD;
        return false;&#xD;
    }&#xD;
    return true;&#xD;
}&#xD;
&lt;/SCRIPT&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>true</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>URN</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Contact Id</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Contact Type</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Start Date</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>End Date</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Duration</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Outcome</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Modified By</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team Description</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team Type</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>CCR Contacts - List of contacts (maximised)</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Search for Contacts since mid 2012&#xD;
&#xD;
and cc.ClinicianID = '&lt;%=User.getAttribute("ACTPAS","ActpasUsername")%&gt;'</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>cc.StartDateTime desc</order-by>
		<query-string>SELECT DISTINCT cc.PatientId,&#xD;
 COALESCE (' ' + UPPER(cpat.familyname), '') +', '+ COALESCE ( cpat.givenname, '')  AS Name,&#xD;
cpat.familyname,&#xD;
cpat.middleInitialOrName,&#xD;
cpat.givenname, &#xD;
cpat.sex,&#xD;
cpat.dateTimeOfBirth,&#xD;
cc.contactID,&#xD;
cc.ContactType,&#xD;
cc.StartDateTime,&#xD;
cc.endDatetime,&#xD;
Duration,&#xD;
Status,&#xD;
COALESCE (c1.title, '') + COALESCE (' ' + c1.givenname, '') + COALESCE (' ' + UPPER(c1.familyname), '') AS clinician,&#xD;
outcome,&#xD;
'&lt;%=User.getAttribute("Community", "Service")%&gt; ' + LEFT(cs.SpecialtyCode, LEN(cs.SpecialtyCode) - 1) as speciality&#xD;
FROM dbo.Orion_CWSContacts cc&#xD;
INNER JOIN Orion_CWSPatientDemographics cpat ON cpat.patientID=cc.patientID &#xD;
INNER JOIN Orion_CWSClinicians c1 ON cc.ClinicianID = c1.clinicianID --AND cc.clinicianIDType = c1.clinicianIDType AND (cc.facility = c1.facility OR (cc.facility in ('ACTCC', 'DHHCC') AND c1.facility in ('ACTCC', 'DHHCC')))&#xD;
LEFT OUTER JOIN  Orion_CWSCliniciansSpecialty cs ON c1.ClinicianID = cs.ClinicianID &#xD;
&#xD;
&#xD;
WHERE 1=1 &#xD;
&lt;%if AppVars.get("patientURNList")%&gt;&#xD;
 AND  cc.PatientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;SCRIPT&gt;&#xD;
function validate( params ) {&#xD;
    // Validate Filter Fields Here&#xD;
    if (document.all.item( 'attribute.MRN' ).value == "" &amp;&amp; document.all.item( 'attribute.Clinician' ).value == "" &amp;&amp; document.all.item( 'attribute.Outpatient Clinic' ).value == "" &amp;&amp; document.all.item( 'attribute.Appointment Date' ).value == "" ) {&#xD;
        alert("Please include either an MRN, Clinician, Outpatient Clinic or Appointment Date in your search, and try again.");&#xD;
        return false;&#xD;
    }&#xD;
    return true;&#xD;
}&#xD;
&lt;/SCRIPT&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>true</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>MRN</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>Middle Name</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.middleInitialOrName</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.givenName</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>5</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value.equals("M")%&gt;  Male  &lt;%elseif value.equals("F")%&gt;  Female  &lt;%else%&gt;  Unknown  &lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Date of Birth (Age)</name>
				<index>6</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt; ( &lt;%=AgeFormat.format( value )%&gt; )</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Contact Id</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm" )%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Contact Type</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Start Date</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>End Date</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Duration</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Outcome</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>CCR GP Lookup</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>Clinician Popup Search over the community users that are local to the users attributes.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>1 ASC</order-by>
		<query-string>SELECT [ClinicianId]&#xD;
      ,[ClinicianIdType]&#xD;
      ,[RoleType]&#xD;
      ,[Surname]&#xD;
      ,[FirstGivenName]&#xD;
      ,[FirstGivenName]+', '+ UPPER([Surname]) as Name&#xD;
      ,[Title]&#xD;
      ,[ClinicId]&#xD;
      ,[ClinicName]&#xD;
      ,[AddressLine1]&#xD;
      ,[AddressLine2]&#xD;
      ,[City]&#xD;
      ,[State]&#xD;
      ,[PostCode]&#xD;
      ,[Email]&#xD;
      ,[Phone]&#xD;
      ,[Fax]&#xD;
      ,[HealthLinkMailbox]&#xD;
FROM [dbo].[Orion_CWSGPLookup]&#xD;
&#xD;
&#xD;
WHERE 1=1&#xD;
        &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
         AND FirstGivenName LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
       &lt;%end if%&gt;  &#xD;
         &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
          AND UPPER(Surname)   LIKE  UPPER('%&lt;%=get("Name.Family Name")%&gt;%')&#xD;
        &lt;%end if%&gt;  &#xD;
         &lt;%if get("ClinicianId") &lt;&gt; ""%&gt;  &#xD;
          AND ClinicianId  LIKE  UPPER('%&lt;%=get("ClinicianId")%&gt;%')&#xD;
        &lt;%end if%&gt;  &#xD;
         &lt;%if get("HealthLinkMailbox") = "Y"%&gt;  &#xD;
          AND HealthLinkMailbox  IS NOT NULL AND HealthLinkMailbox != ''&#xD;
        &lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>ClinicianId</name>
				<index>0</index>
				<default-value />
				<display-name>ClinicianId</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>1</index>
				<default-value />
				<display-name>Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>HealthLinkMailbox</name>
				<index>2</index>
				<default-value>Y</default-value>
				<display-name>HealthLinkMailbox</display-name>
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Y", "")%&gt;&lt;%exec config.setDefaultValue("Y")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Provider</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>0</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>1</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>2</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>3</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>4</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>5</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>6</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>7</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>8</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>9</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>10</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>11</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>12</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>13</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>14</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>15</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>16</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>17</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>true</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>CCR Location Search</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Selectable list of locations to limit the Appointments windowlet.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT clinicId, clinicname, service_code&#xD;
FROM Orion_CWSClinics&#xD;
WHERE 1=1&#xD;
&lt;% if User.getAttribute("Community", "CommunitySpeciality") &lt;&gt; "" %&gt;&#xD;
	AND clinicspecialty = ('&lt;%=User.getAttribute("Community", "CommunitySpeciality")%&gt;')&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
&lt;%if get("Unit") &lt;&gt; ""%&gt; &#xD;
    AND ClinicName LIKE '%&lt;%=get("Unit")%&gt;%' &#xD;
&lt;%end if%&gt; &#xD;
&lt;%if get("Specialty") &lt;&gt; ""%&gt; &#xD;
    AND service_code LIKE '%&lt;%=get("Specialty")%&gt;%' &#xD;
&lt;%end if%&gt;&#xD;
ORDER BY ClinicName</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Unit</name>
				<index>0</index>
				<default-value />
				<display-name>Ward/Location</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("40")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>1</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Ward/Location</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>CCR My Selected Locations</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Selectable list of locations to populate the Locations field when setting user attributes and used in the Appointments Windowlet</description>
		<escape-quote-as>"</escape-quote-as>
		<order-by />
		<query-string>SELECT clinicId, clinicname&#xD;
FROM Orion_CWSClinics&#xD;
WHERE 1=1&#xD;
&#xD;
&lt;% if User.getAttribute("Community", "My Locations") &lt;&gt; "" %&gt;&#xD;
	AND clinicId IN ('&lt;%=User.getAttribute("Community", "My Locations").replace(";", "','")%&gt;')&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
ORDER BY clinicId</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ClinicName</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>CCR Patient Contacts</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Search to return patient contacts to be displayed in patient summary windowlet</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>cc.StartDateTime asc</order-by>
		<query-string>select&#xD;
cc.ContactId as Contact&#xD;
, cc.StartDateTime as [Date]&#xD;
, cc.Facility as Location&#xD;
, cc.ContactType as ContactType&#xD;
, cc.referralID as Referral&#xD;
, COALESCE (c1.title, '') + COALESCE (' ' + c1.givenname, '') + COALESCE (' ' + UPPER(c1.familyname), '') AS clinician&#xD;
FROM Orion_CWSContacts cc&#xD;
LEFT JOIN dbo.Orion_CWSClinicians c1&#xD;
	on cc.ClinicianID = c1.ClinicianID&#xD;
Where 1=1&#xD;
&lt;%if AppVars.get("patientURNList") &lt;&gt;""%&gt; ""%&gt;&#xD;
AND cc.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
&#xD;
and cc.StartDateTime &gt;= getDate()</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Add Planned Contact</name>
				<index>0</index>
				<action>var app = new Application('Community', 'Patient Referrals Contact');&#xD;
concerto.openApplicationInModalDialog(app, 200, 700);&#xD;
//concerto.openApplication(app);&#xD;
submitFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>10</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Actualise</name>
				<index>0</index>
				<action>var url = "/concerto/ApplicationRedirector.htm?applicationName=Community&amp;entryPointName=MKM+Message";&#xD;
var scriptName = "ContextEngine ActualiseContact";&#xD;
&#xD;
url += "&amp;ScriptName=" + scriptName;&#xD;
var rowDate = row.get(1);&#xD;
&#xD;
var year = rowDate.substr(0,4);&#xD;
var month = rowDate.substr(4,2);&#xD;
var day = rowDate.substr(6,2);&#xD;
var time = rowDate.substr(8,4);&#xD;
rowDate= day + "/" + month + "/" + year;&#xD;
url += "&amp;ContactDate=" + rowDate;&#xD;
url += "&amp;ContactTime=" + time.substr(0,2) + ":" + time.substr(2,2);&#xD;
var app = new Application("Community", "MKM Message");&#xD;
app.addQueryParameter("ScriptName", scriptName);&#xD;
app.addQueryParameter("ContactDate", rowDate);&#xD;
app.addQueryParameter("ContactTime", time.substr(0,2) + ":" + time.substr(2,2) );&#xD;
app.addQueryParameter("Source", "ClinicList");&#xD;
concerto.openApplicationInModalDialog( app, 200, 500);&#xD;
parent.frames[0].submitFilter();&#xD;
&#xD;
//alert(url);&#xD;
//document.location.replace(url);</action>
				<css-class>Select</css-class>
				<style>Select</style>
			</result-action>
			<result-column>
				<name>ContactId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date/Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ""%&gt;&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy HH:mm")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Location</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Type</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>CCR Referrals - List of referrals</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Find all ACTPAS Referrals.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT RecievedDate,&#xD;
	Priority,&#xD;
	cref.referralId as referralId,&#xD;
	ExpiryDate,&#xD;
	ReferredToTeam,&#xD;
	ReferredtoSpecialty,&#xD;
	COALESCE (c1.title, '') + COALESCE (' ' + c1.givenname, '') + COALESCE (' ' + UPPER(c1.familyname), '') AS clinician,&#xD;
	ReferredByID,&#xD;
	CompletedDate,&#xD;
	CancelledDate,&#xD;
	ReferralType,&#xD;
	comment,&#xD;
       cref.LastModifiedBy&#xD;
FROM dbo.[Orion_CWSCommunityReferrals] cref&#xD;
 INNER JOIN dbo.Orion_PatientDemographicsMini cpat ON cref.PatientId = cpat.patientID&#xD;
 INNER JOIN dbo.Orion_Clinicians c1 ON cref.ReferredToClinicianID = c1.ClinicianID &#xD;
WHERE  1=1 &#xD;
AND cpat.patientID IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
AND cref.CompletedDate is null&#xD;
AND LastModifiedBy != 'WEBSRV'&#xD;
ORDER BY RecievedDate DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=DateFormat.format(value, "dd-MMM-yyyy")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ACTPAS ID</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Expiry Date</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ""%&gt;&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred To Clinician</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred By</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Completed Date</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ""%&gt;&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Cancelled Date</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ""%&gt;&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Type</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Modified By</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action>var url = '/tasklist/api/PathwayEnrollment.action?'&#xD;
	  + '_eventName=enroll'&#xD;
	  + '&amp;pathwayId=Appointment Pathway'&#xD;
	  + '&amp;patientId=' + row.get(1)&#xD;
	  + '&amp;patientNamespace=MRN';&#xD;
	&#xD;
var infusionGroupApplication = new Application("Task List","AutoEnrol Patient");&#xD;
infusionGroupApplication.addQueryParameter("patientId", row.get(1));&#xD;
infusionGroupApplication.setSecureInformationToken(row.getSecureInformationToken())&#xD;
concerto.openApplication(infusionGroupApplication);&#xD;
&#xD;
&#xD;
//location.replace(url);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>CCR Specialty Search</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS specialty list</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT DISTINCT [SpecialtyCode], [Specialty], [SpecialtyCode] as spcode, [Specialty] as spDesc&#xD;
&#xD;
FROM [dbo].[Orion_CWSCliniciansSpecialty]&#xD;
WHERE 1=1 &#xD;
&lt;%if get("Name") &lt;&gt; ""%&gt; &#xD;
    AND UPPER(Specialty) LIKE UPPER('%&lt;%=get("Name")%&gt;%')&#xD;
&lt;%end if%&gt; &#xD;
&#xD;
&lt;%if get("Code") &lt;&gt; ""%&gt; &#xD;
    AND UPPER(SpecialtyCode) LIKE UPPER('%&lt;%=get("Code")%&gt;%')&#xD;
&lt;%end if%&gt; &#xD;
&#xD;
ORDER BY Specialty ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Code</name>
				<index>0</index>
				<default-value />
				<display-name>Specialty Code</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>1</index>
				<default-value />
				<display-name>Specialty Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Description</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>receiverCode</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>receiverCodingSystem</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>CCR Staff Team</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Selectable list of locations to populate the Locations field when setting user attributes and used in the Appointments Windowlet</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT DISTINCT [CODE], [DESCRIPTION], [facility] &#xD;
FROM dbo.Orion_CWSStaffTeams&#xD;
&#xD;
WHERE 1=1&#xD;
&lt;% if get("Staff Code") &lt;&gt; "" %&gt;&#xD;
	AND Code = '&lt;%=get("Staff Code")%&gt;'&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
&lt;% if get("Staff Team") &lt;&gt; "" %&gt;&#xD;
	AND UPPER(Description) LIKE UPPER('%&lt;%=get("Staff Team")%&gt;%')&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
ORDER BY Code ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Staff Code</name>
				<index>0</index>
				<default-value />
				<display-name>Staff Code</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Staff Team</name>
				<index>1</index>
				<default-value />
				<display-name>Staff Team</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Staff Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>CCR Staff and Specialty Search</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>ACTPAS_CDR_VIEWS: Selectable list of locations to populate the Locations field when setting user attributes and used in the Appointments Windowlet</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT * FROM (&#xD;
SELECT DISTINCT &#xD;
specialtyLink.SpecialtyCode as SpCode&#xD;
,specialtyLink.Specialty as Specialty&#xD;
,st.[CODE] as stcode&#xD;
,st.[DESCRIPTION] as stdescription&#xD;
FROM  dbo.Orion_CWSCliniciansSpecialty specialtyLink   &#xD;
 &#xD;
LEFT OUTER JOIN [dbo].[orion_CWSCurrentClinicianStaffTeams] cst ON cst.PROCA_REFNO = specialtyLink.PROCA_REFNO &#xD;
LEFT OUTER JOIN [dbo].[Orion_CWSStaffTeams] st ON cst.[staffTeamID] = st.[staffTeamID]&#xD;
) as results&#xD;
&#xD;
WHERE 1=1&#xD;
&lt;% if get("Staff Code") &lt;&gt; "" %&gt;&#xD;
	AND results.stcode = '&lt;%=get("Staff Code")%&gt;'&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
&lt;% if get("Staff Team") &lt;&gt; "" %&gt;&#xD;
	AND UPPER(results.stdescription ) LIKE UPPER('%&lt;%=get("Staff Team")%&gt;%')&#xD;
&lt;%end if%&gt;&#xD;
&lt;% if get("Specialty Code") &lt;&gt; "" %&gt;&#xD;
	AND UPPER(results.SpCode) LIKE UPPER('%&lt;%=get("Specialty Code")%&gt;%')&#xD;
&lt;%end if%&gt;&#xD;
&lt;% if get("Specialty Description") &lt;&gt; "" %&gt;&#xD;
	AND UPPER(results.Specialty) LIKE UPPER('%&lt;%=get("Specialty Description")%&gt;%')&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
ORDER BY results.SpCode ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Staff Code</name>
				<index>0</index>
				<default-value />
				<display-name>Staff Code</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Staff Team</name>
				<index>1</index>
				<default-value />
				<display-name>Staff Team</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Specialty Code</name>
				<index>2</index>
				<default-value />
				<display-name>Specialty Code</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Specialty Description</name>
				<index>3</index>
				<default-value />
				<display-name>Specialty Description</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Specialty Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty Description</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Code</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Description</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Community User Search</name>
		<data-source-name>java:comp/env/jdbc/concerto/Concerto</data-source-name>
		<description>CLINICAL PORTAL VIEW: Search for Concerto users in the Concerto database.  The default application is "User Details".&#xD;
	Allows the administrator to filter by user ID, group membership, name or e-mail. The administrator can enter the first parts of the a user's name (for instance "J B" will match "Joe Bloggs") and any part of the user's email address ("@hospitalX.com" will match "joe.bloggs@hospitalX.com")&#xD;
	Returns the user's ID, fullname (made up of the given and family name, family name first), family name, given names, email and description. &#xD;
	The user's ID, fullname (if non-empty), email address as a clickable mailto: link and description are displayed in the results. The users family name and given names are not displayed.&#xD;
	The user ID, family name, given name, email and description are put in the [orionhealth.com]User subject.&#xD;
	The search is run automatically upon opening and a maximum of 15 rows are displayed at a time.&#xD;
	The administrator can delete user that are displayed and can add users by clicking on the custom "Add" button in the filter.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT cu.name,&#xD;
	CONVERT( nvarchar(128), familyName.cValue ) + ', ' + CONVERT( nvarchar(128), givenName.cValue ),&#xD;
	CONVERT( nvarchar(128), familyName.cValue ),&#xD;
	CONVERT( nvarchar(128), givenName.cValue ),&#xD;
	'',&#xD;
	CONVERT( nvarchar(128), description.cValue ), &#xD;
         '&lt;%=AppVars.userNamespace%&gt;' as userNamespace&#xD;
          ,cu.deleted&#xD;
FROM cUser cu&#xD;
	LEFT OUTER JOIN UserAttribute familyName ON &#xD;
		(cu.uniqueId = familyName.cUser AND familyName.name = 'Full Name.Family Name' AND familyName.cGroup =&#xD;
			(SELECT cGroup.uniqueId from cGroup where cGroup.name = 'Users')&#xD;
		)&#xD;
	LEFT OUTER JOIN UserAttribute givenName ON &#xD;
		(cu.uniqueId = givenName.cUser AND givenName.name = 'Full Name.Given Name(s)' AND givenName.cGroup =&#xD;
			(SELECT cGroup.uniqueId from cGroup where cGroup.name = 'Users')&#xD;
		)&#xD;
	LEFT OUTER JOIN UserAttribute description ON &#xD;
		(cu.uniqueId = description.cUser AND description.name = 'Description' AND description.cGroup =&#xD;
			(SELECT cGroup.uniqueId from cGroup where cGroup.name = 'Users')&#xD;
		) &#xD;
	JOIN ( SELECT cUser.uniqueID as uniqueID&#xD;
		FROM cUser, cGroup, GroupMembership&#xD;
		WHERE cUser.uniqueID = GroupMembership.cUser&#xD;
			AND cGroup.uniqueID = GroupMembership.cGroup&#xD;
			--AND cGroup.name = 'Community'&#xD;
		UNION SELECT cUser.uniqueID&#xD;
		FROM cUser, Role, RoleMembership, GroupRole, cGroup&#xD;
		WHERE cUser.uniqueID = RoleMembership.cUser&#xD;
			AND Role.uniqueID = RoleMembership.role&#xD;
			AND Role.uniqueID = GroupRole.role&#xD;
			AND cGroup.uniqueID = GroupRole.cGroup&#xD;
			--AND cGroup.name = 'Community' &#xD;
) groupMembers ON (cu.uniqueId = groupMembers.uniqueID) &#xD;
WHERE cu.name LIKE N'&lt;%=get("User ID")%&gt;%'&#xD;
	&lt;%if get("Full Name.Family Name") &lt;&gt; ""%&gt;AND familyName.cValue LIKE N'&lt;%=get("Full Name.Family Name")%&gt;%'&lt;%end if%&gt;&#xD;
	&lt;%if get("Full Name.Given Name(s)") &lt;&gt; ""%&gt;AND givenName.cValue LIKE N'&lt;%=get("Full Name.Given Name(s)")%&gt;%'&lt;%end if%&gt; &#xD;
 AND (cu.deleted is null OR cu.deleted = 0)</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>Community User Search</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class />
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class />
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>User ID</name>
				<index>0</index>
				<default-value />
				<display-name>User ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Full Name</name>
				<index>1</index>
				<default-value />
				<display-name>Full Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name(s)")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<sticky-search>false</sticky-search>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<default-context-view-entry-point>
				<context-view>
					<name>Concerto User</name>
				</context-view>
				<entry-point>
					<name>User Details</name>
					<application>
						<name>Concerto</name>
					</application>
					<secure-enabled>false</secure-enabled>
				</entry-point>
			</default-context-view-entry-point>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url />
				<maximum-rows-per-page>100</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style>&lt;%if row.end.originalValue != 0 &amp;&amp; row.end.originalValue != null%&gt;text-decoration: line-through&lt;%end if%&gt;</style>
				<subject-item-name>[orionhealth.com]User.Id.UserId</subject-item-name>
			</result-column>
			<result-column>
				<name>Full Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ", "%&gt;&lt;%=(html)value%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName</subject-item-name>
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name(s)</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName.givenName</subject-item-name>
			</result-column>
			<result-column>
				<name>E-mail</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if Request.getServletPath().endsWith( ".htm" )%&gt;&lt;A href="mailto:&lt;%=(html)value%&gt;"&gt;&lt;%=(html)value%&gt;&lt;/A&gt;&lt;%  else%&gt;&lt;%=value%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Description</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>userNamespace</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Deleted</name>
				<index>7</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<shortcut>
				<context-view-entry-point>
					<context-view>
						<name>Concerto User</name>
					</context-view>
					<entry-point>
						<name>User Details</name>
						<application>
							<name>Concerto</name>
						</application>
						<secure-enabled>false</secure-enabled>
					</entry-point>
				</context-view-entry-point>
			</shortcut>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<system-object>false</system-object>
	<windowlet>
		<name>ACTPAS</name>
		<minimized-entry-point>
			<name>Patient Context Switch</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Adverse Reactions &amp; Alerts</name>
		<minimized-entry-point>
			<name>CCR ACTPAS - Allergies &amp; Alerts</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Appointments Booked Homepage</name>
		<maximized-entry-point>
			<name>CCR Clinician Appointments_max</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>CCR Clinician Appointments</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Care Providers (ACTPAS)</name>
		<minimized-entry-point>
			<name>CCR ACTPAS - Allergies &amp; Alerts</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>My Appointments Booked (ACTPAS)</name>
		<maximized-entry-point>
			<name>CCR Clinician Appointments_max</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>CCR Clinician Appointments</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>My Contacts (ACTPAS)</name>
		<maximized-entry-point>
			<name>CCR Contacts - List contacts (maximised)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>CCR Contacts - List contacts</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Referrals (ACTPAS)</name>
		<minimized-entry-point>
			<name>Referrals (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>Healthcare pathways - CCR Referrals</name>
	<access-controller>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>Minor Patient Identifiers</name>
		<protected>false</protected>
		<value>&lt;%=Context.get("Patient.Id.Alternate")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>PlatformBase</name>
		<protected>false</protected>
		<value>/cws</value>
	</application-variable>
	<application-variable>
		<name>Referral Consumed SOAP Service</name>
		<protected>false</protected>
		<value>ReferralConsumedSoapService</value>
	</application-variable>
	<application-variable>
		<name>Referral WSDL URL</name>
		<protected>false</protected>
		<value>/cws/ws/ReferralSOAPService?wsdl</value>
	</application-variable>
	<application-variable>
		<name>SMTdocumentDB</name>
		<protected>false</protected>
		<value>CDRPROD</value>
	</application-variable>
	<application-variable>
		<name>ServerBase</name>
		<protected>false</protected>
		<value>/cws/referrals;securityDomain=&lt;%=AppVars.securityDomain%&gt;</value>
	</application-variable>
	<application-variable>
		<name>applicationName</name>
		<protected>false</protected>
		<value>Healthcare pathways - CCR Referrals</value>
	</application-variable>
	<application-variable>
		<name>clinicalDbType</name>
		<protected>false</protected>
		<value>sql</value>
	</application-variable>
	<application-variable>
		<name>concertoHome</name>
		<protected>false</protected>
		<value>/concerto</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>REF</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>3.0</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>db_ACTPAS</name>
		<protected>false</protected>
		<value>ACTPAS_CDR_VIEWS.dbo.orion_patientDemographicsMini</value>
	</application-variable>
	<application-variable>
		<name>db_CWSClinical</name>
		<protected>false</protected>
		<value>OH_CM_clinical</value>
	</application-variable>
	<application-variable>
		<name>db_CWSCustom</name>
		<protected>false</protected>
		<value>OH_CM_Custom</value>
	</application-variable>
	<application-variable>
		<name>db_CWSRepository</name>
		<protected>false</protected>
		<value>OH_CM_cRepository</value>
	</application-variable>
	<application-variable>
		<name>db_CWSTask</name>
		<protected>false</protected>
		<value>OH_CM_Task</value>
	</application-variable>
	<application-variable>
		<name>db_CWS_ClinicalPortal</name>
		<protected>false</protected>
		<value>OH_CP_ClinicalPortal</value>
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>internalConcertoHome</name>
		<protected>false</protected>
		<value>/concerto</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation %&gt;&lt;%=SecureInformation.get("Patient ID")%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>patientURNList</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.("Patient ID")%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;% var minorids = AppVars.get("Minor Patient Identifiers").split(";")%&gt;&lt;%for each token in minorids%&gt;&lt;%if token &lt;&gt; ""%&gt;,&lt;%=token%&gt;&lt;%end if%&gt;&lt;%end for%&gt;</value>
	</application-variable>
	<application-variable>
		<name>referralId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation.get("Referral ID")&lt;&gt; ""%&gt;&lt;%=SecureInformation.get("Referral ID")%&gt;&lt;%elseif Context.get("[orionhealth.com]Referral.Id.ReferralId")&lt;&gt; ""%&gt;&lt;%=Context.get("[orionhealth.com]Referral.Id.ReferralId")%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>referralViewAccess</name>
		<protected>false</protected>
		<value>&lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health")%&gt;clptl_intake&lt;%elseif User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health")%&gt;clptl_chilevel2&lt;%elseif User.hasRole("ClPtl_CommunityAlliedHealth") || User.hasRole("Apps_ClPtl_CommunityAlliedHealth_IAM_Health")%&gt;clptl_communityalliedhealth&lt;%elseif User.hasRole("ClPtl_CNTeamleader") || User.hasRole("Apps_ClPtl_CNTeamleader_IAM_Health") %&gt;clptl_cnteamleader&lt;%elseif User.hasRole("ClPtl_CommunityClinician") || User.hasRole("Apps_ClPtl_CommunityClinician_IAM_Health")%&gt;clptl_communityclinician&lt;%elseif User.hasRole("ClPtl_CommunityHealthCentreAdmin")|| User.hasRole("Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health")%&gt;clptl_communityhealthcentreadmin&lt;%elseif User.hasRole("ClPtl_WiCNurse")|| User.hasRole("Apps_ClPtl_WiCNurse_IAM_Health")%&gt;clptl_wicnurse&lt;%else%&gt;clptl_viewonly&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>requestInfoCode</name>
		<protected>false</protected>
		<value>Requestinginformation</value>
	</application-variable>
	<application-variable>
		<name>requestInfoCodingSystem</name>
		<protected>false</protected>
		<value>Orion</value>
	</application-variable>
	<application-variable>
		<name>securityDomain</name>
		<protected>false</protected>
		<value>forms</value>
	</application-variable>
	<application-variable>
		<name>viewId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation.get("View ID")&lt;&gt; ""%&gt;&#xD;
  &lt;%=SecureInformation.get("View ID")%&gt;&#xD;
&lt;%elseif Context.get("[orionhealth.com]Referral.Co.ViewId") &lt;&gt; ""%&gt;&#xD;
  &lt;%=Context.get("[orionhealth.com]Referral.Co.ViewId")%&gt;&#xD;
&lt;%end if%&gt;</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;ReferralsHome</url>
	</default-help-redirection>
	<description>::CCR:: Referrals Application - Contains all Clinical Referral worklists.</description>
	<document-repository>
		<name>Referrals Repository - Drafts</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<default-image-url />
		<description>Document repository for Referrals.</description>
		<display-control-bar>false</display-control-bar>
		<display-control-bar-title>true</display-control-bar-title>
		<document-control-bar-button>
			<name>Print</name>
			<index>0</index>
			<action>cdvDocument.print();</action>
			<disable />
			<display>true</display>
			<display-name>Print</display-name>
		</document-control-bar-button>
		<entry-point>
			<name>Open Internal Referral Request</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name>Community Documents</parent-folder-name>
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>Author</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>Patient ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>Patient ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>Namespace</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>Namespace</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.columnName</name>
			<value>identifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.name</name>
			<value>Referral ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.columnName</name>
			<value>identifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.name</name>
			<value>documentID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.columnName</name>
			<value>identifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.name</name>
			<value>Referral Request ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/cwsclinical</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>receivedDate</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>identifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value>Service</value>
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value>SELECT &#xD;
  rr.modelDataId "documentId",&#xD;
  '' AS Namespace,&#xD;
  rr.modelIdentifier  as "modelId",&#xD;
  'Clinical Referrals' AS "Title", &#xD;
  CONVERT(varchar,ref.receivedDate, 121) as receivedDate, &#xD;
  'CHHS Referral' +' - '+ rr.status as "SubTitle",&#xD;
  'Referral' as "Pathway",    &#xD;
  'Referral' +' - '+ rr.status AS "Category",&#xD;
  'Referral' +' '+ CONVERT(varchar(20),ref.receivedDate, 113)  AS "SubCategory",&#xD;
  null as "Service",&#xD;
  rr.submitterIdentifier AS Author,&#xD;
  rr.status as "Status",&#xD;
  rr.referralRequestId AS identifier ,&#xD;
 rr.patientId as "Patient ID"&#xD;
 FROM &lt;%=AppVars.db_CWSClinical%&gt;.RefRequest.ERF_ReferralRequestView rr&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.referralRequestId = rr.referralRequestId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
--LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Codeset.CodeDefinition scd ON scd.code = rr.status   &#xD;
WHERE status = 'DRAFT'  &#xD;
AND ref.identifier = '&lt;%=(js)documentID%&gt;'</value>
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>SELECT DISTINCT * FROM ( &#xD;
--For Draft Referrals.&#xD;
SELECT &#xD;
  rr.modelDataId "documentId",&#xD;
  '' AS Namespace,&#xD;
  rr.modelIdentifier  as "modelId",&#xD;
  'CHHS Referrals' +' - '+ rr.status AS "Title", &#xD;
  CONVERT(varchar,ISNULL(refmeta.eventDate,ref.receivedDate ), 121) as receivedDate, &#xD;
  'CHHS Referral' as "SubTitle",&#xD;
  'Clinical Referrals' as "Pathway",    &#xD;
  'Clinical Referrals'  AS "Category",&#xD;
  'Clinical Referrals' +' '+ CONVERT(varchar(20),ref.receivedDate, 113)  AS "SubCategory",&#xD;
  null as "Service",&#xD;
  rr.submitterIdentifier AS Author,&#xD;
  rr.status as "Status",&#xD;
  rr.referralRequestId AS identifier ,&#xD;
 rr.patientId as "Patient ID"&#xD;
 FROM &lt;%=AppVars.db_CWSClinical%&gt;.RefRequest.ERF_ReferralRequestView rr&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.referralRequestId = rr.referralRequestId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
--LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Codeset.CodeDefinition scd ON scd.code = rr.status   &#xD;
WHERE status = 'DRAFT'&#xD;
&#xD;
&#xD;
) as results&#xD;
&#xD;
WHERE&#xD;
&#xD;
results."Patient ID" IN ( &lt;%=AppVars.get("patientURNList")%&gt; )</value>
		</repository-parameter>
		<repository-parameter>
			<name>statusColumnName</name>
			<value>Status</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>SubCatagory</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Title</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>identifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>true</value>
		</repository-parameter>
	</document-repository>
	<document-repository>
		<name>Referrals Repository - EoC</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<default-image-url />
		<description>Document repository for Referrals.</description>
		<display-control-bar>false</display-control-bar>
		<display-control-bar-title>true</display-control-bar-title>
		<document-control-bar-button>
			<name>Print</name>
			<index>0</index>
			<action>cdvDocument.print();</action>
			<disable />
			<display>true</display>
			<display-name>Print</display-name>
		</document-control-bar-button>
		<entry-point>
			<name>View Referral - CDV Tree View</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name>Community Documents</parent-folder-name>
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>Author</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>Patient ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>Patient ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>Namespace</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>Namespace</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.columnName</name>
			<value>identifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.name</name>
			<value>Referral ID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.columnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.name</name>
			<value>documentID</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/cwsclinical</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>receivedDate</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>identifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value>Service</value>
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value>SELECT DISTINCT &#xD;
 refmeta.dataId as "documentId", &#xD;
 'Referrals Repository - EoC' AS Namespace,&#xD;
  refmeta.modelId  as "modelId",&#xD;
  TITLE_VX#6G   as "Title",&#xD;
   ISNULL(refMeta.eventDate,ref.receivedDate ) as receivedDate, &#xD;
  TITLE_VX#6G as "SubTitle",&#xD;
  pe.pathwayIdentifier as "Pathway",  &#xD;
  pe.pathwayIdentifier +' '+ CONVERT(varchar(20),pe.enrollmentTime, 113)+' '+ CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN '(Closed)' ELSE '(Open)' END  as "Category",&#xD;
   SUBCATEGORY_GCJLK as "SubCategory",&#xD;
  SERVICE_5#LNM as "Service",&#xD;
  ref.submitterIdentifier AS Author,&#xD;
  STATUS_TDES0 as "Status", &#xD;
    ref.identifier AS "identifier",&#xD;
 ref.patientIdentifier as "Patient ID"&#xD;
FROM &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom %&gt;.dbo.ReferralToPathwayMapping map  ON pe.enrollmentIdentifier = map.pathway_enrollmentIdentifier&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.identifier = map.referral_identifier&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V_DOCUMENT document ON refmeta.dataId = document.documentIdentifier &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = document.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K  &#xD;
WHERE&#xD;
  &#xD;
ref.identifier = '&lt;%=(js)documentID%&gt;'&#xD;
&#xD;
UNION ALL &#xD;
SELECT &#xD;
  rr.modelDataId "documentId",&#xD;
  '' AS Namespace,&#xD;
  rr.modelIdentifier  as "modelId",&#xD;
  'Clinical Referrals' AS "Title", &#xD;
  CONVERT(varchar,ref.receivedDate, 121) as receivedDate, &#xD;
  'CHHS Referral' +' - '+ rr.status as "SubTitle",&#xD;
  'Referral' as "Pathway",    &#xD;
  'Referral' +' - '+ rr.status AS "Category",&#xD;
  'Referral' +' '+ CONVERT(varchar(20),ref.receivedDate, 113)  AS "SubCategory",&#xD;
  null as "Service",&#xD;
  rr.submitterIdentifier AS Author,&#xD;
  rr.status as "Status",&#xD;
  rr.referralRequestId AS identifier ,&#xD;
 rr.patientId as "Patient ID"&#xD;
 FROM &lt;%=AppVars.db_CWSClinical%&gt;.RefRequest.ERF_ReferralRequestView rr&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.referralRequestId = rr.referralRequestId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId &#xD;
WHERE status = 'DRAFT'  &#xD;
AND ref.identifier = '&lt;%=(js)documentID%&gt;'</value>
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>SELECT DISTINCT * FROM (&#xD;
    SELECT DISTINCT &#xD;
    refmeta.dataId as "documentId",&#xD;
    'Clinical Referrals' AS Namespace,&#xD;
    refmeta.modelId  as "modelId",&#xD;
    TITLE_VX#6G  +' - '+ scd.shortDescription as "Title",&#xD;
    ISNULL(refMeta.eventDate,r.receivedDate ) as receivedDate, &#xD;
    TITLE_VX#6G as "SubTitle",&#xD;
    (CASE &#xD;
      WHEN pathwayIdentifiers.PathwayType = 'SUB' THEN &#xD;
      (CASE &#xD;
        WHEN typeCode = 'BurnScald' THEN 'Burn or Scald Wound Pathway'&#xD;
        WHEN typeCode = 'FootUlcer' THEN 'Foot Ulcer Wound Pathway'  &#xD;
        WHEN typeCode = 'LegUlcer' THEN 'Leg Ulcer Wound Pathway'    &#xD;
        WHEN typeCode = 'Malignant' THEN 'Malignant Wound Pathway'   &#xD;
        WHEN typeCode = 'Other' THEN 'Other Wound Pathway'   &#xD;
        WHEN typeCode = 'PressureSores' THEN 'Pressure Injury Wound Pathway' &#xD;
        WHEN typeCode = 'SinusFistula' THEN 'Sinus / Fistula Wound Pathway'&#xD;
        WHEN typeCode = 'SkinTear' THEN 'Skin Tear Wound Pathway'&#xD;
        WHEN typeCode = 'Surgical' THEN 'Surgical Wound Pathway'&#xD;
        WHEN typeCode = 'BowelStoma' THEN 'Bowel Stoma Pathway'&#xD;
        WHEN typeCode = 'UrinaryStoma' THEN 'Urinary Stoma Pathway'&#xD;
        ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
      END)&#xD;
      ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
    END ) as  Pathway,    &#xD;
  CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN '(Closed)' ELSE '(Open)' END +' '+&#xD;
  (CASE &#xD;
      WHEN pathwayIdentifiers.PathwayType = 'SUB' THEN &#xD;
      (CASE &#xD;
        WHEN typeCode = 'BurnScald' THEN 'Burn or Scald Wound Pathway'&#xD;
        WHEN typeCode = 'FootUlcer' THEN 'Foot Ulcer Wound Pathway'  &#xD;
        WHEN typeCode = 'LegUlcer' THEN 'Leg Ulcer Wound Pathway'    &#xD;
        WHEN typeCode = 'Malignant' THEN 'Malignant Wound Pathway'   &#xD;
        WHEN typeCode = 'Other' THEN 'Other Wound Pathway'   &#xD;
        WHEN typeCode = 'PressureSores' THEN 'Pressure Injury Wound Pathway' &#xD;
        WHEN typeCode = 'SinusFistula' THEN 'Sinus / Fistula Wound Pathway'&#xD;
        WHEN typeCode = 'SkinTear' THEN 'Skin Tear Wound Pathway'&#xD;
        WHEN typeCode = 'Surgical' THEN 'Surgical Wound Pathway'&#xD;
        WHEN typeCode = 'BowelStoma' THEN 'Bowel Stoma Pathway'&#xD;
        WHEN typeCode = 'UrinaryStoma' THEN 'Urinary Stoma Pathway'&#xD;
        ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
      END)&#xD;
      ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
    END )  +' '+ CONVERT(varchar(20), ISNULL(refMeta.eventDate,r.receivedDate ) , 113)  as "Category", &#xD;
    SUBCATEGORY_GCJLK as "SubCategory",&#xD;
    SERVICE_5#LNM as "Service",&#xD;
    ref.submitterIdentifier AS Author,&#xD;
    STATUS_TDES0 as "Status",&#xD;
    ref.identifier AS "identifier",&#xD;
    ref.patientIdentifier as "Patient ID",&#xD;
    'true' as importance &#xD;
    FROM &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
    INNER JOIN Referral.ERF_ReferralView r ON pe.patientId = r.patientIdentifier  &#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem &#xD;
    INNER JOIN (  &#xD;
        SELECT DISTINCT psm.SubPathwayEnrolmentId as PathwayEnrolmentId,rtpm.referral_identifier, psm.SubEnrolmentStatus as pathway_status, 'SUB' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE psm.SubPathwayEnrolmentId IS NOT NULL&#xD;
        UNION ALL &#xD;
        SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
     rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
    ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier AND pathwayIdentifiers.referral_identifier = r.identifier&#xD;
 &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.identifier = pathwayIdentifiers.referral_identifier&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V_DOCUMENT document ON refmeta.dataId = document.documentIdentifier &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = document.documentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K  &#xD;
&#xD;
    UNION ALL&#xD;
&#xD;
    SELECT&#xD;
    refmeta.dataId as "documentId",&#xD;
    '' AS Namespace,&#xD;
    refmeta.modelId  as "modelId",&#xD;
    'CHHS Referral' +' - '+ scd.shortDescription AS "Title", &#xD;
    CONVERT(varchar,ISNULL(refMeta.eventDate,ref.receivedDate ), 121) as receivedDate, &#xD;
    'CHHS Referral' as "SubTitle",&#xD;
    'Referral' as "Pathway",    &#xD;
    'All Clinical Referrals' AS "Category",&#xD;
    'Referral' +' '+ CONVERT(varchar(20),ISNULL( refMeta.eventDate,ref.receivedDate ), 113)  AS "SubCategory",&#xD;
    null as "Service",&#xD;
    r.submitterIdentifier AS Author,&#xD;
    scd.shortDescription as "Status",&#xD;
    r.identifier AS identifier ,&#xD;
    ref.patientIdentifier as "Patient ID",&#xD;
    '' as importance &#xD;
    FROM &#xD;
    Referral.ERF_ReferralView AS r &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.identifier = r.identifier &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem &#xD;
    --WHERE  UPPER(scd.shortDescription) != 'ENROLLED' AND scd.shortDescription != 'Completed' AND scd.shortDescription != 'Discharged'&#xD;
) as results&#xD;
&#xD;
WHERE&#xD;
&#xD;
results."Patient ID" IN ( &lt;%=AppVars.get("patientURNList")%&gt; )</value>
		</repository-parameter>
		<repository-parameter>
			<name>statusColumnName</name>
			<value>Status</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>SubCatagory</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Title</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>identifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>true</value>
		</repository-parameter>
	</document-repository>
	<entry-point>
		<name>ACT Health</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Resource: ACT Health Website</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<url>http://health.act.gov.au/</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Assignee</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ManagingReferrals</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Specialty</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Service</name>
					<index>2</index>
					<value>&lt;%=Request.service%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Type</name>
					<index>3</index>
					<value>&lt;%=Request.type%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Current Assignee</name>
					<index>4</index>
					<value>CCR</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Action</name>
					<index>5</index>
					<value>&lt;%=Request.action%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.assigneeCode</name>
					<index>6</index>
					<value>&lt;%=Request.receiverCode %&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.assigneeCodingSystem</name>
					<index>7</index>
					<value>&lt;%=Request.receiverCodingSystem%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Assignee</name>
					<index>8</index>
					<value>&lt;%=Request.Specialty%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Citizens Advice Bureau</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Resource: ACT Citizens Advice Bureau</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<url>http://www.citizensadvice.org.au/</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Create Actpas Referral (Context)</name>
		<access-controller>
			<allowed-group>
				<name>Community</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Redirects to the search to create a new community / Acute referral. While this search can be accessed directly via the entrypoint in a document view the intended use is within the Clinical Referral ad-hoc workflow to retrieve / create a PAS ID and return this to be associated with the CWS Clinical Referral metadata</description>
		<display-name>Register Community Referral</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referral Search (ACTPAS)</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.RecvdDttm</name>
					<index>2</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "dd/MM/yyyy")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.URN</name>
					<index>3</index>
					<value>&lt;%=Context.Patient.Id.MRN%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientURNList%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>5</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Document link - View Referral by Id</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View a Referrals for a Patient, if a ReferralId is supplied as a query parameter then that specific referral will be opened, otherwise will be redirected nto the specified entry point, such as the "In Progress" referrals for the patient.</description>
		<display-name>Referrals</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ReferralDetails</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/concerto/configuredocumentcapture.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>referralId</name>
					<index>0</index>
					<value>&lt;%=Context.get("[orionhealth.com]Referral.Id.ReferralId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientURNList%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>2</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>viewId</name>
					<index>3</index>
					<value>&lt;%=Context.get("[orionhealth.com]Referral.Co.ViewId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>noReferralIdRedirect</name>
					<index>4</index>
					<value>&lt;%="Referrals for Patient"%&gt;</value>
				</query-parameter>
				<redirection-key>referrals</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/Referral.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Event Status (DischargeStatus)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>AUTO-OPEN Event Status Update opener.</description>
		<display-name>Discharge Plan</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Event Status Update Auto-Open)</value>
				</query-parameter>
				<query-parameter>
					<name>DocType</name>
					<index>2</index>
					<value>DISDOC</value>
				</query-parameter>
				<query-parameter>
					<name>EpisodeTypes</name>
					<index>3</index>
					<value>E', 'I</value>
				</query-parameter>
				<query-parameter>
					<name>DocTypeDesc</name>
					<index>4</index>
					<value>EDS</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>5</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>6</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Event Status List</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Opens Referral or DISDOC2</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Event Status Update)</value>
				</query-parameter>
				<query-parameter>
					<name>DocType</name>
					<index>2</index>
					<value>DISDOC</value>
				</query-parameter>
				<query-parameter>
					<name>EpisodeTypes</name>
					<index>3</index>
					<value>E', 'I</value>
				</query-parameter>
				<query-parameter>
					<name>DocTypeDesc</name>
					<index>4</index>
					<value>EDS</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>5</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>6</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Event Summary (Discharge)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Opens Referral or DISDOC2</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Event Summary Discharge)</value>
				</query-parameter>
				<query-parameter>
					<name>DocType</name>
					<index>2</index>
					<value>DISDOC2</value>
				</query-parameter>
				<query-parameter>
					<name>EpisodeTypes</name>
					<index>3</index>
					<value>E', 'I</value>
				</query-parameter>
				<query-parameter>
					<name>DocTypeDesc</name>
					<index>4</index>
					<value>EDS</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>5</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>6</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Event Summary (DischargeSummary)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>AUTO-OPEN Event Summary opener.</description>
		<display-name>Discharge Plan</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Event Summary Discharge Auto-Open)</value>
				</query-parameter>
				<query-parameter>
					<name>DocType</name>
					<index>2</index>
					<value>DISDOC2</value>
				</query-parameter>
				<query-parameter>
					<name>EpisodeTypes</name>
					<index>3</index>
					<value>E', 'I</value>
				</query-parameter>
				<query-parameter>
					<name>DocTypeDesc</name>
					<index>4</index>
					<value>EDS</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>5</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>6</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Event Summary List</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Opens Referral or DISDOC2</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Patient Context)</value>
				</query-parameter>
				<query-parameter>
					<name>DocType</name>
					<index>2</index>
					<value>COMDIS</value>
				</query-parameter>
				<query-parameter>
					<name>EpisodeTypes</name>
					<index>3</index>
					<value>E', 'I</value>
				</query-parameter>
				<query-parameter>
					<name>DocTypeDesc</name>
					<index>4</index>
					<value>EDS</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>5</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>6</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Event Summary List_Max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Opens Referral or DISDOC2 maximised</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Patient Context) Maximised Window</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>200</value>
				</query-parameter>
				<query-parameter>
					<name>DocType</name>
					<index>3</index>
					<value>DISDOC2</value>
				</query-parameter>
				<query-parameter>
					<name>EpisodeTypes</name>
					<index>4</index>
					<value>E', 'I</value>
				</query-parameter>
				<query-parameter>
					<name>DocTypeDesc</name>
					<index>5</index>
					<value>EDS</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>6</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Find Service</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Resource: Link to ACT's health service directory.</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<url>http://health.act.gov.au/health-services/find-a-health-service</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>HACC CWS Report</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Extract data from CWS</description>
		<display-name>HACC CWS Report</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>HACC CWS Report</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>HACC Report</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Build based on the sample data from ACT</description>
		<display-name>HACC Report</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>HACC Report</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Level 1 Flip Chart</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Flip Chard for the Decision Process with Level 1 Referrals.</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_green.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<url>/resources/Flipcharts/Level1/CHI_Level1_Eligiblity_Flip_Chart.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Level 2 Flip Chart</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Flip Chart used by level 2</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_red.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<url>/resources/Flipcharts/Level2/CHI_Level2_Eligiblity_Flip_Chart.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - All</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>All Referrals</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (All)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Awaiting Booking (triaged)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Booking (triaged)</description>
		<display-name>Awaiting Booking (Triaged)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_serviceTriage</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Awaiting Pre Reg (declined)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Pre Reg (declined)</description>
		<display-name>Awaiting Pre Registration (Declined)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI Declined)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_declined</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>4</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Awaiting Pre Reg (received)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Pre Reg (received)</description>
		<display-name>Awaiting Pre Registration (Received)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>referralState used to be int_cr_received (which was incorrectly returning wrong results). Changed to int_cr_internal so returning same results as Awaiting Pre-Registration (Received) windowlet in homepage</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Fax &amp; Internal only)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_internal</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>4</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Awaiting Reg (received)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Reg (received)</description>
		<display-name>Awaiting Registration (Received)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>int_cr_forward</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_internal</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Awaiting Triage (registered)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Triage (registered)</description>
		<display-name>Awaiting Triage (Registered)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referral Search (Awaiting Triage)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_complex</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Booked</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Booked</description>
		<display-name>Booked / Enrolled</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Menu - Booked</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Booked/Enrolled)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_booked</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Callback (CHI)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Awaiting Triage (Call Back)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>2</index>
					<value>int_cr_callback</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Completed</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Completed</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Completed)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_completed</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Draft</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Draft Referrals</description>
		<display-name>Draft Referrals</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Draft only)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>Draft</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>4</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Enrolled</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Enrolled</description>
		<display-name>Enrolled</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Returned (returned)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Returned (returned)</description>
		<display-name>Returned</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_rejected</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Menu - Transfer (CHI)</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Awaiting Triage (Transferred)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>2</index>
					<value>int_cr_transfer</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Patient - Pathway Active (Service)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Patient Context)</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>2</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Referral - CDV Tree View</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View a Referral in the CDV Tree.</description>
		<display-name>View Referral</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ReferralDetails</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>referralId</name>
					<index>0</index>
					<value>&lt;%=AppVars.referralId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=SecureInformation.get("Patient ID")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>2</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>viewId</name>
					<index>3</index>
					<value>&lt;%="int_cr_community_view"%&gt;</value>
				</query-parameter>
				<redirection-key>referrals</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/Referral.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Referral Search</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Referrals</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/concerto/configuredocumentcapture.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>Referral ID</name>
					<index>4</index>
					<value>&lt;%=AppVars.referralId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>viewId</name>
					<index>5</index>
					<value>&lt;%=AppVars.viewId%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Referral by Id</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View a Referrals for a Patient, if a ReferralId is supplied as a query parameter then that specific referral will be opened, otherwise will be redirected nto the specified entry point, such as the "In Progress" referrals for the patient.</description>
		<display-name>Referrals</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ReferralDetails</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/concerto/configuredocumentcapture.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>referralId</name>
					<index>0</index>
					<value>&lt;%=AppVars.referralId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=SecureInformation.get("Patient ID")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>2</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>viewId</name>
					<index>3</index>
					<value>&lt;%=AppVars.viewId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>noReferralIdRedirect</name>
					<index>4</index>
					<value>&lt;%="Referrals for Patient"%&gt;</value>
				</query-parameter>
				<redirection-key>referrals</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/Referral.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WIC Event Summary (Discharge)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Opens Event Summary for WIC. Displays on the Patient Profile page.</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>WIC Referrals Search (Event Summary Discharge)</value>
				</query-parameter>
				<query-parameter>
					<name>DocType</name>
					<index>2</index>
					<value>WIC</value>
				</query-parameter>
				<query-parameter>
					<name>EpisodeTypes</name>
					<index>3</index>
					<value>E', 'I</value>
				</query-parameter>
				<query-parameter>
					<name>DocTypeDesc</name>
					<index>4</index>
					<value>EDS</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>5</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>6</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WIC Event Summary Discharge</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Auto-open WIC discharge Summary. Displays when a user opens a WIC Summary from the Task list.</description>
		<display-name>WIC Discharge Plan</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/notes/note_edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Event Summary Discharge Auto-Open)</value>
				</query-parameter>
				<query-parameter>
					<name>DocType</name>
					<index>2</index>
					<value>WIC</value>
				</query-parameter>
				<query-parameter>
					<name>EpisodeTypes</name>
					<index>3</index>
					<value>E', 'I</value>
				</query-parameter>
				<query-parameter>
					<name>DocTypeDesc</name>
					<index>4</index>
					<value>EDS</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>5</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>6</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - All</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<denied-group>
				<name>Generic Community Clinician</name>
			</denied-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>All Referrals</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - All (Speciality/Staff team)</name>
		<access-controller>
			<allowed-group>
				<name>Community Teamleader</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Teamleader Home page worklist.</description>
		<display-name>Referrals (Specialty/Staff Team)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - All (Speciality/Staff team)_max</name>
		<access-controller>
			<allowed-group>
				<name>Community Teamleader</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Teamleader Home page worklist.</description>
		<display-name>Referrals (Specialty/Staff Team)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Awaiting Booking (triaged)</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Booking (triaged)</description>
		<display-name>Awaiting Booking (Triaged)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_serviceTriage</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Awaiting Booking (triaged)_max</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Booking (triaged)</description>
		<display-name>Awaiting Booking (Triaged)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_serviceTriage</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Awaiting Pre Reg (received)</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Pre Reg (received) - Fax referrals only</description>
		<display-name>Awaiting Pre-Registration (Received)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Fax referrals only</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Fax &amp; Internal only)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>10</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Awaiting Pre Reg (received)_max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Pre Reg (received)</description>
		<display-name>Awaiting Pre-Registration (Received)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Fax &amp; Internal only)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Awaiting Reg (received)</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Reg (received)</description>
		<display-name>Awaiting Registration (Received)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>int_cr_newReferral</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_internal</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Awaiting Reg (received)_max</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Reg (received)</description>
		<display-name>Awaiting Registration (Received)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_internal</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Awaiting Triage (registered)</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Triage (registered)</description>
		<display-name>Awaiting Triage (Registered)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>int_cr_newReferral</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_complex</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Awaiting Triage (registered)_max</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Triage (registered)</description>
		<display-name>Awaiting Triage (Registered)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_complex</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Callback (CHI)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Awaiting Triage (Call Back)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>2</index>
					<value>int_cr_callback</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Callback (CHI) Max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Call Back</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_callback</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>4</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>maxNumber</name>
					<index>5</index>
					<value>50</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Closed</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Displayed in the Patient Profile under the Referrals entry point.</description>
		<display-name>Referrals (Closed)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Completed)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>20</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_completed</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Closed Max</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Displayed on the Patient Profile and expanded to a max windowlet from the Closed Referral worklist.</description>
		<display-name>Referrals (Closed)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_completed</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Completed</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Completed (Completed)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Completed)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_completed</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Completed Max</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Completed (Completed)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_completed</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Declined (CHI)</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Awaiting Pre-Registration (Declined)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI Declined)</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>2</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_declined</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Declined (CHI) Max</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Declined</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI Declined)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_declined</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Enrolled (documentLink)</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Document Link for the Associated Referral Link on Nursing Assessments.</description>
		<display-name>Enrolled</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referral Search (Document Linking)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<query-parameter>
					<name>fromCdvTree</name>
					<index>5</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>repositoryName</name>
					<index>6</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%if SecureInformation.repositoryName &lt;&gt;""%&gt;&lt;%=SecureInformation.repositoryName%&gt;&lt;%else%&gt;Community&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Enrolled (homepage)</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Windowlet - Enrolled</description>
		<display-name>Enrolled</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Enrolled (patientcontext)</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Enrolled</description>
		<display-name>Enrolled</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Patient Context)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Enrolled_max</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Windowlet Max - Enrolled</description>
		<display-name>Enrolled</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_pathwayActive</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - In Progress (CHI)</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>List of referrals in progress at this centre</description>
		<display-name>In Progress</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>2</index>
					<value>int_cr_inProgress</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - In Progress (CHI) Max</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>List of referrals in progress at this centre</description>
		<display-name>In Progress</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_inProgress</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>4</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>maxNumber</name>
					<index>5</index>
					<value>50</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Incoming Request (CHI)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Fax &amp; Internal only)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>10</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Incoming Requests (CHI) Max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Incoming Requests</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Fax &amp; Internal only)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>maxNumber</name>
					<index>4</index>
					<value>50</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Open</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Displayed from the Patient Profile &gt; Referral entry point this displays all open referrals</description>
		<display-name>Referrals (Open)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>20</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Open Max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Displayed from the Patient Profile &gt; Referral entry point this displays all open referrals</description>
		<display-name>Referrals (Open)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Pre-Reg (Fax)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Reg (received)</description>
		<display-name>Awaiting Pre-Registration (Received)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>int_cr_newReferral</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Fax &amp; Internal only)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_internal</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Pre-Reg (Fax) Max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Menu - Awaiting Reg (received)</description>
		<display-name>Awaiting Pre-Registration (Received)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>int_cr_newReferral</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (Fax &amp; Internal only)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_internal</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Returned (CHI)</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>2</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_declined</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Returned (CHI) Max</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>4</index>
					<value>int_cr_declined</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Transfer (CHI)</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Awaiting Triage (Transferred)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>2</index>
					<value>int_cr_transfer</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Transfer (CHI) Max</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Transfer</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_transfer</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>4</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Triaged (CHI)</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>To display only faxes on the homepage&#xD;
&#xD;
removed this because it seems that it does not work for registration&lt;%=User.getAttribute("Community", "Service")%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>2</index>
					<value>int_cr_serviceTriage</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>3</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Windowlet - Triaged (CHI) Max</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>To display only faxes on the homepage&#xD;
&#xD;
removed this because it seems that it does not work for registration&lt;%=User.getAttribute("Community", "Service")%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals Search (CHI)</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>referralState</name>
					<index>3</index>
					<value>int_cr_serviceTriage</value>
				</query-parameter>
				<query-parameter>
					<name>UserService</name>
					<index>4</index>
					<value />
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<query-parameter>
				<name>concertoHome</name>
				<index>0</index>
				<value>&lt;%if AppVars.concertoHome%&gt;&lt;%=AppVars.concertoHome%&gt;&lt;%else%&gt;/concerto&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>1</index>
				<value>&lt;%=AppVars.internalConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>applicationName</name>
				<index>2</index>
				<value>&lt;%=AppVars.applicationName%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>username</name>
				<index>3</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>securityDomain</name>
				<index>4</index>
				<value>&lt;%=AppVars.securityDomain%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>5</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<redirection-key>com.orchestral.core.login</redirection-key>
			<url>&lt;%=AppVars.PlatformBase%&gt;/login-concerto/login</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>300000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>POST</method>
			<query-parameter>
				<name>securityDomain</name>
				<index>0</index>
				<value>&lt;%=AppVars.securityDomain%&gt;</value>
			</query-parameter>
			<url>&lt;%=AppVars.PlatformBase%&gt;/login-concerto/logout</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>Create a New Community Referral (Context)</name>
		<data-source-name>java:comp/env/jdbc/osgi_ws</data-source-name>
		<description>REMOVE 20141029 TP: Copied for editable summary linking.&#xD;
&#xD;
This can be used to create a new referral for a patient to a service , team or speciality. &#xD;
While the webservice supports createion , assignment, approval by / to clinicians the list of active clinicians is in the thousands</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
Results.Status as Status, &#xD;
Results.Message as Message,&#xD;
Results.ReferralOID as ReferralOID,&#xD;
'community_health'&#xD;
FROM {{&#xD;
	// this call is to the web service to add a new referral - the generic search will provide a set of variables which are then used to populate the required message fields based on user input &#xD;
	// this will require  sequence of 3 calls &#xD;
	// call 1 - get the patient OID &#xD;
	// call 2 add a new referral for the patient &#xD;
	// call 3 - call to get referrals with a from datetime constraint of the date passed in from the generic search. Note although constrained this call could return multiple rows - so we will traverse and look for a match based on the same &#xD;
	// criteria used to create the referral to find the OID as ACTPAS returns an e007 error if you try to create 2 with the same criteria so the one in the system must be the one we create if we recieve an A000 to the second web service call&#xD;
	&#xD;
	// general variables &#xD;
	var testing = false ; &#xD;
	var messageID =  new java.util.UUID.randomUUID().toString();&#xD;
	var logger = org.apache.log4j.Logger.getLogger("com.orchestral.common.webservice.WebService");&#xD;
    var portalUserID =  ((testing) ? 'Testing' : '&lt;%=(js)User.userID%&gt;' ) ; &#xD;
    var patientURN =   ((testing) ? '20157946' : '&lt;%=(js)Context.get("Patient.Id.MRN")%&gt;' );&#xD;
    var actpasPatientOID = '' ; &#xD;
    var noErrors = true ;  &#xD;
    &#xD;
	var workstationID = ((!testing) ? 'WEBSVC' : '&lt;%=(js)AppVars.get("iPM.Generic Workstation ID") %&gt;') ; &#xD;
	var timeout =  ((testing) ? 5000 : '&lt;%=(js)AppVars.get("iPM.WS.Timeout")%&gt;' ) ; 		&#xD;
	var isACTPASUser = ((testing) ? true : &lt;%=(js)User.isMemberOf("Community") %&gt;) ; &#xD;
	//these will contain null if the template processing fails to find the group or if the user is not a member - which is why we set the boolean value to control processing decisions&#xD;
	var actpasUserName =  ((!testing) ?  'WEBSRV' : '&lt;%= (js)User.getAttribute("Community", "ACTPAS User ID")%&gt;' ) ; &#xD;
	var actpasPassword = ((!testing) ? 'websrvdev' : '&lt;%=(js)User.getAttribute("Community","ACTPAS Password")%&gt;' ) ; &#xD;
	var actpasClinicID =  ((testing) ? '&lt;%=(js)AppVars.get("iPM.Generic Clinic ID")%&gt;' :  '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinic ID")%&gt;' ) ; &#xD;
	var actpasSpeciality = ((testing) ? '&lt;%=(js)AppVars.get("iPM.Generic Speciality")%&gt;' : '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;' ) ; &#xD;
	&#xD;
	//these hold the resultset to return to Portal after execution &#xD;
	var rows = [];&#xD;
	var row = new Object;&#xD;
	//set this to true to add additonal information to the log4j output, and to us test values configured as application variables  - useful when hitting the test button in Generic search config where you dont have a patient in context etc. &#xD;
	// note : in test mode for squirrel you will need to provide hardcoded string values for the left term of the ternary otherwise you will get the left term as a literal string - template processing does not occur for Integration driver calls from Squirrel&#xD;
	&#xD;
	//variables from the geneneric search form &#xD;
&#xD;
	var RecvdDttm = '&lt;%=(js) RecvdDttm%&gt;' ;  &#xD;
	var ReferralReason = '&lt;%=(js) ReferralReason%&gt;' ;  &#xD;
	var SentDttm = '&lt;%=(js) SentDttm1%&gt;'; &#xD;
	var Priority = '&lt;%=(js) Priority%&gt;'; &#xD;
	var OrdtaDttm = '&lt;%=(js) OrdtaDttm%&gt;';&#xD;
	var AdministrativeCategory = '&lt;%=(js) AdministrativeCategory%&gt;' ; &#xD;
	var SourceofReferral  = '&lt;%=(js) SourceofReferral%&gt;' ;  &#xD;
	var ExpiryDttm = '&lt;%=(js) ExpiryDttm1%&gt;'; &#xD;
	var Comments = '&lt;%=(js) Comments%&gt;';&#xD;
	var ReferralType ='&lt;%=(js) ReferralType%&gt;';&#xD;
	var ReferredByClinician = '&lt;%=(js) ReferredByClinician%&gt;' ;&#xD;
	var ReferredBySpecialty = '&lt;%=(js) ReferredBySpecialty%&gt;' ;&#xD;
	var AccidentRelatedStatus = '&lt;%=(js) AccidentRelatedStatus%&gt;' ; &#xD;
	var ReferredToClinician = '&lt;%=(js) ReferredToClinician%&gt;' ;&#xD;
	var ReferredToSpecialty = '&lt;%=(js) ReferredToSpecialty%&gt;' ; &#xD;
	var ReferredToHealthOrganisation = '&lt;%=(js) ReferredToHealthOrganisation%&gt;' ;  &#xD;
	var OwnerHealthOrganisation = '&lt;%=(js) OwnerHealthOrganisation%&gt;' ;  // this may need to be changed&#xD;
	var ReferredToStaffTeam = '&lt;%=(js) ReferredTST%&gt;' ; &#xD;
	var Status = "";&#xD;
	var Message = "";&#xD;
	var hasErrors = false; &#xD;
	var timeSuffix = "T00:00:00" ; &#xD;
	var referralReferralOID = "";  // this will hold the OID of the referral once we successfully create one &#xD;
	var existingReferralOID = '&lt;%=(js) existingReferralOID %&gt;'  ; // this holds the OID of an existing referral if the user selected one rather than creating one &#xD;
	&#xD;
	// web service variables &#xD;
	//base URL for WSDL and service &#xD;
	var webserviceName = ((testing) ? 'https://actpaswebservices.test.act.gov.au:2124/iPM_WEB_API?wsdl' :  '&lt;%=(js)AppVars.get("iPM.WS.Base Location URL") %&gt;') ;&#xD;
	//all methods in this sequence use the same Namespace and port - they only differ in the action to call &#xD;
	var referralWSNamespace = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace' : '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Namespace") %&gt;' ); &#xD;
	var referralsWSPort = ((testing) ? 'ReferralServiceEndPoint' : '&lt;%=(js)AppVars.get("iPM.WS.Referral Port Name") %&gt;');  &#xD;
	// these are used to retrieve the patient OID for use in later web service calls 	&#xD;
	//var getPatientWSPort = ((testing) ? 'ReferralServiceEndPoint' : '&lt;%=(js)AppVars.get("iPM.WS.Referral Port Name") %&gt;');  // change this to the generic referrals WS endpoint in cleanup delete once tested &#xD;
	var getPatientWSAction = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/GetPatientByPatientId' : '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Action.GetPatientByID") %&gt;'); &#xD;
	var getPatientSuccess = false;  &#xD;
	&#xD;
	//these are used to call the method to add the new referral &#xD;
	var addReferralWSAction = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/AddReferral' : '&lt;%= (js)AppVars.get("iPM.WS.Referrals.Action.Add Referral") %&gt;');&#xD;
	var addReferralSuccess = false; &#xD;
	&#xD;
	//these are used after the call to add a referral to call all the referrals made after or equal to  the RecvdDttm we use in our messages &#xD;
	// this will be a list of 1 or more referrals to be travered looking for the unique combinaiton of the mandatory fields wich will enable us to then retrieve the &#xD;
	//referral OID related to the add referral transaction  - note if the add step is successful but the get fails (e.g. timeout) we shoudl inform the user .. project needs to decide what happens then ?&#xD;
	//Note this would be avoided if the iPM web service was made more robust by adding the OID to the response message &#xD;
	&#xD;
	var getReferralsWSAction = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/GetReferralByPatientOid' : '&lt;%= (js)AppVars.get("iPM.WS.Referrals.Action.Get Referrals by Patient") %&gt;' ); &#xD;
	var getReferralsSuccess = false; &#xD;
&#xD;
	logger.info("iPM Add Referrals Generic Search init");&#xD;
&#xD;
	&#xD;
	// verify none of the mandatory fields are blank - note their may be others that ACT needs to ake mandatory, these are the minimum for the web service to successsfully add &#xD;
	// 1. Owner Health Organisation ; 2. Patient OID ( passed via context)  3. Referral Reason 4. Recieved date time and 5. source of referral &#xD;
	// Note this combination also ensures uniqueness - if you try and add 2 referrals with these details the same the system will reject it with an error code E007. &#xD;
	// note it's unclear if owner health organisation is the org who referred the patient or the org who fulfils it from the documentation neeed to raise &#xD;
	// Note there is no equivalent field in the ACTPAS GUI - for now will set both referred to and owner HO to the same value &#xD;
	&#xD;
	if (OwnerHealthOrganisation === "") {&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please select the Owner Health Orginisation for the referral.\n";&#xD;
	}&#xD;
	&#xD;
	if (ReferralReason === "") {&#xD;
	&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please select the Referral Reason\n"; &#xD;
	&#xD;
	}&#xD;
	if (RecvdDttm ==="") {&#xD;
		&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please enter the date the Referral was recieved\n"; &#xD;
		&#xD;
	}&#xD;
	if (SourceofReferral ==="") {&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please select the Source of the Referral\n" ; &#xD;
	}&#xD;
	if (ReferralType ==="") {&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please select the Referral Type\n" ; &#xD;
		&#xD;
	&#xD;
	}&#xD;
	&#xD;
	if (!isACTPASUser) {&#xD;
		hasErrors = true; &#xD;
		Status = 'EOH0003';&#xD;
		Message = "You are not a member of the ACTPAS users Group - please engage your support team to resolve this issue";	&#xD;
	}&#xD;
	&#xD;
&#xD;
	&#xD;
	&#xD;
	//if there are no errors, the user is an actpas user and the user has not selected an existing referral ID create a new one &#xD;
	// otherwise pass the selected OID back as the return value - this is to support integration with CWS referrals so that the user &#xD;
	// can either select an existing referral or create a new one via the one workflow, at the end of which the action within Clinical Referrals &#xD;
	// to associate the PAS referral ID to the Clinical Referral ID &#xD;
	// at the completion either as OID has been returned in the rowset, or the OID is null  (see documentation for reasons this may occur) &#xD;
	// returning null is safe as this is essentially the same (from a Clinical Referrals workflow persepctive) as if the Workflow Action  has&#xD;
	// never been completed  - which means the user will need to take steps to resolve before the action may be completed &#xD;
	// (for example change paramters, select an existing OID, work around an issue with the remote host being unavailable by completing the &#xD;
	// action at a later time and so on. &#xD;
	&#xD;
	&#xD;
	&#xD;
	if (existingReferralOID != "" ) {&#xD;
		Status = "Success AOH000" ; &#xD;
		Message = "Please click here to continue" ;  // note we porbably don't need the user to click anything in the CWS workflow - leave in until we know how we pass the result columns back to the workflow action &#xD;
		referralReferralOID = existingReferralOID ; &#xD;
	}&#xD;
	else {&#xD;
	&#xD;
		if (!hasErrors &amp;&amp; isACTPASUser ) {&#xD;
		//format the dates as required for the web service : note ACTPAS GUI has no input for the time part so we will follow the same amout of specificity and set all to 00:00:00&#xD;
		RecvdDttm += timeSuffix; &#xD;
		&#xD;
			logger.info("ACTPAS User Group evaluated to |" +  isACTPASUser + " |\n" );&#xD;
			logger.info("ACTPAS user is |" + '&lt;%= (js)User.getAttribute("Community", "ACTPAS User ID")%&gt;' + "|\n") ; &#xD;
			logger.info("ACTPAS user is |" + '&lt;%= (js)User.getAttribute("Community", "ACTPAS Password") %&gt;'  + "|\n") ; &#xD;
		&#xD;
			try {&#xD;
			&#xD;
			//try to get patient OID &#xD;
			logger.info("\nCalling iPM Webservice to Get Patient OID by pas ID\n") ;&#xD;
			var webservice = webServiceFactory.createWebService(webserviceName);&#xD;
			&#xD;
			webservice.setPortName(referralWSNamespace, referralsWSPort); &#xD;
			webservice.setMessageMode();  // we will supply the full envelope and message components so set the mode to message&#xD;
			//next line should not be required in message mode but there is a bug - not setting this explicitly results in a null action being set by the calls to JAX-WS and that causes a SOAP Fault for the iPM webservices &#xD;
			webservice.setSoapAction(getPatientWSAction);&#xD;
&#xD;
			webservice.setRequestTimeout(java.lang.Integer.parseInt(timeout));&#xD;
			webservice.setConnectTimeout(java.lang.Integer.parseInt(timeout));&#xD;
					&#xD;
			webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
									 &lt;soapenv:Header/&gt;&#xD;
										 &lt;soapenv:Body&gt;&#xD;
											  &lt;isof:GetPatientByPatientId&gt;												&#xD;
												 &lt;isof:PatientId&gt;{patientURN}&lt;/isof:PatientId&gt;&#xD;
											  &lt;/isof:GetPatientByPatientId&gt;&#xD;
										   &lt;/soapenv:Body&gt;&#xD;
									&lt;/soapenv:Envelope&gt; ;&#xD;
			logger.info("iPM.WS :: Calling Referrals Service. Message ID is " + messageID + " Request Message is :" + webserviceRequest); &#xD;
					&#xD;
			var webserviceResponse = webservice.call(webserviceRequest); &#xD;
			 &#xD;
&#xD;
			// now to process the response - for some reason this is less likely to fail if you declare the defaults first &#xD;
			default xml namespace = "";&#xD;
			&#xD;
			var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
			var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
			var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
			//var GetPatientByPatientIdResponse = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace");&#xD;
&#xD;
			var xmlInfo = webserviceResponse.s::Body.elements() ; &#xD;
			&#xD;
			//var Header = webserviceResponse.s::Header.elements();  	// this works but needs more investigation as to why the preferred methodreturns something other than the expected value &#xD;
			// the header contains an activity id which is unique per message response from the server  - it's not documented but useful for logging &#xD;
			var responseUID =  webserviceResponse.s::Header[0].*[0]; 		// test to see what happens if you create a response with more than one element in the header &#xD;
			//var Header =  webserviceResponse.s::Header.elements().ActivityId ; 			&#xD;
			var PatientOID = xmlInfo..a::Patient..a::PatientOid.toString(); // call this explicitly otherwise e4x will try and put the entire element structure in the next xml object when we use the patientID &#xD;
			var responseStatus = xmlInfo..a::ResultCode ; &#xD;
			var responseMessage = xmlInfo..a::ResultDescription; &#xD;
			&#xD;
			if ( responseStatus == 'A000') {&#xD;
			&#xD;
			getPatientSuccess = true; &#xD;
			Status = "Success" ;&#xD;
			Message += "Successfully retrieved Patient OID\n" ; &#xD;
			//log output has to be masked if successful as the response to the getPatient by ID service returns a lot of PII in the response SOAP object &#xD;
			logger.info("iPM.WS :: Response from Get Patient by Patient id  web Service was :\n" + "AOOO - Success\n Actual response message suppressed as it contains PII\n"  + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
			&#xD;
			}&#xD;
			else {&#xD;
			Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
			Message += "Could not retrieve Patient OID from ACTPAS web service.\nUnable to create referral. Web service message was :\n" + responseMessage ; 	&#xD;
			//note this next line is safe as the error responses only contain the message UID, error response code and error response message - no PII&#xD;
			logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
			}&#xD;
			&#xD;
			&#xD;
			// if no errors try and add referral &#xD;
			&#xD;
			if (getPatientSuccess) &#xD;
			{&#xD;
				webservice.setSoapAction(addReferralWSAction);&#xD;
				messageID =  new java.util.UUID.randomUUID().toString(); // unique ID for each request in the series &#xD;
				logger.info("\n\n\nin the loop to try and add a referral\n");&#xD;
				&#xD;
				webserviceRequest = &#xD;
					&lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace" &#xD;
						xmlns:isof1="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary" &#xD;
						xmlns:isof2="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts" &#xD;
						xmlns:isof3="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts"&#xD;
						xmlns:i="http://www.w3.org/2001/XMLSchema-instance"&gt;&#xD;
&#xD;
						   &lt;soapenv:Header/&gt;&#xD;
						   &lt;soapenv:Body&gt;&#xD;
							  &lt;isof:AddReferral&gt;&#xD;
								 &lt;!--Optional:--&gt;&#xD;
								 &lt;isof:Credential&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:Department&gt;WEBSRV&lt;/isof1:Department&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:Name&gt;{actpasUserName}&lt;/isof1:Name&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:Password&gt;{actpasPassword}&lt;/isof1:Password&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:UserId&gt;{actpasUserName}&lt;/isof1:UserId&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:Workstation&gt;WEBSERVICES&lt;/isof1:Workstation&gt;&#xD;
								 &lt;/isof:Credential&gt;							&#xD;
								 &lt;!--Optional:--&gt;&#xD;
								 &lt;isof:referral&gt;           &#xD;
								   &lt;!--mandatory field - this is multicampus--&gt; &#xD;
								   &#xD;
									&lt;isof2:ACCApprovalStatus i:nil="true"/&gt;&#xD;
									&lt;isof2:ACCType i:nil="true"/&gt;&#xD;
									&lt;isof2:AccClaimNumber i:nil="true"/&gt;&#xD;
									&lt;isof2:AccNumber i:nil="true"/&gt;&#xD;
									&lt;isof2:AccidentRelatedStatus i:nil="true"/&gt;&#xD;
									&lt;isof2:ActivityType i:nil="true"/&gt;&#xD;
									&lt;isof2:AdministrativeCategory i:nil="true"/&gt;&#xD;
									&lt;isof2:Authorisation i:nil="true"/&gt;&#xD;
									&lt;isof2:AuthorisedByClinician i:nil="true"/&gt;&#xD;
									&lt;isof2:AuthrDttm i:nil="true"/&gt;&#xD;
									&lt;isof2:CancdDttm i:nil="true"/&gt;&#xD;
									&lt;isof2:ClosrDate i:nil="true"/&gt;&#xD;
									&lt;isof2:Comments i:nil="true"/&gt;&#xD;
									&lt;isof2:ExpiryDttm i:nil="true"/&gt;&#xD;
									&lt;isof2:FundingArrangement i:nil="true"/&gt;&#xD;
									&lt;isof2:FundingProgram i:nil="true"/&gt;&#xD;
									&lt;isof2:FundingSubprogram i:nil="true"/&gt;&#xD;
									&lt;isof2:OrdtaDttm i:nil="true"/&gt;			&#xD;
									&lt;isof2:OwnerHealthOrganisation&gt;&#xD;
									   &lt;isof3:Code&gt;{OwnerHealthOrganisation}&lt;/isof3:Code&gt;								   &#xD;
									&lt;/isof2:OwnerHealthOrganisation&gt;&#xD;
									&lt;isof2:ParntOid i:nil="true"/&gt;&#xD;
									&lt;isof2:PatientOid&gt;{PatientOID}&lt;/isof2:PatientOid&gt;								     &#xD;
									&lt;isof2:RecvdDttm&gt;{RecvdDttm}&lt;/isof2:RecvdDttm&gt;&#xD;
									&lt;isof2:ReferralCancellationReason i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferralClosureReason i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferralOid i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferralOutcome i:nil="true"/&gt;			&#xD;
									&lt;isof2:ReferralReason&gt;&#xD;
									   &lt;isof3:Code&gt;{ReferralReason}&lt;/isof3:Code&gt;&#xD;
									&lt;/isof2:ReferralReason&gt;     &#xD;
									&lt;isof2:ReferralStatus i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferralType&gt;&#xD;
										&lt;isof3:Code&gt;{ReferralType}&lt;/isof3:Code&gt;&#xD;
									&lt;/isof2:ReferralType&gt;&#xD;
									&lt;isof2:ReferredToHealthOrganisation i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferredBySpecialty i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferredToStaffTeam i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferredToClinician i:nil="true"/&gt;								&#xD;
									&lt;isof2:SourceofReferral&gt;&#xD;
									   &lt;isof3:Code&gt;{SourceofReferral}&lt;/isof3:Code&gt;			&#xD;
									&lt;/isof2:SourceofReferral&gt;&#xD;
									&lt;isof2:Urgency i:nil="true"/&gt;&#xD;
								 &lt;/isof:referral&gt;&#xD;
							  &lt;/isof:AddReferral&gt;&#xD;
						   &lt;/soapenv:Body&gt;&#xD;
					&lt;/soapenv:Envelope&gt; ;&#xD;
					&#xD;
				&#xD;
				&#xD;
				&#xD;
				var soapenv = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
				var isof = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"); &#xD;
				var isof1 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary");&#xD;
				var isof2 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts");&#xD;
				var isof3 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
				var xmlReferral = webserviceRequest.soapenv::Body..isof::AddReferral..isof::referral;  // this is just to make the adding of childern to the soap body a little less cumbersome in terms of parent/child nodes&#xD;
				&#xD;
				//need to test if there is a value and insert it as new child nodes. This litters the output with e4x namespaces but can't be avoided as the remote host returns errors or exceptions for empty values. &#xD;
&#xD;
				&#xD;
				if (SentDttm) {&#xD;
					SentDttm += timeSuffix ;&#xD;
					xmlReferral.isof2::SentDttm += SentDttm; 		&#xD;
				}&#xD;
				if (Priority) {&#xD;
					xmlReferral.isof2::Priority.isof3::Code += Priority ; &#xD;
				}&#xD;
				if (OrdtaDttm) {&#xD;
					OrdtaDttm += timeSuffix; &#xD;
					xmlReferral.isof2::OrdtaDttm += OrdtaDttm ; 		&#xD;
				} &#xD;
				if (AdministrativeCategory ) {&#xD;
					xmlReferral.isof2::AdministrativeCategory.isof3::Code += AdministrativeCategory ;&#xD;
				}		// try moving this wehere priority is and see if it makes a difference to the structure output ?  no visible difference between the assignment but the out put namespaces are different &#xD;
				if (ExpiryDttm) &#xD;
				{&#xD;
					ExpiryDttm += timeSuffix ; &#xD;
					xmlReferral.isof2::ExpiryDttm += ExpiryDttm ;&#xD;
				} &#xD;
				if (Comments) &#xD;
				{&#xD;
					xmlReferral.isof2::Comments += Comments ; &#xD;
				}&#xD;
				if (ReferredByClinician) {&#xD;
					xmlReferral.isof2::ReferredByClinician.isof3::Code += ReferredByClinician ;&#xD;
				}&#xD;
				if (ReferredBySpecialty){&#xD;
					xmlReferral.isof2::ReferredBySpecialty.isof3::Code += ReferredBySpecialty ; 				&#xD;
				}&#xD;
				if (AccidentRelatedStatus ) {&#xD;
					xmlReferral.isof2::AccidentRelatedStatus.isof3::Code += AccidentRelatedStatus ; &#xD;
				}&#xD;
				if (ReferredToClinician ) {&#xD;
					xmlReferral.isof2::ReferredToClinician.isof3::Code += ReferredToClinician ; &#xD;
				}&#xD;
				if (ReferredToSpecialty) {&#xD;
					xmlReferral.isof2::ReferredToSpecialty.isof3::Code += ReferredToSpecialty ;&#xD;
				}&#xD;
				if (ReferredToHealthOrganisation) {&#xD;
					xmlReferral.isof2::ReferredToHealthOrganisation.isof3::Code += ReferredToHealthOrganisation ; &#xD;
				}&#xD;
				if (ReferredToStaffTeam) {&#xD;
					xmlReferral.isof2::ReferredToStaffTeam.isof3::Code += ReferredToStaffTeam ; &#xD;
				}&#xD;
				&#xD;
				// the following are used to mask the password output in the concerto log, using the string value rather than the e4x literal or we would wind up changing the actual XML element value 			&#xD;
				var logMaskedEntryString = webserviceRequest.toString().replace(/&lt;isof1:Password&gt;(.+?)&lt;\/isof1:Password&gt;/, "&lt;isof1:Password&gt;Masked User Entered Password&lt;/isof1:Password&gt;" ) ; &#xD;
				//no PII in the request message so this is safe - it's all coded data 	&#xD;
				logger.info("iPM.WS :: Calling Add Referral  Service. Message ID is " + messageID + "\n Request Message is :\n" + logMaskedEntryString); 	&#xD;
				&#xD;
					&#xD;
				var webserviceResponse = webservice.call(webserviceRequest); &#xD;
				default xml namespace = "";&#xD;
			&#xD;
				var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
				var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary");&#xD;
				var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
			&#xD;
						&#xD;
				var xmlInfo = webserviceResponse.s::Body.elements() ; 	&#xD;
				var responseUID =  webserviceResponse.s::Header[0].*[0]; &#xD;
				var responseStatus = xmlInfo..a::ResultCode ; &#xD;
				var responseMessage = xmlInfo..a::ResultDescription ; &#xD;
				//no PII in the response for this request type - only a UID, status code and status message &#xD;
				logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
				&#xD;
				&#xD;
				if ( responseStatus == 'A000') {&#xD;
				&#xD;
				addReferralSuccess = true ; &#xD;
				Status = "Success" ;&#xD;
				Message = "\n Successfully added a new referral \n" ; &#xD;
				&#xD;
				&#xD;
				}&#xD;
				else {&#xD;
				Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
				Message = "Could not Create a new referral. Web service error message was :\n" + responseMessage ; 					&#xD;
				}&#xD;
				&#xD;
&#xD;
			&#xD;
			&#xD;
			&#xD;
			&#xD;
			} // end of adding a referral &#xD;
			&#xD;
			// if no errors try and retrieve the OID for the referral &#xD;
			&#xD;
			// cut from here &#xD;
			//just doing this for testing until the database transaction log issue is resolved by SSICT &#xD;
			if  (addReferralSuccess) {&#xD;
				&#xD;
					webservice.setSoapAction(getReferralsWSAction);&#xD;
					referralsMessageID =  new java.util.UUID.randomUUID().toString(); // unique ID for each request in the series &#xD;
					logger.info("\n\n\nin the loop to try and retrieve the OID for the new referral \n");&#xD;
					&#xD;
					//note this message type will use the optional from date time parameter - with the date die set to the recievedDttm we used to create the referral in the prior step&#xD;
					// this should reduce the numebr of referrals in the response that we have to iterate over &#xD;
					webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
											   &lt;soapenv:Header/&gt;&#xD;
											   &lt;soapenv:Body&gt;&#xD;
												  &lt;isof:GetReferralByPatientOid&gt;&#xD;
													 &#xD;
													 &lt;isof:PatientOid&gt;{PatientOID}&lt;/isof:PatientOid&gt;&#xD;
													 &lt;isof:FromDttm&gt;{RecvdDttm}&lt;/isof:FromDttm&gt;&#xD;
													 &lt;isof:ToDttm&gt;{RecvdDttm}&lt;/isof:ToDttm&gt;&#xD;
													&#xD;
												  &lt;/isof:GetReferralByPatientOid&gt;&#xD;
											   &lt;/soapenv:Body&gt;&#xD;
											&lt;/soapenv:Envelope&gt; ; &#xD;
&#xD;
					//no PII in the message for this service call - all coded data &#xD;
					logger.info("iPM.WS:: Calling to get Patient Referrals. Unique Source  Message ID  : " + referralsMessageID + "\n Relates to Patient OID from message : " + messageID + "\n Request message is : \n" + webserviceRequest +"\n *******END OF REQUEST TRANSACTION*******\n");&#xD;
									&#xD;
					var webserviceResponse = webservice.call(webserviceRequest);&#xD;
&#xD;
					// the namespaces change in different response types hence we need to set them up again : &#xD;
					var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts") ; &#xD;
					var b = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
					&#xD;
					var referralsXML = webserviceResponse.s::Body.elements() ; &#xD;
					&#xD;
					var Header =  webserviceResponse.s::Header[0].*[0]; 		// UID for the response message from the web service is contained within the header &#xD;
&#xD;
					var resultCode = referralsXML..a::ResultCode ; &#xD;
					var resultMessage = referralsXML..a::ResultDescription ; &#xD;
					&#xD;
					var referralsList = "" ; &#xD;
&#xD;
					logger.info("iPM.WS :: Response from Referrals Service was :" + webserviceResponse + "\n Response Unique Message ID was : " + Header + "\n *****END OF RESPONSE TRANSACTION for Source Message ID : " + messageID + " ********\n") ; &#xD;
					if (referralsXML..a::ResultCode == 'A000'){&#xD;
						//iPM use the same namespace object to hold all the referrals as they do for each individual referral&#xD;
						//to avoid needing to test for null for the first array element we need to extract all of the outpatient appointment descendents that are one level below the first : &#xD;
						&#xD;
						referralsList = referralsXML..a::Referral..a::Referral;  // there can be more than one per response&#xD;
						//test to see if this happens - we may simply get an E004 or E008 in which case we can remove this logic &#xD;
						&#xD;
						if (referralsList.length() == 0 ) {&#xD;
						// if there were no referrals returned in the message response return an error message to the user &#xD;
						Status = "Error." ; &#xD;
						Message = "Referral was added but we could not retrieve the OID from the ACTPAS web service. You may need to manually resolve this issue. " ; &#xD;
						}&#xD;
						else{&#xD;
							//there is at lease one referrral in the response now we need to process it and see if we find a match for the values used when creating the referral in the earlier steps &#xD;
									 &#xD;
									var referralRecvdDttm = ""; &#xD;
									var referralSourceofReferral = ""; &#xD;
									var referralReferralReason = "" ; &#xD;
									var referralReferralTypeCode = "" ; &#xD;
									var referralReferredToClinicianCode = "" ;   // currently there looks to be a bug in web service processing - leave out for now &#xD;
									var referralReferredToSpecialtyCode = "" ;   // same &#xD;
									var referralReferredToHealthOrganisation = "" ;  // web service func spec says this is one of the mandatory check fields but either the doc is wrong or the web service is using the wrong field as this is ignored in testing &#xD;
									var referralOwnerHealthOrganisation = "" ;  // however this field is not listed in the interface processing rules but will result in error if not specific AND will result in rejection ala the funcitonal specificaiton w.r.t. the referred to health org &#xD;
									&#xD;
									for (var i = 0 ; i &lt; referralsList.length() ; i++) &#xD;
									{&#xD;
										&#xD;
										&#xD;
										referralRecvdDttm = referralsList[i]..a::RecvdDttm;&#xD;
										referralReferralReason = referralsList[i]..a::ReferralReason..b::Code ;&#xD;
										referralReferralTypeCode = referralsList[i]..a::ReferralType..b::Code;&#xD;
										referralSourceofReferral = referralsList[i]..a::SourceofReferral..b::Code;&#xD;
										referralReferredToClinicianCode = referralsList[i]..a::ReferredToClinician..b::Code[0] ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
										referralReferredToSpecialtyCode = referralsList[i]..a::ReferredToSpecialty..b::Code ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
										referralReferredToHealthOrganisation = referralsList[i]..a::ReferredToHealthOrganisation..b::Code ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
										referralOwnerHealthOrganisation =  referralsList[i]..a::OwnerHealthOrganisation..b::Code ;&#xD;
										&#xD;
										// test to see if this row matches our input variables &#xD;
										&#xD;
										if ( referralRecvdDttm == RecvdDttm  &amp;&amp; referralSourceofReferral == SourceofReferral  &amp;&amp;  referralReferralReason == ReferralReason &amp;&amp; referralReferralTypeCode == ReferralType  &amp;&amp; referralOwnerHealthOrganisation == OwnerHealthOrganisation) {&#xD;
											referralReferralOID =  referralsList[i]..a::ReferralOid ; &#xD;
										}	&#xD;
										&#xD;
										var outputStr = "|Message referralRecvdDttm = "  + referralRecvdDttm  + "| User set RecvdDttm = " + RecvdDttm + " |\n" ; &#xD;
										outputStr += "| referralSourceofReferral = " + referralSourceofReferral + "| SourceofReferral = "  + SourceofReferral + "|\n" ;&#xD;
										outputStr += "| referralReferralReason = " + referralReferralReason + " | ReferralReason = " + ReferralReason + "|\n"  ; &#xD;
										outputStr += "| referralReferralTypeCode = " + referralReferralTypeCode + " | ReferralType = " + ReferralType + "|\n" ; &#xD;
										outputStr += "| referralOwnerHealthOrganisation = " + referralOwnerHealthOrganisation + " | OwnerHealthOrganisation = "  + OwnerHealthOrganisation + "|\n" ; &#xD;
										logger.info( outputStr) ; &#xD;
										&#xD;
									} //loop checking to find the OID &#xD;
									&#xD;
									if (referralReferralOID) {&#xD;
							&#xD;
										Status = "Success AOH000" ; &#xD;
										Message = "Please click here to continue" ; &#xD;
										&#xD;
									}&#xD;
									else {&#xD;
										Status = "Error E0H0001" ; &#xD;
										Message = "Referral Created but no matching OID was retrieved from the web service - this will require manual resolution" ; &#xD;
									&#xD;
									}&#xD;
									&#xD;
							} // end of else condition - we recieved referrals data back &#xD;
						&#xD;
						&#xD;
					} //  end if result code A000 - success calling web service to get referrals &#xD;
					else {&#xD;
					//we got an error message from the retreive referrals web service, but previously got success to add the referral so we need to tell this to the user &#xD;
					Status = "EOH0002" ; &#xD;
					Message = "Referral Created but the Webservice could not return Referral OID. Error Code was : " + resultCode + "\n Message was : " + resultMessage ; &#xD;
				&#xD;
				&#xD;
					}&#xD;
				&#xD;
				&#xD;
				} // end add referral success if block &#xD;
			//to here &#xD;
			&#xD;
			&#xD;
			&#xD;
			} // try &#xD;
			catch (ex) &#xD;
			{&#xD;
				//this needs to be updated to account for the situation where the referral is created but the call to get the OID experiences a timeout or other exception&#xD;
			&#xD;
				logger.info("trapped an exception info as follows\n") ; &#xD;
				logger.info(ex.toString()); &#xD;
				&#xD;
				//add condition checking for the type of exception as well as the boolean state to determine how far through the processing the error was encountered &#xD;
				// and return a more meaningful message to the end user &#xD;
				Status = "Error - encountered an exception" ; &#xD;
				Message = "Could not complete action due to an unexpected exception"  ; &#xD;
			&#xD;
			&#xD;
			&#xD;
			&#xD;
			} &#xD;
			&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		} // end web service processing if there were no initial errors and the user is a member of the ACTPAS users group &#xD;
	} // end of the else statement that determines if the user was choosing an existing referral vs. creating a new one &#xD;
	&#xD;
	//regardless of success or failure return the following to the caller as the result set  - if status is not AOH000 the status code &#xD;
	// and the message will describe the kind of error that has been envcountered &#xD;
	&#xD;
	row.Status = Status;&#xD;
	row.Message = Message; &#xD;
	row.ReferralOID = referralReferralOID ; &#xD;
	 &#xD;
	&#xD;
	rows[0] = row;&#xD;
	rows;&#xD;
	&#xD;
		}}&#xD;
AS Results</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;script type="text/javascript" src="/resources/script/ContextSwitching.js"&gt;&#xD;
&#xD;
&#xD;
&#xD;
    document.getElementById('Yes').style.visibility = 'hidden'; &#xD;
&lt;/script&gt;&#xD;
&lt;style type="text/css"&gt;&#xD;
&lt;/style&gt;&#xD;
   &#xD;
&lt;span class="icon-signoff"&gt;&lt;/span&gt;  &lt;a id="editPatient" href="#" onclick="switchToActpas('ContextEngine EditPatientRegistration');return false"&gt;Edit Patient Registration&lt;/a&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Create</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>2</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Choose Existing Referral ID ------</name>
				<index>0</index>
				<default-value />
				<display-name>Choose Existing Referral ID ------</display-name>
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;hr/&gt;")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Choose ID blank spacer</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>existingReferralOID</name>
				<index>2</index>
				<default-value />
				<display-name>Existing Referral OID</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Referral List")%&gt;&lt;%exec config.setReturnValueName("1")%&gt;&lt;%exec config.setDisplayValueName("1")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral OID blank spacer</name>
				<index>3</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Copy of fillerDummy3</name>
				<index>4</index>
				<default-value />
				<display-name>OR :</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Or Blank Spacer</name>
				<index>5</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Create a New Referral Label</name>
				<index>6</index>
				<default-value />
				<display-name>Create a New Referral :</display-name>
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;hr/&gt;")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>fillerdummy5</name>
				<index>7</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>RecvdDttm</name>
				<index>8</index>
				<default-value />
				<display-name>Date Received *</display-name>
				<input-type>Date</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd/MM/yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-MM-dd")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 6</name>
				<index>9</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferralReason</name>
				<index>10</index>
				<default-value />
				<display-name>Reason *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'REASN' and [ARCHV_FLAG] NOT IN ('D','Y') ")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 4</name>
				<index>11</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>SourceofReferral</name>
				<index>12</index>
				<default-value />
				<display-name>Source of Referral *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'SORRF' and [ARCHV_FLAG] NOT IN ('D','Y') \r\n --WHERE MAIN_CODE = 'REASN'")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 5</name>
				<index>13</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferralType</name>
				<index>14</index>
				<default-value />
				<display-name>ACTPAS Referral Type *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'RETYP' and [ARCHV_FLAG] NOT IN ('D','Y') ")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler3</name>
				<index>15</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>OwnerHealthOrganisation</name>
				<index>16</index>
				<default-value />
				<display-name>Owner Health Organisation *</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Main Facility")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Location")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 8</name>
				<index>17</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToSpecialty</name>
				<index>18</index>
				<default-value />
				<display-name>Referred To Specialty</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [MAIN_IDENT]\r\n      ,[DESCRIPTION]\r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[SPECIALTIES]\r\n  WHERE [ARCHV_FLAG] NOT IN ('D', 'Y') ")%&gt;&lt;%exec config.setOptionColumnName("MAIN_IDENT")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 9</name>
				<index>19</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredTST</name>
				<index>20</index>
				<default-value />
				<display-name>Referred To Staff Team</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [DESCRIPTION]\r\n      ,[CODE]\r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[STAFF_TEAMS]")%&gt;&lt;%exec config.setOptionColumnName("CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 10</name>
				<index>21</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 2</name>
				<index>22</index>
				<default-value />
				<display-name>---Referred  By :  (Optional)</display-name>
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;hr/&gt;")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 3</name>
				<index>23</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredByClinician</name>
				<index>24</index>
				<default-value />
				<display-name>Referred By Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("ACTPAS Clinician ID")%&gt;&lt;%exec config.setReturnValueName("Clinician ID")%&gt;&lt;%exec config.setDisplayValueName("Clinician")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 6</name>
				<index>25</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredBySpecialty</name>
				<index>26</index>
				<default-value />
				<display-name>Referred By Specialty</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT SpecialtyCode, Specialty\r\n      \r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CliniciansSpecialty]")%&gt;&lt;%exec config.setOptionColumnName("SpecialtyCode")%&gt;&lt;%exec config.setDisplayColumnName("Specialty")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 7</name>
				<index>27</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred To Spacer</name>
				<index>28</index>
				<default-value />
				<display-name>-----Referred To: (Optional)</display-name>
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;hr/&gt;")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 5</name>
				<index>29</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToClinician</name>
				<index>30</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("ACTPAS Clinician ID")%&gt;&lt;%exec config.setReturnValueName("Clinician ID")%&gt;&lt;%exec config.setDisplayValueName("Clinician")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 7</name>
				<index>31</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToHealthOrganisation</name>
				<index>32</index>
				<default-value />
				<display-name>Referred To Health Organisation (*)</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Health Organisations")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Location")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referred to Blank</name>
				<index>33</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;hr/&gt;")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Yes</name>
				<index>34</index>
				<default-value />
				<display-name>Yes</display-name>
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Yes", "")%&gt;</parameter-string>
			</filter-field>
			<initial-message>Enter Referral details above and press "Create"</initial-message>
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open New Referral Request</name>
				<application>
					<name>Referral Request</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Status</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Message</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pasReferralId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>referralService</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (row.get(0) != "Success AOH000") {&#xD;
alert("There are errors requiring your attention before you can continue") ;&#xD;
&#xD;
}&#xD;
&#xD;
else {&#xD;
&#xD;
// Concerto object to redirect to a referral request entry point to create a new clinical referral&#xD;
//this stuff is the more supported-by-api way of doing it now  : &#xD;
&#xD;
//var requestApplication = new Application("Referral Request", "New CHI Referral ACTPAS TEST");&#xD;
&#xD;
var requestApplication = new Application("Referral Request", "Open New Referral Request");&#xD;
&#xD;
requestApplication.addQueryParameter('referralService', 'community_health');&#xD;
requestApplication.addQueryParameter('referralType', 'int_cr_internal');&#xD;
requestApplication.addQueryParameter('pasReferralId', row.get(2));&#xD;
//use the singleton instance reference to the Concerto object : &#xD;
&#xD;
concerto.openApplication(requestApplication); &#xD;
&#xD;
//return; &#xD;
		&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>HACC CWS Report</name>
		<data-source-name>java:comp/env/jdbc/referrals</data-source-name>
		<description />
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT  DISTINCT  &#xD;
   CONVERT(VARCHAR(25),metadata.dateSubmitted_L0HOZ,103)  AS AssessmentDate&#xD;
   ,pe.patientId AS URN&#xD;
   ,map.ACTPASID AS ACTPASReferralID&#xD;
   ,map.referral_identifier AS CWSReferralID&#xD;
   ,CASE WHEN pn.HACCScore_55103 IS NULL THEN '9' ELSE CONVERT(VARCHAR(2),pn.HACCScore_55103) END AS PensionStatus&#xD;
   ,CASE WHEN hc.HACCScore_CCIUS IS NULL THEN '9' ELSE CONVERT(VARCHAR(2),hc.HACCScore_CCIUS) END AS Housework&#xD;
   ,CASE WHEN trt.HACCScore_##ZTY IS NULL THEN '9' ELSE  CONVERT(VARCHAR(2),trt.HACCScore_##ZTY) END AS Transport&#xD;
   ,CASE WHEN hm.S_HACCScore_90R7P IS NULL THEN '9' ELSE CONVERT(VARCHAR(2),hm.S_HACCScore_90R7P) END AS Shopping&#xD;
   ,CASE WHEN hm.M_HACCScore_SUSSN IS NULL THEN '9' ELSE CONVERT(VARCHAR(2),hm.M_HACCScore_SUSSN) END AS Medication&#xD;
   ,CASE WHEN hm.M_HACCScore_LOOL2 IS NULL THEN '9' ELSE CONVERT(VARCHAR(2),hm.M_HACCScore_LOOL2) END AS Money&#xD;
   ,CASE WHEN wkh.HACCScore_ZOPWH IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), wkh.HACCScore_ZOPWH) END AS Walking&#xD;
   ,CASE WHEN btg.HACCScore_U7H7Q IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), btg.HACCScore_U7H7Q) END AS Bathing&#xD;
   ,CASE WHEN mer.HACCScore_8NMOT IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), mer.HACCScore_8NMOT) END AS Memory&#xD;
   ,CASE WHEN brb.HACCScore_AW0YA IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), brb.HACCScore_AW0YA) END AS BehavioProblem&#xD;
   ,CASE WHEN cmh.HACCScore_1R#S3 IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), cmh.HACCScore_1R#S3) END AS Communication&#xD;
   ,CASE WHEN hm.D_HACCScore_HERAL IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), hm.D_HACCScore_HERAL) END AS Dressing&#xD;
   ,CASE WHEN emg.HACCScore_O0PQI IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), emg.HACCScore_O0PQI) END AS Eating&#xD;
   ,CASE WHEN tlg.HACCScore_A1KJ3 IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), tlg.HACCScore_A1KJ3) END AS Toileting&#xD;
   ,CASE WHEN gbd.HACCScore_4E402 IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), gbd.HACCScore_4E402) END AS GettingOutOfBed&#xD;
   ,CASE WHEN cq.HACCScore1_0N#C1 IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), cq.HACCScore1_0N#C1) END AS CarerExistence&#xD;
   ,CASE WHEN cq.HACCScore2_#IVPZ IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), cq.HACCScore2_#IVPZ) END AS CarerResidencyStatus&#xD;
   ,CASE WHEN cq.HACCScore3_J6BN$ IS NULL THEN '9' ELSE CONVERT(VARCHAR(2), cq.HACCScore3_J6BN$) END AS CareMore&#xD;
FROM &lt;%=AppVars.db_CWSTask%&gt;.[dbo].[PersistentTask] pt&#xD;
INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType on pt.taskType = TaskType.uniqueId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskStatus on pt.taskStatus = TaskStatus.uniqueId AND TaskStatus.identifyingName = 'Completed'&#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping map ON map.pathway_enrollmentIdentifier = REPLACE(pt.subjectKey, 'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.[PathwayEnrollment].PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = map.[pathway_enrollmentIdentifier]&#xD;
INNER JOIN  &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.identifier = map.referral_identifier&#xD;
INNER JOIN  &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document doc ON doc.documentIdentifier = refmeta.dataId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData ON metaData.documentId = doc.documentId AND metaData.status_TDES0 != 'DRAFT'&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base ON base.documentId = metaData.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document haccdoc ON pt.dataId = haccdoc.documentIdentifier&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#GBL#HACC#Main_RF0B0 hm ON hm.documentid = haccdoc.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Pension_RZB4M hpn ON hpn.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCPnsnBnft_39W#$ pn ON pn.v2_CCRHACCPnsnBnft_39W#$ = hpn.v2_CCRHACCPnsnBnft_39W#$&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_CrQstns_MAP#5 cr ON cr.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCCrrQstnscmpnnt_ARZRA cq ON cq.v2_CCRHACCCrrQstnscmpnnt_ARZRA = cr.v2_CCRHACCCrrQstnscmpnnt_ARZRA&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Hswrk_OI0OU hk ON hk.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCHswrkcmpnnt_BDNFF hc ON hc.v2_CCRHACCHswrkcmpnnt_BDNFF = hk.v2_CCRHACCHswrkcmpnnt_BDNFF&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Trnsprt_ZURHP trp ON trp.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCTrnsprtcmpnnt_EAE0N trt ON trt.v2_CCRHACCTrnsprtcmpnnt_EAE0N = trp.v2_CCRHACCTrnsprtcmpnnt_EAE0N&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Walking_HQ9PU wkm ON wkm.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#HACCWalking_VIGQU wkh ON wkh.v2_CCR#HACCWalking_VIGQU = wkm.v2_CCR#HACCWalking_VIGQU&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Bathing_VG0K9 btm ON btm.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCBthngcmpnnt_W9S37 btg ON btg.v2_CCRHACCBthngcmpnnt_W9S37 = btm.v2_CCRHACCBthngcmpnnt_W9S37&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Memory_7U3T5 mem ON mem.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCMmrycmpnnt_74$N5 mer ON mer.v2_CCRHACCMmrycmpnnt_74$N5 = mem.v2_CCRHACCMmrycmpnnt_74$N5&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Bhvrl_X4LIF brm ON brm.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCBhvrlcmpnnt_KVPIX brb ON brb.v2_CCRHACCBhvrlcmpnnt_KVPIX = brm.v2_CCRHACCBhvrlcmpnnt_KVPIX&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Cmmnctn_SNYD9 cmm ON cmm.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCCmmnctncmpnnt_GC73H cmh ON cmh.v2_CCRHACCCmmnctncmpnnt_GC73H = cmm.v2_CCRHACCCmmnctncmpnnt_GC73H&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Eating_G3LLE emt ON emt.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCEtngcmpnnt_DU3QZ emg ON emg. v2_CCRHACCEtngcmpnnt_DU3QZ = emt.v2_CCRHACCEtngcmpnnt_DU3QZ&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Tltng_8OR5G tlt ON tlt.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCTltngcmpnnt_QDFMM  tlg ON tlg.v2_CCRHACCTltngcmpnnt_QDFMM = tlt.v2_CCRHACCTltngcmpnnt_QDFMM&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Gtngtfb_ZF1#U gbl ON gbl.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#HACC#Bed_549BV gbd ON gbd.v2_CCR#HACC#Bed_549BV = gbl.v2_CCR#HACC#Bed_549BV&#xD;
WHERE  pe.enrollmentStatus = 'ENROLLED' AND TaskType.identifyingName = 'HACC Assessment'&#xD;
&lt;%if get("URN")&lt;&gt;""%&gt;AND pe.patientId IN ('&lt;%=get("URN").replace(",","','")%&gt;')&lt;%end if%&gt;&#xD;
&lt;%if get("Date.low")&lt;&gt;""%&gt;AND metadata.dateSubmitted_L0HOZ&gt;= '&lt;%=get("Date.low")%&gt;'&lt;%end if%&gt;&#xD;
&lt;%if get("Date.high")&lt;&gt;""%&gt;AND metadata.dateSubmitted_L0HOZ&lt;= '&lt;%=get("Date.high")%&gt; 23:59:59'&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Date</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Assessment Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("d-M-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-M-d")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>50</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Assessment Date</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID (ACTPAS)</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID (CWS)</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pension Status</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Housework</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Transport</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Shopping</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medication</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Money</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Walking</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Bathing / Showering</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Memory</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Behavioural Problems</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Communication</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Dressing</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Eating</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Toileting</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Getting out of Bed</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Carer Existence</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Carer Residency Status</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Carer for more than one person</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>HACC Report</name>
		<data-source-name>java:comp/env/jdbc/referrals</data-source-name>
		<description>Extracting HACC data</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SElECT DISTINCT&#xD;
'STARTHEADER2' StartClient&#xD;
 ,'' LettersOfName&#xD;
 ,CONVERT(VARCHAR(25),p.dateTimeOfBirth,103) dateOfBirth&#xD;
 ,''  DateOfBirthEstimated&#xD;
 ,p.sex Sex&#xD;
 ,p.country BirthCountry&#xD;
 ,p.preferredLanguage LanguageSpoken&#xD;
 ,p.IndigenousStatus IndigenousStatus&#xD;
 ,p.stateorprovince State&#xD;
 ,p.city Suburb&#xD;
 ,p.ziporpostalcode PostCode&#xD;
 ,'' MissingSLKInformation&#xD;
 ,'' LivingArrangement&#xD;
 ,pn.HACCScore_55103 PensionStatus&#xD;
 ,'' DVACard&#xD;
 ,'' AccomodationSetting&#xD;
 ,'' CarerExistence&#xD;
 ,'' CarerLettersOfName&#xD;
 ,'' CarerDateOfBirth&#xD;
 ,'' CarerDateOfBirthEstimated&#xD;
 ,'' CarerSex&#xD;
 ,'' CarerCountry&#xD;
 ,'' CarerLanguageSpoken   &#xD;
 ,'' CarerIndigenousStatus &#xD;
 ,'' CarerState   &#xD;
 ,'' CarerSuburb  &#xD;
 ,'' CarerPostCode   &#xD;
 ,cq.HACCScore2_#IVPZ CarerResidencyStatus   &#xD;
 ,'' CarerRelation   &#xD;
 ,cq.HACCScore3_J6BN$ CarerForMoreThanOne &#xD;
 ,'' CarerCounselling   &#xD;
 ,'' CarerRespite &#xD;
 ,CONVERT(VARCHAR(25),metadata.dateSubmitted_L0HOZ,103)  DateOfLastAssessment &#xD;
 ,base.RT_source_RAZFB_desc SourceOfReferral    &#xD;
 ,CONVERT(VARCHAR(25),pe.enrollmentTime,103)  DateOfEntry   &#xD;
 ,CONVERT(VARCHAR(25),pe.modificationTime,103) DateOfExit   &#xD;
 ,'' ReasonForCessation &#xD;
 ,hc.HACCScore_CCIUS DomesticAssistance   &#xD;
 ,hm.S_HACCScore_90R7P SocialSupport   &#xD;
 ,'' NursingHome  &#xD;
 ,'' NursingCentre   &#xD;
 ,'' AlliedHome   &#xD;
 ,'' AlliedCentre &#xD;
 ,'' PersonalCare &#xD;
 ,'' CentreBased  &#xD;
 ,'' MealsHome &#xD;
 ,'' MealsCentre  &#xD;
 ,'' OtherFoodServices  &#xD;
 ,'' Assessment   &#xD;
 ,'' CaseManagement  &#xD;
 ,'' CareCoordination   &#xD;
 ,'' HomeMaintenance &#xD;
 ,'' HomeModification   &#xD;
 ,'' GoodsAndEquipment  &#xD;
 ,'' LinenService &#xD;
 ,trt.HACCScore_##ZTY TransportTrips   &#xD;
 ,'' Counselling  &#xD;
 ,'' FunctionalScreening   &#xD;
 ,'' AdditionalFunctionalScreening  &#xD;
 ,'' TimeTakenToCompleteForm  &#xD;
 ,'ENDCLIENT2' EndClient   &#xD;
 ,base.RT_IntlRcvr_MEJCJ_desc StaffTeam   &#xD;
 ,sta.teamType StaffSpecialty &#xD;
 ,p.patientID PMI &#xD;
 ,'' unknown1&#xD;
 ,'' unknow2&#xD;
 ,'~HACC'&#xD;
FROM &lt;%=AppVars.db_CWSTask%&gt;.[dbo].[PersistentTask] pt&#xD;
INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskType on pt.taskType = TaskType.uniqueId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.dbo.TaskStatus on pt.taskStatus = TaskStatus.uniqueId AND TaskStatus.identifyingName = 'Completed'&#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping map ON map.pathway_enrollmentIdentifier = REPLACE(pt.subjectKey, 'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.[PathwayEnrollment].PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = map.[pathway_enrollmentIdentifier]&#xD;
INNER JOIN  &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.identifier = map.referral_identifier&#xD;
INNER JOIN  &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document doc ON doc.documentIdentifier = refmeta.dataId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData ON metaData.documentId = doc.documentId AND metaData.status_TDES0 != 'DRAFT'&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K&#xD;
INNER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_CWSPatientDemographics p ON p.patientID = metaData_patient.IDNUMBER_9LV7R&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base ON base.documentId = metaData.documentId&#xD;
INNER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_CWSStaffTeams sta ON sta.code = base.RT_IntlRcvr_MEJCJ_cde&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document haccdoc ON pt.dataId = haccdoc.documentIdentifier&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#GBL#HACC#Main_RF0B0 hm ON hm.documentid = haccdoc.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Pension_RZB4M hp ON hp.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCPnsnBnft_39W#$ pn ON pn.v2_CCRHACCPnsnBnft_39W#$ = hp.v2_CCRHACCPnsnBnft_39W#$&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_CrQstns_MAP#5 cr ON cr.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCCrrQstnscmpnnt_ARZRA cq on cq.v2_CCRHACCCrrQstnscmpnnt_ARZRA = cr.v2_CCRHACCCrrQstnscmpnnt_ARZRA&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Hswrk_OI0OU hk on hk.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCHswrkcmpnnt_BDNFF hc on hc.v2_CCRHACCHswrkcmpnnt_BDNFF = hk.v2_CCRHACCHswrkcmpnnt_BDNFF&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCR#CCM_RF0B0_Trnsprt_ZURHP trp ON trp.v2_CCR#GBL#HACC#Main_RF0B0 = hm.v2_CCR#GBL#HACC#Main_RF0B0&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_CCRHACCTrnsprtcmpnnt_EAE0N trt on trt.v2_CCRHACCTrnsprtcmpnnt_EAE0N = trp.v2_CCRHACCTrnsprtcmpnnt_EAE0N&#xD;
WHERE  pe.enrollmentStatus = 'ENROLLED' AND TaskType.identifyingName = 'HACC Assessment'&#xD;
 &lt;%if get("Date.low")&lt;&gt;""%&gt;AND pe.enrollmentTime&gt;= '&lt;%=get("Date.low")%&gt;'&lt;%end if%&gt;&#xD;
 &lt;%if get("Date.high")&lt;&gt;""%&gt;AND pe.enrollmentTime&lt;= '&lt;%=get("Date.high")%&gt; 23:59:59'&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Date</name>
				<index>0</index>
				<default-value>;</default-value>
				<display-name>Assessment Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("d-M-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-M-d")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>50</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>StartClient</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>LettersOfName</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DateOfBirth</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DateOfBirthEstimated</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>BirthCountry</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>LanguageSpoken</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>IndigenousStatus</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>State</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Suburb</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PostCode</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>MissingSLKInformation</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>LivingArrangement</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PensionStatus</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DVACard</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>AccomodationSetting</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerExistence</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerLettersOfName</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerDateOfBirth</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerDateOfBirthEstimated</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerSex</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerCountry</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerLanguageSpoken</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerIndigenousStatus</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerState</name>
				<index>24</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerSuburb</name>
				<index>25</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerPostCode</name>
				<index>26</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerResidencyStatus</name>
				<index>27</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerRelation</name>
				<index>28</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerForMoreThanOne</name>
				<index>29</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerCounselling</name>
				<index>30</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CarerRespite</name>
				<index>31</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DateOfLastAssessment</name>
				<index>32</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SourceOfReferral</name>
				<index>33</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DateOfEntry</name>
				<index>34</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DateOfExit</name>
				<index>35</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ReasonForCessation</name>
				<index>36</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DomesticAssistance</name>
				<index>37</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SocialSupport</name>
				<index>38</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>NursingHome</name>
				<index>39</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>NursingCentre</name>
				<index>40</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>AlliedHome</name>
				<index>41</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>AlliedCentre</name>
				<index>42</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PersonalCare</name>
				<index>43</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CentreBased</name>
				<index>44</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>MealsHome</name>
				<index>45</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>MealsCentre</name>
				<index>46</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>OtherFoodServices</name>
				<index>47</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment</name>
				<index>48</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CaseManagement</name>
				<index>49</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>CareCoordination</name>
				<index>50</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>HomeMaintenance</name>
				<index>51</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>HomeModification</name>
				<index>52</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>GoodsAndEquipment</name>
				<index>53</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>LinenService</name>
				<index>54</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>TransportTrips</name>
				<index>55</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Counselling</name>
				<index>56</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>FunctionalScreening</name>
				<index>57</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>AdditionalFunctionalScreening</name>
				<index>58</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>TimeTakenToCompleteForm</name>
				<index>59</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>EndClient</name>
				<index>60</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>61</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Specialty</name>
				<index>62</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PMI</name>
				<index>63</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Unknown1</name>
				<index>64</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Unknow2</name>
				<index>65</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>66</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Referral Search (ACTPAS)</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>FM 22DEC2014 : Generic search to return list of comminty referrals information via the ACTPAS CDR VIews :: Orion_CommunityReferrals and  Orion_Clinicians &#xD;
Note this view may be deprecated by SSICT and require update</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT ocr.referralID as 'Referral ID'&#xD;
      , CAST( ocr.RecievedDate AS datetime) as 'Recieved Date' &#xD;
      , ocr.Priority as 'Referral Priority' &#xD;
      , ocr.ReferredToTeam as 'Referred to Staff Team'&#xD;
      , UPPER( ISNULL(ocl.familyname,'') )  +  ', ' + ISNULL(ocl.givenname,'') + '.' + ISNULL(ocl.title, '')  + '.' as 'Referred To Clinician' &#xD;
      , ocr.ReferredtoSpecialty&#xD;
      , UPPER( ISNULL(cwsr.SURNAME, '') ) + ', ' + ISNULL(cwsr.firstName, '') + '.' + ISNULL(cwsr.title, '') +'.' as 'Referred By Clinician'&#xD;
      , ocr.CompletedDate as 'Completed At' &#xD;
      , ocr.CancelledDate as 'Cancelled On' &#xD;
      , ocr.ReferralType as 'Referral Type' &#xD;
      , ocr.comment as 'Comment'&#xD;
      , ocr.ExpiryDate as 'Expiry Date' &#xD;
      , ocr.LastModifiedBy as 'Last Modified By' &#xD;
      , ocr.Facility as 'Owner Facility'&#xD;
  FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSReferrals ocr left join ACTPAS_CDR_VIEWS.dbo.Orion_CWSClinicians ocl &#xD;
	ON  ocr.ReferredToClinicianID = ocl.ClinicianID&#xD;
  left join ACTPAS_CDR_VIEWS.dbo.Orion_CWSReferrers cwsr  &#xD;
	ON cwsr.pcpClinicianId = ocr.ReferredByID&#xD;
	WHERE  1=1 &#xD;
&lt;%if AppVars.get("patientURNList")&lt;&gt;""%&gt;&#xD;
 AND ocr.PatientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Add Referral</name>
				<index>2</index>
				<action />
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>1</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>RecievedDate</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>3</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>4</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>5</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>6</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>7</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>8</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>9</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>10</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>11</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>12</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>13</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>14</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>true</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Referral Search (Awaiting Triage)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Main Homepage Specific Search: Integration driver version of 'Referrals Search (SQL)' that calls ReferralSOAPService to retrieve the service name</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>urgent DESC, receivedDate ASC</order-by>
		<query-string>SELECT &#xD;
        ISNULL(refMeta.eventDate,r.receivedDate ) as receivedDate  &#xD;
        , CONVERT(datetime, ISNULL(base.pD_DateofBirth_9AQFC,soap.pD_DateofBirth_WPS1K),106) as DateOfBirth &#xD;
        , LEFT(ISNULL(base.pD_gender_DI286,soap.pD_gender_J1NWH),1) as gender   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName   &#xD;
        , r.urgent as urgent   &#xD;
        , r.priorityCode as priority &#xD;
        , scd.shortDescription as status  &#xD;
        , CAST( base.referralReason_3388R  as varchar(255)) as referralReason  &#xD;
        , CASE WHEN r.statusCode = 'int_cr_cancelled' THEN 'Cancelled'&#xD;
          WHEN r.statusCode = 'int_cr_closed' THEN 'Discharged'&#xD;
          WHEN r.statusCode = 'int_cr_redirected' THEN 'Redirected'&#xD;
          ELSE scd.shortDescription END as StatusReferral &#xD;
        , r.patientIdentifier as patientId  &#xD;
        , r.patientNamespace as patientNamespace  &#xD;
        , r.referralRequestID as referralRequestID  &#xD;
        , r.version as version  &#xD;
        , r.referralService as referralService &#xD;
        , '' as ServiceName&#xD;
        , r.statusCode    &#xD;
        , CAST( CASE r.[lastModifiedByIdentifier] WHEN 'referrals-request-ws-soap' THEN 'External' ELSE r.[lastModifiedByIdentifier] END as varchar(100))AS requestCreatorIdentifier  &#xD;
         &#xD;
        , r.[lastModifiedDate] as lastModifiedDate&#xD;
        , r.identifier as identifier   &#xD;
        ,   &lt;%if AppVars.get("referralViewAccess")%&gt;'&lt;%=(js)AppVars.get("referralViewAccess")%&gt;'&lt;%end if%&gt;  as viewId  &#xD;
        , r.requiresReview as requiresReview &#xD;
        , rcd.shortDescription as assignee      &#xD;
        , r.statusReasonCode as statusReasonCode  &#xD;
        , rsm.ACTPASID as ACTPASID&#xD;
        ,'' as openRepositoryName&#xD;
        , CASE WHEN (SELECT TOP 1 cwsAppt.referralID FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments cwsAppt&#xD;
             WHERE rsm.ACTPASID = cwsAppt.referralID)IS NOT NULL THEN 'YES' &#xD;
        WHEN scd.shortDescription = 'Enrolled' THEN UPPER(scd.shortDescription) &#xD;
        ELSE NULL END AS [Appointments]&#xD;
        ,CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
FROM      Referral.ERF_ReferralView r   &#xD;
--INNER JOIN &lt;%=AppVars.db_ACTPAS%&gt; demographic WITH(NOLOCK) ON demographic.patientID = r.patientIdentifier&#xD;
INNER JOIN    Referral.ERF_Referral mr  ON mr.id = r.referralViewId &#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[vw_ccr_referral_content] v_refcontent WITH(NOLOCK) ON v_refcontent.referralId = r.identifier&#xD;
INNER JOIN  ACTPAS_CDR_VIEWS.dbo.Orion_CWSSpecialty sp ON sp.SpecialtyCode = v_refcontent.ReferredToSpecialty&#xD;
LEFT OUTER JOIN    [Referral].[ERF_ReferralMetaData] refMeta  ON mr.metaDataId = refMeta.id  &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[ReferralToPathwayMapping] rsm  ON rsm.[referral_identifier] = r.identifier &#xD;
LEFT OUTER JOIN PathwayEnrollment.PES_PathwayEnrollment pe  ON pe.enrollmentIdentifier = rsm.[pathway_enrollmentIdentifier] &#xD;
LEFT OUTER JOIN Codeset.CodeDefinition scd  ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem  &#xD;
LEFT OUTER JOIN Codeset.CodeDefinition rcd  ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem     &#xD;
--LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[cUser] cUser  ON r.requestCreatorIdentifier = cUser.name  &#xD;
--LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[UserAttribute] UserAttribute  ON cUser.uniqueId = UserAttribute.cUser AND UserAttribute.name = 'ACTPAS SpecialityText'   &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = refMeta.dataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId AND metaData.STATUS_TDES0 = 'FINAL' &#xD;
&#xD;
WHERE 1=1&#xD;
    &lt;%if AppVars.get("patientURNList") &lt;&gt;"" %&gt;&#xD;
      AND r.patientIdentifier IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    &lt;%end if%&gt;&#xD;
 &#xD;
    &lt;%if get("Referral Id") &lt;&gt; ""%&gt;  &#xD;
      AND r.identifier like '%&lt;%=get("Referral Id") %&gt;%' &#xD;
    &lt;% end if %&gt; &#xD;
    &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
     AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
   &lt;%end if%&gt;  &#xD;
     &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
      AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if get("Creator")&lt;&gt;""%&gt;  &#xD;
      AND r.requestCreatorIdentifier LIKE &lt;%=SqlParameters.add(get("Creator") + "%")%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("Identifier")&lt;&gt;""%&gt;  &#xD;
      AND r.identifier LIKE &lt;%=SqlParameters.add(get("Identifier") + "%")%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("SourceReferralID")&lt;&gt;""%&gt;  &#xD;
      AND r.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if AppVars.patientURNList &lt;&gt;"" %&gt; &#xD;
      AND r.patientNamespace = &lt;%=SqlParameters.add(AppVars.patientNamespace)%&gt; &#xD;
      AND r.patientIdentifier IN ( &lt;%=AppVars.patientURNList%&gt; ) &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;% if get("Receiver") &lt;&gt; "" %&gt;  &#xD;
      AND rcd.shortDescription = &lt;%=SqlParameters.add(get("Receiver"))%&gt;  &#xD;
    &lt;% end if %&gt; &#xD;
    &lt;%if get("URN")&lt;&gt;""%&gt; &#xD;
      AND r.patientIdentifier LIKE &lt;%=SqlParameters.add(get("URN"))%&gt;   &#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
      AND r.receivedDate &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
      AND r.receivedDate &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("Last Updated By") &lt;&gt; ""%&gt;  &#xD;
      AND r.[lastModifiedByIdentifier] like '%&lt;%=get("Last Updated By") %&gt;%' &#xD;
    &lt;% end if %&gt; &#xD;
    &#xD;
    &lt;%if get("Status") &lt;&gt; ""%&gt;  &#xD;
      AND r.statusCode = '&lt;%=get("Status") %&gt;' &#xD;
    &lt;%else%&gt;&#xD;
      AND (r.statusCode = 'int_cr_complex' OR r.statusCode = 'int_cr_callback' OR r.statusCode = 'int_cr_transfer')&#xD;
    &lt;% end if %&gt; &#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND sp.SpecialtyCode =  '&lt;%=get("Specialty")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
&#xD;
&lt;%if Request.referralState="int_cr_internal" || Request.referralState=""%&gt;  &#xD;
  &lt;%if get("Draft") &lt;&gt; ""%&gt;  &#xD;
            AND r.statusCode = 'DRAFT' &#xD;
    &lt;% end if %&gt; &#xD;
&#xD;
UNION ALL&#xD;
&#xD;
SELECT &#xD;
        rr.creationDateTime as receivedDate&#xD;
        , CONVERT(datetime, ISNULL(base.pD_DateofBirth_9AQFC,soap.pD_DateofBirth_WPS1K),106) as DateOfBirth &#xD;
        , LEFT(ISNULL(base.pD_gender_DI286,soap.pD_gender_J1NWH),1) as gender   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName     &#xD;
        , rr.urgent as urgent&#xD;
        , null as priority  &#xD;
        , rr.status as status&#xD;
        , '' as referralReason &#xD;
        , 'Draft' as StatusReferral  &#xD;
        , rr.patientId as patientId&#xD;
        , 'OHCP' as patientNamespace &#xD;
        , rr.referralRequestId as referralRequestID    &#xD;
        , '' as version  &#xD;
        , rr.referralService as referralService&#xD;
        , '' as ServiceName&#xD;
        , 'Draft' as statusCode    &#xD;
        , CAST( CASE rr.creatorIdentifier WHEN 'referrals-request-ws-soap' THEN 'External' ELSE rr.creatorIdentifier  END as varchar(100))AS creatorIdentifier  &#xD;
        , null as lastModifiedByIdentifier&#xD;
        , null as identifier &#xD;
        , ''  as viewId  &#xD;
        , '' as requiresReview&#xD;
        , '' as assignee      &#xD;
        , '' as statusReasonCode   &#xD;
        , '' as ACTPASID&#xD;
        , '' as openRepositoryName&#xD;
        , '' AS [Appointments]&#xD;
        ,CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_Specialty_D017M ElSE ISNULL(base.RT_CT_Specialty_D017M,base.RT_SS_SpecialtyDesc_CVUYD) END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
FROM      RefRequest.ERF_ReferralRequestView rr  &#xD;
--INNER JOIN &lt;%=AppVars.db_ACTPAS%&gt; demographic WITH(NOLOCK) ON demographic.patientID = rr.patientId&#xD;
--LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[cUser] cUser  ON rr.creatorIdentifier = cUser.name  &#xD;
--LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[UserAttribute] UserAttribute  ON cUser.uniqueId = UserAttribute.cUser AND UserAttribute.name = 'ACTPAS SpecialityText'   &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = rr.modelDataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId     &#xD;
   &#xD;
WHERE 1=1 &#xD;
      AND rr.status = 'DRAFT'&#xD;
      AND rr.receivedMessageId IS NULL &#xD;
    &lt;%if AppVars.get("patientURNList") &lt;&gt;"" %&gt;&#xD;
      AND rr.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    &lt;%end if%&gt;&#xD;
 &#xD;
    &lt;%if get("Referral Id") &lt;&gt; ""%&gt;  &#xD;
      AND rr.referralRequestId like '%&lt;%=get("Referral Id") %&gt;%' &#xD;
    &lt;% end if %&gt; &#xD;
 &#xD;
    &lt;%if get("Draft") &lt;&gt; ""%&gt;  &#xD;
            AND rr.status = 'DRAFT' &#xD;
    &lt;% end if %&gt; &#xD;
&#xD;
    &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
     AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
   &lt;%end if%&gt;  &#xD;
     &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
      AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
    &lt;%end if%&gt;  &#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
&#xD;
&#xD;
&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receive Date</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Received On Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral Id</name>
				<index>2</index>
				<default-value />
				<display-name>Referral Id</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>3</index>
				<default-value />
				<display-name>Patient Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Middle Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>4</index>
				<default-value />
				<display-name>Staff Team</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Staff Team")%&gt;&lt;%exec config.setReturnValueName("Staff Team")%&gt;&lt;%exec config.setDisplayValueName("Staff Team")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>5</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Specialty Search")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Description")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Last Updated By</name>
				<index>6</index>
				<default-value />
				<display-name>Last Updated By</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred To Clinician</name>
				<index>7</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Clinician Search")%&gt;&lt;%exec config.setReturnValueName("clinicianID")%&gt;&lt;%exec config.setDisplayValueName("Name")%&gt;&lt;%exec config.setWidth(800)%&gt;&lt;%exec config.setHeight(1024)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Status</name>
				<index>8</index>
				<default-value />
				<display-name>Status</display-name>
				<input-type>Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("", "")%&gt;&lt;%exec config.setOption("int_cr_complex", "Registered")%&gt;&lt;%exec config.setOption("int_cr_callback", "Call Back")%&gt;&lt;%exec config.setOption("int_cr_transfer", "Transferred")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Draft</name>
				<index>9</index>
				<default-value />
				<display-name>Draft</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Y", "Draft Only")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Referral</name>
			</context-view>
			<default-context-view-entry-point>
				<context-view>
					<name>Referral</name>
				</context-view>
				<entry-point>
					<name>CCR DR Referral Context</name>
					<application>
						<name>Healthcare pathways - CCR</name>
					</application>
					<secure-enabled>false</secure-enabled>
				</entry-point>
			</default-context-view-entry-point>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>20</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Appointment</name>
				<index>0</index>
				<action>var appointmentOID = row.get(23);&#xD;
//get the application with the search required &#xD;
var ipmApplication = new Application ("Healthcare pathways - CCR ACTPAS", "CCR Clinician Appointments") ;&#xD;
//add the values to pass to the generic search - appointment iD and the clinician&#xD;
//from the selected row&#xD;
&#xD;
  var token = row.getSecureInformationToken(); &#xD;
   ipmApplication.setSecureInformationToken(token); &#xD;
  &#xD;
//use the singleton Concerto Object to Open the Application/search in a popup wondow&#xD;
concerto.openApplicationInWindow(ipmApplication, null, null, 700, 900) ;</action>
				<css-class>&lt;%if row.get(25).originalValue="YES"%&gt;SEARCH&lt;%elseif row.get(25).originalValue="ENROLLED"%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date of Birth (Age)</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusCode</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = "Booked"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
&lt;%else%&gt;&#xD;
 &lt;%if value = "Completed"%&gt;&#xD;
&lt;span style="text-align:right; background-color: #d2d2cf; border-color: #636360; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
  &#xD;
 &lt;%else%&gt;&#xD;
 &lt;%if value = "Declined"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
 &lt;%else%&gt;&#xD;
  &lt;%if row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
   &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(5).getOriginalValue%&gt; &lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
  &lt;%if value = "Forward"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Assigned&lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>Version</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>referralServiceCode</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>code</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(24).getOriginalValue= "Transfer"%&gt;int_cr_transfer&lt;%else%&gt;&#xD;
&lt;%if row.get(24).getOriginalValue= "Call back"%&gt;int_cr_forward&lt;%else%&gt;&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;p title=&lt;%=row.get(16).getOriginalValue%&gt;&gt; &lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&lt;/P&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>View ID</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
Yes&#xD;
&lt;%else if%&gt;&#xD;
No&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusReasonCode</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ACTPASID</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>openRepositoryName</name>
				<index>24</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointments</name>
				<index>25</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=value.replace(";", "&lt;br&gt;")%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>26</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred To Clinician</name>
				<index>27</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var referralId = row.get(18);&#xD;
  var patientId = row.get(9);&#xD;
  var context = new Context("Referral");&#xD;
  var application = new Application("Healthcare pathways - CCR", "CCR DR Referral Context");&#xD;
  application.setSecureInformationToken(row.secureInformationToken);&#xD;
  context.setApplication(application);&#xD;
  context.put("Patient.Id.MRN", patientId); &#xD;
  context.put("[orionhealth.com]Referral.Id.ReferralId",referralId);&#xD;
  concerto.setContext(context);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referral Search (Document Linking)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Search used to allow document linking from inside a Nursing Assessments form.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
  ISNULL(refMeta.eventDate,r.receivedDate ) &#xD;
  ,r.priorityCode as priority&#xD;
  ,scd.shortDescription as status&#xD;
  ,ISNULL( CAST( base.referralReason_3388R  as varchar(255)) , CAST( soap.referralReason_WN792 as varchar(255)) )as referralReason&#xD;
  ,r.[lastModifiedByIdentifier] as lastModifiedByIdentifier&#xD;
  ,r.identifier&#xD;
  ,CASE WHEN rcd.shortDescription != '' THEN rcd.shortDescription WHEN base.RT_SS_StaffCode_9NXA$ != '' THEN base.RT_SS_StaffDesc_BCBVN ElSE ISNULL(soap.ACTPASR_RFT_SS_StaffDesc_650#M, soap.ACTPASR_RFT_CT_sT_StffTm_7C$92) END  as Assignee&#xD;
  ,CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_Specialty_D017M WHEN base.RT_SS_SpecialtyCode_0FIQL != '' THEN base.RT_SS_SpecialtyDesc_CVUYD ElSE ISNULL(soap.ACTPASR_RFT_CT_Specialty_IJ450,soap.ACTPASR_RFT_SS_SpcltyDsc_$M2J9) END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(soap.ACTPASR_RFT_CT_Referrer_#F7BF,'') END as ReferredToClinician&#xD;
&#xD;
  ,a.documentIdentifier AS "Document ID"&#xD;
  ,'Referrals Repository - EoC' AS "namespace"&#xD;
  ,'Associated Referral' AS "Title"&#xD;
  ,replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa') as "Category"&#xD;
  ,ISNULL( CAST( base.referralReason_3388R  as varchar(255)) , CAST( soap.referralReason_WN792 as varchar(255)) ) as referralReason&#xD;
  ,ISNULL(refMeta.eventDate,r.receivedDate ) AS "Date"&#xD;
  ,r.submitterIdentifier AS "Author"&#xD;
  ,attch.formsInternalId_MXZPJ formsInternalId&#xD;
&#xD;
FROM &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe&#xD;
INNER JOIN Referral.ERF_ReferralView r ON pe.patientId = r.patientIdentifier  &#xD;
LEFT OUTER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem &#xD;
LEFT OUTER JOIN Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem &#xD;
INNER JOIN (  &#xD;
SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType  FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  &#xD;
) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier AND pathwayIdentifiers.referral_identifier = r.identifier&#xD;
&#xD;
INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.identifier = pathwayIdentifiers.referral_identifier&#xD;
INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V_DOCUMENT document ON refmeta.dataId = document.documentIdentifier &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = document.documentId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K   &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a ON a.documentIdentifier = refmeta.dataId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_SOAP#Referral#Request_NYIIB soap ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base ON base.DOCUMENTID = a.documentId    &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INTCRBs_DDKVM_Invstgt_0$GGP inv ON inv.v2_INT#CR#Base_DDKVM =base.v2_INT#CR#Base_DDKVM &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INTCRBs_DDKVM_atchm_H#4NIUH attch ON attch.v2_INTCRBs_DDKVM_Invstgt_0$GGP = inv.v2_INTCRBs_DDKVM_Invstgt_0$GGP&#xD;
&#xD;
WHERE r.statusCode = 'int_cr_pathwayActive'  &#xD;
AND r.statusCode != 'int_cr_closed'  &#xD;
AND r.patientIdentifier IN ( '&lt;%=AppVars.patientURNList%&gt;' )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Document link - View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if Request.getServletPath().endsWith(".htm")%&gt;&#xD;
  &lt;%if value = "Completed"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d2d2cf; border-color: #636360; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
    &lt;%elseif row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
          &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(5).getOriginalValue%&gt; &lt;/span&gt;&#xD;
        &lt;%elseif value = "Forward"%&gt;&#xD;
          &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Assigned&lt;/span&gt;&#xD;
          &lt;%else%&gt;&#xD;
            &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
          &lt;%end if%&gt;&#xD;
      &lt;%end if%&gt;&#xD;
    &lt;%end if%&gt;  &#xD;
  &lt;%end if%&gt;  &#xD;
&#xD;
&lt;%if Request.getServletPath().endsWith(".htm") = false %&gt;&#xD;
&lt;%if value = "Completed"%&gt;&#xD;
    &lt;%=(html)value%&gt; &#xD;
    &lt;%elseif row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
        &lt;%=row.get(5).getOriginalValue%&gt;&#xD;
        &lt;%elseif value = "Forward"%&gt;&#xD;
          Assigned&#xD;
        &lt;%else%&gt;&#xD;
            &lt;%=(html)value%&gt;&#xD;
          &lt;%end if%&gt;&#xD;
      &lt;%end if%&gt;&#xD;
    &lt;%end if%&gt;  &#xD;
  &lt;%end if%&gt; &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred To Clinician</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document ID</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Date</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Author</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; null%&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
 &lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (row.get(0)) { &#xD;
  var applicationName = 'Healthcare pathways - CCR Referrals';&#xD;
  var token = row.getSecureInformationToken(); &#xD;
  var application = new Application( applicationName, "Document link - View Referral by Id");&#xD;
   &#xD;
  application.setSecureInformationToken(token); &#xD;
   concerto.openApplication(application);&#xD;
&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (All)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Referral Search: List of ALL referrals captured in Clinical referrals system.&#xD;
Integration driver version of 'Referrals Search (SQL)' that calls ReferralSOAPService to retrieve the service name</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>receivedDate DESC</order-by>
		<query-string>SELECT   ISNULL(refMeta.eventDate,r.receivedDate ) as receivedDate   &#xD;
  , CONVERT(datetime, ISNULL(base.pD_DateofBirth_9AQFC,soap.pD_DateofBirth_WPS1K),106) as DateOfBirth &#xD;
  , LEFT(ISNULL(base.pD_gender_DI286,soap.pD_gender_J1NWH),1) as gender   &#xD;
  , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName   &#xD;
  , r.urgent as urgent   &#xD;
  , r.priorityCode as priority &#xD;
  , scd.shortDescription as status &#xD;
  , CAST( base.referralReason_3388R  as varchar(255)) as referralReason  &#xD;
  , CASE WHEN r.statusCode = 'int_cr_cancelled' THEN 'Cancelled'&#xD;
  WHEN r.statusCode = 'int_cr_closed' THEN 'Discharged'&#xD;
  WHEN r.statusCode = 'int_cr_redirected' THEN 'Redirected'&#xD;
  ELSE scd.shortDescription END as StatusReferral&#xD;
  , r.patientIdentifier as patientId  &#xD;
  , r.referralRequestID as referralRequestID  &#xD;
  , r.referralService as referralService&#xD;
  , r.statusCode    &#xD;
  ,  r.requestCreatorIdentifier  AS requestCreatorIdentifier  &#xD;
  , r.[lastModifiedByIdentifier] as lastModifiedByIdentifier&#xD;
  , r.identifier as identifier   &#xD;
  ,  &lt;%if AppVars.get("referralViewAccess")%&gt;'&lt;%=(js)AppVars.get("referralViewAccess")%&gt;'&lt;%end if%&gt;  as viewId  &#xD;
  , CASE WHEN r.ReceiverCode != 'Unknown' THEN rcd.shortDescription ElSE ISNULL(base.RT_CT_sT_StaffTeam_9HQE5, base.RT_SS_StaffDesc_BCBVN) END  as staffTeam      &#xD;
  , r.statusReasonCode as statusReasonCode  &#xD;
  , rsm.ACTPASID as ACTPASID &#xD;
  , CASE WHEN (SELECT TOP 1 cwsAppt.referralID FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments cwsAppt WHERE rsm.ACTPASID = cwsAppt.referralID) IS NOT NULL THEN 'YES' WHEN scd.shortDescription = 'Enrolled' THEN UPPER(scd.shortDescription) ELSE NULL END AS [Appointments]&#xD;
  ,CASE WHEN (DATEDIFF(DAY, r.receivedDate, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END as dateStatus&#xD;
  ,CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
  ,attch.formsInternalId_MXZPJ formsInternalId&#xD;
FROM      Referral.ERF_ReferralView r   &#xD;
INNER JOIN    Referral.ERF_Referral mr WITH(NOLOCK) ON mr.id = r.referralViewId  &#xD;
INNER JOIN    [Referral].[ERF_ReferralMetaData] refMeta  WITH(NOLOCK) ON mr.metaDataId = refMeta.id  &#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[vw_ccr_referral_content] v_refcontent WITH(NOLOCK) ON v_refcontent.referralId = r.identifier&#xD;
INNER JOIN  ACTPAS_CDR_VIEWS.dbo.Orion_CWSSpecialty sp WITH(NOLOCK) ON sp.SpecialtyCode = v_refcontent.ReferredToSpecialty&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[ReferralToPathwayMapping] rsm WITH(NOLOCK) ON rsm.[referral_identifier] = r.identifier &#xD;
LEFT OUTER JOIN PathwayEnrollment.PES_PathwayEnrollment pe WITH(NOLOCK) ON pe.enrollmentIdentifier = rsm.[pathway_enrollmentIdentifier] &#xD;
INNER JOIN Codeset.CodeDefinition scd WITH(NOLOCK) ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem  &#xD;
INNER JOIN Codeset.CodeDefinition rcd WITH(NOLOCK) ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem      &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a WITH(NOLOCK) ON a.documentIdentifier = refMeta.dataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base WITH(NOLOCK) ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) on metaData.documentId = base.documentId AND metaData.STATUS_TDES0 = 'FINAL' &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INTCRBs_DDKVM_Invstgt_0$GGP inv ON inv.v2_INT#CR#Base_DDKVM =base.v2_INT#CR#Base_DDKVM  &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INTCRBs_DDKVM_atchm_H#4NIUH attch ON attch.v2_INTCRBs_DDKVM_Invstgt_0$GGP = inv.v2_INTCRBs_DDKVM_Invstgt_0$GGP  &#xD;
WHERE 1=1 &#xD;
  &lt;%if Request.referralState&lt;&gt;""%&gt;AND r.statusCode = &lt;%if Request.referralState="int_cr_transfer"%&gt;'int_cr_forward' OR r.statusCode = 'int_cr_transfer' &lt;%else%&gt; &lt;%if Request.referralState="int_cr_completed"%&gt;'int_cr_closed' OR r.statusCode = 'int_cr_redirected' OR r.statusCode = 'int_cr_cancelled'&lt;%else%&gt; '&lt;%=Request.referralState%&gt;'&lt;%end if%&gt;&lt;%end if%&gt; &#xD;
  &lt;%if Request.referralState="int_cr_forward"%&gt; &#xD;
    AND r.statusReasonCode = 'Call Back'  &#xD;
  &lt;%end if%&gt;  &#xD;
  &lt;%if Request.referralState="int_cr_callback"%&gt; &#xD;
    AND r.statusCode = 'int_cr_callback' &#xD;
  &lt;%end if%&gt; &#xD;
  &lt;%end if%&gt;  &#xD;
  &lt;%if get("Referral Id") &lt;&gt; ""%&gt;  &#xD;
    AND r.identifier like '%&lt;%=get("Referral Id") %&gt;%' &#xD;
  &lt;% end if %&gt;&#xD;
  &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
    AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
  &lt;%end if%&gt;  &#xD;
  &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
    AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
  &lt;%end if%&gt;  &#xD;
  &lt;%if get("Creator")&lt;&gt;""%&gt;  &#xD;
    AND r.requestCreatorIdentifier LIKE &lt;%=SqlParameters.add(get("Creator") + "%")%&gt; &#xD;
  &lt;%end if%&gt; &#xD;
  &lt;%if get("Identifier")&lt;&gt;""%&gt;  &#xD;
    AND r.identifier LIKE &lt;%=SqlParameters.add(get("Identifier") + "%")%&gt; &#xD;
  &lt;%end if%&gt; &#xD;
  &lt;%if get("SourceReferralID")&lt;&gt;""%&gt;  &#xD;
    AND r.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt; &#xD;
  &lt;%end if%&gt; &#xD;
  &lt;%if AppVars.patientURNList &lt;&gt;"" %&gt; &#xD;
    AND r.patientNamespace = &lt;%=SqlParameters.add(AppVars.patientNamespace)%&gt; &#xD;
    AND r.patientIdentifier IN ( &lt;%=AppVars.patientURNList%&gt; ) &#xD;
  &lt;%end if%&gt; &#xD;
  &lt;% if get("Receiver") &lt;&gt; "" %&gt;  &#xD;
    AND rcd.shortDescription = &lt;%=SqlParameters.add(get("Receiver"))%&gt;  &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;%if get("URN")&lt;&gt;""%&gt; &#xD;
    AND r.patientIdentifier LIKE &lt;%=SqlParameters.add(get("URN"))%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
    AND r.receivedDate &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
    AND r.receivedDate &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
  &lt;%end if%&gt; &#xD;
  &lt;%if get("Last Updated By") &lt;&gt; ""%&gt;  &#xD;
    AND r.[lastModifiedByIdentifier] like '%&lt;%=get("Last Updated By") %&gt;%' &#xD;
  &lt;%end if%&gt;  &#xD;
  &lt;%if get("Status") &lt;&gt; ""%&gt;  &#xD;
    AND r.statusCode  ='&lt;%=get("Status") %&gt;' &#xD;
  &lt;%end if%&gt; &#xD;
  &lt;%if get("Draft") = "Y" %&gt;  &#xD;
    AND 1=2&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Draft") = "N"%&gt;  &#xD;
    AND CASE WHEN (DATEDIFF(DAY, r.receivedDate, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END = 'EXPIRED' &#xD;
    AND scd.shortDescription != 'Enrolled' AND scd.shortDescription != 'Booked'&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND sp.SpecialtyCode  =  '&lt;%=get("Specialty")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
&#xD;
/*ALL REFERRAL SEARCH USER ATTRIBUTE SPECIFIC */&#xD;
&#xD;
  &lt;%if User.hasRole("ClPtl_CNTeamleader") || User.hasRole("Apps_ClPtl_CNTeamleader_IAM_Health") %&gt;  &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt; &#xD;
  &lt;%end if%&gt;&#xD;
&#xD;
&lt;%if get("Status") = ""%&gt;&#xD;
&#xD;
  UNION ALL&#xD;
&#xD;
  SELECT &#xD;
        rr.creationDateTime as receivedDate&#xD;
        , CONVERT(datetime, ISNULL(base.pD_DateofBirth_9AQFC,soap.pD_DateofBirth_WPS1K),106) as DateOfBirth &#xD;
        , LEFT(ISNULL(base.pD_gender_DI286,soap.pD_gender_J1NWH),1) as gender   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName        &#xD;
        , rr.urgent as urgent&#xD;
        , null as priority  &#xD;
        , rr.status as status&#xD;
        , '' as referralReason &#xD;
        , 'Draft' as StatusReferral  &#xD;
        , rr.patientId as patientId &#xD;
        , rr.referralRequestId as referralRequestID    &#xD;
        , rr.referralService as referralService &#xD;
        , 'Draft' as statusCode   &#xD;
        , CASE rr.creatorIdentifier WHEN 'referrals-request-ws-soap' THEN 'External' ELSE CAST(rr.creatorIdentifier as varchar(20)) END AS requestCreatorIdentifier  &#xD;
        , '' as lastModifiedByIdentifier&#xD;
        , CAST(rr.referralRequestId as varchar(20) ) as identifier &#xD;
        , ''  as viewId   &#xD;
        , CASE WHEN rr.receiverCode !='?' THEN rcd.shortDescription ELSE '' END as assignee      &#xD;
        , '' as statusReasonCode   &#xD;
        , '' as ACTPASID &#xD;
        , '' AS [Appointments]&#xD;
    ,CASE WHEN (DATEDIFF(DAY, rr.creationDateTime, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END as dateStatus&#xD;
  ,sp.SpecialtyCode   AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
  ,'1' as formsInternalId&#xD;
  FROM      RefRequest.ERF_ReferralRequestView rr &#xD;
  INNER JOIN      Referral.ERF_ReferralView r WITH(NOLOCK) ON rr.[referralRequestId] = r.[referralRequestId] &#xD;
  INNER JOIN Codeset.CodeDefinition rcd WITH(NOLOCK) ON rcd.code = rr.ReceiverCode AND rcd.codingSystem = rr.ReceiverCodingSystem  &#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[vw_ccr_referral_content] v_refcontent WITH(NOLOCK) ON v_refcontent.referralId = r.identifier&#xD;
  LEFT OUTER JOIN  ACTPAS_CDR_VIEWS.dbo.Orion_CWSSpecialty sp WITH(NOLOCK) ON sp.SpecialtyCode = v_refcontent.ReferredToSpecialty  &#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a WITH(NOLOCK) ON a.documentIdentifier = rr.modelDataId &#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base WITH(NOLOCK) ON base.DOCUMENTID = a.documentId &#xD;
  LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) on metaData.documentId = base.documentId&#xD;
  WHERE 1=1 &#xD;
    AND rr.status = 'DRAFT'&#xD;
    AND rr.receivedMessageId IS NULL  &#xD;
  &lt;%if get("Referral Id") &lt;&gt; ""%&gt;  &#xD;
    AND rr.referralRequestId like '%&lt;%=get("Referral Id") %&gt;%' &#xD;
  &lt;% end if %&gt;&#xD;
&#xD;
  &lt;%if get("URN") &lt;&gt;"" %&gt;&#xD;
    AND rr.patientId like '%&lt;%=get("URN")%&gt;%'&#xD;
  &lt;%end if%&gt; &#xD;
&#xD;
  &lt;%if get("Draft") = "N"%&gt;  &#xD;
    AND CASE WHEN (DATEDIFF(DAY, creationDateTime, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END = 'EXPIRED'  &#xD;
  &lt;% end if %&gt;  &#xD;
&#xD;
&#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND sp.SpecialtyCode =  '&lt;%=get("Specialty")%&gt;' /*Currently not populated*/&#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Receiver") &lt;&gt; "" %&gt;  &#xD;
    AND 1 = 2 /*Currently not populated*/&#xD;
  &lt;% end if %&gt; &#xD;
  &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
    AND base.pD_name_I4EFJ LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
  &lt;%end if%&gt;  &#xD;
  &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
    AND base.pD_name_I4EFJ LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
  &lt;%end if%&gt;   &#xD;
  &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
    AND rr.creationDateTime &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
    AND rr.creationDateTime &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
  &lt;%end if%&gt;   &#xD;
&#xD;
/*ALL REFERRAL SEARCH USER ATTRIBUTE SPECIFIC */&#xD;
&#xD;
  &lt;%if User.hasRole("ClPtl_CNTeamleader") || User.hasRole("Apps_ClPtl_CNTeamleader_IAM_Health") %&gt;  &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_SS_SpecialtyCode_0FIQL,'') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt; &#xD;
  &lt;%end if%&gt;&#xD;
&#xD;
&#xD;
  &#xD;
 &lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receive Date</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Received On Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Last Updated By</name>
				<index>2</index>
				<default-value />
				<display-name>Last Updated By</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>3</index>
				<default-value />
				<display-name>Patient Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Middle Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>4</index>
				<default-value />
				<display-name>Staff Team</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Staff Team")%&gt;&lt;%exec config.setReturnValueName("Staff Team")%&gt;&lt;%exec config.setDisplayValueName("Staff Team")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>5</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Specialty Search")%&gt;&lt;%exec config.setReturnValueName("code")%&gt;&lt;%exec config.setDisplayValueName("description")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral Id</name>
				<index>6</index>
				<default-value />
				<display-name>Referral Id</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred To Clinician</name>
				<index>7</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Clinician Search")%&gt;&lt;%exec config.setReturnValueName("clinicianID")%&gt;&lt;%exec config.setDisplayValueName("Name")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Status</name>
				<index>8</index>
				<default-value />
				<display-name>Status</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/cwsclinical")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT r.statusCode as statusCode  ,\r\n        CASE WHEN r.statusCode = 'int_cr_cancelled' THEN 'Cancelled'\r\n          WHEN r.statusCode = 'int_cr_closed' THEN 'Discharged'\r\n          WHEN r.statusCode = 'int_cr_redirected' THEN 'Redirected'\r\n          ELSE scd.shortDescription END as StatusReferral\r\nFROM      Referral.ERF_ReferralView r      \r\nINNER JOIN Codeset.CodeDefinition scd  ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem")%&gt;&lt;%exec config.setOptionColumnName("statusCode")%&gt;&lt;%exec config.setDisplayColumnName("StatusReferral")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Draft</name>
				<index>9</index>
				<default-value />
				<display-name />
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Y", "Draft Only")%&gt;&lt;%exec config.setOption("N", "Overdue")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Referral</name>
			</context-view>
			<default-context-view-entry-point>
				<context-view>
					<name>Referral</name>
				</context-view>
				<entry-point>
					<name>CCR DR Referral Context</name>
					<application>
						<name>Healthcare pathways - CCR</name>
					</application>
					<secure-enabled>false</secure-enabled>
				</entry-point>
			</default-context-view-entry-point>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>20</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&#xD;
&lt;%if value %&gt;&#xD;
  &lt;%if row.get(21).originalValue = "VALID"%&gt;&#xD;
  &lt;%elseif row.get(21).originalValue = "EXPIRED" &amp;&amp; row.get(6).originalValue &lt;&gt;"Enrolled" &amp;&amp; row.get(6).originalValue &lt;&gt;"Booked"%&gt;&#xD;
    &lt;span title="More than 3 days old" style="text-align:right; background-color: #be0000; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;OVERDUE&lt;/span&gt;  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date of Birth (Age)</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusCode</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if Request.getPathInfo().endsWith( ".htm" )%&gt;&#xD;
	&lt;%if value = "Completed"%&gt;&#xD;
	&lt;span style="text-align:right; background-color: #d2d2cf; border-color: #636360; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
	&lt;%else%&gt;&#xD;
	  &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
	&lt;%end if%&gt;&#xD;
&#xD;
&#xD;
&lt;%else%&gt;&#xD;
	&lt;%if value = "Completed"%&gt;&#xD;
	 &lt;%=(html)value%&gt; &#xD;
	&lt;%else%&gt;&#xD;
	  &lt;%=(html)value%&gt;  &#xD;
	&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>referralServiceCode</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>code</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(24).getOriginalValue= "Transfer"%&gt;int_cr_transfer&lt;%else%&gt;&#xD;
&lt;%if row.get(24).getOriginalValue= "Call back"%&gt;int_cr_forward&lt;%else%&gt;&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>View ID</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusReasonCode</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ACTPASID</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointments</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=value.replace(";", "&lt;br&gt;")%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>dateStatus</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred To Clinician</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>24</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; null || row.get(13).originalValue = "referrals-request-ws-soap" %&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var referralId = row.get(15);&#xD;
  var patientId = row.get(9);&#xD;
  var context = new Context("Referral");&#xD;
  var application = new Application("Healthcare pathways - CCR", "CCR DR Referral Context");&#xD;
  application.setSecureInformationToken(row.secureInformationToken);&#xD;
  context.setApplication(application);&#xD;
  context.put("Patient.Id.MRN", patientId); &#xD;
  context.put("[orionhealth.com]Referral.Id.ReferralId",row.get(15));&#xD;
  concerto.setContext(context);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Booked/Enrolled)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Main Homepage Specific Search: Returns only Booked and Enrolled Referrals</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>18 DESC</order-by>
		<query-string>SELECT &#xD;
        ISNULL(refMeta.eventDate,r.receivedDate ) as receivedDate   &#xD;
        , CONVERT(datetime, ISNULL(base.pD_DateofBirth_9AQFC,soap.pD_DateofBirth_WPS1K),106) as DateOfBirth &#xD;
        , LEFT(ISNULL(base.pD_gender_DI286,soap.pD_gender_J1NWH),1) as gender   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName      &#xD;
        , r.urgent as urgent   &#xD;
        , r.priorityCode as priority &#xD;
        , scd.shortDescription as status  &#xD;
        , CAST( base.referralReason_3388R  as varchar(255)) as referralReason  &#xD;
        , CASE WHEN r.statusCode = 'int_cr_cancelled' THEN 'Cancelled'&#xD;
          WHEN r.statusCode = 'int_cr_closed' THEN 'Discharged'&#xD;
          WHEN r.statusCode = 'int_cr_redirected' THEN 'Redirected'&#xD;
          ELSE scd.shortDescription END as StatusReferral &#xD;
        , r.patientIdentifier as patientId  &#xD;
        , r.patientNamespace as patientNamespace  &#xD;
        , r.referralRequestID as referralRequestID  &#xD;
        , r.version as version  &#xD;
        , r.referralService as referralService &#xD;
        , '' as ServiceName&#xD;
        , r.statusCode    &#xD;
        , CAST( CASE r.[lastModifiedByIdentifier] WHEN 'referrals-request-ws-soap' THEN 'External' ELSE r.[lastModifiedByIdentifier]  END as varchar(100))AS requestCreatorIdentifier  &#xD;
         &#xD;
        , r.[lastModifiedDate] as lastModifiedDate&#xD;
        , r.identifier as identifier   &#xD;
        ,  &lt;%if AppVars.get("referralViewAccess")%&gt;'&lt;%=(js)AppVars.get("referralViewAccess")%&gt;'&lt;%end if%&gt;  as viewId  &#xD;
        , r.requiresReview as requiresReview &#xD;
        , rcd.shortDescription as assignee      &#xD;
        , r.statusReasonCode as statusReasonCode  &#xD;
        , rsm.ACTPASID as ACTPASID&#xD;
        ,'' as openRepositoryName&#xD;
        , CASE WHEN (SELECT TOP 1 cwsAppt.referralID FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments cwsAppt&#xD;
             WHERE rsm.ACTPASID = cwsAppt.referralID)IS NOT NULL THEN 'YES' &#xD;
        WHEN scd.shortDescription = 'Enrolled' THEN UPPER(scd.shortDescription) &#xD;
        ELSE NULL END AS [Appointments]&#xD;
        ,CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
FROM      Referral.ERF_ReferralView r   &#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[vw_ccr_referral_content] v_refcontent WITH(NOLOCK) ON v_refcontent.referralId = r.identifier&#xD;
INNER JOIN  ACTPAS_CDR_VIEWS.dbo.Orion_CWSSpecialty sp ON sp.SpecialtyCode = v_refcontent.ReferredToSpecialty&#xD;
INNER JOIN    Referral.ERF_Referral mr  ON mr.id = r.referralViewId  &#xD;
LEFT OUTER JOIN [Referral].[ERF_ReferralMetaData] refMeta  ON mr.metaDataId = refMeta.id  &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[ReferralToPathwayMapping] rsm  ON rsm.[referral_identifier] = r.identifier &#xD;
LEFT OUTER JOIN PathwayEnrollment.PES_PathwayEnrollment pe  ON pe.enrollmentIdentifier = rsm.[pathway_enrollmentIdentifier] &#xD;
LEFT OUTER JOIN Codeset.CodeDefinition scd  ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem  &#xD;
LEFT OUTER JOIN Codeset.CodeDefinition rcd  ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem      &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = refMeta.dataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId AND metaData.STATUS_TDES0 = 'FINAL' &#xD;
&#xD;
WHERE 1=1&#xD;
    &lt;%if Context.Patient.Id.MRN&lt;&gt;"" %&gt;&#xD;
      AND r.patientIdentifier IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    &lt;%end if%&gt;&#xD;
 &#xD;
    &lt;%if get("Referral Id") &lt;&gt; ""%&gt;  &#xD;
      AND r.identifier like '%&lt;%=get("Referral Id") %&gt;%' &#xD;
    &lt;% end if %&gt; &#xD;
    &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;   &#xD;
     AND ISNULL(base.pD_name_I4EFJ , UPPER( demographic.givenName ) LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
   &lt;%end if%&gt;  &#xD;
     &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
      AND ISNULL(base.pD_name_I4EFJ , UPPER(demographic.familyName) ) LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if get("Creator")&lt;&gt;""%&gt;  &#xD;
      AND r.requestCreatorIdentifier LIKE &lt;%=SqlParameters.add(get("Creator") + "%")%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("Identifier")&lt;&gt;""%&gt;  &#xD;
      AND r.identifier LIKE &lt;%=SqlParameters.add(get("Identifier") + "%")%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("SourceReferralID")&lt;&gt;""%&gt;  &#xD;
      AND r.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if AppVars.patientURNList &lt;&gt;"" %&gt; &#xD;
      AND r.patientNamespace = &lt;%=SqlParameters.add(AppVars.patientNamespace)%&gt; &#xD;
      AND r.patientIdentifier IN ( &lt;%=AppVars.patientURNList%&gt; ) &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;% if get("Receiver") &lt;&gt; "" %&gt;  &#xD;
      AND rcd.shortDescription = &lt;%=SqlParameters.add(get("Receiver"))%&gt;  &#xD;
    &lt;% end if %&gt; &#xD;
    &lt;%if get("URN")&lt;&gt;""%&gt; &#xD;
      AND r.patientIdentifier LIKE &lt;%=SqlParameters.add(get("URN"))%&gt;   &#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
      AND r.receivedDate &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
      AND r.receivedDate &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("Last Updated By") &lt;&gt; ""%&gt;  &#xD;
      AND r.[lastModifiedByIdentifier] like '%&lt;%=get("Last Updated By") %&gt;%' &#xD;
    &lt;% end if %&gt; &#xD;
    &#xD;
    &lt;%if get("Status") &lt;&gt; ""%&gt;  &#xD;
      AND r.statusCode = '&lt;%=get("Status") %&gt;' &#xD;
    &lt;%else%&gt;&#xD;
      AND (r.statusCode = 'int_cr_booked' OR r.statusCode = 'int_cr_pathwayActive')&#xD;
    &lt;% end if %&gt; &#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND sp.SpecialtyCode  =  '&lt;%=get("Specialty")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
&#xD;
&#xD;
&lt;%if Request.referralState="int_cr_internal" || Request.referralState=""%&gt;  &#xD;
  &lt;%if get("Draft") &lt;&gt; ""%&gt;  &#xD;
            AND r.statusCode = 'DRAFT' &#xD;
    &lt;% end if %&gt; &#xD;
&#xD;
UNION ALL&#xD;
&#xD;
SELECT &#xD;
        rr.creationDateTime as receivedDate&#xD;
        , CONVERT(datetime, ISNULL(base.pD_DateofBirth_9AQFC,soap.pD_DateofBirth_WPS1K),106) as DateOfBirth &#xD;
        , LEFT(ISNULL(base.pD_gender_DI286,soap.pD_gender_J1NWH),1) as gender   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName    &#xD;
        , rr.urgent as urgent&#xD;
        , null as priority  &#xD;
        , rr.status as status&#xD;
        , '' as referralReason &#xD;
        , 'Draft' as StatusReferral  &#xD;
        , rr.patientId as patientId&#xD;
        , 'OHCP' as patientNamespace &#xD;
        , rr.referralRequestId as referralRequestID    &#xD;
        , '' as version  &#xD;
        , rr.referralService as referralService&#xD;
        , '' as ServiceName&#xD;
        , 'Draft' as statusCode    &#xD;
        , CAST( CASE rr.creatorIdentifier WHEN 'referrals-request-ws-soap' THEN 'External' ELSE rr.creatorIdentifier END as varchar(100))AS creatorIdentifier  &#xD;
        , null as lastModifiedByIdentifier&#xD;
        , null as identifier &#xD;
        , ''  as viewId  &#xD;
        , '' as requiresReview&#xD;
        , '' as assignee      &#xD;
        , '' as statusReasonCode   &#xD;
        , '' as ACTPASID&#xD;
        , '' as openRepositoryName&#xD;
        , '' AS [Appointments]&#xD;
        ,CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
FROM      RefRequest.ERF_ReferralRequestView rr  &#xD;
INNER JOIN [OH_CM_clinical].[RefRequest].[ERF_ReferralRequest] rv ON rv.id = rr.referralRequestId &#xD;
INNER JOIN [OH_CM_clinical].[Referral].[ERF_Referral] r ON r.referralRequestId = rv.id  &#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[vw_ccr_referral_content] v_refcontent WITH(NOLOCK) ON v_refcontent.referralId = r.identifier&#xD;
INNER JOIN  ACTPAS_CDR_VIEWS.dbo.Orion_CWSSpecialty sp ON sp.SpecialtyCode = v_refcontent.ReferredToSpecialty&#xD;
INNER JOIN &lt;%=AppVars.db_ACTPAS%&gt; demographic WITH(NOLOCK) ON demographic.patientID = rr.patientId&#xD;
LEFT OUTER JOIN Codeset.CodeDefinition rcd WITH(NOLOCK) ON rcd.code = rr.ReceiverCode AND rcd.codingSystem = rr.ReceiverCodingSystem   &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = rr.modelDataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId     &#xD;
   &#xD;
WHERE 1=1 &#xD;
      AND rr.status = 'DRAFT'&#xD;
      AND rr.receivedMessageId IS NULL &#xD;
    &lt;%if Context.Patient.Id.MRN&lt;&gt;"" %&gt;&#xD;
      AND rr.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    &lt;%end if%&gt;&#xD;
 &#xD;
    &lt;%if get("Referral Id") &lt;&gt; ""%&gt;  &#xD;
      AND rr.referralRequestId like '%&lt;%=get("Referral Id") %&gt;%' &#xD;
    &lt;% end if %&gt; &#xD;
 &#xD;
    &lt;%if get("Draft") &lt;&gt; ""%&gt;  &#xD;
            AND rr.status = 'DRAFT' &#xD;
    &lt;% end if %&gt;  &#xD;
    &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;   &#xD;
     AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
   &lt;%end if%&gt;  &#xD;
     &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
      AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
&#xD;
&#xD;
&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receive Date</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Received On Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral Id</name>
				<index>2</index>
				<default-value />
				<display-name>Referral Id</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>3</index>
				<default-value />
				<display-name>Patient Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Middle Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>4</index>
				<default-value />
				<display-name>Staff Team</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Staff Team")%&gt;&lt;%exec config.setReturnValueName("Staff Team")%&gt;&lt;%exec config.setDisplayValueName("Staff Team")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>5</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Specialty Search")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Description")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Last Updated By</name>
				<index>6</index>
				<default-value />
				<display-name>Last Updated By</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred To Clinician</name>
				<index>7</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Clinician Search")%&gt;&lt;%exec config.setReturnValueName("clinicianID")%&gt;&lt;%exec config.setDisplayValueName("Name")%&gt;&lt;%exec config.setWidth(800)%&gt;&lt;%exec config.setHeight(1024)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Status</name>
				<index>8</index>
				<default-value />
				<display-name>Status</display-name>
				<input-type>Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("", "")%&gt;&lt;%exec config.setOption("int_cr_booked", "Booked")%&gt;&lt;%exec config.setOption("int_cr_pathwayActive", "Enrolled")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Draft</name>
				<index>9</index>
				<default-value />
				<display-name>Draft</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Y", "Draft Only")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Referral</name>
			</context-view>
			<default-context-view-entry-point>
				<context-view>
					<name>Referral</name>
				</context-view>
				<entry-point>
					<name>CCR DR Referral Context</name>
					<application>
						<name>Healthcare pathways - CCR</name>
					</application>
					<secure-enabled>false</secure-enabled>
				</entry-point>
			</default-context-view-entry-point>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>20</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Appointment</name>
				<index>0</index>
				<action>var appointmentOID = row.get(23);&#xD;
//get the application with the search required &#xD;
var ipmApplication = new Application ("Healthcare pathways - CCR ACTPAS", "CCR Clinician Appointments") ;&#xD;
//add the values to pass to the generic search - appointment iD and the clinician&#xD;
//from the selected row&#xD;
&#xD;
  var token = row.getSecureInformationToken(); &#xD;
   ipmApplication.setSecureInformationToken(token); &#xD;
  &#xD;
//use the singleton Concerto Object to Open the Application/search in a popup wondow&#xD;
concerto.openApplicationInWindow(ipmApplication, null, null, 700, 900) ;</action>
				<css-class>&lt;%if row.get(25).originalValue="YES"%&gt;SEARCH&lt;%elseif row.get(25).originalValue="ENROLLED"%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date of Birth (Age)</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusCode</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = "Booked"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
&lt;%else%&gt;&#xD;
 &lt;%if value = "Completed"%&gt;&#xD;
&lt;span style="text-align:right; background-color: #d2d2cf; border-color: #636360; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
  &#xD;
 &lt;%else%&gt;&#xD;
 &lt;%if value = "Declined"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
 &lt;%else%&gt;&#xD;
  &lt;%if row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
   &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(5).getOriginalValue%&gt; &lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
  &lt;%if value = "Forward"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Assigned&lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>Version</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>referralServiceCode</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>code</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(24).getOriginalValue= "Transfer"%&gt;int_cr_transfer&lt;%else%&gt;&#xD;
&lt;%if row.get(24).getOriginalValue= "Call back"%&gt;int_cr_forward&lt;%else%&gt;&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;p title=&lt;%=row.get(16).getOriginalValue%&gt;&gt; &lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&lt;/P&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>View ID</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
Yes&#xD;
&lt;%else if%&gt;&#xD;
No&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusReasonCode</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ACTPASID</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>openRepositoryName</name>
				<index>24</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointments</name>
				<index>25</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=value.replace(";", "&lt;br&gt;")%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>26</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred To Clinician</name>
				<index>27</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (CHI Declined)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Main Homepage Specific Search: Declined worklist</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>urgent DESC, receivedDate ASC</order-by>
		<query-string>SELECT &#xD;
        ISNULL(refMeta.eventDate,r.receivedDate ) as receivedDate   &#xD;
        , CONVERT(datetime, ISNULL(base.pD_DateofBirth_9AQFC,soap.pD_DateofBirth_WPS1K),106) as DateOfBirth &#xD;
        , LEFT(ISNULL(base.pD_gender_DI286,soap.pD_gender_J1NWH),1) as gender   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName &#xD;
        , r.urgent as urgent   &#xD;
        , r.priorityCode as priority &#xD;
        , scd.shortDescription as status &#xD;
        , CAST( base.referralReason_3388R  as varchar(255)) as referralReason   &#xD;
        , CASE WHEN r.statusCode = 'int_cr_cancelled' THEN 'Cancelled'&#xD;
          WHEN r.statusCode = 'int_cr_closed' THEN 'Discharged'&#xD;
          WHEN r.statusCode = 'int_cr_redirected' THEN 'Redirected'&#xD;
          ELSE scd.shortDescription END as StatusReferral &#xD;
        , r.patientIdentifier as patientId  &#xD;
        , r.patientNamespace as patientNamespace  &#xD;
        , r.referralRequestID as referralRequestID  &#xD;
        , r.version as version  &#xD;
        , r.referralService as referralService &#xD;
        , '' as ServiceName&#xD;
        , r.statusCode     &#xD;
        , CAST( CASE r.[lastModifiedByIdentifier] WHEN 'referrals-request-ws-soap' THEN 'External' ELSE r.[lastModifiedByIdentifier] END as varchar(100))AS requestCreatorIdentifier  &#xD;
         &#xD;
        , r.[lastModifiedDate] as lastModifiedDate&#xD;
        , r.identifier as identifier   &#xD;
        ,  &lt;%if AppVars.get("referralViewAccess")%&gt;'&lt;%=(js)AppVars.get("referralViewAccess")%&gt;'&lt;%end if%&gt;  as viewId  &#xD;
        , r.requiresReview as requiresReview &#xD;
        ,CAST(ah.actionComment as varchar(255))as DeclineReason&#xD;
        , CASE WHEN rcd.shortDescription != '' THEN rcd.shortDescription ElSE ISNULL(base.RT_CT_sT_StaffTeam_9HQE5, base.RT_SS_StaffDesc_BCBVN) END as assignee      &#xD;
        , r.statusReasonCode as statusReasonCode  &#xD;
        , rsm.ACTPASID as ACTPASID&#xD;
        ,'' as openRepositoryName&#xD;
        , CASE WHEN (SELECT TOP 1 cwsAppt.referralID FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments cwsAppt&#xD;
              WHERE rsm.ACTPASID = cwsAppt.referralID)IS NOT NULL THEN 'YES' &#xD;
         WHEN scd.shortDescription = 'Enrolled' THEN 'ENROLLED'&#xD;
         ELSE NULL END AS [Appointments],&#xD;
        CASE&#xD;
        WHEN (DATEDIFF(DAY, r.receivedDate, GETDATE()) &gt; 3)&#xD;
            THEN 'EXPIRED'&#xD;
            ELSE 'VALID' &#xD;
    END AS dateStatus&#xD;
          &#xD;
  ,CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END  AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
FROM      Referral.ERF_ReferralView r   &#xD;
INNER JOIN    Referral.ERF_Referral mr  ON mr.id = r.referralViewId &#xD;
INNER JOIN    [Referral].[ERF_ReferralMetaData] refMeta  ON mr.metaDataId = refMeta.id  &#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[vw_ccr_referral_content] v_refcontent WITH(NOLOCK) ON v_refcontent.referralId = r.identifier&#xD;
INNER JOIN  ACTPAS_CDR_VIEWS.dbo.Orion_CWSSpecialty sp ON sp.SpecialtyCode = v_refcontent.ReferredToSpecialty&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[ReferralToPathwayMapping] rsm  ON rsm.[referral_identifier] = r.identifier &#xD;
LEFT OUTER JOIN PathwayEnrollment.PES_PathwayEnrollment pe  ON pe.enrollmentIdentifier = rsm.[pathway_enrollmentIdentifier] &#xD;
INNER JOIN Codeset.CodeDefinition scd  ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem  &#xD;
INNER JOIN Codeset.CodeDefinition rcd  ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem      &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = refMeta.dataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId AND metaData.STATUS_TDES0 = 'FINAL' &#xD;
LEFT OUTER JOIN [Referral].[ERF_ActionHistory] ah ON ah.referralId = r.referralViewId&#xD;
&#xD;
WHERE ah.actionIdentifier = 'declined'  &#xD;
    &lt;%if Request.referralState&lt;&gt;""%&gt; &#xD;
      AND r.statusCode = &lt;%if Request.referralState="int_cr_transfer"%&gt;'int_cr_forward' OR r.statusCode = 'int_cr_transfer' &lt;%else%&gt;&#xD;
    &lt;%if Request.referralState="int_cr_completed"%&gt; &#xD;
      'int_cr_closed' OR r.statusCode = 'int_cr_redirected' OR r.statusCode = 'int_cr_cancelled'&#xD;
    &lt;%else%&gt; '&lt;%=Request.referralState%&gt;'&lt;%end if%&gt;     &lt;%end if%&gt; &#xD;
      &lt;%if Request.referralState="int_cr_forward"%&gt; &#xD;
        AND r.statusReasonCode = 'Call Back'  &#xD;
      &lt;%end if%&gt;  &#xD;
      &lt;%if Request.referralState="int_cr_callback"%&gt; &#xD;
        AND r.statusCode = 'int_cr_callback' &#xD;
      &lt;%end if%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("Referral Id") %&gt;  &#xD;
      AND r.identifier like '%&lt;%=get("Referral Id") %&gt;%' &#xD;
    &lt;% end if %&gt; &#xD;
    &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
     AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
   &lt;%end if%&gt;  &#xD;
     &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
      AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if get("Creator")&lt;&gt;""%&gt;  &#xD;
      AND r.requestCreatorIdentifier LIKE &lt;%=SqlParameters.add(get("Creator") + "%")%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("Identifier")&lt;&gt;""%&gt;  &#xD;
      AND r.identifier LIKE &lt;%=SqlParameters.add(get("Identifier") + "%")%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("SourceReferralID")&lt;&gt;""%&gt;  &#xD;
      AND r.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt; &#xD;
    &lt;%end if%&gt;  &#xD;
    &lt;% if get("Receiver") &lt;&gt; "" %&gt;  &#xD;
      AND rcd.shortDescription = &lt;%=SqlParameters.add(get("Receiver"))%&gt;  &#xD;
    &lt;% end if %&gt; &#xD;
    &lt;%if get("URN")&lt;&gt;""%&gt; &#xD;
      AND r.patientIdentifier LIKE &lt;%=SqlParameters.add(get("URN"))%&gt;   &#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
      AND r.receivedDate &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
      AND r.receivedDate &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("Last Updated By") &lt;&gt; ""%&gt;  &#xD;
      AND r.[lastModifiedByIdentifier] like '%&lt;%=get("Last Updated By") %&gt;%' &#xD;
    &lt;% end if %&gt;  &#xD;
    &lt;%if get("Status") &lt;&gt; ""%&gt;  &#xD;
      AND r.statusCode  ='&lt;%=get("Status") %&gt;' &#xD;
    &lt;% end if %&gt; &#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END =  '&lt;%=get("Specialty")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
    &lt;%if Request.referralState="int_cr_internal" || Request.referralState=""%&gt;  &#xD;
&#xD;
UNION ALL&#xD;
&#xD;
SELECT &#xD;
        rr.creationDateTime as receivedDate&#xD;
        , CONVERT(datetime, ISNULL(base.pD_DateofBirth_9AQFC,soap.pD_DateofBirth_WPS1K),106) as DateOfBirth &#xD;
        , LEFT(ISNULL(base.pD_gender_DI286,soap.pD_gender_J1NWH),1) as gender   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName      &#xD;
        , rr.urgent&#xD;
        , null as priority  &#xD;
        , rr.status as status&#xD;
        , '' as referralReason &#xD;
        , 'Draft' as StatusReferral  &#xD;
        , rr.patientId as patientId&#xD;
        , 'OHCP' as patientNamespace &#xD;
        , rr.referralRequestId as referralRequestID    &#xD;
        , '' as version  &#xD;
        , rr.referralService as referralService&#xD;
        , '' as ServiceName&#xD;
        , 'Draft' as statusCode   &#xD;
        , CASE rr.creatorIdentifier WHEN 'referrals-request-ws-soap' THEN 'External' ELSE CAST(rr.creatorIdentifier +' ('+ISNULL(UserAttribute.cValue,'n/a')  as varchar(20))+') ' END AS requestCreatorIdentifier  &#xD;
        , '' as lastModifiedByIdentifier&#xD;
        , null as identifier &#xD;
        , ''  as viewId  &#xD;
        , '' as requiresReview&#xD;
        , '' as DeclineReason&#xD;
        , '' as assignee      &#xD;
        , '' as statusReasonCode   &#xD;
        , '' as ACTPASID&#xD;
        , '' as openRepositoryName&#xD;
        , '' AS [Appointments]&#xD;
        , '' as dateStatus&#xD;
        ,CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_Specialty_D017M ElSE ISNULL(base.RT_CT_Specialty_D017M,base.RT_SS_SpecialtyDesc_CVUYD) END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
FROM      RefRequest.ERF_ReferralRequestView rr  &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[cUser] cUser  ON rr.creatorIdentifier = cUser.name   &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = rr.modelDataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId&#xD;
   &#xD;
WHERE 1=1 &#xD;
      AND rr.status = 'DRAFT'&#xD;
      AND rr.receivedMessageId IS NULL  &#xD;
    &#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_CT_SpecialtyCode_2E#CR,'UNK') END =  '&lt;%=get("Specialty")%&gt;' /*Currently not populated*/&#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Receiver") &lt;&gt; "" %&gt;  &#xD;
    AND 1 = 2 /*Currently not populated*/&#xD;
  &lt;% end if %&gt; &#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_SS_SpecialtyCode_0FIQL,'') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receive Date</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Received On Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral Id</name>
				<index>2</index>
				<default-value />
				<display-name>Referral Id</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>3</index>
				<default-value />
				<display-name>Patient Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Middle Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>4</index>
				<default-value />
				<display-name>Staff Team</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Staff Team")%&gt;&lt;%exec config.setReturnValueName("Staff Team")%&gt;&lt;%exec config.setDisplayValueName("Staff Team")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>5</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Specialty Search")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Description")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Last Updated By</name>
				<index>6</index>
				<default-value />
				<display-name>Last Updated By</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred To Clinician</name>
				<index>7</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Clinician Search")%&gt;&lt;%exec config.setReturnValueName("clinicianID")%&gt;&lt;%exec config.setDisplayValueName("Name")%&gt;&lt;%exec config.setWidth(1024)%&gt;&lt;%exec config.setHeight(800)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Referral</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Appointment</name>
				<index>0</index>
				<action>var appointmentOID = row.get(23);&#xD;
//get the application with the search required &#xD;
var ipmApplication = new Application ("Healthcare pathways - CCR ACTPAS", "CCR Clinician Appointments") ;&#xD;
//add the values to pass to the generic search - appointment iD and the clinician&#xD;
//from the selected row&#xD;
&#xD;
  var token = row.getSecureInformationToken(); &#xD;
   ipmApplication.setSecureInformationToken(token); &#xD;
  &#xD;
//use the singleton Concerto Object to Open the Application/search in a popup wondow&#xD;
concerto.openApplicationInWindow(ipmApplication, null, null, 700, 900) ;</action>
				<css-class>&lt;%if row.get(25).originalValue="YES"%&gt;SEARCH&lt;%elseif row.get(25).originalValue="BOOKED"%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date of Birth (Age)</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusCode</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = "Booked"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
&lt;%else%&gt;&#xD;
 &lt;%if value = "Completed"%&gt;&#xD;
&lt;span style="text-align:right; background-color: #d2d2cf; border-color: #636360; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
  &#xD;
 &lt;%else%&gt;&#xD;
 &lt;%if value = "Declined"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
 &lt;%else%&gt;&#xD;
  &lt;%if row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
   &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(5).getOriginalValue%&gt; &lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
  &lt;%if value = "Forward"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Assigned&lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>Version</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>referralServiceCode</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>code</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(24).getOriginalValue= "Transfer"%&gt;int_cr_transfer&lt;%else%&gt;&#xD;
&lt;%if row.get(24).getOriginalValue= "Call back"%&gt;int_cr_forward&lt;%else%&gt;&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;p title=&lt;%=row.get(16).getOriginalValue%&gt;&gt; &lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&lt;/P&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>View ID</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
Yes&#xD;
&lt;%else if%&gt;&#xD;
No&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusReasonCode</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ACTPASID</name>
				<index>24</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>openRepositoryName</name>
				<index>25</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointments</name>
				<index>26</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=value.replace(";", "&lt;br&gt;")%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>dateStatus</name>
				<index>27</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>28</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred To Clinician</name>
				<index>29</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var referralId = row.get(18);&#xD;
  var patientId = row.get(9);&#xD;
  var context = new Context("Referral");&#xD;
  var application = new Application("Healthcare pathways - CCR", "CCR DR Referral Context");&#xD;
  application.setSecureInformationToken(row.secureInformationToken);&#xD;
  context.setApplication(application);&#xD;
  context.put("Patient.Id.MRN", patientId); &#xD;
  context.put("[orionhealth.com]Referral.Id.ReferralId",referralId);&#xD;
  concerto.setContext(context);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (CHI)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Main Homepage Specific Search: Integration driver version of 'Referrals Search (SQL)' that calls ReferralSOAPService to retrieve the service name</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>receivedDate ASC, urgent DESC</order-by>
		<query-string>SELECT DISTINCT * FROM (&#xD;
  SELECT  &#xD;
        ISNULL(refMeta.eventDate,r.receivedDate ) as receivedDate   &#xD;
        , CONVERT(datetime, base.pD_DateofBirth_9AQFC,106) as DateOfBirth &#xD;
        , LEFT(base.pD_gender_DI286,1) as gender   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName     &#xD;
        , r.urgent as urgent   &#xD;
        , r.priorityCode as priority &#xD;
        , scd.shortDescription as status  &#xD;
        , ''  as referralReason  --CAST( base.referralReason_3388R  as varchar(50)) as referralReason  &#xD;
        , CASE WHEN r.statusCode = 'int_cr_cancelled' THEN 'Cancelled'&#xD;
          WHEN r.statusCode = 'int_cr_closed' THEN 'Discharged'&#xD;
          WHEN r.statusCode = 'int_cr_redirected' THEN 'Redirected'&#xD;
          ELSE scd.shortDescription END as StatusReferral &#xD;
        , r.patientIdentifier as patientId  &#xD;
        , r.patientNamespace as patientNamespace  &#xD;
        , r.referralRequestID as referralRequestID  &#xD;
        , r.version as version  &#xD;
        , r.referralService as referralService &#xD;
        , r.requestCreatorIdentifier as ServiceName&#xD;
        , r.statusCode    &#xD;
        , CAST( CASE r.[lastModifiedByIdentifier] WHEN 'referrals-request-ws-soap' THEN 'External' ELSE r.[lastModifiedByIdentifier] + CASE WHEN (UserAttribute.cValue != null) THEN  ' ('+SUBSTRING(UserAttribute.cValue, CHARINDEX('|',UserAttribute.cValue)+1, CHARINDEX(';',UserAttribute.cValue)-CHARINDEX('|',UserAttribute.cValue)-1 )+') ' ELSE '' END  END as varchar(100))AS requestCreatorIdentifier  &#xD;
        , r.[lastModifiedDate] as lastModifiedDate&#xD;
        , r.identifier as identifier   &#xD;
        , &lt;%if AppVars.get("referralViewAccess")%&gt;'&lt;%=(js)AppVars.get("referralViewAccess")%&gt;'&lt;%end if%&gt;  as viewId  &#xD;
        , r.requiresReview as requiresReview &#xD;
        , CASE WHEN rcd.shortDescription != 'Unknown' THEN rcd.shortDescription ElSE ISNULL(base.RT_CT_sT_StaffTeam_9HQE5, base.RT_SS_StaffDesc_BCBVN) END as staffTeam      &#xD;
        , r.statusReasonCode as statusReasonCode  &#xD;
        , '' as appointmentNumber  --cwsApptLink.appointmentNumber  as appointmentNumber    &#xD;
        ,'' as openRepositoryName&#xD;
        , CASE WHEN (SELECT TOP 1 cwsAppt.referralID FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments cwsAppt&#xD;
             WHERE rsm.ACTPASID = cwsAppt.referralID)IS NOT NULL THEN 'YES' &#xD;
        WHEN scd.shortDescription = 'Enrolled' THEN UPPER(scd.shortDescription) &#xD;
        ELSE NULL END AS [Appointments]&#xD;
        ,CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
  ,attch.formsInternalId_MXZPJ formsInternalId&#xD;
  ,v_refcontent.ACTPASID&#xD;
FROM      Referral.ERF_ReferralView r  WITH(NOLOCK) &#xD;
--INNER JOIN &lt;%=AppVars.db_ACTPAS%&gt; demographic WITH(NOLOCK) ON demographic.patientID = r.patientIdentifier&#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[vw_ccr_referral_content] v_refcontent WITH(NOLOCK) ON v_refcontent.referralId = r.identifier&#xD;
INNER JOIN  ACTPAS_CDR_VIEWS.dbo.Orion_CWSSpecialty sp ON sp.SpecialtyCode = v_refcontent.ReferredToSpecialty&#xD;
INNER JOIN    Referral.ERF_Referral mr  ON mr.id = r.referralViewId &#xD;
INNER JOIN    [Referral].[ERF_ReferralMetaData] refMeta WITH(NOLOCK) ON mr.metaDataId = refMeta.id  &#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[ReferralToPathwayMapping] rsm WITH(NOLOCK) ON rsm.[referral_identifier] = r.identifier  &#xD;
INNER JOIN Codeset.CodeDefinition scd WITH(NOLOCK) ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem  &#xD;
INNER JOIN Codeset.CodeDefinition rcd WITH(NOLOCK) ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem     &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[cUser] cUser WITH(NOLOCK) ON r.requestCreatorIdentifier = cUser.name  &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[UserAttribute] UserAttribute WITH(NOLOCK) ON cUser.uniqueId = UserAttribute.cUser AND UserAttribute.name = 'ACTPAS SpecialityText'   &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a WITH(NOLOCK) ON a.documentIdentifier = refMeta.dataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base WITH(NOLOCK) ON base.DOCUMENTID = a.documentId  &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) on metaData.documentId = base.documentId AND metaData.STATUS_TDES0 = 'FINAL' &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INTCRBs_DDKVM_Invstgt_0$GGP inv ON inv.v2_INT#CR#Base_DDKVM = base.v2_INT#CR#Base_DDKVM  &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INTCRBs_DDKVM_atchm_H#4NIUH attch ON attch.v2_INTCRBs_DDKVM_Invstgt_0$GGP = inv.v2_INTCRBs_DDKVM_Invstgt_0$GGP  &#xD;
--LEFT OUTER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments cwsApptLink WITH(NOLOCK) ON rsm.ACTPASID = cwsApptLink.referralID &#xD;
WHERE 1=1&#xD;
    &lt;%if Request.referralState&lt;&gt;""%&gt; &#xD;
          AND r.statusCode = &lt;%if Request.referralState="int_cr_transfer"%&gt;'int_cr_forward' OR r.statusCode = 'int_cr_transfer' &lt;%else%&gt;&#xD;
        &lt;%if Request.referralState="int_cr_completed"%&gt; &#xD;
          'int_cr_closed' OR r.statusCode = 'int_cr_redirected' OR r.statusCode = 'int_cr_cancelled'&#xD;
        &lt;%else%&gt; '&lt;%=Request.referralState%&gt;'&lt;%end if%&gt;     &lt;%end if%&gt; &#xD;
          &lt;%if Request.referralState="int_cr_forward"%&gt; &#xD;
            AND r.statusReasonCode = 'Call Back'  &#xD;
          &lt;%end if%&gt;  &#xD;
          &lt;%if Request.referralState="int_cr_callback"%&gt; &#xD;
            AND r.statusCode = 'int_cr_callback' &#xD;
          &lt;%end if%&gt; &#xD;
        &lt;%end if%&gt;   &#xD;
     &#xD;
        &lt;%if get("Referral Id") &lt;&gt; ""%&gt;  &#xD;
          AND r.identifier like '%&lt;%=get("Referral Id") %&gt;%' &#xD;
        &lt;% end if %&gt; &#xD;
        &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
         AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
       &lt;%end if%&gt;  &#xD;
         &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
          AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
        &lt;%end if%&gt;   &#xD;
        &lt;%if get("Creator")&lt;&gt;""%&gt;  &#xD;
          AND r.requestCreatorIdentifier LIKE &lt;%=SqlParameters.add(get("Creator") + "%")%&gt; &#xD;
        &lt;%end if%&gt; &#xD;
        &lt;%if get("Identifier")&lt;&gt;""%&gt;  &#xD;
          AND r.identifier LIKE &lt;%=SqlParameters.add(get("Identifier") + "%")%&gt; &#xD;
        &lt;%end if%&gt; &#xD;
        &lt;%if get("SourceReferralID")&lt;&gt;""%&gt;  &#xD;
          AND r.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt; &#xD;
        &lt;%end if%&gt;  &#xD;
        &lt;% if get("Receiver") &lt;&gt; "" %&gt;  &#xD;
          AND rcd.shortDescription = &lt;%=SqlParameters.add(get("Receiver"))%&gt;  &#xD;
        &lt;% end if %&gt; &#xD;
        &lt;%if get("URN")&lt;&gt;""%&gt; &#xD;
          AND r.patientIdentifier LIKE &lt;%=SqlParameters.add(get("URN"))%&gt;   &#xD;
        &lt;%end if%&gt;&#xD;
        &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
          AND r.receivedDate &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
        &lt;%end if%&gt;&#xD;
        &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
          AND r.receivedDate &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
        &lt;%end if%&gt; &#xD;
        &lt;%if get("Last Updated By") &lt;&gt; ""%&gt;  &#xD;
          AND r.[lastModifiedByIdentifier] like '%&lt;%=get("Last Updated By") %&gt;%' &#xD;
        &lt;% end if %&gt; &#xD;
        &lt;%if Request.referralState="int_cr_internal" || Request.referralState=""%&gt;  &#xD;
&#xD;
        &lt;%if get("Status") &lt;&gt; ""%&gt;  &#xD;
          AND r.statusCode  ='&lt;%=get("Status") %&gt;' &#xD;
        &lt;% end if %&gt; &#xD;
      &lt;%if get("Draft") &lt;&gt; ""%&gt;  &#xD;
                AND r.statusCode = 'DRAFT' &#xD;
        &lt;% end if %&gt; &#xD;
 &lt;%end if%&gt;&#xD;
&#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
     --AND (CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_SS_SpecialtyCode_0FIQL,'') END) &#xD;
     AND CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
     AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END =  '&lt;%=get("Specialty")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt;  &#xD;
 ) as results &#xD;
    &lt;%if AppVars.get("patientURNList")&lt;&gt;""%&gt;&#xD;
      WHERE results.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    &lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receive Date</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Received On Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral Id</name>
				<index>2</index>
				<default-value />
				<display-name>Referral Id</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>3</index>
				<default-value />
				<display-name>Patient Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Middle Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>4</index>
				<default-value />
				<display-name>Staff Team</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Staff Team")%&gt;&lt;%exec config.setReturnValueName("Staff Team")%&gt;&lt;%exec config.setDisplayValueName("Staff Team")%&gt;&lt;%exec config.setWidth(1024)%&gt;&lt;%exec config.setHeight(800)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>5</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Specialty Search")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Description")%&gt;&lt;%exec config.setWidth(1024)%&gt;&lt;%exec config.setHeight(800)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Last Updated By</name>
				<index>6</index>
				<default-value />
				<display-name>Last Updated By</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referred To Clinician</name>
				<index>7</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Clinician Search")%&gt;&lt;%exec config.setReturnValueName("clinicianID")%&gt;&lt;%exec config.setDisplayValueName("Name")%&gt;&lt;%exec config.setWidth(1024)%&gt;&lt;%exec config.setHeight(800)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Status</name>
				<index>8</index>
				<default-value />
				<display-name>Status</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/cwsclinical")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT r.statusCode as statusCode  ,\r\n        CASE WHEN r.statusCode = 'int_cr_cancelled' THEN 'Cancelled'\r\n          WHEN r.statusCode = 'int_cr_closed' THEN 'Discharged'\r\n          WHEN r.statusCode = 'int_cr_redirected' THEN 'Redirected'\r\n          ELSE scd.shortDescription END as StatusReferral\r\nFROM      Referral.ERF_ReferralView r      \r\nINNER JOIN Codeset.CodeDefinition scd  ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem")%&gt;&lt;%exec config.setOptionColumnName("statusCode")%&gt;&lt;%exec config.setDisplayColumnName("StatusReferral")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Draft</name>
				<index>9</index>
				<default-value />
				<display-name>Draft</display-name>
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Y", "Draft Only")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Referral</name>
			</context-view>
			<default-context-view-entry-point>
				<context-view>
					<name>Referral</name>
				</context-view>
				<entry-point>
					<name>CCR DR Referral Context</name>
					<application>
						<name>Healthcare pathways - CCR</name>
					</application>
					<secure-enabled>false</secure-enabled>
				</entry-point>
			</default-context-view-entry-point>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>20</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Appointment</name>
				<index>0</index>
				<action>var appointmentOID = row.get(23).originalValue;&#xD;
var ACTPASID = row.get(29).originalValue;&#xD;
&#xD;
//get the application with the search required &#xD;
var ipmApplication = new Application ("Healthcare pathways - CCR ACTPAS", "CCR Clinician Appointments") ;&#xD;
ipmApplication.addQueryParameter("appointmentOID", appointmentOID );&#xD;
ipmApplication.addQueryParameter("ACTPASID", ACTPASID);&#xD;
&#xD;
//add the values to pass to the generic search - appointment iD and the clinician&#xD;
//from the selected row&#xD;
&#xD;
  var token = row.getSecureInformationToken(); &#xD;
   ipmApplication.setSecureInformationToken(token); &#xD;
  &#xD;
//use the singleton Concerto Object to Open the Application/search in a popup wondow&#xD;
concerto.openApplicationInModalDialog(ipmApplication, 600, 1124, null, null,"resizable=yes");</action>
				<css-class>&lt;%if row.get(25).originalValue="YES"%&gt;SEARCH&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date of Birth (Age)</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value= "1" || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusCode</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = "Booked"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
&lt;%else%&gt;&#xD;
 &lt;%if value = "Completed"%&gt;&#xD;
&lt;span style="text-align:right; background-color: #d2d2cf; border-color: #636360; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
  &#xD;
 &lt;%else%&gt;&#xD;
 &lt;%if value = "Declined"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
 &lt;%else%&gt;&#xD;
  &lt;%if row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
   &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(5).getOriginalValue%&gt; &lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
  &lt;%if value = "Forward"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Assigned&lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>Version</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>referralServiceCode</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>Created</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>code</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(24).getOriginalValue= "Transfer"%&gt;int_cr_transfer&lt;%else%&gt;&#xD;
&lt;%if row.get(24).getOriginalValue= "Call back"%&gt;int_cr_forward&lt;%else%&gt;&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;p title=&lt;%=row.get(16).getOriginalValue%&gt;&gt; &lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&lt;/P&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>View ID</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
Yes&#xD;
&lt;%else if%&gt;&#xD;
No&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusReasonCode</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>appointmentOID</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>openRepositoryName</name>
				<index>24</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointments</name>
				<index>25</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=value.replace(";", "&lt;br&gt;")%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>26</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred To Clinician</name>
				<index>27</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>28</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(28).originalValue &lt;&gt; null || row.get(14).originalValue = "referrals-request-ws-soap" %&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ACTPASID</name>
				<index>29</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var referralId = row.get(18);&#xD;
  var patientId = row.get(9);&#xD;
  var context = new Context("Referral");&#xD;
  var application = new Application("Healthcare pathways - CCR", "CCR DR Referral Context");&#xD;
  application.setSecureInformationToken(row.secureInformationToken);&#xD;
  context.setApplication(application);&#xD;
  context.put("Patient.Id.MRN", patientId); &#xD;
  context.put("[orionhealth.com]Referral.Id.ReferralId",referralId);&#xD;
  concerto.setContext(context);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Completed)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Main Homepage Specific Search: Integration driver version of 'Referrals Search (SQL)' that calls ReferralSOAPService to retrieve the service name</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>urgent DESC, receivedDate ASC</order-by>
		<query-string>SELECT * FROM ( &#xD;
SELECT   &#xD;
       ISNULL(refMeta.eventDate,r.receivedDate ) as receivedDate   &#xD;
        , CONVERT(datetime, ISNULL(base.pD_DateofBirth_9AQFC,soap.pD_DateofBirth_WPS1K),106) as DateOfBirth &#xD;
        , LEFT(ISNULL(base.pD_gender_DI286,soap.pD_gender_J1NWH),1) as gender   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName     &#xD;
        , r.urgent as urgent   &#xD;
        , r.priorityCode as priority &#xD;
        , scd.shortDescription as status  &#xD;
        , CAST( base.referralReason_3388R  as varchar(255)) as referralReason &#xD;
        , CASE WHEN r.statusCode = 'int_cr_cancelled' THEN 'Cancelled'&#xD;
          WHEN r.statusCode = 'int_cr_closed' THEN 'Discharged'&#xD;
          WHEN r.statusCode = 'int_cr_redirected' THEN 'Redirected'&#xD;
          ELSE scd.shortDescription END as StatusReferral &#xD;
        , r.patientIdentifier as patientId  &#xD;
        , r.patientNamespace as patientNamespace  &#xD;
        , r.referralRequestID as referralRequestID  &#xD;
        , r.version as version  &#xD;
        , r.referralService as referralService &#xD;
        , '' as ServiceName&#xD;
        , r.statusCode as statusCode   &#xD;
        , CAST( CASE r.[lastModifiedByIdentifier] WHEN 'referrals-request-ws-soap' THEN 'External' ELSE r.[lastModifiedByIdentifier] END as varchar(100))AS requestCreatorIdentifier  &#xD;
        , r.lastModifiedDate as lastModifiedDate &#xD;
        , r.identifier as identifier   &#xD;
        ,   &lt;%if AppVars.get("referralViewAccess")%&gt;'&lt;%=(js)AppVars.get("referralViewAccess")%&gt;'&lt;%end if%&gt;  as viewId  &#xD;
        , r.requiresReview as requiresReview &#xD;
        , CASE WHEN rcd.shortDescription != '' THEN rcd.shortDescription ElSE ISNULL(base.RT_CT_sT_StaffTeam_9HQE5, base.RT_SS_StaffDesc_BCBVN) END as assignee      &#xD;
        , r.statusReasonCode as statusReasonCode   &#xD;
        , rsm.ACTPASID as ACTPASID&#xD;
        ,'' as openRepositoryName &#xD;
        , CASE WHEN (SELECT TOP 1 cwsAppt.referralID FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments cwsAppt&#xD;
         WHERE rsm.ACTPASID = cwsAppt.referralID)IS NOT NULL THEN 'YES' &#xD;
    WHEN scd.shortDescription = 'Enrolled' THEN 'ENROLLED'&#xD;
    ELSE NULL END AS [Appointments]&#xD;
  ,CASE WHEN sp.Specialty='Unknown' THEN rcd.shortDescription ELSE sp.Specialty END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
FROM      Referral.ERF_ReferralView r   &#xD;
INNER JOIN    &lt;%=AppVars.db_ACTPAS%&gt; demographic WITH(NOLOCK) ON demographic.patientID = r.patientIdentifier &#xD;
INNER JOIN    Referral.ERF_Referral mr  ON mr.id = r.referralViewId &#xD;
INNER JOIN OH_CM_Custom.dbo.[vw_ccr_referral_content] v_refcontent WITH(NOLOCK) ON v_refcontent.referralId = r.identifier&#xD;
INNER JOIN  ACTPAS_CDR_VIEWS.dbo.Orion_CWSSpecialty sp ON sp.SpecialtyCode = v_refcontent.ReferredToSpecialty&#xD;
INNER JOIN    [Referral].[ERF_ReferralMetaData] refMeta  ON mr.metaDataId = refMeta.id  &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[ReferralToPathwayMapping] rsm  ON rsm.[referral_identifier] = r.identifier &#xD;
LEFT OUTER JOIN PathwayEnrollment.PES_PathwayEnrollment pe  ON pe.enrollmentIdentifier = rsm.[pathway_enrollmentIdentifier]  &#xD;
LEFT OUTER JOIN Codeset.CodeDefinition scd  ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem  &#xD;
LEFT OUTER JOIN Codeset.CodeDefinition rcd  ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem     &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = refMeta.dataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId AND metaData.STATUS_TDES0 = 'FINAL' &#xD;
WHERE 1=1 &#xD;
 &lt;%if AppVars.get("patientURNList") &lt;&gt;"" %&gt;&#xD;
      AND r.patientIdentifier  IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    &lt;%end if%&gt;&#xD;
    &#xD;
        &lt;%if Request.referralState&lt;&gt;""%&gt; &#xD;
          AND (r.statusCode =  &lt;%if Request.referralState="int_cr_transfer"%&gt; 'int_cr_forward' OR r.statusCode = 'int_cr_transfer' &#xD;
        &lt;%else%&gt;&#xD;
          &lt;%if Request.referralState="int_cr_completed"%&gt; 'int_cr_closed' OR r.statusCode = 'int_cr_redirected' OR r.statusCode = 'int_cr_cancelled')&#xD;
          &lt;%else%&gt; '&lt;%=Request.referralState%&gt;')&lt;%end if%&gt;     &#xD;
        &lt;%end if%&gt; &#xD;
        &lt;%if Request.referralState="int_cr_forward"%&gt; &#xD;
          AND r.statusReasonCode = 'Call Back'  &#xD;
        &lt;%end if%&gt;  &#xD;
        &lt;%if Request.referralState="int_cr_callback"%&gt; &#xD;
          AND r.statusCode = 'int_cr_callback' &#xD;
        &lt;%end if%&gt; &#xD;
      &lt;%end if%&gt;    &#xD;
  &#xD;
      &lt;%if AppVars.patientURNList &lt;&gt;"" %&gt; &#xD;
        AND r.patientNamespace = &lt;%=SqlParameters.add(AppVars.patientNamespace)%&gt; &#xD;
        AND r.patientIdentifier IN ( &lt;%=AppVars.patientURNList%&gt; ) &#xD;
      &lt;%end if%&gt; &#xD;
&#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_SS_SpecialtyCode_0FIQL,'') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_CT_SpecialtyCode_2E#CR,'UNK') END =  '&lt;%=get("Specialty")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
UNION ALL &#xD;
&#xD;
SELECT &#xD;
        rr.creationDateTime as receivedDate&#xD;
        , CONVERT(datetime, base.pD_DateofBirth_9AQFC,106) as DateOfBirth  &#xD;
        , LEFT(base.pD_gender_DI286,1) as gender  &#xD;
        , ISNULL(base.pD_name_I4EFJ , rr.patientId ) as PatientName  &#xD;
        , rr.urgent as urgent&#xD;
        , null as priority  &#xD;
        , rr.status as status&#xD;
        , '' as referralReason &#xD;
        , rr.status as StatusReferral&#xD;
        , rr.patientId as patientId&#xD;
        , 'OHCP' as patientNamespace &#xD;
        , rr.referralRequestId as referralRequestID    &#xD;
        , '' as version  &#xD;
        , rr.referralService as referralService &#xD;
        &#xD;
        , CAST( CASE rr.[referringClinicianIdentifier] WHEN 'referrals-request-ws-soap' THEN 'External' ELSE rr.[referringClinicianIdentifier] END as varchar(100))AS requestCreatorIdentifier&#xD;
        , rr.status as statusCode   &#xD;
        , '' as lastModifiedByIdentifier  &#xD;
        , '' as lastModifiedDate&#xD;
        &#xD;
        , null as identifier &#xD;
        , ''  as viewId  &#xD;
        , '' as requiresReview&#xD;
        , '' as assignee      &#xD;
        , '' as statusReasonCode   &#xD;
        , '' as ACTPASID&#xD;
        , '' as openRepositoryName&#xD;
        , '' AS [Appointments]&#xD;
        ,CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_Specialty_D017M ElSE ISNULL(base.RT_CT_Specialty_D017M,base.RT_SS_SpecialtyDesc_CVUYD) END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
FROM      RefRequest.ERF_ReferralRequestView rr  &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = rr.modelDataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId     &#xD;
 &#xD;
WHERE rr.status != 'REJECTED' &#xD;
      AND rr.status != 'CONFIRMED'  &#xD;
      AND rr.status != 'DRAFT'       &#xD;
    &lt;%if AppVars.get("patientURNList") &lt;&gt;"" %&gt;&#xD;
      AND rr.patientId  IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    &lt;%end if%&gt; &#xD;
&#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_CT_SpecialtyCode_2E#CR,'UNK') END =  '&lt;%=get("Specialty")%&gt;' /*Currently not populated*/&#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Receiver") &lt;&gt; "" %&gt;  &#xD;
    AND 1 = 2 /*Currently not populated*/&#xD;
  &lt;% end if %&gt; &#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_SS_SpecialtyCode_0FIQL,'') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_CT_SpecialtyCode_2E#CR,'UNK') END =  '&lt;%=get("Specialty")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;%end if%&gt;&#xD;
) AS RESULTS&#xD;
&#xD;
WHERE RESULTS.receivedDate IS NOT NULL&#xD;
&#xD;
&#xD;
 &lt;%if get("Referral Id") %&gt;  &#xD;
      AND RESULTS.identifier like '%&lt;%=get("Referral Id") %&gt;%' &#xD;
 &lt;% end if %&gt;  &#xD;
 &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
     AND RESULTS.PatientName LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
 &lt;%end if%&gt;  &#xD;
     &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
      AND RESULTS.PatientName LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
 &lt;%end if%&gt;&#xD;
 &lt;% if get("Receiver") &lt;&gt; "" %&gt;  &#xD;
      AND RESULTS.assignee = &lt;%=SqlParameters.add(get("Receiver"))%&gt;  &#xD;
 &lt;% end if %&gt; &#xD;
 &lt;%if get("URN")&lt;&gt;""%&gt; &#xD;
      AND RESULTS.patientId LIKE '%&lt;%=get("URN")%&gt;%' &#xD;
 &lt;%end if%&gt;&#xD;
 &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
      AND RESULTS.receivedDate &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
 &lt;%end if%&gt;&#xD;
 &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
      AND RESULTS.receivedDate &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
 &lt;%end if%&gt;&#xD;
 &lt;%if get("Last Updated By") &lt;&gt; ""%&gt;  &#xD;
      AND RESULTS.requestCreatorIdentifier like '%&lt;%=get("Last Updated By") %&gt;%' &#xD;
 &lt;%end if%&gt; &#xD;
 &lt;%if get("Status") &lt;&gt; ""%&gt;  &#xD;
      AND RESULTS.StatusReferral like &lt;%=SqlParameters.add(get("Status"))%&gt;&#xD;
 &lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receive Date</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Received On Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral Id</name>
				<index>2</index>
				<default-value />
				<display-name>Referral Id</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>3</index>
				<default-value />
				<display-name>Patient Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Middle Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>4</index>
				<default-value />
				<display-name>Staff Team</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Staff Team")%&gt;&lt;%exec config.setReturnValueName("Staff Team")%&gt;&lt;%exec config.setDisplayValueName("Staff Team")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>5</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Specialty Search")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Description")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Last Updated By</name>
				<index>6</index>
				<default-value />
				<display-name>Last Updated By</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred To Clinician</name>
				<index>7</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Clinician Search")%&gt;&lt;%exec config.setReturnValueName("clinicianID")%&gt;&lt;%exec config.setDisplayValueName("Name")%&gt;&lt;%exec config.setWidth(1024)%&gt;&lt;%exec config.setHeight(800)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Status</name>
				<index>8</index>
				<default-value />
				<display-name>Status</display-name>
				<input-type>Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("", "")%&gt;&lt;%exec config.setOption("Cancelled", "Cancelled")%&gt;&lt;%exec config.setOption("Discharged", "Discharged")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Referral</name>
			</context-view>
			<default-context-view-entry-point>
				<context-view>
					<name>Referral</name>
				</context-view>
				<entry-point>
					<name>CCR DR Referral Context</name>
					<application>
						<name>Healthcare pathways - CCR</name>
					</application>
					<secure-enabled>false</secure-enabled>
				</entry-point>
			</default-context-view-entry-point>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>20</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Appointment</name>
				<index>0</index>
				<action>var appointmentOID = row.get(24);&#xD;
//get the application with the search required &#xD;
var ipmApplication = new Application ("Healthcare pathways - CCR ACTPAS", "CCR Clinician Appointments") ;&#xD;
//add the values to pass to the generic search - appointment iD and the clinician&#xD;
//from the selected row&#xD;
&#xD;
  var token = row.getSecureInformationToken(); &#xD;
   ipmApplication.setSecureInformationToken(token); &#xD;
  &#xD;
//use the singleton Concerto Object to Open the Application/search in a popup wondow&#xD;
concerto.openApplicationInWindow(ipmApplication, null, null, 700, 900) ;</action>
				<css-class>&lt;%if row.get(26).originalValue="YES"%&gt;SEARCH&lt;%elseif row.get(25).originalValue="BOOKED"%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date of Birth (Age)</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusCode</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>referralId</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>Version</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>referralServiceCode</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>code</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(25).getOriginalValue= "Transfer"%&gt;int_cr_transfer&lt;%else%&gt;&#xD;
&lt;%if row.get(25).getOriginalValue= "Call back"%&gt;int_cr_forward&lt;%else%&gt;&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;p title=&lt;%=row.get(19).getOriginalValue%&gt;&gt; &lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&lt;/P&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>View ID</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
Yes&#xD;
&lt;%else if%&gt;&#xD;
No&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusReasonCode</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ACTPASID</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>openRepositoryName</name>
				<index>24</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointments</name>
				<index>25</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=value.replace(";", "&lt;br&gt;")%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>26</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred To Clinician</name>
				<index>27</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var referralId = row.get(18);&#xD;
  var patientId = row.get(9);&#xD;
  var context = new Context("Referral");&#xD;
  var application = new Application("Healthcare pathways - CCR", "CCR DR Referral Context");&#xD;
  application.setSecureInformationToken(row.secureInformationToken);&#xD;
  context.setApplication(application);&#xD;
  context.put("Patient.Id.MRN", patientId); &#xD;
  context.put("[orionhealth.com]Referral.Id.ReferralId",referralId);&#xD;
  concerto.setContext(context);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Draft only)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Pre-Registration (DRAFT only) ::: Displays union of incoming Referral Requests (faxes).</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>1 DESC</order-by>
		<query-string>SELECT * FROM (&#xD;
  &#xD;
SELECT &#xD;
      rr.creationDateTime as receivedDate &#xD;
      , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName      &#xD;
      ,SourceCode as refType   &#xD;
      ,status as status &#xD;
      ,rr.[patientId] as patientID   &#xD;
      , CAST( CASE rr.[creatorIdentifier] WHEN 'referrals-request-ws-soap' THEN 'CHI' ELSE rr.[creatorIdentifier]  END as varchar(100))AS requestCreatorIdentifier  &#xD;
      ,rr.[sourceReferralId] as identifier  &#xD;
      ,null as  staffTeam  &#xD;
      ,rr.referralRequestId as referralRequestID &#xD;
      ,'Referral Request' as returnApplication &#xD;
      ,'Referrals to Register' as returnEntryPoint &#xD;
      ,CASE WHEN (DATEDIFF(DAY, creationDateTime, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END AS dateStatus &#xD;
FROM      RefRequest.ERF_ReferralRequestView rr   &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = rr.modelDataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId     &#xD;
WHERE rr.status='DRAFT' &#xD;
&#xD;
        &lt;%if Request.referralState = "Draft"%&gt; &#xD;
         AND rr.referralRequestVersion != 0&#xD;
  &lt;%end if%&gt;     &#xD;
        &lt;%if Request.referralState = "int_cr_received"%&gt; &#xD;
    AND rr.status = 'Received'&#xD;
  &lt;%end if%&gt; &#xD;
&#xD;
  &lt;%if get("URN") &lt;&gt;"" %&gt;&#xD;
    AND rr.patientId like '%&lt;%=get("URN")%&gt;%'&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Overdue") &lt;&gt; ""%&gt;  &#xD;
    AND CASE WHEN (DATEDIFF(DAY, creationDateTime, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END = 'EXPIRED' &#xD;
  &lt;% end if %&gt;  &#xD;
  &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
    AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
  &lt;%end if%&gt;  &#xD;
  &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
    AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
  &lt;%end if%&gt;   &#xD;
  &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
    AND rr.creationDateTime &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
    AND rr.creationDateTime &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
  &lt;%end if%&gt;&#xD;
UNION ALL &#xD;
&#xD;
SELECT &#xD;
      rr.creationDateTime as receivedDate &#xD;
      ,ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as fullName   &#xD;
      ,SourceCode as refType   &#xD;
      ,status as status &#xD;
      ,rr.[patientId] as patientID   &#xD;
      , CAST( CASE rr.[creatorIdentifier] WHEN 'referrals-request-ws-soap' THEN 'CHI' ELSE rr.[creatorIdentifier] END as varchar(100))AS requestCreatorIdentifier  &#xD;
      ,rr.[sourceReferralId] as identifier  &#xD;
      ,null as  staffTeam  &#xD;
      ,rr.referralRequestId as referralRequestID &#xD;
      ,'Referral Request' as returnApplication &#xD;
      ,'Referrals to Register' as returnEntryPoint &#xD;
      ,CASE WHEN (DATEDIFF(DAY, creationDateTime, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END AS dateStatus &#xD;
FROM      RefRequest.ERF_ReferralRequestView rr   &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = rr.modelDataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
LEFT OUTER JOIN OH_CM_cRepository.dbo.v2_SOAP#Referral#Request_NYIIB soap WITH(NOLOCK) ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId     &#xD;
WHERE rr.status='DRAFT' &#xD;
&#xD;
        &lt;%if Request.referralState = "Draft"%&gt; &#xD;
         AND   SourceCode='Internal'  &#xD;
  &lt;%end if%&gt;     &#xD;
        &lt;%if Request.referralState = "int_cr_received"%&gt; &#xD;
    AND rr.status = 'Received'&#xD;
  &lt;%end if%&gt; &#xD;
&#xD;
  &lt;%if get("URN") &lt;&gt;"" %&gt;&#xD;
    AND rr.patientId like '%&lt;%=get("URN")%&gt;%'&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Overdue") &lt;&gt; ""%&gt;  &#xD;
    AND CASE WHEN (DATEDIFF(DAY, creationDateTime, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END = 'EXPIRED' &#xD;
  &lt;% end if %&gt;  &#xD;
  &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
    AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
  &lt;%end if%&gt;  &#xD;
  &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
    AND ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA ) LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
  &lt;%end if%&gt;   &#xD;
  &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
    AND rr.creationDateTime &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
    AND rr.creationDateTime &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
  &lt;%end if%&gt;&#xD;
)as results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receive Date</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Received On Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Overdue</name>
				<index>2</index>
				<default-value />
				<display-name />
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Y", "Overdue")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Referral</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open External Request</name>
				<application>
					<name>Referral Request</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&#xD;
&lt;%if value %&gt;&#xD;
  &lt;%if row.get(11).originalValue = "VALID"%&gt;&#xD;
  &lt;%elseif row.get(11).originalValue = "EXPIRED"%&gt;&#xD;
    &lt;span title="More than 3 days old" style="text-align:right; background-color: #be0000; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;OVERDUE&lt;/span&gt;  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue &lt;&gt; ""%&gt; &lt;%=(html)value%&gt; &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinical Service/ Specialty/ Program</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>returnApplication</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>returnEntryPoint</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>dateStatus</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var Source = row.get(2);&#xD;
if (Source == 'Internal')&#xD;
{&#xD;
  var patientId = row.get(4);&#xD;
  var context = new Context("Patient");&#xD;
  var application = new Application("Healthcare pathways - CCR Referrals", "View Referral by Id");&#xD;
&#xD;
  application.setSecureInformationToken(row.secureInformationToken);&#xD;
  context.setApplication(application);&#xD;
  context.put("Patient.Id.MRN", patientId);&#xD;
  context.put("[orionhealth.com]ReferralRequest.Id.RequestId", row.get(8));&#xD;
  concerto.setContext(context);&#xD;
}&#xD;
else if (Source == 'Fax')&#xD;
{&#xD;
  var application = new Application("Referral Request", "Open External Request");&#xD;
&#xD;
  application.setSecureInformationToken(row.secureInformationToken);&#xD;
  concerto.openApplication(application);&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Event Status Update Auto-Open)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Referrals - Event Status update ::: Tim Panoho: Referrals that a status can be created for</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>1 DESC</order-by>
		<query-string>SELECT DISTINCT   r.identifier ,&#xD;
CONVERT(CHAR(11),ISNULL(refMeta.eventDate,r.receivedDate ),103) + CONVERT(CHAR( 5),ISNULL(refMeta.eventDate,r.receivedDate ),114) as receivedDate,    &#xD;
scd.shortDescription as status,&#xD;
r.patientIdentifier as patientId,&#xD;
pe.[pathwayIdentifier] as referralService,&#xD;
r.requestCreatorIdentifier,&#xD;
rcd.shortDescription as Assignee&#xD;
,'INPAT' AS Template &#xD;
,'DISDOC' AS DocType &#xD;
,'CHCACT' AS Location&#xD;
,'CHHS' AS Facility&#xD;
,r.referralViewId as EpisodeId&#xD;
,'CCR' AS specialtyCode&#xD;
,'COM' AS episodeType&#xD;
,r.identifier as eventId&#xD;
,r.pasReferralId as ExternalEventId&#xD;
,null url&#xD;
,CAST( base.referralReason_3388R  as varchar(255)) as referralReason&#xD;
,r.[lastModifiedByIdentifier]&#xD;
,d.status AS docStatus FROM&#xD;
    Referral.ERF_ReferralView r  &#xD;
    INNER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem &#xD;
    INNER JOIN Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem&#xD;
&#xD;
    INNER JOIN Referral.ERF_Referral mr ON mr.id = r.referralViewId &#xD;
    INNER JOIN [Referral].[ERF_ReferralMetaData] refMeta ON mr.metaDataId = refMeta.id&#xD;
&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom %&gt;.dbo.[ReferralToPathwayMapping] rsm ON rsm.[referral_identifier] = r.identifier&#xD;
    LEFT OUTER JOIN PathwayEnrollment.PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = rsm.[pathway_enrollmentIdentifier]&#xD;
&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository %&gt;.dbo.v_AllDocumentIdentifier a ON a.documentIdentifier = refMeta.dataId&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository %&gt;.dbo.v2_INT#CR#Base_DDKVM base ON base.DOCUMENTID = a.documentId&#xD;
   &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d ON  cast(r.referralViewId as varchar) = cast(d.extEventId as varchar)&#xD;
                                 AND (d.documentType = 'DISDOC' )&#xD;
                                 AND (d.inActive IS NULL OR d.inActive &lt;&gt; 'Y')&#xD;
  &#xD;
WHERE 1=1    &#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
  AND r.patientIdentifier  IN ( '&lt;%=AppVars.get("patientURNList")%&gt;') &#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>true</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>There are no active referrals for this patient.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Event Status Update</name>
				<index>0</index>
				<action>parent.form.openEntryPointWithBreadCrumb('Soprano Workflow Medical Templates', 'Add CCR Event Status', row.getSecureInformationToken());</action>
				<css-class>SELECT</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Referral ID</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Received On</name>
				<index>1</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = "Booked"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
&lt;%else%&gt;&#xD;
 &lt;%if value = "Closed"%&gt;&#xD;
&lt;span style="text-align:right; background-color: #d2d2cf; border-color: #636360; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
  &#xD;
 &lt;%else%&gt;&#xD;
 &lt;%if value = "Declined"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
 &lt;%else%&gt;&#xD;
  &lt;%if row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
   &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(5).getOriginalValue%&gt; &lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
  &lt;%if value = "Forward"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Assigned&lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Pathway Name</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>5</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>6</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Template</name>
				<index>7</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentType</name>
				<index>8</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Location</name>
				<index>9</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>10</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>EpisodeId</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SpecialtyCode</name>
				<index>12</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>episodeType</name>
				<index>13</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>eventId</name>
				<index>14</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ExternalEventId</name>
				<index>15</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>url</name>
				<index>16</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>17</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Event Status Update Document</name>
				<index>19</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;&#xD;
&lt;%if value="Final"%&gt;&#xD;
    &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_pinned.gif" title="Final document for this episode exists"/&gt;&#xD;
&lt;%elseif value="Interim" || value="UpdateInterim" || value="Updated"%&gt;&#xD;
    &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_edit.gif" title="Interim document for this episode exists"/&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>parent.form.openEntryPointWithBreadCrumb('Soprano Workflow Medical Templates', 'Add CCR Event Status', row.getSecureInformationToken());</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Event Status Update)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Referrals - Event Status update ::: Tim Panoho: Referrals that a status can be created for</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>15 DESC</order-by>
		<query-string>SELECT r.identifier &#xD;
    ,case when d.documentType = 'DISDOC' then 'Community Status Update'&#xD;
     when d.documentType = 'DISDOC2' then 'Community Event Summary'&#xD;
     when d.documentType = 'WIC' then 'Walk-in Centre Event Summary'&#xD;
     else d.templateDescription END AS Title  &#xD;
      ,'' as enrollmentStatus&#xD;
      ,CONVERT(CHAR(11),r.receivedDate,103) + CONVERT(CHAR(5),r.receivedDate,114) as receivedDate&#xD;
      ,d.lastUpdateDateTime&#xD;
      ,d.lastUpdateUserId&#xD;
      ,d.version&#xD;
      ,r.patientIdentifier as patientId&#xD;
      ,r.pasReferralId as ExternalEventId&#xD;
      ,'' as Assignee &#xD;
      ,d.documentType AS DocType &#xD;
      ,r.referralViewId as EpisodeId&#xD;
      ,'CCR' AS SpecialtyCode&#xD;
      ,'COM' AS episodeType&#xD;
      ,r.identifier as eventId&#xD;
      ,d.dischargeEventId documentId&#xD;
      ,d.dischargeEventId url&#xD;
      ,'popup' as panelMode&#xD;
      ,d.status AS docStatus&#xD;
FROM &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d &#xD;
INNER JOIN OH_CM_Clinical.Referral.ERF_ReferralView r ON d.extEventId = r.sourceReferralId&#xD;
WHERE&#xD;
d.dischargeEventId NOT IN (SELECT ed.originalCopyId FROM &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document ed WHERE originalCopyId IS NOT NULL )&#xD;
AND d.patientId IN ( '&lt;%=AppVars.get("patientURNList")%&gt;' ) AND d.documentType = 'DISDOC'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>1</index>
				<default-value />
				<display-name>Assignee</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/osgi_integration")%&gt;&lt;%exec config.setSQLQuery("SELECT results.id, results.description, results.shortDescription\r\nFROM {{\r\n    \r\n    // Retrieve the consumed web service from OHP e.g.'ReferralConsumedSoapService'\r\n    var webserviceService = osgiServiceFactory.getService('com.orchestral.foundation.webservices.api_6_9.WebServiceService');\r\n    var webservice = webserviceService.getWebService('" + SD + "=AppVars.get(\"Referral Consumed SOAP Service\")" + ED + "');\r\n \r\n    var referralSOAPServiceNamespace = 'http://www.orionhealth.com/ReferralSOAPService/';\r\n    default xml namespace = referralSOAPServiceNamespace;\r\n\r\n    // Note that the message below is not a String, but an E4X XML literal\r\n    var message = &lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:ref=\"http://www.orionhealth.com/ReferralSOAPService/\"&gt;\r\n       &lt;soap:Header/&gt;\r\n       &lt;soap:Body&gt;\r\n          &lt;ref:getReferralReceivers&gt;\r\n             &lt;!--Optional:--&gt;\r\n             &lt;ref:language&gt;" + SD + "=User.getLanguage()" + ED + "&lt;/ref:language&gt;\r\n             &lt;ref:includeDeleted&gt;true&lt;/ref:includeDeleted&gt;\r\n          &lt;/ref:getReferralReceivers&gt;\r\n       &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;;\r\n   \r\n    // Wrap the XML node before calling the web service\r\n    var inNode = org.mozilla.javascript.xmlimpl.XMLLibImpl.toDomNode(message);\r\n    var responseNode = webservice.call(inNode);\r\n   \r\n    // Unwrap the response after calling the web service\r\n    var response = new XML(responseNode);\r\n\r\n    // Log the response to Log4J\r\n    // org.apache.log4j.Logger.getLogger(\"my.webservice\").info(response);\r\n    // Log the response to System.out\r\n    //    java.lang.System.out.println(response);\r\n\r\n    var soapenv = new Namespace (\"http://www.w3.org/2003/05/soap-envelope\");\r\n    var ns3 =  new Namespace (referralSOAPServiceNamespace);\r\n    var rows = [];\r\n    for each (p in  response.soapenv::Body.ns3::getReferralReceiversResponse.*) {\r\n        var row = new Object();\r\n        row.id = p.@code.toString() + p.@codingSystem.toString();        \r\n        row.description = p.@description.toString();       \r\n        row.shortDescription = p.@shortDescription.toString();       \r\n        rows[rows.length] = row;\r\n        }\r\n    rows;\r\n}} AS results")%&gt;&lt;%exec config.setOptionColumnName("results.id")%&gt;&lt;%exec config.setDisplayColumnName("results.shortDescription")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SourceReferralID</name>
				<index>2</index>
				<default-value />
				<display-name>Source Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>10</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Referral</name>
				<index>0</index>
				<action>var application = new Application( "Soprano Workflow Medical Templates", "Document Direct Access");   &#xD;
application.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");  &#xD;
        &#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=Event+Status+List');</action>
				<css-class />
				<style />
			</result-action>
			<result-column>
				<name>Referral ID</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>Event Type</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pathway Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Received On</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(17).getOriginalValue = "Final"%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%elseif row.get(17).getOriginalValue ="Interim" || row.get(17).getOriginalValue ="UpdateInterim" || row.get(17).getOriginalValue ="Updated"%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document Version</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>7</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>ACTPAS ReferralId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assignee</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentType</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>EpisodeId</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SpecialtyCode</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>episodeType</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>eventId</name>
				<index>14</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>15</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>url</name>
				<index>16</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>panelMode</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>18</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;&lt;%if value="Final"%&gt;&#xD;
    &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_pinned.gif" title="Final document for this episode exists"/&gt;&#xD;
&lt;%elseif value="Interim" || value="UpdateInterim" || value="Updated"%&gt;&#xD;
    &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_edit.gif" title="Interim document for this episode exists"/&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Soprano Workflow Medical Templates", "Document Direct Access");   &#xD;
application.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");  &#xD;
        &#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=Event+Status+List');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Event Summary Discharge Auto-Open)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Referrals - Event Summary Discharge ::: Tim Panoho: Auto opens the latest Event summary list.</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT * FROM (&#xD;
  SELECT DISTINCT &#xD;
    CONVERT(CHAR(11),r.receivedDate,103) + CONVERT(CHAR( 5),r.receivedDate,114) as receivedDate,    &#xD;
    r.sourceReferralId,&#xD;
    scd.shortDescription as status,&#xD;
    r.patientIdentifier as patientId,&#xD;
    pe.pathwayIdentifier as referralService,&#xD;
    r.requestCreatorIdentifier,&#xD;
    r.[lastModifiedByIdentifier],&#xD;
    '' as Assignee&#xD;
    ,'COM' AS Template &#xD;
    ,'DISDOC2' AS DocType &#xD;
    ,'CHCACT' AS Location&#xD;
    ,'CHHS' AS Facility&#xD;
    ,r.pasReferralId as ExternalEventId&#xD;
    ,'CCR' AS specialtyCode&#xD;
    ,'COM' AS episodeType&#xD;
    ,r.identifier as eventId&#xD;
    ,null documentId&#xD;
    ,null url&#xD;
    ,CAST( rr.ReferralReason  as varchar(255)) as referralReason&#xD;
    ,null AS docStatus &#xD;
    ,CONVERT(CHAR(11),pt.modificationTime,103) + CONVERT(CHAR( 5),pt.modificationTime,114) as modDate&#xD;
    ,icmt.TaskType&#xD;
    ,r.statusCode            &#xD;
    ,'popup' as panelMode&#xD;
  FROM Referral.ERF_ReferralView r  &#xD;
  INNER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem &#xD;
  INNER JOIN Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem&#xD;
  INNER JOIN Referral.ERF_Referral mr ON mr.id = r.referralViewId &#xD;
  INNER JOIN [Referral].[ERF_ReferralMetaData] refMeta ON mr.metaDataId = refMeta.id&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom %&gt;.dbo.[ReferralToPathwayMapping] rsm ON rsm.[referral_identifier] = r.identifier&#xD;
  LEFT OUTER JOIN PathwayEnrollment.PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = rsm.[pathway_enrollmentIdentifier]&#xD;
  INNER JOIN (  &#xD;
    SELECT DISTINCT psm.SubPathwayEnrolmentId as  PathwayEnrolmentId,rtpm.referral_identifier, psm.SubEnrolmentStatus as pathway_status, 'SUB' as PathwayType FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE psm.SubPathwayEnrolmentId IS NOT NULL&#xD;
    UNION ALL &#xD;
    SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
    rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
  ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier&#xD;
  INNER JOIN OH_CM_task.dbo.PersistentTask pt ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')&#xD;
  INNER JOIN  [OH_CM_task].[dbo].vw_TSK_IncompleteTasks icmt ON icmt.taskIdentifier = pt.taskIdentifier&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository %&gt;.dbo.v_AllDocumentIdentifier a ON a.documentIdentifier = refMeta.dataId &#xD;
  LEFT OUTER JOIN OH_CM_cRepository.dbo.V2_DOCUMENTMETADATA_0Z14K metaData ON metaData.documentId = a.documentId  &#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom %&gt;.dbo.vw_eventsummary_referralReasons rr ON rr.externalEventId = r.referralViewId&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d ON  cast(r.pasReferralId as varchar) = cast(d.extEventId as varchar)&#xD;
  AND (d.documentType = 'DISDOC2')&#xD;
  AND (d.inActive IS NULL OR d.inActive &lt;&gt; 'Y')&#xD;
  /*--------------------------------------------------------------------------------------------------------------------------*/&#xD;
    AND d.version = (SELECT MAX(VERSION) FROM &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document ed&#xD;
    where d.extEventId = ed.extEventId and (ed.documentType = 'DISDOC2')&#xD;
    AND (ed.inActive IS NULL OR ed.inActive &lt;&gt; 'Y'))&#xD;
  /*--------------------------------------------------------------------------------------------------------------------------*/&#xD;
&#xD;
  WHERE r.patientIdentifier  IN ( '&lt;%=AppVars.get("patientURNList")%&gt;') &#xD;
  AND (r.statusCode = 'int_cr_pathwayActive') &#xD;
  AND icmt.TaskType IN ('Discharge Summary')&#xD;
&#xD;
UNION ALL&#xD;
&#xD;
  SELECT DISTINCT&#xD;
    CONVERT(CHAR(11),r.receivedDate,103) + CONVERT(CHAR( 5),r.receivedDate,114) as receivedDate,    &#xD;
    r.sourceReferralId,&#xD;
    scd.shortDescription as status,&#xD;
    r.patientIdentifier as patientId,&#xD;
    pe.pathwayIdentifier as referralService,&#xD;
    r.requestCreatorIdentifier,&#xD;
    r.[lastModifiedByIdentifier],&#xD;
    '' as Assignee&#xD;
    ,null AS Template &#xD;
    ,'WIC' AS DocType &#xD;
    ,null AS Location&#xD;
    ,'CHHS' AS Facility&#xD;
    ,r.pasReferralId as ExternalEventId&#xD;
    ,'WIC' AS SpecialtyCode&#xD;
    ,'WIC' AS episodeType&#xD;
    ,r.identifier as eventId&#xD;
    ,d.dischargeEventId documentId&#xD;
    ,d.dischargeEventId url&#xD;
    ,CAST( rr.ReferralReason  as varchar(255)) as referralReason&#xD;
    ,d.status AS docStatus &#xD;
    ,  CONVERT(CHAR(11),pt.modificationTime,103) + CONVERT(CHAR( 5),pt.modificationTime,114) as modDate&#xD;
    ,icmt.TaskType&#xD;
    ,r.statusCode          &#xD;
    ,'popup' as panelMode&#xD;
  FROM Referral.ERF_ReferralView r  &#xD;
  INNER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem &#xD;
  INNER JOIN Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem&#xD;
&#xD;
  INNER JOIN Referral.ERF_Referral mr ON mr.id = r.referralViewId &#xD;
  INNER JOIN [Referral].[ERF_ReferralMetaData] refMeta ON mr.metaDataId = refMeta.id&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom %&gt;.dbo.[ReferralToPathwayMapping] rsm ON rsm.[referral_identifier] = r.identifier&#xD;
  LEFT OUTER JOIN PathwayEnrollment.PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = rsm.[pathway_enrollmentIdentifier]&#xD;
  INNER JOIN (  &#xD;
    SELECT DISTINCT psm.SubPathwayEnrolmentId as  PathwayEnrolmentId,rtpm.referral_identifier, psm.SubEnrolmentStatus as pathway_status, 'SUB' as PathwayType FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE psm.SubPathwayEnrolmentId IS NOT NULL&#xD;
    UNION ALL &#xD;
    SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
    rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
  ) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier&#xD;
  INNER JOIN OH_CM_task.dbo.PersistentTask pt ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')&#xD;
  INNER JOIN  [OH_CM_task].[dbo].vw_TSK_IncompleteTasks icmt ON icmt.taskIdentifier = pt.taskIdentifier&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository %&gt;.dbo.v_AllDocumentIdentifier a ON a.documentIdentifier = refMeta.dataId&#xD;
  LEFT OUTER JOIN OH_CM_cRepository.dbo.V2_DOCUMENTMETADATA_0Z14K metaData ON metaData.documentId = a.documentId    &#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom %&gt;.dbo.vw_eventsummary_referralReasons rr ON rr.externalEventId = r.referralViewId&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d ON  cast(r.pasReferralId as varchar) = cast(d.extEventId as varchar)&#xD;
  AND (d.documentType = 'WIC')&#xD;
  AND (d.inActive IS NULL OR d.inActive &lt;&gt; 'Y')&#xD;
  /*--------------------------------------------------------------------------------------------------------------------------*/&#xD;
    AND d.version = (SELECT MAX(VERSION) FROM &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document ed&#xD;
    where d.extEventId = ed.extEventId and (ed.documentType = 'WIC')&#xD;
    AND (ed.inActive IS NULL OR ed.inActive &lt;&gt; 'Y'))&#xD;
  /*--------------------------------------------------------------------------------------------------------------------------*/&#xD;
&#xD;
  WHERE r.patientIdentifier  IN ( '&lt;%=AppVars.get("patientURNList")%&gt;') &#xD;
  AND (r.statusCode = 'int_cr_pathwayActive') &#xD;
  AND icmt.TaskType IN ('WiC Event Summary')&#xD;
&#xD;
) as results&#xD;
&#xD;
ORDER BY results.modDate DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>true</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>200</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Referral Received On</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>1</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = "Pathway Active"%&gt;&#xD;
   &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
&lt;%else%&gt;&#xD;
 &lt;%if value = "Closed"%&gt;&#xD;
  Pending Event Summary&#xD;
 &lt;%else%&gt;&#xD;
 &lt;%if value = "Declined"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
 &lt;%else%&gt;&#xD;
  &lt;%if row.get(8).getOriginalValue = "Eligible"%&gt;&#xD;
   &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(8).getOriginalValue%&gt; &lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
  &lt;%if value = "Forward"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; to assignee&lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(10).originalValue = "Pathway Active"%&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assignee</name>
				<index>7</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Template</name>
				<index>8</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentType</name>
				<index>9</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Location</name>
				<index>10</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ExternalEventId</name>
				<index>12</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SpecialtyCode</name>
				<index>13</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>episodeType</name>
				<index>14</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>eventId</name>
				<index>15</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DocumentId</name>
				<index>16</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>url</name>
				<index>17</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>18</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>docStatus</name>
				<index>19</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Accessed Date</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>TaskType</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(19).getOriginalValue="Final"%&gt;&#xD;
    &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_pinned.gif" title="Final document for this episode exists"/&gt;&#xD;
&lt;%elseif row.get(19).getOriginalValue="Interim" || row.get(19).getOriginalValue="UpdateInterim" || row.get(19).getOriginalValue="Updated"%&gt;&#xD;
    Draft &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_edit.gif" title="Interim document for this episode exists"/&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>panelMode</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (!row.get(16)) {&#xD;
        if (row.get(13) == 'WIC') { &#xD;
           parent.form.openEntryPointWithBreadCrumb('Soprano Workflow Medical Templates', 'Add WiC Event Summary', row.getSecureInformationToken());    &#xD;
        } else {&#xD;
           parent.form.openEntryPointWithBreadCrumb('Soprano Workflow Medical Templates', 'Add CCR Event Summary', row.getSecureInformationToken());    &#xD;
        }&#xD;
    }&#xD;
    else{  &#xD;
        parent.form.openEntryPointWithBreadCrumb('Soprano Workflow Medical Templates', 'Document Direct Access', row.getSecureInformationToken());        &#xD;
&#xD;
    }</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Event Summary Discharge)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Referrals - Event Summary update ::: Tim Panoho: Referrals can be created for Discharge</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>1 ASC</order-by>
		<query-string>SELECT * FROM (&#xD;
  SELECT DISTINCT           &#xD;
      r.identifier &#xD;
      ,case when d.documentType = 'DISDOC' then 'Community Status Update'&#xD;
       when d.documentType = 'DISDOC2' then 'Community Event Summary'&#xD;
       when d.documentType = 'WIC' then 'Walk-in Centre Event Summary'&#xD;
       else d.templateDescription END AS Title  &#xD;
      ,'' as enrollmentStatus&#xD;
      ,CONVERT(CHAR(11),r.receivedDate,103) + CONVERT(CHAR(5),r.receivedDate,114) as receivedDate&#xD;
      ,d.lastUpdateDateTime&#xD;
      ,d.lastUpdateUserId&#xD;
      ,d.version&#xD;
      ,r.patientIdentifier as patientId&#xD;
      ,r.pasReferralId as ExternalEventId&#xD;
      ,'' as Assignee &#xD;
      ,d.documentType AS DocType &#xD;
      ,r.referralViewId as EpisodeId&#xD;
      ,'CCR' AS SpecialtyCode&#xD;
      ,'COM' AS episodeType&#xD;
      ,r.identifier as eventId&#xD;
      ,d.dischargeEventId documentId&#xD;
      ,d.dischargeEventId url&#xD;
      ,'popup' as panelMode&#xD;
      ,d.status AS docStatus&#xD;
FROM &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d &#xD;
INNER JOIN OH_CM_Clinical.Referral.ERF_ReferralView r ON d.extEventId = r.sourceReferralId&#xD;
WHERE&#xD;
d.dischargeEventId NOT IN (SELECT ed.originalCopyId FROM &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document ed WHERE originalCopyId IS NOT NULL )&#xD;
AND d.patientId IN ( '&lt;%=AppVars.get("patientURNList")%&gt;' ) AND d.documentType = 'DISDOC2'&#xD;
&#xD;
UNION ALL &#xD;
&#xD;
  SELECT DISTINCT           &#xD;
      r.identifier &#xD;
      ,case when d.documentType = 'DISDOC' then 'Community Status Update'&#xD;
       when d.documentType = 'DISDOC2' then 'Community Event Summary'&#xD;
       when d.documentType = 'WIC' then 'Walk-in Centre Event Summary'&#xD;
       else d.templateDescription END AS Title  &#xD;
      ,'' as enrollmentStatus&#xD;
      ,CONVERT(CHAR(11),r.receivedDate,103) + CONVERT(CHAR(5),r.receivedDate,114) as receivedDate&#xD;
      ,d.lastUpdateDateTime&#xD;
      ,r.lastModifiedByIdentifier &#xD;
      ,d.version&#xD;
      ,r.patientIdentifier as patientId&#xD;
      ,r.pasReferralId as ExternalEventId&#xD;
      ,'' as Assignee &#xD;
      ,d.documentType AS DocType &#xD;
      ,r.referralViewId as EpisodeId&#xD;
      ,'WIC' AS SpecialtyCode&#xD;
      ,'WIC' AS episodeType&#xD;
      ,r.identifier as eventId&#xD;
      ,d.dischargeEventId documentId&#xD;
      ,d.dischargeEventId url&#xD;
      ,'popup' as panelMode&#xD;
      ,d.status AS docStatus&#xD;
FROM &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d &#xD;
INNER JOIN OH_CM_Clinical.Referral.ERF_ReferralView r ON d.extEventId = r.sourceReferralId&#xD;
WHERE&#xD;
d.dischargeEventId NOT IN (SELECT ed.originalCopyId FROM &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document ed WHERE originalCopyId IS NOT NULL )&#xD;
AND d.patientId IN ( '&lt;%=AppVars.get("patientURNList")%&gt;' ) AND d.documentType = 'WIC'&#xD;
&#xD;
) as results&#xD;
&#xD;
WHERE 1=1&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
 AND  results.patientId IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt;) &#xD;
&lt;%end if%&gt;&#xD;
ORDER BY 1 ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>1</index>
				<default-value />
				<display-name>Assignee</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/osgi_integration")%&gt;&lt;%exec config.setSQLQuery("SELECT results.id, results.description, results.shortDescription\r\nFROM {{\r\n    \r\n    // Retrieve the consumed web service from OHP e.g.'ReferralConsumedSoapService'\r\n    var webserviceService = osgiServiceFactory.getService('com.orchestral.foundation.webservices.api_6_9.WebServiceService');\r\n    var webservice = webserviceService.getWebService('" + SD + "=AppVars.get(\"Referral Consumed SOAP Service\")" + ED + "');\r\n \r\n    var referralSOAPServiceNamespace = 'http://www.orionhealth.com/ReferralSOAPService/';\r\n    default xml namespace = referralSOAPServiceNamespace;\r\n\r\n    // Note that the message below is not a String, but an E4X XML literal\r\n    var message = &lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:ref=\"http://www.orionhealth.com/ReferralSOAPService/\"&gt;\r\n       &lt;soap:Header/&gt;\r\n       &lt;soap:Body&gt;\r\n          &lt;ref:getReferralReceivers&gt;\r\n             &lt;!--Optional:--&gt;\r\n             &lt;ref:language&gt;" + SD + "=User.getLanguage()" + ED + "&lt;/ref:language&gt;\r\n             &lt;ref:includeDeleted&gt;true&lt;/ref:includeDeleted&gt;\r\n          &lt;/ref:getReferralReceivers&gt;\r\n       &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;;\r\n   \r\n    // Wrap the XML node before calling the web service\r\n    var inNode = org.mozilla.javascript.xmlimpl.XMLLibImpl.toDomNode(message);\r\n    var responseNode = webservice.call(inNode);\r\n   \r\n    // Unwrap the response after calling the web service\r\n    var response = new XML(responseNode);\r\n\r\n    // Log the response to Log4J\r\n    // org.apache.log4j.Logger.getLogger(\"my.webservice\").info(response);\r\n    // Log the response to System.out\r\n    //    java.lang.System.out.println(response);\r\n\r\n    var soapenv = new Namespace (\"http://www.w3.org/2003/05/soap-envelope\");\r\n    var ns3 =  new Namespace (referralSOAPServiceNamespace);\r\n    var rows = [];\r\n    for each (p in  response.soapenv::Body.ns3::getReferralReceiversResponse.*) {\r\n        var row = new Object();\r\n        row.id = p.@code.toString() + p.@codingSystem.toString();        \r\n        row.description = p.@description.toString();       \r\n        row.shortDescription = p.@shortDescription.toString();       \r\n        rows[rows.length] = row;\r\n        }\r\n    rows;\r\n}} AS results")%&gt;&lt;%exec config.setOptionColumnName("results.id")%&gt;&lt;%exec config.setDisplayColumnName("results.shortDescription")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SourceReferralID</name>
				<index>2</index>
				<default-value />
				<display-name>Source Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Referral</name>
				<index>0</index>
				<action>var application = new Application( "Soprano Workflow Medical Templates", "Document Direct Access");   &#xD;
application.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");        &#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=Event+Summary+%28Discharge%29');</action>
				<css-class />
				<style />
			</result-action>
			<result-column>
				<name>Referral ID</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>Event Type</name>
				<index>1</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pathway Status</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Received On</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(18).getOriginalValue = "Final"%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%elseif row.get(18).getOriginalValue ="Interim" || row.get(18).getOriginalValue ="UpdateInterim" || row.get(18).getOriginalValue ="Updated"%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document Version</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>7</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>ACTPAS ReferralId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assignee</name>
				<index>9</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentType</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>EpisodeId</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SpecialtyCode</name>
				<index>12</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>episodeType</name>
				<index>13</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>eventId</name>
				<index>14</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>15</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>url</name>
				<index>16</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>panelMode</name>
				<index>17</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>18</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value="Final"%&gt;&#xD;
    &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_pinned.gif" title="Final document for this episode exists"/&gt;&#xD;
&lt;%elseif value="Interim" || value="UpdateInterim" || value="Updated"%&gt;&#xD;
    Draft &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_edit.gif" title="Interim document for this episode exists"/&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Soprano Workflow Medical Templates", "Document Direct Access");   &#xD;
application.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");      &#xD;
  &#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=Event+Summary+%28Discharge%29');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Fax &amp; Internal only)</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Pre-Registration (Fax only) ::: Displays union of incoming Referral Requests (faxes).</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>receivedDate ASC</order-by>
		<query-string>SELECT &#xD;
      rr.creationDateTime as receivedDate   &#xD;
        , ISNULL(base.pD_name_I4EFJ , soap.pD_name_G75AA )  as PatientName    &#xD;
      ,status as status &#xD;
      ,rr.[patientId] as patientID &#xD;
      ,rr.[submitterIdentifier]&#xD;
      ,rr.[sourceReferralId] as identifier  &#xD;
      ,rr.referralRequestVersion as  draftReferral  &#xD;
      ,rr.referralRequestId as referralRequestID &#xD;
      ,'Referral Request' as returnApplication &#xD;
      ,'Referrals to Register' as returnEntryPoint &#xD;
      ,CASE WHEN (DATEDIFF(DAY, creationDateTime, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END AS dateStatus &#xD;
      ,CASE WHEN receiverCode ='?' THEN '' ELSE rcd.shortDescription END as Specialty       &#xD;
      ,SourceCode as refType&#xD;
,receiverCodingSystem &#xD;
,receiverCode &#xD;
,receiverCodingSystem &#xD;
,rcd.shortDescription as description &#xD;
FROM      RefRequest.ERF_ReferralRequestView rr  &#xD;
LEFT OUTER JOIN Codeset.CodeDefinition rcd ON rcd.code = rr.ReceiverCode AND rcd.codingSystem = rr.ReceiverCodingSystem &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a  ON a.documentIdentifier = rr.modelDataId &#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base  ON base.DOCUMENTID = a.documentId &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_SOAP#Referral#Request_NYIIB soap ON soap.DOCUMENTID = a.documentId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_ACTPAS%&gt; demographics ON demographics.patientID = rr.patientId&#xD;
LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData  on metaData.documentId = base.documentId     &#xD;
WHERE rr.status='DRAFT' &#xD;
&#xD;
  &lt;%if Request.referralState = "Draft"%&gt; &#xD;
      AND rr.[patientId] IS NOT NULL&#xD;
  &lt;%end if%&gt;     &#xD;
        &lt;%if Request.referralState = "int_cr_received"%&gt; &#xD;
    AND rr.status = 'Received'&#xD;
  &lt;%end if%&gt; &#xD;
&#xD;
  &lt;%if get("URN") &lt;&gt;"" %&gt;&#xD;
    AND rr.patientId like '%&lt;%=get("URN")%&gt;%'&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Overdue") &lt;&gt; ""%&gt;  &#xD;
    AND CASE WHEN (DATEDIFF(DAY, creationDateTime, GETDATE()) &gt;=3) THEN 'EXPIRED' ELSE 'VALID' END = 'EXPIRED' &#xD;
  &lt;% end if %&gt;  &#xD;
  &lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
    AND base.pD_name_I4EFJ LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
  &lt;%end if%&gt;  &#xD;
  &lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
    AND base.pD_name_I4EFJ LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
  &lt;%end if%&gt;   &#xD;
  &lt;%if get("Receive Date.low") &lt;&gt; ""%&gt;&#xD;
    AND rr.creationDateTime &gt;= convert(datetime,'&lt;%=get("Receive Date.low")%&gt;',103)&#xD;
  &lt;%end if%&gt;&#xD;
  &lt;%if get("Receive Date.high") &lt;&gt; ""%&gt;&#xD;
    AND rr.creationDateTime &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Receive Date.high")%&gt;', 103))&#xD;
  &lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receive Date</name>
				<index>1</index>
				<default-value>;</default-value>
				<display-name>Received On Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Overdue</name>
				<index>2</index>
				<default-value />
				<display-name />
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Y", "Overdue")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open External Request</name>
				<application>
					<name>Referral Request</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&#xD;
&lt;%if value %&gt;&#xD;
  &lt;%if row.get(10).originalValue = "VALID"%&gt;&#xD;
  &lt;%elseif row.get(10).originalValue = "EXPIRED"%&gt;&#xD;
    &lt;span title="More than 3 days old" style="text-align:right; background-color: #be0000; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;OVERDUE&lt;/span&gt;  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>StatusID</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Status</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;&#xD;
&lt;%if row.get(6).getOriginalValue &lt;&gt; 0%&gt;&#xD;
    &lt;span title="DRAFT" style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000;"&gt;DRAFT&lt;/span&gt;  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>ReferralVersion</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>returnApplication</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>returnEntryPoint</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>dateStatus</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>receiver</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>receiverCode</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>receiverCodingSystem</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>description</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var Source = row.get(12);&#xD;
if (Source == 'Internal')&#xD;
{&#xD;
  var referralId = row.get(7);&#xD;
  var patientId = row.get(3);&#xD;
  var context = new Context("Referral");&#xD;
  var application = new Application("Healthcare pathways - CCR", "CCR DR Referral Context");&#xD;
  application.setSecureInformationToken(row.secureInformationToken);&#xD;
  context.setApplication(application);&#xD;
  context.put("Patient.Id.MRN", patientId); &#xD;
  context.put("ReferralRequest.Id.RequestId",  referralId   ); &#xD;
  context.put("[orionhealth.com]Referral.Id.ReferralId",referralId); &#xD;
  concerto.setContext(context);&#xD;
}&#xD;
else if (Source == 'Fax')&#xD;
{&#xD;
  var application = new Application("Referral Request", "Open External Request");&#xD;
&#xD;
  application.setSecureInformationToken(row.secureInformationToken);&#xD;
  concerto.openApplication(application);&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Patient Context)</name>
		<data-source-name>java:comp/env/jdbc/referrals</data-source-name>
		<description>Referrals (Patient Profile Context) ::: Tim Panoho: Referrals that are Pathway active (i.e. enroled on pathway)</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>1 desc</order-by>
		<query-string>SELECT&#xD;
    r.receivedDate,   &#xD;
    r.urgent, &#xD;
    r.statusReasonCode,&#xD;
    r.sourceReferralId,    &#xD;
     r.priorityCode as priority,&#xD;
    scd.shortDescription as status,&#xD;
    ISNULL( CAST( base.referralReason_3388R  as varchar(255)) , CAST( soap.referralReason_WN792 as varchar(255)) )as referralReason,&#xD;
    r.patientIdentifier as patientId,  &#xD;
    r.referralRequestID, &#xD;
    'Community Health' as referralService,&#xD;
    r.statusCode,    &#xD;
    r.requestCreatorIdentifier "Author",&#xD;
    r.[lastModifiedByIdentifier] as lastModifiedByIdentifier,&#xD;
    &lt;%if AppVars.get("referralViewAccess")%&gt;'&lt;%=(js)AppVars.get("referralViewAccess")%&gt;'&lt;%end if%&gt; as ViewId,&#xD;
    r.requiresReview,&#xD;
    r.identifier,&#xD;
    CASE WHEN rcd.shortDescription != '' THEN rcd.shortDescription WHEN base.RT_SS_StaffCode_9NXA$ != '' THEN base.RT_SS_StaffDesc_BCBVN ElSE ISNULL(soap.ACTPASR_RFT_SS_StaffDesc_650#M, soap.ACTPASR_RFT_CT_sT_StffTm_7C$92) END  as Assignee&#xD;
  ,CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_Specialty_D017M WHEN base.RT_SS_SpecialtyCode_0FIQL != '' THEN base.RT_SS_SpecialtyDesc_CVUYD ElSE ISNULL(soap.ACTPASR_RFT_CT_Specialty_IJ450,soap.ACTPASR_RFT_SS_SpcltyDsc_$M2J9) END AS Specialty&#xD;
  ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(soap.ACTPASR_RFT_CT_Referrer_#F7BF,'') END as ReferredToClinician&#xD;
  ,attch.formsInternalId_MXZPJ formsInternalId&#xD;
FROM&#xD;
    Referral.ERF_ReferralView r  &#xD;
    INNER JOIN Referral.ERF_Referral mr ON mr.id = r.referralViewId &#xD;
    INNER JOIN [Referral].[ERF_ReferralMetaData] refMeta ON mr.metaDataId = refMeta.id  &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[ReferralToPathwayMapping] rsm ON rsm.[referral_identifier] = r.identifier &#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem &#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem  &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a ON a.documentIdentifier = refMeta.dataId&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_SOAP#Referral#Request_NYIIB soap ON soap.DOCUMENTID = a.documentId&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base ON base.DOCUMENTID = a.documentId    &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INTCRBs_DDKVM_Invstgt_0$GGP inv ON inv.v2_INT#CR#Base_DDKVM =base.v2_INT#CR#Base_DDKVM &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INTCRBs_DDKVM_atchm_H#4NIUH attch ON attch.v2_INTCRBs_DDKVM_Invstgt_0$GGP = inv.v2_INTCRBs_DDKVM_Invstgt_0$GGP&#xD;
     &#xD;
WHERE 1=1 &#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
 AND r.patientIdentifier  IN  ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt;)&#xD;
&lt;%end if%&gt;&#xD;
    AND r.statusCode != 'int_cr_closed'  &#xD;
    AND scd.shortDescription != 'Completed'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none !important</style>
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>1</index>
				<default-value />
				<display-name>Assignee</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/osgi_integration")%&gt;&lt;%exec config.setSQLQuery("SELECT results.id, results.description, results.shortDescription\r\nFROM {{\r\n    \r\n    // Retrieve the consumed web service from OHP e.g.'ReferralConsumedSoapService'\r\n    var webserviceService = osgiServiceFactory.getService('com.orchestral.foundation.webservices.api_6_9.WebServiceService');\r\n    var webservice = webserviceService.getWebService('" + SD + "=AppVars.get(\"Referral Consumed SOAP Service\")" + ED + "');\r\n \r\n    var referralSOAPServiceNamespace = 'http://www.orionhealth.com/ReferralSOAPService/';\r\n    default xml namespace = referralSOAPServiceNamespace;\r\n\r\n    // Note that the message below is not a String, but an E4X XML literal\r\n    var message = &lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:ref=\"http://www.orionhealth.com/ReferralSOAPService/\"&gt;\r\n       &lt;soap:Header/&gt;\r\n       &lt;soap:Body&gt;\r\n          &lt;ref:getReferralReceivers&gt;\r\n             &lt;!--Optional:--&gt;\r\n             &lt;ref:language&gt;" + SD + "=User.getLanguage()" + ED + "&lt;/ref:language&gt;\r\n             &lt;ref:includeDeleted&gt;true&lt;/ref:includeDeleted&gt;\r\n          &lt;/ref:getReferralReceivers&gt;\r\n       &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;;\r\n   \r\n    // Wrap the XML node before calling the web service\r\n    var inNode = org.mozilla.javascript.xmlimpl.XMLLibImpl.toDomNode(message);\r\n    var responseNode = webservice.call(inNode);\r\n   \r\n    // Unwrap the response after calling the web service\r\n    var response = new XML(responseNode);\r\n\r\n    // Log the response to Log4J\r\n    // org.apache.log4j.Logger.getLogger(\"my.webservice\").info(response);\r\n    // Log the response to System.out\r\n    //    java.lang.System.out.println(response);\r\n\r\n    var soapenv = new Namespace (\"http://www.w3.org/2003/05/soap-envelope\");\r\n    var ns3 =  new Namespace (referralSOAPServiceNamespace);\r\n    var rows = [];\r\n    for each (p in  response.soapenv::Body.ns3::getReferralReceiversResponse.*) {\r\n        var row = new Object();\r\n        row.id = p.@code.toString() + p.@codingSystem.toString();        \r\n        row.description = p.@description.toString();       \r\n        row.shortDescription = p.@shortDescription.toString();       \r\n        rows[rows.length] = row;\r\n        }\r\n    rows;\r\n}} AS results")%&gt;&lt;%exec config.setOptionColumnName("results.id")%&gt;&lt;%exec config.setDisplayColumnName("results.shortDescription")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SourceReferralID</name>
				<index>2</index>
				<default-value />
				<display-name>Source Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>1</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if Request.getServletPath().endsWith(".htm")%&gt; &#xD;
&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;  &#xD;
&#xD;
&lt;%if Request.getServletPath().endsWith(".htm") = false %&gt;&#xD;
&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>statusEligibility</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if Request.getServletPath().endsWith(".htm")%&gt;&#xD;
	&lt;%if value = "Completed"%&gt;&#xD;
		&lt;span style="text-align:right; background-color: #d2d2cf; border-color: #636360; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
		&lt;%elseif row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
		   		&lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(5).getOriginalValue%&gt; &lt;/span&gt;&#xD;
		  	&lt;%elseif value = "Forward"%&gt;&#xD;
		    	&lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Assigned&lt;/span&gt;&#xD;
		  		&lt;%else%&gt;&#xD;
		    		&lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
		  		&lt;%end if%&gt;&#xD;
			&lt;%end if%&gt;&#xD;
		&lt;%end if%&gt;  &#xD;
	&lt;%end if%&gt;  &#xD;
&#xD;
&lt;%if Request.getServletPath().endsWith(".htm") = false %&gt;&#xD;
&lt;%if value = "Completed"%&gt;&#xD;
	 	&lt;%=(html)value%&gt; &#xD;
		&lt;%elseif row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
	    	&lt;%=row.get(5).getOriginalValue%&gt;&#xD;
		  	&lt;%elseif value = "Forward"%&gt;&#xD;
		     	Assigned&#xD;
				&lt;%else%&gt;&#xD;
		    		&lt;%=(html)value%&gt;&#xD;
		  		&lt;%end if%&gt;&#xD;
			&lt;%end if%&gt;&#xD;
		&lt;%end if%&gt;  &#xD;
	&lt;%end if%&gt; &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>6</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>7</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>8</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>9</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>code</name>
				<index>10</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>View ID</name>
				<index>13</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>14</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
Yes&#xD;
&lt;%else if%&gt;&#xD;
No&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referred To Clinician</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>19</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(19).originalValue &lt;&gt; null%&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
 &lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR Referrals", "View Referral by Id");&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=Event+Summary+List');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Referrals Search (Referral Context)</name>
		<data-source-name>java:comp/env/jdbc/referrals</data-source-name>
		<description>Referrals (Referral Context) ::: Tim Panoho: Replaces the Veiw DocumentID load with an entry point that loads the referral.</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
    r.receivedDate,  &#xD;
    ISNULL(base.pD_name_I4EFJ + ' (' + r.patientIdentifier + ')', UPPER(demographic.familyName) + ', ' + demographic.givenName + ' (' + r.patientIdentifier + ')' )  as PatientName , &#xD;
    r.urgent, &#xD;
    r.statusReasonCode,&#xD;
    r.sourceReferralId,    &#xD;
     r.priorityCode as priority,&#xD;
    scd.shortDescription as status, &#xD;
     CAST( base.referralReason_3388R  as varchar(20)) as referralReason,&#xD;
    r.patientIdentifier as patientId,&#xD;
    r.patientNamespace as patientNamespace,&#xD;
    r.referralRequestID,&#xD;
    r.version,&#xD;
    'Community Health' as referralService,&#xD;
    r.statusCode,    &#xD;
    CAST(r.requestCreatorIdentifier +' ('+ISNULL(UserAttribute.cValue,'n/a')  as varchar(20))+') ' "Author",&#xD;
    r.[lastModifiedByIdentifier],&#xD;
    r.identifier,&#xD;
    &lt;%if AppVars.get("referralViewAccess")%&gt;'&lt;%=(js)AppVars.get("referralViewAccess")%&gt;'&lt;%end if%&gt;  as ViewId,&#xD;
    r.requiresReview,&#xD;
    rcd.shortDescription as Assignee &#xD;
    ,CASE WHEN base.RT_CT_Referrer_DBIPD != '' THEN base.RT_CT_Referrer_DBIPD ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END as ReferredToClinician&#xD;
FROM&#xD;
    Referral.ERF_ReferralView r  &#xD;
    LEFT OUTER JOIN Referral.ERF_Referral mr ON mr.id = r.referralViewId &#xD;
    LEFT OUTER JOIN [Referral].[ERF_ReferralMetaData] refMeta ON mr.metaDataId = refMeta.id  &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[ReferralToPathwayMapping] rsm ON rsm.[referral_identifier] = r.identifier&#xD;
    LEFT OUTER JOIN PathwayEnrollment.PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = rsm.[pathway_enrollmentIdentifier] &#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem &#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem &#xD;
    LEFT OUTER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_PatientDemographics demographic ON demographic.patientID = r.patientIdentifier  &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_AllDocumentIdentifier a ON a.documentIdentifier = refMeta.dataId&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_INT#CR#Base_DDKVM base ON base.DOCUMENTID = a.documentId&#xD;
     LEFT OUTER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = base.documentId AND metaData.STATUS_TDES0 = 'FINAL'&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[cUser] cUser ON r.requestCreatorIdentifier = cUser.name&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[UserAttribute] UserAttribute ON cUser.uniqueId = UserAttribute.cUser AND UserAttribute.name = 'ACTPAS Speciality' &#xD;
WHERE 1=1 &#xD;
&lt;% if Request."Referral ID" &lt;&gt; "" %&gt; &#xD;
    AND r.identifier  = &lt;%=SqlParameters.add(Request."Referral ID")%&gt;   &#xD;
&lt;%end if%&gt; &#xD;
&lt;%if Context.Patient.Id.MRN&lt;&gt;"" %&gt; &#xD;
    AND r.patientIdentifier IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt; &#xD;
  &lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("ClPtl_CHILevel2") %&gt;  &#xD;
    /*There is nothing to filter*/&#xD;
  &lt;%else%&gt; &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Speciality")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_SS_SpecialtyCode_0FIQL,'') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Staff Team")&lt;&gt;""%&gt;&#xD;
      AND (CASE WHEN base.RT_CT_sT_Code_TZORM != '' THEN base.RT_CT_sT_Code_TZORM ElSE ISNULL(base.RT_SS_StaffCode_9NXA$,'UNK') END) = '&lt;%=(js)User.getAttribute("Community","ACTPAS Staff Team")%&gt;' &#xD;
    &lt;%end if%&gt;   &#xD;
    &lt;%if User.getAttribute("Community","ACTPAS Clinician ID")&lt;&gt;""%&gt;&#xD;
      AND base.RT_CT_ReferrerCode_GOFE2 = '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinician ID")%&gt;'&#xD;
    &lt;%end if%&gt;   &#xD;
  &lt;%end if%&gt;&#xD;
  &lt;% if get("Referred To Clinician") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_ReferrerCode_GOFE2 != '' THEN base.RT_CT_ReferrerCode_GOFE2 ElSE ISNULL(base.RT_CT_ReferrerCode_GOFE2,'') END =  '&lt;%=get("Referred To Clinician")%&gt;' &#xD;
  &lt;% end if %&gt; &#xD;
  &lt;% if get("Specialty") &lt;&gt; "" %&gt;  &#xD;
    AND CASE WHEN base.RT_CT_SpecialtyCode_2E#CR != '' THEN base.RT_CT_SpecialtyCode_2E#CR ElSE ISNULL(base.RT_CT_SpecialtyCode_2E#CR,'UNK') END =  '&lt;%=get("Specialty")%&gt;' &#xD;
  &lt;% end if %&gt;  &#xD;
 ORDER BY CASE WHEN scd.shortDescription = 'Completed' THEN 1 ELSE 0 END ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>SourceReferralID</name>
				<index>1</index>
				<default-value />
				<display-name>Source Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Specialty</name>
				<index>2</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Specialty Search")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Description")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>3</index>
				<default-value />
				<display-name>Staff Team</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Staff Team")%&gt;&lt;%exec config.setReturnValueName("Staff Team")%&gt;&lt;%exec config.setDisplayValueName("Staff Team")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referred To Clinician</name>
				<index>4</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Clinician Search")%&gt;&lt;%exec config.setReturnValueName("clinicianID")%&gt;&lt;%exec config.setDisplayValueName("Name")%&gt;&lt;%exec config.setWidth(800)%&gt;&lt;%exec config.setHeight(1024)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>true</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>1</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Referral</name>
				<index>0</index>
				<action>if (row.get(11) != "Closed" ) {&#xD;
	var application = new Application( "Healthcare pathways - CCR Referrals", "View Referral by Id");&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");&#xD;
          } &#xD;
else{ &#xD;
	var entryPoint = "Add Document Episode Independent";&#xD;
	var entryPointDA = "Document Direct Access";&#xD;
	 if (!row.get(33)) {&#xD;
	    if (row.get(25)) {&#xD;
	            var application = new Application( "Soprano Workflow Medical Templates", entryPoint );&#xD;
	            application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	            concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes"); 		} &#xD;
		else {&#xD;
			alert("No default template assigned to this encounter, please contact the SSICT support desk to resolve.");&#xD;
		}&#xD;
	}&#xD;
	else{ &#xD;
	    var application = new Application( "Soprano Workflow Medical Templates", entryPointDA );&#xD;
	    application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	    concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");  &#xD;
	}&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=Event+Summary+List');</action>
				<css-class>&lt;%if row.get(33).getOriginalValue = null &amp;&amp; row.get(11).getOriginalValue = "Closed"  %&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>statusEligibility</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = "Booked"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
&lt;%else%&gt;&#xD;
 &lt;%if value = "Completed"%&gt;&#xD;
&lt;span style="text-align:right; background-color: #d2d2cf; border-color: #636360; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt; &#xD;
  &#xD;
 &lt;%else%&gt;&#xD;
 &lt;%if value = "Declined"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
 &lt;%else%&gt;&#xD;
  &lt;%if row.get(5).getOriginalValue = "Eligible"%&gt;&#xD;
   &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(5).getOriginalValue%&gt; &lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
  &lt;%if value = "Forward"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; Assigned&lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Reason</name>
				<index>7</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Version</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(10).getOriginalValue = "Pathway Active"%&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>code</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>View ID</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
Yes&#xD;
&lt;%else if%&gt;&#xD;
No&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(11) != "Closed" ) {&#xD;
	var application = new Application( "Healthcare pathways - CCR Referrals", "View Referral by Id");&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");&#xD;
          //concerto.openApplication( application );&#xD;
} &#xD;
else{ &#xD;
	var entryPoint = "Add Document Episode Independent";&#xD;
	var entryPointDA = "Document Direct Access";&#xD;
	 if (!row.get(33)) {&#xD;
	    if (row.get(25)) {&#xD;
	            var application = new Application( "Soprano Workflow Medical Templates", entryPoint );&#xD;
	            application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	            concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes"); 		} &#xD;
		else {&#xD;
			alert("No default template assigned to this encounter, please contact the SSICT support desk to resolve.");&#xD;
		}&#xD;
	}&#xD;
	else{ &#xD;
	    var application = new Application( "Soprano Workflow Medical Templates", entryPointDA );&#xD;
	    application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	    concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");  &#xD;
	}&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=Event+Summary+List');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals to Review</name>
		<data-source-name>java:comp/env/jdbc/referrals</data-source-name>
		<description>Displays all entries in the Referral DB</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>receivedDate ASC</order-by>
		<query-string>SELECT&#xD;
    r.urgent,&#xD;
    r.sourceReferralId,&#xD;
    scd.shortDescription as status,&#xD;
    r.receivedDate,&#xD;
    r.patientIdentifier as patientId,&#xD;
    r.patientNamespace as patientNamespace,&#xD;
    r.referralRequestID,&#xD;
    r.version,&#xD;
    r.referralService,&#xD;
    r.statusCode,&#xD;
    pcd.shortDescription as priority,&#xD;
    acd.shortDescription as acuity,&#xD;
    r.requestCreatorIdentifier,&#xD;
    r.identifier,&#xD;
     &lt;%if AppVars.get("referralViewAccess")%&gt;'&lt;%=(js)AppVars.get("referralViewAccess")%&gt;'&lt;%end if%&gt;  AS ViewId,&#xD;
    r.requiresReview&#xD;
    &#xD;
FROM&#xD;
    Referral.ERF_ReferralView r&#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition acd ON acd.code = r.acuityCode AND acd.codingSystem = r.acuityCodingSystem&#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem&#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition pcd ON pcd.code = r.priorityCode AND pcd.codingSystem = r.priorityCodingSystem&#xD;
    JOIN Codeset.CodeSet acs on acs.identifier = 'com.orchestral.referrals.common.api_2_0.Acuity' AND (acs.id = acd.codesetid or r.acuityCode is null)&#xD;
    JOIN Codeset.CodeSet scs on scs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralStatus' AND (scs.id = scd.codesetid or r.statusCode is null)&#xD;
    JOIN Codeset.CodeSet pcs on pcs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralPriority' AND (pcs.id = pcd.codesetid or r.priorityCode is null)&#xD;
WHERE 1=1&#xD;
&lt;% if get("Receiver") &lt;&gt; "" %&gt;&#xD;
  &lt;% if AppVars.clinicalDbType = "mssql" %&gt;&#xD;
     AND r.RECEIVERCODE + r.RECEIVERCODINGSYSTEM  = &lt;%=SqlParameters.add(get("Receiver"))%&gt; &#xD;
  &lt;% elseIf AppVars.clinicalDbType = "derby" %&gt;&#xD;
    AND r.RECEIVERCODE || r.RECEIVERCODINGSYSTEM like &lt;%=SqlParameters.add(get("Receiver"))%&gt;&#xD;
  &lt;% elseIf AppVars.clinicalDbType = "oracle" %&gt;&#xD;
    AND r.RECEIVERCODE || r.RECEIVERCODINGSYSTEM = &lt;%=SqlParameters.add(get("Receiver"))%&gt;&#xD;
  &lt;% end if %&gt;&#xD;
&lt;% end if %&gt;&#xD;
&lt;%if get("Identifier")&lt;&gt;""%&gt; AND r.identifier LIKE &lt;%=SqlParameters.add(get("Identifier") + "%")%&gt;&lt;%end if%&gt;&#xD;
&lt;%if get("SourceReferralID")&lt;&gt;""%&gt; AND r.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt;&lt;%end if%&gt;&#xD;
&lt;%if AppVars.patientURNList &lt;&gt;"" %&gt;&#xD;
  AND r.patientNamespace = &lt;%=SqlParameters.add(AppVars.patientNamespace)%&gt;&#xD;
  AND r.patientIdentifier IN ( &lt;%=AppVars.patientURNList%&gt; )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>1</index>
				<default-value />
				<display-name>Assignee</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/osgi_integration")%&gt;&lt;%exec config.setSQLQuery("SELECT results.id, results.description, results.shortDescription\r\nFROM {{\r\n    \r\n    // Retrieve the consumed web service from OHP e.g.'ReferralConsumedSoapService'\r\n    var webserviceService = osgiServiceFactory.getService('com.orchestral.foundation.webservices.api_6_9.WebServiceService');\r\n    var webservice = webserviceService.getWebService('" + SD + "=AppVars.get(\"Referral Consumed SOAP Service\")" + ED + "');\r\n \r\n    var referralSOAPServiceNamespace = 'http://www.orionhealth.com/ReferralSOAPService/';\r\n    default xml namespace = referralSOAPServiceNamespace;\r\n\r\n    // Note that the message below is not a String, but an E4X XML literal\r\n    var message = &lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:ref=\"http://www.orionhealth.com/ReferralSOAPService/\"&gt;\r\n       &lt;soap:Header/&gt;\r\n       &lt;soap:Body&gt;\r\n          &lt;ref:getReferralReceivers&gt;\r\n             &lt;!--Optional:--&gt;\r\n             &lt;ref:language&gt;" + SD + "=User.getLanguage()" + ED + "&lt;/ref:language&gt;\r\n             &lt;ref:includeDeleted&gt;true&lt;/ref:includeDeleted&gt;\r\n          &lt;/ref:getReferralReceivers&gt;\r\n       &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;;\r\n   \r\n    // Wrap the XML node before calling the web service\r\n    var inNode = org.mozilla.javascript.xmlimpl.XMLLibImpl.toDomNode(message);\r\n    var responseNode = webservice.call(inNode);\r\n   \r\n    // Unwrap the response after calling the web service\r\n    var response = new XML(responseNode);\r\n\r\n    // Log the response to Log4J\r\n    // org.apache.log4j.Logger.getLogger(\"my.webservice\").info(response);\r\n    // Log the response to System.out\r\n    //    java.lang.System.out.println(response);\r\n\r\n    var soapenv = new Namespace (\"http://www.w3.org/2003/05/soap-envelope\");\r\n    var ns3 =  new Namespace (referralSOAPServiceNamespace);\r\n    var rows = [];\r\n    for each (p in  response.soapenv::Body.ns3::getReferralReceiversResponse.*) {\r\n        var row = new Object();\r\n        row.id = p.@code.toString() + p.@codingSystem.toString();        \r\n        row.description = p.@description.toString();       \r\n        row.shortDescription = p.@shortDescription.toString();       \r\n        rows[rows.length] = row;\r\n        }\r\n    rows;\r\n}} AS results")%&gt;&lt;%exec config.setOptionColumnName("results.id")%&gt;&lt;%exec config.setDisplayColumnName("results.shortDescription")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SourceReferralID</name>
				<index>2</index>
				<default-value />
				<display-name>Source Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Urgent</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Received On</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Version</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>code</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Acuity</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>ViewId</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
Yes&#xD;
&lt;%else if%&gt;&#xD;
No&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Specialty</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>For Fax Register Referral service - to add specialty.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT * FROM (&#xD;
SELECT DISTINCT &#xD;
specialtyLink.Specialty as receiver&#xD;
,specialtyLink.SpecialtyCode as receiverCode&#xD;
,specialtyLink.Specialty as receiverCodingSystem&#xD;
,specialtyLink.Specialty as description&#xD;
,specialtyLink.Specialty as Assignee &#xD;
,specialtyLink.Specialty as Specialty &#xD;
&#xD;
,specialtyLink.SpecialtyCode as stcode &#xD;
,specialtyLink.SpecialtyCode as SpCode&#xD;
&#xD;
FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CWSSpecialty] specialtyLink&#xD;
&#xD;
) as results&#xD;
&#xD;
WHERE 1=1&#xD;
&lt;% if get("assigneeCode") &lt;&gt; "" %&gt;&#xD;
    AND UPPER(results.SpCode) LIKE UPPER('%&lt;%=get("assigneeCode")%&gt;%')&#xD;
&lt;%end if%&gt;&#xD;
&lt;% if get("assigneeCodingSystem") &lt;&gt; "" %&gt;&#xD;
    AND UPPER(results.Specialty) LIKE UPPER('%&lt;%=get("assigneeCodingSystem")%&gt;%')&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
ORDER BY results.SpCode ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>assigneeCode</name>
				<index>0</index>
				<default-value />
				<display-name>Specialty Code</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>assigneeCodingSystem</name>
				<index>1</index>
				<default-value />
				<display-name>Specialty Description</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referral Service</name>
				<index>2</index>
				<default-value />
				<display-name>Referral Service</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referral Type</name>
				<index>3</index>
				<default-value />
				<display-name>Referral Type</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Current Assignee</name>
				<index>4</index>
				<default-value />
				<display-name>Current Assignee</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Action</name>
				<index>5</index>
				<default-value />
				<display-name>Action</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Assignee</name>
				<index>6</index>
				<default-value />
				<display-name>Assignee</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>receiver</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>receiverCode</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>receiverCodingSystem</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>description</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assignee</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty Code</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty Description</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>WIC Referrals Search (Event Summary Discharge)</name>
		<data-source-name>java:comp/env/jdbc/referrals</data-source-name>
		<description>Referrals - Event Status update ::: Tim Panoho: Referrals can be created for Discharge</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
    CONVERT(CHAR(11),r.receivedDate,103) + CONVERT(CHAR( 5),r.receivedDate,114) as receivedDate,&#xD;
    r.sourceReferralId,    &#xD;
    r.patientIdentifier as patientId,&#xD;
    r.referralRequestID,&#xD;
    CASE&#xD;
      WHEN r.referralService = 'community_health' THEN 'Community Health'&#xD;
      WHEN r.referralService = 'chi_nursing' THEN 'Nursing Care Pathway'&#xD;
      WHEN r.referralService = 'chi_nutrition' THEN 'Nutrition Pathway'&#xD;
      WHEN r.referralService = 'chi_physiotherapy' THEN 'Physiotherapy Pathway'&#xD;
      WHEN r.referralService = 'chi_podiatry' THEN 'Podiatry Pathway'&#xD;
      WHEN r.referralService = 'chi_social_work' THEN 'Social Work pathway'&#xD;
      WHEN r.referralService = 'chi_occupational_therapy' THEN 'Occupational Therapy Pathway'&#xD;
      ELSE 'Unknown Pathway'    END as referralService,&#xD;
    r.identifier,&#xD;
    rcd.shortDescription as Assignee&#xD;
,r.lastModifiedByIdentifier as [Last Updated By]&#xD;
,r.pasReferralId&#xD;
,d.documentType AS DocType&#xD;
,r.referralViewId as extEventId&#xD;
,'WIC' AS SpecialtyCode&#xD;
,'WIC' AS episodeType&#xD;
,r.identifier as eventId&#xD;
,d.dischargeEventId documentId&#xD;
,d.dischargeEventId url&#xD;
,d.status AS docStatus&#xD;
,'popup' as panelMode&#xD;
, CONVERT(CHAR(11),r.lastModifiedDate,103) + CONVERT(CHAR( 5),r.lastModifiedDate,114) as dischargeDate&#xD;
FROM&#xD;
    Referral.ERF_ReferralView r&#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition rcd ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem&#xD;
    INNER JOIN &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document d ON  cast(r.referralViewId as varchar) = cast(d.extEventId as varchar)&#xD;
                                 AND (d.documentType = 'WIC')&#xD;
                                 AND (d.inActive IS NULL OR d.inActive &lt;&gt; 'Y')&#xD;
&#xD;
/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/&#xD;
    AND d.version = (SELECT MAX(VERSION) FROM &lt;%=AppVars.SMTdocumentDB%&gt;.dbo.Document ed&#xD;
                                       where d.extEventId = ed.extEventId and (ed.documentType = 'WIC')&#xD;
                                         AND (ed.inActive IS NULL OR ed.inActive &lt;&gt; 'Y'))&#xD;
/*------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/&#xD;
&#xD;
&#xD;
WHERE 1=1&lt;% if get("Receiver") &lt;&gt; "" %&gt; &#xD;
         AND r.RECEIVERCODE + r.RECEIVERCODINGSYSTEM  = &lt;%=SqlParameters.add(get("Receiver"))%&gt;   &#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Identifier") &lt;&gt; "" %&gt; &#xD;
  AND r.identifier LIKE &lt;%=SqlParameters.add(get("Identifier") + "%")%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("SourceReferralID") &lt;&gt; "" %&gt; &#xD;
  AND r.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt;&#xD;
&lt;%end if%&gt;&#xD;
  AND r.patientIdentifier IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt;)&#xD;
 &#xD;
ORDER BY 1 ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>1</index>
				<default-value />
				<display-name>Assignee</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/osgi_integration")%&gt;&lt;%exec config.setSQLQuery("SELECT results.id, results.description, results.shortDescription\r\nFROM {{\r\n    \r\n    // Retrieve the consumed web service from OHP e.g.'ReferralConsumedSoapService'\r\n    var webserviceService = osgiServiceFactory.getService('com.orchestral.foundation.webservices.api_6_9.WebServiceService');\r\n    var webservice = webserviceService.getWebService('" + SD + "=AppVars.get(\"Referral Consumed SOAP Service\")" + ED + "');\r\n \r\n    var referralSOAPServiceNamespace = 'http://www.orionhealth.com/ReferralSOAPService/';\r\n    default xml namespace = referralSOAPServiceNamespace;\r\n\r\n    // Note that the message below is not a String, but an E4X XML literal\r\n    var message = &lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:ref=\"http://www.orionhealth.com/ReferralSOAPService/\"&gt;\r\n       &lt;soap:Header/&gt;\r\n       &lt;soap:Body&gt;\r\n          &lt;ref:getReferralReceivers&gt;\r\n             &lt;!--Optional:--&gt;\r\n             &lt;ref:language&gt;" + SD + "=User.getLanguage()" + ED + "&lt;/ref:language&gt;\r\n             &lt;ref:includeDeleted&gt;true&lt;/ref:includeDeleted&gt;\r\n          &lt;/ref:getReferralReceivers&gt;\r\n       &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;;\r\n   \r\n    // Wrap the XML node before calling the web service\r\n    var inNode = org.mozilla.javascript.xmlimpl.XMLLibImpl.toDomNode(message);\r\n    var responseNode = webservice.call(inNode);\r\n   \r\n    // Unwrap the response after calling the web service\r\n    var response = new XML(responseNode);\r\n\r\n    // Log the response to Log4J\r\n    // org.apache.log4j.Logger.getLogger(\"my.webservice\").info(response);\r\n    // Log the response to System.out\r\n    //    java.lang.System.out.println(response);\r\n\r\n    var soapenv = new Namespace (\"http://www.w3.org/2003/05/soap-envelope\");\r\n    var ns3 =  new Namespace (referralSOAPServiceNamespace);\r\n    var rows = [];\r\n    for each (p in  response.soapenv::Body.ns3::getReferralReceiversResponse.*) {\r\n        var row = new Object();\r\n        row.id = p.@code.toString() + p.@codingSystem.toString();        \r\n        row.description = p.@description.toString();       \r\n        row.shortDescription = p.@shortDescription.toString();       \r\n        rows[rows.length] = row;\r\n        }\r\n    rows;\r\n}} AS results")%&gt;&lt;%exec config.setOptionColumnName("results.id")%&gt;&lt;%exec config.setDisplayColumnName("results.shortDescription")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SourceReferralID</name>
				<index>2</index>
				<default-value />
				<display-name>Source Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Referral</name>
				<index>0</index>
				<action>var application = new Application( "Soprano Workflow Medical Templates", "Document Direct Access");   &#xD;
application.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");        &#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=WIC+Event+Summary+%28Discharge%29');</action>
				<css-class />
				<style />
			</result-action>
			<result-column>
				<name>Referral Received On</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>1</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(10).originalValue = "Pathway Active"%&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>5</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>Assignee</name>
				<index>6</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ACTPAS ReferralId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentType</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>EpisodeId</name>
				<index>10</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SpecialtyCode</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>episodeType</name>
				<index>12</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>eventId</name>
				<index>13</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>14</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>url</name>
				<index>15</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>16</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value="Final"%&gt;&#xD;
    &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_pinned.gif" title="Final document for this episode exists"/&gt;&#xD;
&lt;%elseif value="Interim" || value="UpdateInterim" || value="Updated"%&gt;&#xD;
    &lt;image src="/concerto/icons/XP Style/business and data/office/notes/note_edit.gif" title="Interim document for this episode exists"/&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>panelMode</name>
				<index>17</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Completed Date</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Soprano Workflow Medical Templates", "Document Direct Access");   &#xD;
application.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");        &#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=WIC+Event+Summary+%28Discharge%29');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<system-object>false</system-object>
	<windowlet>
		<name>Awaiting Booking</name>
		<minimized-entry-point>
			<name>Windowlet - Awaiting Booking (triaged)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Awaiting Pre-Registration</name>
		<minimized-entry-point>
			<name>Windowlet - Awaiting Pre Reg (received)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Awaiting Pre-Registration (Declined)</name>
		<minimized-entry-point>
			<name>Windowlet - Declined (CHI)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Awaiting Pre-Registration (Received)</name>
		<minimized-entry-point>
			<name>Windowlet - Pre-Reg (Fax)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Awaiting Registration</name>
		<minimized-entry-point>
			<name>Windowlet - Awaiting Reg (received)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Awaiting Review</name>
		<minimized-entry-point>
			<name>Windowlet - Awaiting Triage (registered)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Awaiting Triage</name>
		<minimized-entry-point>
			<name>Windowlet - Awaiting Triage (registered)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Awaiting Triage (Call Back)</name>
		<minimized-entry-point>
			<name>Windowlet - Callback (CHI)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Awaiting Triage (Transferred)</name>
		<minimized-entry-point>
			<name>Windowlet - Transfer (CHI)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Closed</name>
		<maximized-entry-point>
			<name>Windowlet - Closed Max</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>Windowlet - Closed</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Completed</name>
		<maximized-entry-point>
			<name>Windowlet - Completed</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>Windowlet - Completed</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Enrolled</name>
		<maximized-entry-point>
			<name>Windowlet - Enrolled_max</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>Windowlet - Enrolled (homepage)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Event Status Update</name>
		<minimized-entry-point>
			<name>Event Status List</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Event Summary</name>
		<minimized-entry-point>
			<name>Event Summary (Discharge)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Referrals</name>
		<minimized-entry-point>
			<name>Event Summary List</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Referrals (Speciality/Staff team)</name>
		<maximized-entry-point>
			<name>Windowlet - All (Speciality/Staff team)_max</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>Windowlet - All (Speciality/Staff team)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>WIC Event Summary</name>
		<minimized-entry-point>
			<name>WIC Event Summary Discharge</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>Healthcare pathways - CCR Searches</name>
	<access-controller>
		<allowed-group>
			<name>Administrators</name>
		</allowed-group>
		<allowed-group>
			<name>Generic Community Clinician</name>
		</allowed-group>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>DesignerServerBase</name>
		<protected>false</protected>
		<value>/forms-designer</value>
	</application-variable>
	<application-variable>
		<name>Minor Patient Identifiers</name>
		<protected>false</protected>
		<value>&lt;%=Context.get("Patient.Id.Alternate")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>Referral Consumed SOAP Service</name>
		<protected>false</protected>
		<value>ReferralConsumedSoapService</value>
	</application-variable>
	<application-variable>
		<name>SMTdocumentDB</name>
		<protected>false</protected>
		<value>CDRPROD</value>
	</application-variable>
	<application-variable>
		<name>ServerBase</name>
		<protected>false</protected>
		<value>/forms-5.5</value>
	</application-variable>
	<application-variable>
		<name>cDictionaryJdbcUrl</name>
		<protected>false</protected>
		<value>java:comp/env/jdbc/orion/dictionary</value>
	</application-variable>
	<application-variable>
		<name>cFormsJdbcUrl</name>
		<protected>false</protected>
		<value>java:comp/env/jdbc/orion/forms</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>OHCCM</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>2.4</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>db_ACTPAS</name>
		<protected>false</protected>
		<value>ACTPAS_CDR_VIEWS.dbo.Orion_PatientDemographicsmini</value>
	</application-variable>
	<application-variable>
		<name>db_CWSClinical</name>
		<protected>false</protected>
		<value>OH_CM_Clinical</value>
	</application-variable>
	<application-variable>
		<name>db_CWSCustom</name>
		<protected>false</protected>
		<value>OH_CM_Custom</value>
	</application-variable>
	<application-variable>
		<name>db_CWSMedMan</name>
		<protected>false</protected>
		<value>OH_CM_medicationManagement</value>
	</application-variable>
	<application-variable>
		<name>db_CWSRepository</name>
		<protected>false</protected>
		<value>OH_CM_cRepository</value>
	</application-variable>
	<application-variable>
		<name>db_CWSTask</name>
		<protected>false</protected>
		<value>OH_CM_Task</value>
	</application-variable>
	<application-variable>
		<name>db_CWS_ClinicalPortal</name>
		<protected>false</protected>
		<value>OH_CP_ClinicalPortal</value>
	</application-variable>
	<application-variable>
		<name>displayPatientInformation</name>
		<protected>false</protected>
		<value>true</value>
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>openRepoistoryReferralNamespace</name>
		<protected>false</protected>
		<value>Referrals Repository - EoC</value>
	</application-variable>
	<application-variable>
		<name>openRepositoryNamespace</name>
		<protected>false</protected>
		<value>All Form Documents</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation &lt;&gt; null &amp;&amp; SecureInformation.patientId &lt;&gt; ""%&gt;&lt;%=SecureInformation.patientId%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>patientURNList</name>
		<protected>false</protected>
		<value>&lt;%if Context.Patient.Id.MRN%&gt;'&lt;%=Context.Patient.Id.MRN%&gt;'&lt;%else%&gt;&lt;%end if%&gt;&lt;% var minorids = AppVars.get("Minor Patient Identifiers").split(";")%&gt;&lt;%for each token in minorids%&gt;&lt;%if token &lt;&gt; ""%&gt;,'&lt;%=token%&gt;'&lt;%end if%&gt;&lt;%end for%&gt;</value>
	</application-variable>
	<application-variable>
		<name>userNamespace</name>
		<protected>false</protected>
		<value>clinical-portal-user</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;CaseManHome</url>
	</default-help-redirection>
	<description>::CCR:: Healthcare pathways application contains the global searches.</description>
	<document-repository>
		<name>All Form Documents</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<default-image-url />
		<description />
		<display-control-bar>false</display-control-bar>
		<display-control-bar-title>false</display-control-bar-title>
		<document-control-bar-button>
			<name>Print</name>
			<index>0</index>
			<action>cdvDocument.print();</action>
			<disable />
			<display>true</display>
			<display-name>Print</display-name>
		</document-control-bar-button>
		<entry-point>
			<name>View Document</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name>Community Documents</parent-folder-name>
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>Author</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>fromCdvTree</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value>true</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>fromCdvTree</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.columnName</name>
			<value>isPatientInContext</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.defaultValue</name>
			<value>true</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.2.name</name>
			<value>isPatietnInContext</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.columnName</name>
			<value>modelId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.3.name</name>
			<value>modelId</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.columnName</name>
			<value>isPatientInContext</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.defaultValue</name>
			<value>true</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.4.name</name>
			<value>isPatientInContext</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.columnName</name>
			<value>documentID</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.5.name</name>
			<value>documentID</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/cwsclinical</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>resolutionTime</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value>All Community Documents</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value>Service</value>
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>SELECT DISTINCT&#xD;
  document.documentIdentifier as "documentId",&#xD;
  'uuid_' + document.modelId  as "modelId",&#xD;
  TITLE_VX#6G   as "Title",&#xD;
    ISNULL(refMeta.eventDate,r.receivedDate ) as resolutionTime, &#xD;
  TITLE_VX#6G as "SubTitle",&#xD;
    (CASE &#xD;
      WHEN pathwayIdentifiers.PathwayType = 'SUB' THEN &#xD;
      (CASE &#xD;
        WHEN typeCode = 'BurnScald' THEN 'Burn or Scald Wound Pathway'&#xD;
        WHEN typeCode = 'FootUlcer' THEN 'Foot Ulcer Wound Pathway'  &#xD;
        WHEN typeCode = 'LegUlcer' THEN 'Leg Ulcer Wound Pathway'    &#xD;
        WHEN typeCode = 'Malignant' THEN 'Malignant Wound Pathway'   &#xD;
        WHEN typeCode = 'Other' THEN 'Other Wound Pathway'   &#xD;
        WHEN typeCode = 'PressureSores' THEN 'Pressure Injury Wound Pathway' &#xD;
        WHEN typeCode = 'SinusFistula' THEN 'Sinus / Fistula Wound Pathway'&#xD;
        WHEN typeCode = 'SkinTear' THEN 'Skin Tear Wound Pathway'&#xD;
        WHEN typeCode = 'Surgical' THEN 'Surgical Wound Pathway'&#xD;
        WHEN typeCode = 'BowelStoma' THEN 'Bowel Stoma Pathway'&#xD;
        WHEN typeCode = 'UrinaryStoma' THEN 'Urinary Stoma Pathway'&#xD;
        ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
      END)&#xD;
      ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
    END ) as  Pathway,  &#xD;
&#xD;
&#xD;
  CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN '(Closed)' ELSE '(Open)' END +' '+&#xD;
  (CASE &#xD;
      WHEN pathwayIdentifiers.PathwayType = 'SUB' THEN &#xD;
      (CASE &#xD;
        WHEN typeCode = 'BurnScald' THEN 'Burn or Scald Wound Pathway'&#xD;
        WHEN typeCode = 'FootUlcer' THEN 'Foot Ulcer Wound Pathway'  &#xD;
        WHEN typeCode = 'LegUlcer' THEN 'Leg Ulcer Wound Pathway'    &#xD;
        WHEN typeCode = 'Malignant' THEN 'Malignant Wound Pathway'   &#xD;
        WHEN typeCode = 'Other' THEN 'Other Wound Pathway'   &#xD;
        WHEN typeCode = 'PressureSores' THEN 'Pressure Injury Wound Pathway' &#xD;
        WHEN typeCode = 'SinusFistula' THEN 'Sinus / Fistula Wound Pathway'&#xD;
        WHEN typeCode = 'SkinTear' THEN 'Skin Tear Wound Pathway'&#xD;
        WHEN typeCode = 'Surgical' THEN 'Surgical Wound Pathway'&#xD;
        WHEN typeCode = 'BowelStoma' THEN 'Bowel Stoma Pathway'&#xD;
        WHEN typeCode = 'UrinaryStoma' THEN 'Urinary Stoma Pathway'&#xD;
        ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
      END)&#xD;
      ELSE replace(replace(pe.pathwayIdentifier ,'ca','Ca'),'pa','Pa')&#xD;
    END )  +' '+ CONVERT(varchar(20), ISNULL(refMeta.eventDate,r.receivedDate ) , 113)  as "Category",   &#xD;
    (CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN 'CLOSED' ELSE pe.enrollmentStatus END) as enrollmentStatus,&#xD;
   SUBCATEGORY_GCJLK as "SubCategory",&#xD;
  SERVICE_5#LNM as "Service",&#xD;
  CD_GIVENNAMES_J26OU + ' ' + CD_FAMILYNAME_B#46F as "Author",&#xD;
  STATUS_TDES0 as "Status",&#xD;
  (CASE WHEN pe.enrollmentStatus = 'DEACTIVATED' THEN 'CLOSED' ELSE pe.enrollmentStatus END) as pathwayEnrollmentStatus,&#xD;
  CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) as dateSubmitted&#xD;
FROM  &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment pe  &#xD;
INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralView r ON pe.patientId = r.patientIdentifier  &#xD;
INNER JOIN (  &#xD;
    SELECT DISTINCT psm.SubPathwayEnrolmentId as PathwayEnrolmentId,rtpm.referral_identifier, psm.SubEnrolmentStatus as pathway_status, 'SUB' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE psm.SubPathwayEnrolmentId IS NOT NULL&#xD;
    UNION ALL &#xD;
    SELECT DISTINCT rtpm.pathway_enrollmentIdentifier as PathwayEnrolmentId, rtpm.referral_identifier,rtpm.pathway_enrollmentStatus as pathway_status, 'MAIN' as PathwayType, psm.typeCode as typeCode FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.ReferralToPathwayMapping rtpm  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.PathwayToSubpathway_Mapping psm ON psm.PathwayEnrolmentId = rtpm.pathway_enrollmentIdentifier WHERE  &#xD;
 rtpm.pathway_enrollmentIdentifier  IS NOT NULL &#xD;
) as pathwayIdentifiers ON pathwayIdentifiers.PathwayEnrolmentId = pe.enrollmentIdentifier AND pathwayIdentifiers.referral_identifier = r.identifier&#xD;
&#xD;
INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_Referral ref ON ref.identifier = pathwayIdentifiers.referral_identifier&#xD;
INNER JOIN &lt;%=AppVars.db_CWSClinical%&gt;.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
INNER JOIN  &lt;%=AppVars.db_CWSTask%&gt;.dbo.PersistentTask pt ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V_DOCUMENT document ON pt.dataId = document.documentIdentifier &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = document.documentId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K&#xD;
WHERE  metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&#xD;
ORDER BY  CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113)  DESC</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>SubCategory</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Title</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>false</value>
		</repository-parameter>
	</document-repository>
	<entry-point>
		<name>DocumentLink_ProgressNote</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Links a document to a form</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - ProgressNote</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_ProgressNote_max</name>
		<access-controller>
			<allowed-group>
				<name>Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - ProgressNote</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Treatment_Order</name>
		<access-controller>
			<allowed-group>
				<name>Community</name>
			</allowed-group>
			<allowed-group>
				<name>Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Treatment_Orders</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_Treatment_Order_max</name>
		<access-controller>
			<allowed-group>
				<name>Community</name>
			</allowed-group>
			<allowed-group>
				<name>Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Treatment_Orders</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Add Administered Medication</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add New Administered Medication</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>true</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_680ad0b1-2caf-44ab-8c86-e4b3b65ffe84</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>Drug</name>
					<index>21</index>
					<value>&lt;%=SecureInformation.Medication%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>Dose</name>
					<index>22</index>
					<value>&lt;%=SecureInformation.Dose%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>Route</name>
					<index>23</index>
					<value>&lt;%=SecureInformation.Route%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Add To Administered Medications</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Add Administered Medication</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Immunisations</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Used for the Immunistaions Global Component as Editable Summary</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Immunisation Editable Summary</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>PP_PathwayEnrollments</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient_Overview - Pathways</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>PP_PathwayEnrollments_max</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Pathway Enrolments</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient_Overview - Pathways</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>20</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Access_Code</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - AccessCode</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Administered Medications</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Administered Medications</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Administered Medications EditMode</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Administered Medications EditMode</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Administered Medications_Max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Administered Medications</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Care_Plan</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Care Plan</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Care_Plan Context</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink_Care Plan</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Care_Plan_Print</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<css-stylesheet-url>/resources/css/concerto_rde.css</css-stylesheet-url>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Print - Care Plan</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.pdf</url>
				<xsl-stylesheet-url>/resources/xsl/careplan_v1.xsl</xsl-stylesheet-url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Global_Tasks</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Global Forms</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Windowlet on the Patient Overview</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Global Tasks</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Global_Tasks_Max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Global Forms</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Windowlet on the Patient Overview</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Global Tasks</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Global_Waterlow</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global_Waterlow Score</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Home_Visit Context</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - Home Visit</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Immunisations</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Used on the Patient Summary Portal Page</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Immunisation</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Immunisations_max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Immunisation</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>20</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Lifestyle Factors</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Lifestyle Factors</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - LifestyleFactors</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Lifestyle Factors Context</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Lifestyle Factors</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - LifestyleFactors_Context</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medical History</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Medical Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medical History Context</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Medical Hx</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medical History_max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Medical Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medical_Treatment_Order</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Treatment_Orders</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medical_Treatment_Order Context</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_DocumentLink - Treatment_Orders</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medical_Treatment_Order_max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Treatment_Orders</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medication_Order</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Medication_Orders</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medication_Order_max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Medication_Orders</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medications</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Medications Summary</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Medication Management</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<query-parameter>
					<name>recordState</name>
					<index>3</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>title</name>
					<index>4</index>
					<value>History</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Medications_max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Medication Management</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.history</name>
					<index>3</index>
					<value>true</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Obstectric History</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Obstetric Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Obstectric History Context</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Obstetric Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Obstectric History_max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Obstetric Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Progress_Notes</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Progress Notes</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/document_attachment.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - ProgressNote</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Progress_Notes_Print</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Progress Notes</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/document_attachment.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Print - ProgressNote</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.pdf</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Progress_Notes_max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Progress Notes</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/document_attachment.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - ProgressNote_Max</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Social History</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - SocialHistory</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Surgical History</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Medical Surgical Obstetric History</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Surgical Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Surgical History Context</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Context_Surgical Hx</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Surgical History_max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Medical Surgical Obstetric History</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Surgical Hx</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Vital Signs and Observations</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Vital Signs and Observations</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Observations and Vitals</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_Vital Signs and Observations_max</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Searches</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Observations and Vitals</value>
				</query-parameter>
				<query-parameter>
					<name>maxHits</name>
					<index>2</index>
					<value>100</value>
				</query-parameter>
				<query-parameter>
					<name>allowSavedSearches</name>
					<index>3</index>
					<value>true</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Log in to the Forms Application</description>
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<query-parameter>
				<name>username</name>
				<index>0</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>isAdministrator</name>
				<index>1</index>
				<value>&lt;%=AppVars.isAdministrator%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>concertoHome</name>
				<index>2</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>3</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>applicationName</name>
				<index>4</index>
				<value>&lt;%=Application.Name%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userGivenName</name>
				<index>5</index>
				<value>&lt;%var givenName = User.getAttribute("Users", "Full Name.Given Name(s)")%&gt;&lt;%if givenName = "" %&gt;.&lt;%else%&gt;&lt;%= givenName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userFamilyName</name>
				<index>6</index>
				<value>&lt;%var familyName = User.getAttribute("Users", "Full Name.Family Name")%&gt;&lt;%if familyName = "" %&gt;&lt;%= User.UserID%&gt;&lt;%else%&gt;&lt;%= familyName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userLanguage</name>
				<index>7</index>
				<value>&lt;%=User.getLanguage()%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>namespace</name>
				<index>8</index>
				<value>&lt;%=AppVars.userNamespace%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>9</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<redirection-key>cForms</redirection-key>
			<url>&lt;%=AppVars.ServerBase%&gt;/login</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>600000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.ServerBase%&gt;/logout</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>Context_AccessCode</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Access Code: Appears WITH(NOLOCK) ON the "Non-Response Form" Context aware.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT TOP 1 results.*,'uuid_f3604b97-2bb8-4c03-8f84-9d1cd24fe5cd' as modelId , 'false' as formModeLock&#xD;
 &#xD;
FROM ( &#xD;
&#xD;
SELECT alDoc.documentIdentifier as DocumentId, DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113)  as dateSigned , paraCode.accessQuestion_0VDOM as code, meta.sD_userId_7FQIQ as userId&#xD;
    ,'ACCESS' as DocumentType, pat.idNumber_9LV7R as urn &#xD;
FROM v2_GBL#Access#Code_#BCYR  mainCode&#xD;
JOIN v2_GBLAcCd_#BCYR_AccssCd_FHSQ0 subCode WITH(NOLOCK) ON mainCode.v2_GBL#Access#Code_#BCYR = subCode.v2_GBL#Access#Code_#BCYR&#xD;
JOIN v2_GBL#Access#Code_Y3D1N paraCode WITH(NOLOCK) ON paraCode.v2_GBL#Access#Code_Y3D1N = subCode.v2_GBL#Access#Code_Y3D1N &#xD;
INNER JOIN dbo.v_AllDocumentIdentifier alDoc WITH(NOLOCK) ON mainCode.DocumentId = alDoc.documentId&#xD;
LEFT OUTER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = mainCode.documentId &#xD;
LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE meta.status_TDES0 = 'FINAL' &#xD;
    AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
 UNION ALL &#xD;
SELECT null AS DocumentId&#xD;
    ,'' as dateSigned&#xD;
    ,null AS code&#xD;
    ,'' AS userId &#xD;
    ,'NOACCESS' as DocumentType&#xD;
    , '' as urn  &#xD;
  ) as results  &#xD;
ORDER BY 2 desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Information');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Update Social Information</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none;</style>
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none;</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>1</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>ADD</name>
				<index>0</index>
				<action>if (!row.get(0)) {&#xD;
   var entryPoint = "Add New Access Code";   &#xD;
}else {&#xD;
   var entryPoint = "View Document";&#xD;
}    &#xD;
parent.form.openEntryPointWithBreadCrumb('Healthcare pathways - CCR',entryPoint  , row.getSecureInformationToken());&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_Access_Code');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Access Code</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
     &lt;span class="icon-locked-partial"&gt;&lt;/span&gt;&#xD;
 Restricted access.  &lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DocumentType</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>urn</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (!row.get(0)) {&#xD;
   var entryPoint = "Add New Access Code";   &#xD;
}else {&#xD;
   var entryPoint = "View Document";&#xD;
}    &#xD;
parent.form.openEntryPointWithBreadCrumb('Healthcare pathways - CCR',entryPoint  , row.getSecureInformationToken());&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_Access_Code');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_Allergies and Alerts</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>Alerts and Allergies from ACTPAS</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>3 desc</order-by>
		<query-string>SELECT DISTINCT [details],  [reaction], [dateentered] FROM [Orion_AllergiesAlerts]&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
    WHERE patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Adverse Reactions &amp; Alerts&lt;/h2&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Adverse Reactions &amp; Alerts</name>
				<index>0</index>
				<action />
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none; important!</style>
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none; important!</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Details</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Reaction</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Entered</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink - HACC</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Treatment Orders: Appears as a document link.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT * FROM ( &#xD;
    SELECT&#xD;
        document.documentIdentifier as "documentId",&#xD;
        '&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace,&#xD;
        TITLE_VX#6G as "Title",&#xD;
        'Last Updated By: ' + CAST(metaData.sD_userId_7FQIQ as varchar(20)) + ',' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), metaData.dateSubmitted_L0HOZ, 113)  as "Category",&#xD;
        'HACC Score ' +  CAST( hacc.HACCTotal_OLP3T as varchar(20) )   as "SubCategory",&#xD;
        CREATED_2CIZE as "Date" ,&#xD;
        CREATED_2CIZE_OFST as "DateOffset",&#xD;
        STATUS_TDES0 as "Custom",&#xD;
        'HACC Assessment' as taskType,&#xD;
        'uuid_' + document.modelId as modelId, &#xD;
        '' as Notice, 'true' as formModeLock ,&#xD;
        '' as Doctor,&#xD;
        'HACC Score ' +  CAST( hacc.HACCTotal_OLP3T as varchar(20) )  as Note,&#xD;
        NULL AS DateTaken, --CREATED_2CIZE  AS DateTaken,&#xD;
        ''as formsInternalId ,       &#xD;
        CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author"&#xD;
&#xD;
    FROM &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V_DOCUMENT document&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.[v2_CCR#GBL#HACC#Main_RF0B0] hacc WITH(NOLOCK) ON hacc.DOCUMENTID = allDoc.documentId&#xD;
      &#xD;
    WHERE 1=1 &#xD;
       AND metaData_patient.IDNUMBER_9LV7R IN (&lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    AND UPPER(TITLE_VX#6G) LIKE UPPER('%HACC%')&#xD;
    AND &#xD;
      STATUS_TDES0 = 'FINAL'&#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
 a.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;HACC Assessment&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New HACC');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add HACC Assessment</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none; important!</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>30</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>EDIT</name>
				<index>0</index>
				<action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
openForm.setSecureInformationToken(row.getSecureInformationToken());</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Offset</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Doctor</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Score</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formInternalId</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var entryPoint = "Open Single Task";&#xD;
parent.form.openEntryPointWithBreadCrumb('Task List','Open Single Task', row.getSecureInformationToken());&#xD;
//parent.form.openEntryPointWithBreadCrumb('Forms', 'View Document', row.getSecureInformationToken());</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink - Home Visit</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Home Visit: Appears as a document link.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT * FROM ( &#xD;
    SELECT&#xD;
        document.documentIdentifier as "documentId",&#xD;
        '&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace,&#xD;
        TITLE_VX#6G as "Title",&#xD;
	    'Last Updated by: ' + CAST(metaData.sD_userId_7FQIQ as varchar(20))+ ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) as Category,&#xD;
        CAST( home.HomePreAssDes_D$3HH_desc as varchar(20) )   as "SubCategory",&#xD;
        DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ) as "Date",&#xD;
        CREATED_2CIZE_OFST as "DateOffset",&#xD;
        STATUS_TDES0 as "Custom",&#xD;
        'Home Visit' as taskType,&#xD;
        'uuid_' + document.modelId as modelId, &#xD;
        '' as Notice, 'true' as formModeLock ,&#xD;
        '' as Doctor,&#xD;
        CAST( home.HomePreAssDes_D$3HH_desc as varchar(20) )  as Note,&#xD;
        null AS DateTaken,&#xD;
        ''as formsInternalId ,       &#xD;
        CAST(metaData.sD_userId_7FQIQ as varchar(20))"Author",&#xD;
        document.documentIdentifier as 'Document ID'&#xD;
&#xD;
    FROM &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V_DOCUMENT document&#xD;
      INNER join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
      INNER join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
      INNER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.[v2_GBL#HomePreAssessment_XDVP3] home WITH(NOLOCK) ON home.DOCUMENTID = allDoc.documentId&#xD;
      &#xD;
    WHERE 1=1 &#xD;
      AND metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
     AND UPPER(TITLE_VX#6G) LIKE UPPER('%Home Visit%')&#xD;
    AND (STATUS_TDES0 = 'FINAL' OR STATUS_TDES0 = 'DRAFT')&#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
 a.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Off Campus/Home Visit Pre Assessment&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Home Visit');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 800, 600, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Off Campus / Home Visit Pre-Assessment</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>30</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Edit Off Campus / Home Visit Pre Assessment</name>
				<index>0</index>
				<action>if(!row.get(0)){&#xD;
  var openForm = new Application("Healthcare pathways - CCR", 'Add New Home Visit');&#xD;
  openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
  var application = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
  application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
  concerto.openApplicationInModalDialog (application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Home_Visit Context');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Offset</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Doctor</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Outcome</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formInternalId</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document ID</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink - LifestyleFactors</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Lifestyle Factors: appears as a editable summary.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>SELECT TOP 1 * FROM (&#xD;
   SELECT &#xD;
      FormInfo.[documentIdentifier] AS DocumentId,&#xD;
      DATEADD(minute, meta.dateSigned_OK9EW_Ofst ,meta.dateSigned_OK9EW) as [DateTime],&#xD;
      ISNULL(Tobacco.SmokingStatus_AB5ZW_desc, 'No smoking status recorded') AS SmokerStatus,&#xD;
      ISNULL(Habits.AlchlCnsmptnYN_IXF00_desc, 'No alcohol consumption recorded') AS AlcoholIntake,&#xD;
      ISNULL(Habits.DrugAddictionYN_VL85$_desc, 'No') AS substanceUse, &#xD;
      'uuid_' + FormInfo.[modelId] AS ModelId&#xD;
   ,'Lifestyle Factors' as taskType&#xD;
   ,'Lifestyle Factors' as title &#xD;
   ,'Last Updated by: ' + ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) + ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113) as Category&#xD;
   ,'Smoking Status: '+ ISNULL(Tobacco.SmokingStatus_AB5ZW_desc, 'No smoking status recorded') + ', Alcohol Intake: '+ ISNULL(Habits.AlchlCnsmptnYN_IXF00_desc, 'No alcohol consumption recorded') + ', Substance Use: '+ (CASE WHEN DrugAddictionYN_VL85$_cde = '1' THEN CAST([Comments#Drug_UCNFT] as nvarchar(2000)) ELSE 'No' END) as SubCategory &#xD;
   ,'&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace&#xD;
   ,FormInfo.documentIdentifier AS DocumentIdentifier&#xD;
   ,ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.cD_userId_PLU2#) "Author"&#xD;
   ,meta.cD_userId_PLU2#  as 'DraftUser'&#xD;
   ,pat.idNumber_9LV7R as urn&#xD;
&#xD;
    FROM v2_Habits_#LNS4 Habits&#xD;
    INNER JOIN v2_Habits_#LNS4_TbccUsg_PNK6$ HabTob WITH(NOLOCK) ON Habits.v2_Habits_#LNS4 = HabTob.v2_Habits_#LNS4&#xD;
    INNER JOIN v2_CCR#GL#Tobacco_U9TXQ Tobacco WITH(NOLOCK) ON Tobacco.v2_CCR#GL#Tobacco_U9TXQ = HabTob.v2_CCR#GL#Tobacco_U9TXQ &#xD;
    INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = Habits.DocumentId&#xD;
    INNER JOIN dbo.v_AllDocumentIdentifier alDoc WITH(NOLOCK) ON FormInfo.DocumentId = alDoc.documentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.[dbo].[PersistentTask] pt WITH(NOLOCK) ON pt.[dataId] = alDoc.documentIdentifier&#xD;
    INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = forminfo.documentId  &#xD;
    INNER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
   WHERE meta.status_TDES0 = 'FINAL' &#xD;
&lt;%if Context.Patient.Id.MRN&lt;&gt;""%&gt;&#xD;
     AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;&#xD;
   UNION ALL&#xD;
   SELECT null AS DocumentId&#xD;
   ,null as "Date and Time"&#xD;
   ,null AS "Smoking Status"&#xD;
   ,null AS "Alcohol Intake"&#xD;
   ,null AS "Substance Use"&#xD;
   ,null AS ModelId &#xD;
   , 'Lifestyle Factors' as taskType&#xD;
   ,'Lifestyle Factors' as title &#xD;
   ,'' as Category&#xD;
   ,'' as sub &#xD;
   ,'' as namespace &#xD;
   ,'' as DocumentIdentifier &#xD;
   ,'' as "Author"&#xD;
   ,'' as 'DraftUser' &#xD;
   ,'' as urn&#xD;
) as result</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Lifestyle Factors&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Observation');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>1</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Lifestyle Factors</name>
				<index>0</index>
				<action>if (row.get(0)){ &#xD;
    //Create task item&#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
    //Create task item &#xD;
    var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Observation'); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_LifestyleFactors');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Smoking Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Alcohol Intake</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Substance Use</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(14).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Draft user</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (!row.get(16)){ &#xD;
    //Create task item&#xD;
	//if (row.get(0)){ &#xD;
	//   var openForm = new Application("Healthcare pathways - CCR", "View Document");  &#xD;
	//   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
	//   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
	//   parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_LifestyleFactors&amp;formOpen=true');&#xD;
&#xD;
	//}else{&#xD;
	    var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Observation'); &#xD;
	    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
            openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
	    parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_LifestyleFactors&amp;formOpen=true');&#xD;
	//}&#xD;
&#xD;
}else{ &#xD;
   //location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink+%2D+LifestyleFactors&amp;formOpen=true');&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink - Manual Handling</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Treatment Orders: Appears as a document link.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT * FROM ( &#xD;
    SELECT&#xD;
        document.documentIdentifier as "documentId",&#xD;
        'All Form Documents' as namespace,&#xD;
        TITLE_VX#6G as "Title",&#xD;
        'Last Updated by: ' + CAST(metaData.sD_userId_7FQIQ as varchar(20)) +', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113)  as Category,&#xD;
        ''   as "SubCategory",&#xD;
        DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ) "Date",&#xD;
        STATUS_TDES0 as "Custom",&#xD;
        'Manual Handling' as taskType,&#xD;
        'uuid_' + document.modelId as modelId, &#xD;
        '' as Notice, &#xD;
         '' as Doctor,&#xD;
        ''  as Note,&#xD;
        null AS DateTaken, &#xD;
        ''as formsInternalId,        &#xD;
        CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author"  &#xD;
       ,document.documentIdentifier as "DocID"&#xD;
    FROM &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V_DOCUMENT document&#xD;
      INNER join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
      INNER join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
      INNER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.[v2_GBLMnlHndlngRskAsmnt_RSFTE] manual WITH(NOLOCK) ON manual.DOCUMENTID = allDoc.documentId&#xD;
      &#xD;
    WHERE 1=1 &#xD;
       AND metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
     AND UPPER(TITLE_VX#6G) LIKE UPPER('%Manual%')&#xD;
    AND STATUS_TDES0 = 'FINAL'&#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
 a.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Manual Handling Assessment&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Manual Handling Assessment');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Manual Handling Assessment</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>30</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Edit Manual Handling</name>
				<index>0</index>
				<action>if (row.get(0)){ &#xD;
var openForm = new Application("Healthcare pathways - CCR", 'View Document' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}else{&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Manual Handling Assessment' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Doctor</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Score</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formInternalId</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document ID</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var entryPoint = "Open Single Task";&#xD;
parent.form.openEntryPointWithBreadCrumb('Task List','Open Single Task', row.getSecureInformationToken());&#xD;
//parent.form.openEntryPointWithBreadCrumb('Forms', 'View Document', row.getSecureInformationToken());</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink - Medication_Orders</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Medication Orders: Appears as a document link.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 DESC</order-by>
		<query-string>SELECT * FROM ( &#xD;
    SELECT&#xD;
        document.documentIdentifier as "documentId",&#xD;
        '&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace,&#xD;
        'Medication Order' as "Title",&#xD;
 		'Last Updated by: ' + CAST(metaData.sD_userId_7FQIQ as varchar(20)) + ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(MINUTE, metaData.dateSubmitted_L0HOZ_Ofst, metaData.dateSubmitted_L0HOZ), 113) as Category,&#xD;
       'Clinician Name: '+ ISNULL(trorder.DoctorsName_O1XEM, '' )  +&#xD;
        ', Comments: '+ CAST(trorder.OrderNote_NW2SU as varchar(20)) as "SubCategory",&#xD;
        DATEADD(MINUTE, metaData.dateSubmitted_L0HOZ_Ofst, metaData.dateSubmitted_L0HOZ ) as "Date and Time",&#xD;
        CREATED_2CIZE_OFST as "DateOffset",&#xD;
        '' as "Custom",&#xD;
        'Medication Order' as taskType,&#xD;
        'uuid_' + document.modelId as modelId, '' as Notice, 'false' as formModeLock ,&#xD;
        ISNULL(trorder.DoctorsName_O1XEM, '' ) as "Clinician Name",&#xD;
        CAST(trorder.OrderNote_NW2SU as varchar(20)) as "Comments",&#xD;
        CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author",&#xD;
        trorder.DateString_0OZ4A AS DateTaken,&#xD;
        document.documentIdentifier as 'Document ID',&#xD;
        trorder.enddate_13HNS AS EndDate,&#xD;
        fasAT.uniqueId as formsInternalId,&#xD;
        metaData.cD_userId_PLU2# as 'DraftUser',&#xD;
       metaData.status_TDES0 as docstatus, &#xD;
       CASE&#xD;
            WHEN DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &lt; 0&#xD;
                THEN 'Expired'&#xD;
            WHEN DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &gt;= 0 AND DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &lt; 30&#xD;
                THEN 'Expiring'&#xD;
            ELSE 'Valid'&#xD;
        END as TreatmentStatus,&#xD;
metaData_patient.IDNUMBER_9LV7R as urn&#xD;
    FROM &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V_DOCUMENT document&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBL#TreatmentOrder_N1V7I trorder WITH(NOLOCK) ON trorder.documentid = allDoc.documentId&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_CCRGBLMdctnOrdr_76$RH trorderlink WITH(NOLOCK) ON trorderlink.documentid = trorder.documentId&#xD;
       LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_CCR#LMO_76$RH_mdcOrd_76$RH medor WITH(NOLOCK) ON medor.v2_CCRGBLMdctnOrdr_76$RH = trorderlink.v2_CCRGBLMdctnOrdr_76$RH&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBL#TreatmentOrder_N1V7I gtror WITH(NOLOCK) ON gtror.v2_GBL#TreatmentOrder_N1V7I = medor.v2_GBL#TreatmentOrder_N1V7I&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBLTrOr_N1V7I_TOSD_R4MWQ  ltror WITH(NOLOCK) ON gtror.v2_GBL#TreatmentOrder_N1V7I = ltror.v2_GBL#TreatmentOrder_N1V7I --AND v2_GBLTrOr_N1V7I_TOSD_R4MWQ.ordering = 0&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBLTrOr_N1V7I_atchm_H4KZ5LH  atchm WITH(NOLOCK) ON ltror.v2_GBLTrOr_N1V7I_TOSD_R4MWQ = atchm.v2_GBLTrOr_N1V7I_TOSD_R4MWQ --AND v2_GBLTrOr_N1V7I_atchm_H4KZ5LH.ordering = 0&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].[FAS_Attachment] fasAT WITH(NOLOCK) ON fasAT.uniqueId = atchm.formsInternalId_MXZPJ&#xD;
    WHERE 1=1 &#xD;
            AND UPPER(TITLE_VX#6G) LIKE UPPER('%Medication Order%')&#xD;
    AND ( STATUS_TDES0 = 'FINAL' OR metaData.STATUS_TDES0 = 'DRAFT' )&#xD;
  ) AS results&#xD;
WHERE results.urn IN ( &lt;%=AppVars.get("patientURNList")%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
 a.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Medication Orders&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormTreatment(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Medication Order');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Medication Order</name>
				<index>0</index>
				<action>loadFormTreatment();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Medication Order</name>
				<index>0</index>
				<action>if(!row.get(0)){&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Medication Order');&#xD;
openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medical_Treatment_Order Context');&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_Medication_Order');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(16).getOriginalValue%&gt; &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&lt;%end if%&gt;&#xD;
&lt;%if row.get(13).getOriginalValue%&gt;Doctor: &lt;%=(html)row.get(13).getOriginalValue%&gt;&lt;%end if%&gt;&#xD;
&lt;%if row.get(14).getOriginalValue%&gt;Note: &lt;%=(html)row.get(14).getOriginalValue%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Offset</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(16).getOriginalValue%&gt; &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&lt;%end if%&gt;&#xD;
&lt;%if row.get(13).getOriginalValue%&gt;Doctor: &lt;%=(html)row.get(13).getOriginalValue%&gt;&lt;%end if%&gt;&#xD;
&lt;%if row.get(14).getOriginalValue%&gt;Note: &lt;%=(html)row.get(14).getOriginalValue%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(16).getOriginalValue%&gt; &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&lt;%end if%&gt;&#xD;
&lt;%if row.get(13).getOriginalValue%&gt;Doctor: &lt;%=(html)row.get(13).getOriginalValue%&gt;&lt;%end if%&gt;&#xD;
&lt;%if row.get(14).getOriginalValue%&gt;Note: &lt;%=(html)row.get(14).getOriginalValue%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician Name</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(20).getOriginalValue = "FINAL"%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(19).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DateTaken</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document ID</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>End Date</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
 &lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy" )%&gt;&#xD;
&lt;%end if%&gt;&#xD;
  &lt;%if row.get(21).getOriginalValue = "Valid"%&gt;&#xD;
  &lt;%elseif row.get(21).getOriginalValue = "Expiring"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #e88b00; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;EXPIRING&lt;/span&gt;&#xD;
  &lt;%elseif row.get(21).getOriginalValue = "Expired"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #be0000; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;EXPIRED&lt;/span&gt; &#xD;
  &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>18</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(18).getOriginalValue &lt;&gt; null%&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
 &lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>TreatmentStatus</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var entryPoint = "Open Single Task";&#xD;
parent.form.openEntryPointWithBreadCrumb('Task List','Open Single Task', row.getSecureInformationToken());&#xD;
//parent.form.openEntryPointWithBreadCrumb('Forms', 'View Document', row.getSecureInformationToken());</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink - Non Response</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Non response: Appears as a document link.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 DESC</order-by>
		<query-string>SELECT * FROM ( &#xD;
    SELECT&#xD;
        document.documentIdentifier as "documentId",&#xD;
        '&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace,&#xD;
        TITLE_VX#6G as "Title",&#xD;
        'Last Updated by: ' + CAST(metaData.sD_userId_7FQIQ as varchar(20)) + ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst, metaData.dateSubmitted_L0HOZ ), 113) as Category,&#xD;
        CASE WHEN nonresponse.Consent_4FGZU='1' THEN 'Permission to Access: Yes' ELSE 'Permission to Access: No' END   as "SubCategory",&#xD;
        DATEADD(minute, CREATED_2CIZE_OFST, CREATED_2CIZE ) as "Date" ,&#xD;
        CREATED_2CIZE_OFST as "DateOffset",&#xD;
        STATUS_TDES0 as "Custom",&#xD;
        'Non Response' as taskType,&#xD;
        'uuid_' + document.modelId as modelId, &#xD;
        '' as Notice, 'true' as formModeLock ,&#xD;
        '' as Doctor,&#xD;
        'Permission to Access: '+ CASE WHEN nonresponse.Consent_4FGZU='1' THEN 'Yes' ELSE 'No' END  as Note,&#xD;
         DATEADD(minute, CREATED_2CIZE_OFST, CREATED_2CIZE )  AS DateTaken,&#xD;
        ''as formsInternalId ,       &#xD;
        CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author",&#xD;
        document.documentIdentifier as "document ID"&#xD;
    FROM &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V_DOCUMENT document&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.[v2_CCRPrAssssmntNnRspns_IIVHZ] nonresponse WITH(NOLOCK) ON nonresponse.DOCUMENTID = allDoc.documentId&#xD;
      &#xD;
    WHERE 1=1  AND metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
     AND UPPER(TITLE_VX#6G) LIKE UPPER('%Response%')&#xD;
    AND  (STATUS_TDES0 = 'FINAL' OR STATUS_TDES0 = 'DRAFT')&#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
 a.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Non-Response to a Scheduled Visit&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Non Response');&#xD;
    openWindow = concerto.openApplicationInModalDialog(openForm, 800, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Add Non Response to a Scheduled Visit</name>
				<index>1</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>30</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>EDIT</name>
				<index>0</index>
				<action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Offset</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Doctor</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Outcome</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formInternalId</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var entryPoint = "Open Single Task";&#xD;
parent.form.openEntryPointWithBreadCrumb('Task List','Open Single Task', row.getSecureInformationToken());&#xD;
//parent.form.openEntryPointWithBreadCrumb('Forms', 'View Document', row.getSecureInformationToken());</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink - ProgressNote</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Progress Note: Appears as document link for context.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>7 DESC</order-by>
		<query-string>SELECT DISTINCT * FROM (  &#xD;
  SELECT&#xD;
    document.documentIdentifier as "documentId",&#xD;
    '&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace,&#xD;
    TITLE_VX#6G as "Title",&#xD;
    CASE pnstr.progressNoteType_8KS4J_cde WHEN 'isoap' THEN 'ISOAP Format, '  WHEN 'case' THEN 'Case Report, ' ELSE 'Standard, '  END + ISNULL( 'Last Updated by: '+ CAST(metaData.sD_userId_7FQIQ as varchar(20))+ ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113), 'Last Updated by: ' +  CAST(metaData.cD_userId_PLU2# as varchar(20))+ ', Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) )  as Category,    &#xD;
    CASE pnstr.progressNoteType_8KS4J_cde WHEN 'isoap' THEN &#xD;
      'Introduction: ' + CAST(pnstr.Information_4ZTFN as varchar(10)) +&#xD;
      ', Subjective: ' + CAST(pnstr.Subjective_FUQSI as varchar(10)) +&#xD;
      ', Objective: ' + CAST(pnstr.Objective_1PDZM as varchar(10)) +&#xD;
      ', Analysis: ' + CAST(pnstr.Analysis_CBBZ5 as varchar(10)) +&#xD;
      ', Plan of Care: ' + CAST(pnstr.Planofcare_4HFPG as varchar(10)) &#xD;
      WHEN 'Standard' THEN 'Note: '+ CAST(pnstr.Comments_EMXXM as varchar(10))&#xD;
    ELSE&#xD;
    'Significant Other: ' +  CAST(pnstr.SignificantOther_V90WF as varchar(10)) + ', Reasons for referral to Case Conference: ' +  CAST(pnstr.RsnsfrrfrrltCsCnfrnc_ZTPVE as varchar(10))  END as "SubCategory",&#xD;
    ISNULL(CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) , CONVERT(varchar(20), DATEADD(minute, metaData.created_2CIZE_Ofst,metaData.CREATED_2CIZE), 113)) as Date&#xD;
,DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ) as OrderDate, &#xD;
    STATUS_TDES0 as "Custom",&#xD;
    'Progress Note'  as taskType,&#xD;
    metaData.cD_userId_PLU2# as 'DraftUser',&#xD;
    'uuid_' + document.modelId as modelId,&#xD;
    CAST(pnstr.progressNoteType_8KS4J_desc as varchar(50)) as progressType, &#xD;
    CASE pnstr.progressNoteType_8KS4J_cde WHEN 'isoap' THEN &#xD;
      'Introduction: ' + CAST(pnstr.Information_4ZTFN as varchar(10)) +&#xD;
      ', Subjective: ' + CAST(pnstr.Subjective_FUQSI as varchar(10)) +&#xD;
      ', Objective: ' + CAST(pnstr.Objective_1PDZM as varchar(10)) +&#xD;
      ', Analysis: ' + CAST(pnstr.Analysis_CBBZ5 as varchar(10)) +&#xD;
      ', Plan of Care: ' + CAST(pnstr.Planofcare_4HFPG as varchar(10)) &#xD;
      WHEN 'Standard' THEN  'Note: '+ CAST(pnstr.Comments_EMXXM as varchar(10)) &#xD;
      ELSE 'Significant Other: ' +  CAST(pnstr.SignificantOther_V90WF as varchar(10)) + ', Reasons for referral to Case Conference: ' +  CAST(pnstr.RsnsfrrfrrltCsCnfrnc_ZTPVE as varchar(10)) END as details, &#xD;
    CAST(metaData.sD_userId_7FQIQ  as varchar(20)) AS "Author", &#xD;
    document.documentIdentifier  as docId&#xD;
    ,nursingAssessments.assessmentId as assessmentId&#xD;
    ,nursingAssessments.modelId as assessmentModelId&#xD;
    ,CASE WHEN ISNULL(CAST(attch.formsInternalId_MXZPJ as varchar) ,'') = '' THEN 0 ELSE 1 END formsInternalId&#xD;
  FROM V_DOCUMENT document&#xD;
  INNER JOIN v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
  INNER JOIN v2_CCR#GBL#Progress#Note_G#X$2 pn WITH(NOLOCK) ON document.documentId = pn.DOCUMENTID&#xD;
  INNER JOIN v2_CCR#LPN_G#X$2_adPrgrs_BPNSF pnlink WITH(NOLOCK) ON pnlink.v2_CCR#GBL#Progress#Note_G#X$2 = pn.v2_CCR#GBL#Progress#Note_G#X$2&#xD;
  INNER JOIN v2_CCRGBLPrgrssNtStr_M$F1Z pnstr WITH(NOLOCK) ON pnstr.v2_CCRGBLPrgrssNtStr_M$F1Z = pnlink.v2_CCRGBLPrgrssNtStr_M$F1Z&#xD;
  LEFT OUTER JOIN v2_CCR#PNS_M$F1Z_SprDcm_BDP5P sprpg WITH(NOLOCK) ON sprpg.v2_CCRGBLPrgrssNtStr_M$F1Z = pnstr.v2_CCRGBLPrgrssNtStr_M$F1Z &#xD;
  LEFT OUTER JOIN v2_CCR#PNS_M$F1Z_atchm_H68QSKH attch WITH(NOLOCK) ON attch.v2_CCR#PNS_M$F1Z_SprDcm_BDP5P = sprpg.v2_CCR#PNS_M$F1Z_SprDcm_BDP5P&#xD;
  INNER JOIN V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
  LEFT OUTER JOIN V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K &#xD;
&#xD;
  LEFT OUTER JOIN ( &#xD;
    SELECT progressNoteIdentifier.documentIdentifier_0E#DK as progressNoteIdentifier, ad.documentIdentifier&#xD;
as pathwayRefId,ad.documentIdentifier as assessmentId, pt.modelId as modelId  &#xD;
    FROM v_AllDocumentIdentifier ad  &#xD;
    INNER JOIN v2_GBLrvwSmmrycmpnnt_83RT5 rvsumcomp WITH(NOLOCK) ON ad.documentId = rvsumcomp.DOCUMENTID&#xD;
    INNER JOIN OH_CM_Task.dbo.PersistentTask pt WITH(NOLOCK) ON pt.dataId = ad.documentIdentifier&#xD;
    INNER JOIN OH_CM_task.dbo.TaskType tt WITH(NOLOCK) ON tt.uniqueId = pt.taskType&#xD;
    LEFT OUTER JOIN OH_CM_clinical.PathwayEnrollment.PES_PathwayEnrollment pe WITH(NOLOCK) ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
    LEFT OUTER JOIN v2_GBLrSc_83RT5_dcLn_HDGDFTH progressNoteIdentifier WITH(NOLOCK) ON rvsumcomp.v2_GBLrvwSmmrycmpnnt_83RT5 = progressNoteIdentifier.v2_GBLrvwSmmrycmpnnt_83RT5 &#xD;
    WHERE progressNoteIdentifier.documentIdentifier_0E#DK is not null&#xD;
        ) nursingAssessments ON nursingAssessments.progressNoteIdentifier = allDoc.documentIdentifier&#xD;
      &#xD;
&#xD;
  WHERE metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&#xD;
  AND  UPPER(TITLE_VX#6G) LIKE UPPER('%Progress%')&#xD;
  AND  (STATUS_TDES0 = 'FINAL' or STATUS_TDES0 = 'DRAFT')&#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}  &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
  &lt;/style&gt;&#xD;
&lt;h2&gt;Progress Notes&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadProgressNote(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Progress Note');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Example Document Linking Search</display-name>
			<filter-button>
				<name>Add Progress Note</name>
				<index>0</index>
				<action>loadProgressNote();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment with Progress Note</name>
				<index>0</index>
				<action>if (row.get(15)){&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
application.addQueryParameter("documentIdentifier", row.get(15) );&#xD;
application.addQueryParameter("modelId", row.get(16) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Progress_Notes&amp;maxHits=100');</action>
				<css-class>&lt;%if row.get(15).getOriginalValue&lt;&gt;""%&gt;SELECT&lt;%else%&gt;&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-action>
				<name>Edit Progress Note</name>
				<index>1</index>
				<action>if (row.get(15)){&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
application.addQueryParameter("documentIdentifier", row.get(14) );&#xD;
application.addQueryParameter("modelId", row.get(10) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}else{&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Progress_Notes&amp;maxHits=100');&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'View Document' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}</action>
				<css-class>RENAME</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>OrderDate</name>
				<index>6</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>7</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>8</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Draft User</name>
				<index>9</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>10</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Progress Type</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%elseif row.get(9).getOriginalValue%&gt;&#xD;
&lt;%=(html)row.get(9).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>14</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>assessmentId</name>
				<index>15</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>assessmentModelId</name>
				<index>16</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value="1"%&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
 &lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var entryPoint = "Open Single Task";&#xD;
parent.form.openEntryPointWithBreadCrumb('Task List','Open Single Task', row.getSecureInformationToken());&#xD;
//parent.form.openEntryPointWithBreadCrumb('Forms', 'View Document', row.getSecureInformationToken());</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink - Treatment_Orders</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Treatment Orders: Appears as a document link.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
        document.documentIdentifier as "documentId",&#xD;
        '&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace,&#xD;
        'Treatment Order' as "Title",&#xD;
ISNULL( 'Last Updated by: '+ CAST(metaData.sD_userId_7FQIQ as varchar) + ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar, DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113), 'Last Updated by: ' +  CAST(metaData.cD_userId_PLU2# as varchar)+ ', Last Updated Date and Time: ' + CONVERT(varchar, DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) )  as Category,&#xD;
        'Clinician Name: '+ ISNULL(trorder.DoctorsName_O1XEM, '' ) +&#xD;
        ', Comments: '+ CAST(trorder.OrderNote_NW2SU as varchar) as "SubCategory",&#xD;
        DATEADD(MINUTE, metaData.dateSubmitted_L0HOZ_Ofst, metaData.dateSubmitted_L0HOZ ) as "Date and Time",&#xD;
        '' as custom,&#xD;
        'Treatment Order' as taskType, &#xD;
        'uuid_' + document.modelId as modelId,&#xD;
        ISNULL(trorder.DoctorsName_O1XEM, '' ) as "Clinician Name",&#xD;
        CAST(trorder.OrderNote_NW2SU as varchar) as "Comments",&#xD;
        CAST(metaData.sD_userId_7FQIQ as varchar) "Author",&#xD;
        trorder.DateString_0OZ4A AS DateTaken,&#xD;
        document.documentIdentifier as 'Document ID',&#xD;
        trorder.enddate_13HNS AS EndDate,&#xD;
        CASE WHEN ISNULL(CAST(fasAT.uniqueId as varchar) ,'') = '' THEN 0 ELSE 1 END as formsInternalId,&#xD;
        metaData.cD_userId_PLU2# as draftUser,&#xD;
        CASE&#xD;
            WHEN DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &lt; 0 THEN 'Expired'&#xD;
            WHEN DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &gt;= 0 AND DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &lt; 30  THEN 'Expiring'&#xD;
            ELSE 'Valid'&#xD;
        END as TreatmentStatus,        &#xD;
       metaData_patient.IDNUMBER_9LV7R as urn&#xD;
    FROM &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V_DOCUMENT document&#xD;
    INNER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K &#xD;
    INNER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBL#TreatmentOrder_N1V7I trorder WITH(NOLOCK) ON trorder.documentid = allDoc.documentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_CCRGBLTrtmntOrdr_I87Z6 trorderlink WITH(NOLOCK) ON trorderlink.documentid = trorder.documentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_CCR#LTO_I87Z6_trtOrd_367#7 trtOrd WITH(NOLOCK) ON trorderlink.v2_CCRGBLTrtmntOrdr_I87Z6 = trtOrd.v2_CCRGBLTrtmntOrdr_I87Z6  &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBLTrOr_N1V7I_TOSD_R4MWQ gtror WITH(NOLOCK) ON gtror.v2_GBL#TreatmentOrder_N1V7I = trorder.v2_GBL#TreatmentOrder_N1V7I&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBLTrOr_N1V7I_atchm_H4KZ5LH gorlk WITH(NOLOCK) ON gorlk.v2_GBLTrOr_N1V7I_TOSD_R4MWQ = gtror.v2_GBLTrOr_N1V7I_TOSD_R4MWQ&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.[FAS_Attachment] fasAT WITH(NOLOCK) ON fasAT.uniqueId = gorlk.formsInternalId_MXZPJ&#xD;
    WHERE UPPER(TITLE_VX#6G) LIKE UPPER('%Treatment Order%')&#xD;
    AND (STATUS_TDES0 = 'FINAL' or STATUS_TDES0 = 'DRAFT') &#xD;
&lt;%if Context.Patient.Id.MRN&lt;&gt;""%&gt;&#xD;
    AND metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Treatment Orders&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormTreatment(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Treatment Order');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Treatment Order</name>
				<index>0</index>
				<action>loadFormTreatment();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Edit Treatment Order</name>
				<index>0</index>
				<action>if(!row.get(0)){&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Treatment Order');&#xD;
openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medical_Treatment_Order Context');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(16).getOriginalValue%&gt; &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&lt;%end if%&gt;&#xD;
&lt;%if row.get(13).getOriginalValue%&gt;Doctor: &lt;%=(html)row.get(13).getOriginalValue%&gt;&lt;%end if%&gt;&#xD;
&lt;%if row.get(14).getOriginalValue%&gt;Note: &lt;%=(html)row.get(14).getOriginalValue%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician Name</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(19).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DateTaken</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>End Date</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
 &lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy" )%&gt;&#xD;
&lt;%end if%&gt;&#xD;
  &lt;%if row.get(20).getOriginalValue = "Valid"%&gt;&#xD;
  &lt;%elseif row.get(20).getOriginalValue = "Expiring"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #e88b00; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;EXPIRING&lt;/span&gt;&#xD;
  &lt;%elseif row.get(20).getOriginalValue = "Expired"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #be0000; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;EXPIRED&lt;/span&gt; &#xD;
  &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
 &lt;div class="icon-small-attachment"&gt;&amp;nbsp;&lt;/div&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>draftuser</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ValidStatus</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var entryPoint = "Open Single Task";&#xD;
parent.form.openEntryPointWithBreadCrumb('Task List','Open Single Task', row.getSecureInformationToken());&#xD;
//parent.form.openEntryPointWithBreadCrumb('Forms', 'View Document', row.getSecureInformationToken());</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink_Care Plan</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Care Plan: Added as a document link</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>results.datetimeCompleted DESC</order-by>
		<query-string>SELECT DISTINCT &#xD;
  results.DocumentId &#xD;
  ,results.datetimeCompleted&#xD;
  ,results.Service&#xD;
  ,results.PathwayId&#xD;
  ,results.goal&#xD;
  ,results.Author&#xD;
  ,results.patientId&#xD;
  ,results.assessmentId&#xD;
  ,results.assessmentModelId&#xD;
  ,results.docid&#xD;
  ,results.ModelId&#xD;
  ,results.formModeLock&#xD;
  ,results.taskType&#xD;
  ,'All Form Documents' as namespace&#xD;
  ,results.taskType&#xD;
  ,results.custom&#xD;
  ,results.Category&#xD;
  ,results.SubCategory  &#xD;
  ,results.DraftUser&#xD;
 FROM (&#xD;
 SELECT DISTINCT&#xD;
  di.documentIdentifier as DocumentId, comp.ExpectedDateTime_XRB59 as Expected,  DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ ) as datetimeCompleted ,goalLink.Goals as goal, comp.cpInterventions_Y1LIU_desc AS Interventions,    meta.status_TDES0 as DocStatus,'uuid_' + FormInfo.[modelId] AS ModelId, 'true' as formModeLock, 'Care Plan'   as taskType, comp.cpOT_6J1B3_desc as custom, ISNULL( 'Last Updated by: ' + CAST(meta.sD_userId_7FQIQ as varchar(20)) + ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(17), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113), 'Last Updated by: ' +  CAST(meta.cD_userId_PLU2# as varchar(20)) + ', Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113) )  as Category, 'Goals: ' + goalLink.Goals as SubCategory, comp.OtcmsOnDschrg_V4W6U_desc as Outcomes, ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "Author", meta.cD_userId_PLU2#  as 'DraftUser', pathwayCodes.staffTeam as Service, di.documentIdentifier  as docid ,care.P_pI_id_#W85V as patientId ,ISNULL(nursingAssessments.assessmentId,'') as assessmentId ,ISNULL(nursingAssessments.modelId,'' ) as assessmentModelId , nursingAssessments.pathwayRefId as pathwayRefId,  pathwayCodes.PathwayId , pathwayCodes.nursingAssessmentDocId as nursingAssessmentDocId&#xD;
FROM v2_CN#Nursing#Care#Plan_YP1RM care&#xD;
INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I pln WITH(NOLOCK) ON care.v2_CN#Nursing#Care#Plan_YP1RM = pln.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL comp WITH(NOLOCK) ON pln.v2_CCRGBLCrPlnCmpnnt_3XYZL = comp.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = care.DOCUMENTID&#xD;
INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = care.DocumentId  &#xD;
&#xD;
&#xD;
/*ALL CARE PLANS LINKED*/&#xD;
LEFT OUTER JOIN (&#xD;
    SELECT careplan.documentIdentifier_0E#DK as careplanId, ad.documentIdentifier&#xD;
as pathwayRefId,ad.documentIdentifier as assessmentId, pt.modelId as modelId &#xD;
    FROM v_AllDocumentIdentifier ad  &#xD;
    INNER JOIN v2_GBLrvwSmmrycmpnnt_83RT5 rvsumcomp WITH(NOLOCK) ON ad.documentId = rvsumcomp.DOCUMENTID&#xD;
    INNER JOIN OH_CM_Task.dbo.PersistentTask pt WITH(NOLOCK) ON pt.dataId = ad.documentIdentifier&#xD;
    INNER JOIN OH_CM_task.dbo.TaskType tt WITH(NOLOCK) ON tt.uniqueId = pt.taskType&#xD;
    LEFT OUTER JOIN OH_CM_clinical.PathwayEnrollment.PES_PathwayEnrollment pe WITH(NOLOCK) ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
    LEFT OUTER JOIN v2_GBLrSc_83RT5_dcLn_HLGE0NH careplan WITH(NOLOCK) ON rvsumcomp.v2_GBLrvwSmmrycmpnnt_83RT5 = careplan.v2_GBLrvwSmmrycmpnnt_83RT5 &#xD;
    WHERE careplan.documentIdentifier_0E#DK is not null&#xD;
    ) nursingAssessments  ON nursingAssessments.careplanId = di.documentIdentifier &#xD;
&#xD;
/*ALL ASSESSMENT FORMS*/&#xD;
LEFT OUTER JOIN (  &#xD;
    SELECT pe.pathwayIdentifier as PathwayId, ad.documentIdentifier as nursingAssessmentDocId , cs.DESCRIPTION as staffTeam , tt.identifyingName&#xD;
 FROM v_AllDocumentIdentifier ad   &#xD;
    INNER JOIN OH_CM_task.dbo.PersistentTask pt WITH(NOLOCK) ON pt.dataId = ad.documentIdentifier&#xD;
    INNER JOIN OH_CM_task.dbo.TaskType tt WITH(NOLOCK) ON tt.uniqueId = pt.taskType&#xD;
    LEFT OUTER JOIN OH_CM_clinical.PathwayEnrollment.PES_PathwayEnrollment pe WITH(NOLOCK) ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
    LEFT OUTER JOIN (&#xD;
      SELECT rpm.pathway_enrollmentIdentifier as id , rpm.referral_identifier as referalId FROM  OH_CM_Custom.dbo.ReferralToPathwayMapping rpm &#xD;
      UNION ALL&#xD;
      SELECT srpm.SubPathwayEnrolmentId , rpm.referral_identifier as referalId FROM OH_CM_Custom.dbo.PathwayToSubpathway_Mapping srpm  &#xD;
        INNER JOIN OH_CM_Custom.dbo.ReferralToPathwayMapping rpm ON srpm.PathwayEnrolmentId = rpm.pathway_enrollmentIdentifier&#xD;
    )as pathwayEnrollments ON  pathwayEnrollments.id = pe.enrollmentIdentifier&#xD;
    LEFT OUTER JOIN OH_CM_clinical.Referral.ERF_ReferralView r WITH(NOLOCK) ON pathwayEnrollments.referalId = r.identifier &#xD;
    LEFT OUTER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_CWSStaffTeams cs WITH(NOLOCK) ON cs.CODE = r.receiverCode&#xD;
    ) pathwayCodes ON pathwayCodes.nursingAssessmentDocId = nursingAssessments.assessmentId&#xD;
&#xD;
&#xD;
    INNER JOIN (&#xD;
   SELECT DISTINCT &#xD;
    comp.DOCUMENTID, &#xD;
    CAST (( STUFF((SELECT ', ' + comp1.cpGoals_2H5DV_desc &#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM care1&#xD;
    INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I pln1 WITH(NOLOCK) ON care.v2_CN#Nursing#Care#Plan_YP1RM = pln.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
    INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL comp1 WITH(NOLOCK) ON pln.v2_CCRGBLCrPlnCmpnnt_3XYZL = comp.v2_CCRGBLCrPlnCmpnnt_3XYZL &#xD;
    WHERE comp.DOCUMENTID = comp1.DOCUMENTID AND pln1.v2_CCRGBLCrPlnCmpnnt_3XYZL = pln.v2_CCRGBLCrPlnCmpnnt_3XYZL AND care1.DOCUMENTID = care.DOCUMENTID&#xD;
                      FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Goals'&#xD;
        &#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM care&#xD;
    INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I pln WITH(NOLOCK) ON care.v2_CN#Nursing#Care#Plan_YP1RM = pln.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
    INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL comp WITH(NOLOCK) ON pln.v2_CCRGBLCrPlnCmpnnt_3XYZL = comp.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
    INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = care.DOCUMENTID&#xD;
    INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
    INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = care.DocumentId &#xD;
    )goalLink  ON goalLink.DOCUMENTID = comp.DOCUMENTID&#xD;
) as results &#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
WHERE results.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;&#xD;
 ORDER BY results.datetimeCompleted DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Care Plans&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Care Plan');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Care Plan</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.addQueryParameter("documentIdentifier", row.get(7) );&#xD;
application.addQueryParameter("modelId", row.get(8) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Care_Plan Context');</action>
				<css-class>&lt;%if row.get(7).getOriginalValue&lt;&gt;""%&gt;SELECT&lt;%else%&gt;&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-action>
				<name>Open Care Plan</name>
				<index>1</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.addQueryParameter("documentIdentifier", row.get(9) );&#xD;
application.addQueryParameter("modelId", row.get(10) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Care_Plan Context');</action>
				<css-class>&lt;%if row.get(9)%&gt;RENAME&lt;%else%&gt;&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pathway</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Goals</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(18).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>patientId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>assessmentId</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>assessmentModelId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>FormModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Draft User</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink_Observations and Vitals</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Observations and vital signs: Appears as a document link.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>SELECT * FROM (&#xD;
  SELECT  FormInfo.[documentIdentifier] AS DocumentId&#xD;
    ,DATEADD(MINUTE, obs.LastAssessment_P5JE0_Ofst, obs.LastAssessment_P5JE0 ) as datetimeCompleted&#xD;
    ,'uuid_' + FormInfo.[modelId] AS ModelId&#xD;
    ,' BP: ' + cast(ISNULL(bloodPr.BloodPressure_4DSD#,0) as varchar)   + 'mmHg' +&#xD;
    ', Pulse: ' + cast(ISNULL(PulseRateR_BY5S0,0) as varchar)   +&#xD;
    ', SpO2: ' + cast(ISNULL(respInfo.SpO2_REJOR,0) as varchar)   + '%' +&#xD;
    ', RR: ' + cast(ISNULL(respInfo.RespiratoryRate_W9PO8,0) as varchar) +&#xD;
    ', Temp: ' + cast(CAST(ISNULL(Temperature_O2Q6$,0) AS DECIMAL(10,1))  as varchar) +  'C' as [LoC] &#xD;
    ,obs.EWS_Q1TV0 as [EWS]&#xD;
    ,ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "ClinicianId"&#xD;
    ,'' as notice&#xD;
    ,DATEADD(MINUTE, FormInfo.dateSubmitted_Ofst, FormInfo.dateSubmitted ) as lastUpdatedDate  &#xD;
    ,ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "ClinicianName"&#xD;
    ,'true' as formModeLock &#xD;
    , 'Vital Signs and Observations' as taskType&#xD;
    ,'&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace&#xD;
    ,'Vital Signs and Observations' as title&#xD;
    ,ISNULL( 'Last Updated by: '+ CAST(meta.sD_userId_7FQIQ as varchar(20)) + ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113), 'Last Updated by: ' +  CAST(meta.cD_userId_PLU2# as varchar(20)) + ', Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113) )  as Category&#xD;
    ,case when meta.sD_userId_7FQIQ is null THEN 'Draft - BP: ' + cast(ISNULL(bloodPr.BloodPressure_4DSD#,0) as varchar)   + 'mmHg' +&#xD;
    ', Pulse: ' + cast(ISNULL(PulseRateR_BY5S0,0) as varchar)   +&#xD;
    ', SpO2: ' + cast(ISNULL(respInfo.SpO2_REJOR,0) as varchar)   + '%' +&#xD;
    ', RR: ' + cast(ISNULL(respInfo.RespiratoryRate_W9PO8,0) as varchar) + &#xD;
    ', Temp: ' + cast(CAST(ISNULL(Temperature_O2Q6$,0) AS DECIMAL(10,1)) as varchar) + 'C' &#xD;
    Else 'BP: ' + cast(ISNULL(bloodPr.BloodPressure_4DSD#,0) as varchar)   + 'mmHg' +&#xD;
    ', Pulse: ' + cast(ISNULL(PulseRateR_BY5S0,0) as varchar)   +&#xD;
    ', SpO2: ' + cast(ISNULL(respInfo.SpO2_REJOR,0) as varchar)   + '%' +&#xD;
    ', RR: ' + cast(ISNULL(respInfo.RespiratoryRate_W9PO8,0) as varchar) + &#xD;
    ', Temp: ' + cast(CAST(ISNULL(Temperature_O2Q6$,0) AS DECIMAL(10,1)) as varchar) + 'C' End as sub&#xD;
    --,'EWS: ' + CASE WHEN obs.EWS_Q1TV0 IS NULL THEN '' ELSE CAST(obs.EWS_Q1TV0 AS VARCHAR(20)) END  as custom&#xD;
     , '' as custom&#xD;
    ,ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "Author"&#xD;
    , FormInfo.documentIdentifier AS passDocumentId    &#xD;
    , meta.cD_userId_PLU2# as DraftUser&#xD;
  FROM v2_CCRObsrvtnVtlSgns_YNEQB obs&#xD;
  INNER JOIN v2_BMI_SKZT6 bmi WITH(NOLOCK) ON bmi.DOCUMENTID = obs.DOCUMENTID&#xD;
  INNER JOIN v2_CCROVS_YNEQB_Rsprtry_9QC3K resp WITH(NOLOCK) ON obs.v2_CCRObsrvtnVtlSgns_YNEQB = resp.v2_CCRObsrvtnVtlSgns_YNEQB&#xD;
  INNER JOIN v2_Respiration_2TQ1Q respInfo WITH(NOLOCK) ON respInfo.v2_Respiration_2TQ1Q = resp.v2_Respiration_2TQ1Q&#xD;
  INNER JOIN v2_CCROVS_YNEQB_Tmprtr_V1L6X temp WITH(NOLOCK) ON obs.v2_CCRObsrvtnVtlSgns_YNEQB = temp.v2_CCRObsrvtnVtlSgns_YNEQB&#xD;
  INNER JOIN v2_Temperature_APSGA tempInfo WITH(NOLOCK) ON temp.v2_Temperature_APSGA = tempInfo.v2_Temperature_APSGA&#xD;
  INNER JOIN v2_CCROVS_YNEQB_BldPrsr_HYIP# blood WITH(NOLOCK) ON blood.v2_CCRObsrvtnVtlSgns_YNEQB = obs.v2_CCRObsrvtnVtlSgns_YNEQB&#xD;
  INNER JOIN v2_BloodPressure_2I8M5 bloodInfo WITH(NOLOCK) ON blood.v2_BloodPressure_2I8M5 = bloodInfo.v2_BloodPressure_2I8M5&#xD;
  INNER JOIN v2_BldPrsr_2I8M5_BlPrRp_XP6GQ bloodPr WITH(NOLOCK) ON bloodPr.v2_BloodPressure_2I8M5 = blood.v2_BloodPressure_2I8M5&#xD;
  INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = obs.DocumentId&#xD;
  INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = forminfo.documentId&#xD;
  LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K &#xD;
  WHERE (meta.status_TDES0 = 'FINAL' OR meta.status_TDES0 = 'DRAFT')&#xD;
  AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
  ) AS result</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Vital Signs and Observations&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Observations Vitals');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
} &#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Vital Signs and Observations</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Edit Vital Signs</name>
				<index>0</index>
				<action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
&#xD;
concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
//location.reload(true); // POSTDATA warning&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_Vital+Signs+and+Observations');</action>
				<css-class>RENAME</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Collected</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>EWS</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>UserId</name>
				<index>5</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice for Patient</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(4).getOriginalValue &lt;&gt; null%&gt;&#xD;
 &lt;%var zero = new java.lang.Integer("0") %&gt;&#xD;
 &lt;%var four = new java.lang.Integer("4") %&gt;&#xD;
 &lt;%var five = new java.lang.Integer("5") %&gt;&#xD;
 &lt;%var seven = new java.lang.Integer("7") %&gt; &#xD;
 &lt;%if row.get(4).getOriginalValue = zero%&gt;&#xD;
    &lt;table width="170" style="background-color:#D0D0D0;position:relative;top:-5px;"&gt;&lt;tr&gt;&lt;td style="padding:5px;text-align:center;"&gt;Monitoring max 12hrs&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xD;
 &lt;%else%&gt; &#xD;
 	&lt;%if row.get(4).getOriginalValue &gt;= zero &amp;&amp; row.get(4).getOriginalValue &lt; five%&gt;&#xD;
   		&lt;table width="170" style="background-color:#33FF66;position:relative;top:-5px;"&gt;&lt;tr&gt;&lt;td style="padding:5px;text-align:center;"&gt;Monitoring min 4-6hrs&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xD;
 	&lt;%else%&gt; &#xD;
	 	&lt;%if row.get(4).getOriginalValue &gt;= four &amp;&amp; row.get(4).getOriginalValue &lt; seven%&gt;&#xD;
	   		&lt;table width="170" style="background-color:orange;position:relative;top:-5px;"&gt;&lt;tr&gt;&lt;td style="padding:5px;text-align:center;"&gt;Monitoring min 1h&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xD;
	 	&lt;%else%&gt;  &#xD;
		   	&lt;table width="170" style="background-color:#FF3333;position:relative;top:-5px;"&gt;&lt;tr&gt;&lt;td style="padding:5px;text-align:center;"&gt;Monitoring continuous&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; &#xD;
 		&lt;%end if%&gt;  &#xD;
 	&lt;%end if%&gt;  &#xD;
 &lt;%end if%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue &lt;&gt; ""%&gt;&#xD;
&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(18).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>9</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>10</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>12</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>13</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>14</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>15</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Author</name>
				<index>16</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>17</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Draft User</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (row.get(0)) {&#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
}else{&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Observations Vitals');&#xD;
}&#xD;
concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
//location.reload(true); // POSTDATA warning&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_Vital+Signs+and+Observations');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink_Referrals (Active in Assessments)</name>
		<data-source-name>java:comp/env/jdbc/referrals</data-source-name>
		<description>Referrals - Pending Discharge ::: Tim Panoho: Referrals that are in a state of Pathway active and to discharge them.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
    r.receivedDate,&#xD;
    demographic.dateTimeOfBirth,&#xD;
    demographic.sex,&#xD;
    UPPER(demographic.familyName) + ', ' + demographic.givenName  ,&#xD;
    r.urgent, &#xD;
    r.statusReasonCode,&#xD;
    r.sourceReferralId,    &#xD;
     pcd.shortDescription as priority,&#xD;
    scd.shortDescription as status,&#xD;
    r.patientIdentifier as patientId,&#xD;
    '&lt;%=AppVars.openRepositoryReferralsNamespace%&gt;' as namespace,&#xD;
    r.referralRequestID,&#xD;
    r.version,&#xD;
    'Nursing Care Pathway'  as referralService,&#xD;
    r.statusCode,   &#xD;
    acd.shortDescription as acuity,&#xD;
    r.requestCreatorIdentifier,&#xD;
    r.identifier,&#xD;
    '' as ViewId,&#xD;
    r.requiresReview,&#xD;
    rcd.shortDescription as Assignee&#xD;
FROM&#xD;
    Referral.ERF_ReferralView r&#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition acd WITH(NOLOCK) ON acd.code = r.acuityCode AND acd.codingSystem = r.acuityCodingSystem&#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition scd WITH(NOLOCK) ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem&#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition pcd WITH(NOLOCK) ON pcd.code = r.priorityCode AND pcd.codingSystem = r.priorityCodingSystem&#xD;
    LEFT OUTER JOIN Codeset.CodeDefinition rcd WITH(NOLOCK) ON rcd.code = r.ReceiverCode AND rcd.codingSystem = r.ReceiverCodingSystem &#xD;
    LEFT JOIN &lt;%=AppVars.get("db_ACTPAS")%&gt; demographic WITH(NOLOCK) ON demographic.patientID = r.patientIdentifier&#xD;
   &#xD;
WHERE 1=1 &#xD;
   AND r.patientIdentifier IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
 &#xD;
   AND r.statusCode != 'int_cr_closed' &#xD;
&lt;%if Request.referralState="int_cr_pathwayActive"%&gt;&#xD;
      AND r.statusCode = 'int_cr_pathwayActive'&#xD;
&lt;%end if%&gt;&#xD;
 &#xD;
 ORDER BY  CASE WHEN scd.shortDescription  ='Pathway Active' THEN 0 ELSE 1 END ASC, r.urgent DESC,pcd.shortDescription, r.lastModifiedDate DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>1</index>
				<default-value />
				<display-name>Assignee</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/osgi_integration")%&gt;&lt;%exec config.setSQLQuery("SELECT results.id, results.description, results.shortDescription\r\nFROM {{\r\n    \r\n    // Retrieve the consumed web service from OHP e.g.'ReferralConsumedSoapService'\r\n    var webserviceService = osgiServiceFactory.getService('com.orchestral.foundation.webservices.api_6_9.WebServiceService');\r\n    var webservice = webserviceService.getWebService('" + SD + "=AppVars.get(\"Referral Consumed SOAP Service\")" + ED + "');\r\n \r\n    var referralSOAPServiceNamespace = 'http://www.orionhealth.com/ReferralSOAPService/';\r\n    default xml namespace = referralSOAPServiceNamespace;\r\n\r\n    // Note that the message below is not a String, but an E4X XML literal\r\n    var message = &lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:ref=\"http://www.orionhealth.com/ReferralSOAPService/\"&gt;\r\n       &lt;soap:Header/&gt;\r\n       &lt;soap:Body&gt;\r\n          &lt;ref:getReferralReceivers&gt;\r\n             &lt;!--Optional:--&gt;\r\n             &lt;ref:language&gt;" + SD + "=User.getLanguage()" + ED + "&lt;/ref:language&gt;\r\n             &lt;ref:includeDeleted&gt;true&lt;/ref:includeDeleted&gt;\r\n          &lt;/ref:getReferralReceivers&gt;\r\n       &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;;\r\n   \r\n    // Wrap the XML node before calling the web service\r\n    var inNode = org.mozilla.javascript.xmlimpl.XMLLibImpl.toDomNode(message);\r\n    var responseNode = webservice.call(inNode);\r\n   \r\n    // Unwrap the response after calling the web service\r\n    var response = new XML(responseNode);\r\n\r\n    // Log the response to Log4J\r\n    // org.apache.log4j.Logger.getLogger(\"my.webservice\").info(response);\r\n    // Log the response to System.out\r\n    //    java.lang.System.out.println(response);\r\n\r\n    var soapenv = new Namespace (\"http://www.w3.org/2003/05/soap-envelope\");\r\n    var ns3 =  new Namespace (referralSOAPServiceNamespace);\r\n    var rows = [];\r\n    for each (p in  response.soapenv::Body.ns3::getReferralReceiversResponse.*) {\r\n        var row = new Object();\r\n        row.id = p.@code.toString() + p.@codingSystem.toString();        \r\n        row.description = p.@description.toString();       \r\n        row.shortDescription = p.@shortDescription.toString();       \r\n        rows[rows.length] = row;\r\n        }\r\n    rows;\r\n}} AS results")%&gt;&lt;%exec config.setOptionColumnName("results.id")%&gt;&lt;%exec config.setDisplayColumnName("results.shortDescription")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SourceReferralID</name>
				<index>2</index>
				<default-value />
				<display-name>Source Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message>There are no items to display.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Referral</name>
				<index>0</index>
				<action>var concertoHome='&lt;%=ConcertoHome%&gt;';&#xD;
var entryPoint = "Add Document Episode Independent";&#xD;
var entryPointDA = "Document Direct Access";&#xD;
 if (!row.get(32)){ &#xD;
    if (row.get(24)){&#xD;
        if(window.alreadyClicked != 1) {&#xD;
            window.alreadyClicked = 1;&#xD;
            document.body.style.cursor = 'wait'; &#xD;
            var application = new Application( "Soprano Workflow Medical Templates", entryPoint );&#xD;
            application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
            concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");                        &#xD;
        }&#xD;
    }&#xD;
    else{&#xD;
        alert("No default template assigned to this encounter, please contact the SSICT support desk to resolve.");&#xD;
    }&#xD;
}else{ &#xD;
    var application = new Application( "Soprano Workflow Medical Templates", entryPointDA );&#xD;
    application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");         &#xD;
}&#xD;
&#xD;
&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=Event+Summary+List');</action>
				<css-class>&lt;%if row.get(32).getOriginalValue = null &amp;&amp; row.get(11).getOriginalValue = "Closed"  %&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Received On</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</style>
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date of Birth (Age)</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>statusEligibility</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(7).getOriginalValue = 1 || value = "2" || value = "2a"%&gt;&#xD;
  &lt;span class='icon-important'&gt; &lt;/span&gt; &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = "Pathway Active"%&gt;&#xD;
 &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
&lt;%else%&gt;&#xD;
 &lt;%if value = "Closed"%&gt;&#xD;
  Pending Event Summary&#xD;
 &lt;%else%&gt;&#xD;
 &lt;%if value = "Declined"%&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
 &lt;%else%&gt;&#xD;
  &lt;%if row.get(8).getOriginalValue = "Eligible"%&gt;&#xD;
   &lt;span style="text-align:right; background-color: #d8ead8; border-color: #007400; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=row.get(8).getOriginalValue%&gt; &lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
  &lt;%if value = "Forward"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; to assignee&lt;/span&gt;&#xD;
  &lt;%else%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #d8e7f2; border-color: #0062ae; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt; &lt;%=(html)value%&gt; &lt;/span&gt;&#xD;
  &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;  &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Version</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(10).getOriginalValue = "Pathway Active"%&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>code</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Acuity</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>View ID</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
Yes&#xD;
&lt;%else if%&gt;&#xD;
No&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assignee</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(11) != "Closed" ) {&#xD;
	var application = new Application( "Healthcare pathways - CCR Referrals", "View Referral by Id");&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");&#xD;
         //concerto.openEntryPointWithBreadcrumb(application);&#xD;
} &#xD;
else{ &#xD;
	var entryPoint = "Add Document Episode Independent";&#xD;
	var entryPointDA = "Document Direct Access";&#xD;
	 if (!row.get(32)) {&#xD;
	    if (row.get(24)) {&#xD;
	            var application = new Application( "Soprano Workflow Medical Templates", entryPoint );&#xD;
	            application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	            concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes"); 		} &#xD;
		else {&#xD;
			alert("No default template assigned to this encounter, please contact the SSICT support desk to resolve.");&#xD;
		}&#xD;
	}&#xD;
	else{ &#xD;
	    var application = new Application( "Soprano Workflow Medical Templates", entryPointDA );&#xD;
	    application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	    concerto.openApplicationInModalDialog( application,800,1024,null,null,"resizable=yes");  &#xD;
	}&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Referrals&amp;entryPointName=Event+Summary+List');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink_SocialHistory</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Social History: Appears as a editable summary.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>/*Social History - Document link */&#xD;
&#xD;
SELECT TOP 1 * FROM (&#xD;
  SELECT  alDoc.documentIdentifier AS DocumentId&#xD;
      ,DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ) AS datetimeCompleted&#xD;
      ,ISNULL(SOCH.LivingArrangement_$Q12Y_desc,SOCH.LivingArrangementDetails_50OEX) AS Living&#xD;
      ,SOCH.OccupationStatus_HV7FQ_desc AS Work&#xD;
      ,CASE WHEN SOCH.isInterpreterRequired_VFSNG = 'false' THEN 'No'&#xD;
            WHEN SOCH.isInterpreterRequired_VFSNG = 'true' THEN 'Yes'&#xD;
      ELSE '-' END AS Interpreter&#xD;
      ,meta.sD_userId_L2ZQP as UserId &#xD;
      ,'uuid_' + FormInfo.[modelId] AS ModelId  &#xD;
      , 'true' as formModeLock,&#xD;
      'Social History' as taskType,&#xD;
      '&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace,&#xD;
      'Social History' as Title,&#xD;
      'Last Updated by: ' + ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)) ,meta.sD_userId_7FQIQ) + ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113) as Category,&#xD;
      'Living Arrangement: ' + ISNULL(ISNULL(SOCH.LivingArrangement_$Q12Y_desc,SOCH.LivingArrangementDetails_50OEX),'No living arrangements') + ', Occupation Status: ' + ISNULL(SOCH.OccupationStatus_HV7FQ_desc, 'No employment arrangements')  +  ', Requires Interpreter: ' + CASE WHEN SOCH.isInterpreterRequired_VFSNG = 'false' THEN 'No' ELSE 'Yes' END as sub,&#xD;
      ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)) ,meta.sD_userId_7FQIQ) "Author" ,&#xD;
      alDoc.documentIdentifier AS DocumentIdentifier,&#xD;
      soilk.formsInternalId_MXZPJ formsInternalId,&#xD;
      meta.status_TDES0 as status,&#xD;
      pat.idNumber_9LV7R as patientId&#xD;
  FROM v2_CCR#GBL#SocialHistory_BHGL3 SOCH &#xD;
  INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = SOCH.DocumentId&#xD;
  INNER JOIN dbo.v_AllDocumentIdentifier alDoc WITH(NOLOCK) ON FormInfo.DocumentId = alDoc.documentId &#xD;
  INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = forminfo.documentId &#xD;
  LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
  LEFT OUTER  JOIN v2_CCR#LSH_BHGL3_SpDcRp_$PJL$ gsoi WITH(NOLOCK) ON SOCH.v2_CCR#GBL#SocialHistory_BHGL3 = gsoi.v2_CCR#GBL#SocialHistory_BHGL3 AND gsoi.ordering = 0&#xD;
  LEFT OUTER JOIN v2_CCR#LSH_BHGL3_atchm_HJ0SJQH soilk WITH(NOLOCK) ON soilk.v2_CCR#LSH_BHGL3_SpDcRp_$PJL$ = gsoi.v2_CCR#LSH_BHGL3_SpDcRp_$PJL$&#xD;
  LEFT OUTER JOIN FAS_Attachment att WITH(NOLOCK) ON att.uniqueId = soilk.formsInternalId_MXZPJ &#xD;
  WHERE (meta.status_TDES0 = 'FINAL' or meta.status_TDES0 = 'DRAFT')&#xD;
AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&#xD;
  UNION ALL &#xD;
  SELECT&#xD;
  null AS DocumentId&#xD;
  ,null AS datetimeCompleted&#xD;
  ,'' AS Living&#xD;
  ,'' AS Work&#xD;
  ,'' AS Interpreter&#xD;
  ,'' as UserId &#xD;
  ,'' AS ModelId  &#xD;
  , 'true' as formModeLock,&#xD;
  'Social History' as taskType,&#xD;
  '&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace,&#xD;
  'Social History' as Title,&#xD;
  '' as Category,&#xD;
  '' as sub,&#xD;
  '' AS "Author" ,&#xD;
  null AS DocumentIdentifier,&#xD;
  null formsInternalId,&#xD;
  null as status,&#xD;
  null as patientId&#xD;
) as results&#xD;
ORDER BY 2 desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Social History&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Information');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>1000</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Social History</name>
				<index>0</index>
				<action>if (row.get(0)){ &#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document");  &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
   parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_Social+History&amp;formOpen=true');&#xD;
&#xD;
}else{&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Information');&#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
   parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_Social+History&amp;formOpen=true');&#xD;
}&#xD;
 &#xD;
   location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_Social+History&amp;formOpen=true');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Living Arrangement</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Occupation Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Requires Interpreter</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; null%&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
 &lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (!row.get(19)){ &#xD;
    //Create task item&#xD;
	//if (row.get(0)){ &#xD;
	//   var openForm = new Application("Healthcare pathways - CCR", "View Document");  &#xD;
	//   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
	//   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
	//   parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_Social+History&amp;formOpen=true');&#xD;
&#xD;
	//}else{&#xD;
	   var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Information');&#xD;
	   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
	   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
	   parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_Social+History&amp;formOpen=true');&#xD;
	//}&#xD;
&#xD;
}else{ &#xD;
   //location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DocumentLink_Social+History&amp;formOpen=true');&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_DocumentLink_Waterlow Score</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Waterlow - Added for document linking</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>SELECT * FROM (&#xD;
SELECT di.documentIdentifier as documentId&#xD;
    ,DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ ) as "Date and Time"&#xD;
    ,cast(waterlow.WaterlowScore_0N3F6 as varchar) as 'Waterlow Score'&#xD;
    ,ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "ClinicianId"&#xD;
    ,'uuid_' + FormInfo.[modelId] AS modelId&#xD;
    ,'Waterlow Assessment' as taskType&#xD;
    ,'&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace&#xD;
    , 'Waterlow Assessment' as title&#xD;
    ,ISNULL( 'Last Updated by: '+ CAST(meta.sD_userId_7FQIQ as varchar(20))  + ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113), 'Last Updated by: ' +  CAST(meta.cD_userId_PLU2# as varchar(20)) + ', Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113) )  as Cat    &#xD;
    , 'Waterlow Score: ' + cast(waterlow.WaterlowScore_0N3F6 as varchar)  as sub&#xD;
    , meta.status_TDES0 as custom&#xD;
    , ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) as Author&#xD;
    , di.documentIdentifier as passDocumentId&#xD;
    ,'true' as formModeLock&#xD;
    ,pat.idNumber_9LV7R as urn&#xD;
FROM v2_GBLWtrlwRskAssssmntTl_JBK#0 waterlow&#xD;
    INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = waterlow.DocumentId&#xD;
    INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = waterlow.DOCUMENTID  &#xD;
    INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
    LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K &#xD;
WHERE (meta.status_TDES0 = 'FINAL' OR meta.status_TDES0 = 'DRAFT')&#xD;
 AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
)&#xD;
as results&#xD;
 WHERE results.urn IN ( &lt;%=AppVars.get("patientURNList")%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}  &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
  &lt;/style&gt;&#xD;
&lt;h2&gt;Waterlow Assessment&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadWaterlow(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Waterlow Assessment');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Waterlow Assessment</name>
				<index>0</index>
				<action>loadWaterlow();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>11</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Edit</name>
				<index>0</index>
				<action>var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( openForm ,1024,800,null,null,"resizable=yes");</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%else%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Waterlow Score</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last updated by</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Author</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Waterlow Assessment');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=Waterlow+Score');&#xD;
}&#xD;
loadForm();</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Context_LifestyleFactors</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Lifestyle Factors: appears as a editable summary.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>SELECT TOP 1 * FROM (&#xD;
   SELECT &#xD;
      FormInfo.[documentIdentifier] AS DocumentId,&#xD;
      DATEADD(minute, meta.dateSigned_OK9EW_Ofst ,meta.dateSigned_OK9EW) as [DateTime],&#xD;
      substring([SmokingStatus_AB5ZW_desc],1, LEN([SmokingStatus_AB5ZW_desc])) AS SmokerStatus,&#xD;
      CASE &#xD;
         WHEN [HasThePatientUsedTobacco_UCU7V] = 1 &#xD;
         THEN (&#xD;
            CASE &#xD;
               WHEN [AgeOrDateStarted_LWUMS_cde] = 'date' &#xD;
               THEN 'Started the: ' + convert(varchar(10),convert(varchar,[DateStarted_1BOKR]),103) + '. '&#xD;
               WHEN [AgeOrDateStarted_LWUMS_cde] = 'age' &#xD;
               THEN 'Started at: ' + convert(varchar(3),convert(decimal(3,0),[AgeStarted_3OCAW])) + ' years old. '&#xD;
               ELSE '' &#xD;
               END&#xD;
         ) + (&#xD;
            CASE &#xD;
               WHEN [AgeOrDateQuit_L$INX_cde] = 'date' &#xD;
               THEN 'Quit the: ' + convert(varchar(10),convert(varchar,[DateQuit_M0TFU]),103) + '. '&#xD;
               WHEN [AgeOrDateQuit_L$INX_cde] = 'age' &#xD;
               THEN 'Quit at: ' + convert(varchar(3),convert(decimal(3,0),[AgeQuit_8A8U2])) + ' years old. '&#xD;
               ELSE '' &#xD;
               END&#xD;
         ) + convert(varchar(3),[NumberPerDay_DB7JX]) +' per day for ' + convert(varchar(3),[PackYears_XYN41]) + ' pack/s per year.'&#xD;
         ELSE 'Not used tobacco in the last 6 months' &#xD;
      END AS Tobacco,&#xD;
      CASE &#xD;
         WHEN 1 = 1 THEN ''&#xD;
         ELSE 'No consumption recorded' &#xD;
      END AS Alcohol,&#xD;
      CASE &#xD;
         WHEN DrugAddictionYN_VL85$_cde = '1' THEN CAST([Comments#Drug_UCNFT] as nvarchar(2000))&#xD;
         ELSE 'No drug addiction recorded' &#xD;
      END AS Drugs,&#xD;
      '' AS OtherHabits,&#xD;
      'uuid_' + FormInfo.[modelId] AS ModelId, 'true' as formModeLock, 'Lifestyle Factors' as taskType,&#xD;
      ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "Author",&#xD;
      FormInfo.[documentIdentifier] AS DocId&#xD;
   ,'Lifestyle History' as title&#xD;
   ,ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ)  as custom&#xD;
   ,'Updated' as Category&#xD;
   ,'' as SubCategory &#xD;
   ,pt.taskIdentifier as taskIdentifier&#xD;
   ,pt.dataId as dataId&#xD;
   ,'&lt;%=AppVars.openRepositoryNamespace%&gt;' as namespace&#xD;
&#xD;
    FROM v2_Habits_#LNS4 Habits&#xD;
   INNER JOIN v2_Habits_#LNS4_TbccUsg_PNK6$ HabTob WITH(NOLOCK) ON Habits.v2_Habits_#LNS4 = HabTob.v2_Habits_#LNS4&#xD;
   INNER JOIN v2_CCR#GL#Tobacco_U9TXQ Tobacco WITH(NOLOCK) ON Tobacco.v2_CCR#GL#Tobacco_U9TXQ = HabTob.v2_CCR#GL#Tobacco_U9TXQ &#xD;
    INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = Habits.DocumentId&#xD;
    INNER JOIN dbo.v_AllDocumentIdentifier alDoc WITH(NOLOCK) ON FormInfo.DocumentId = alDoc.documentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSTask%&gt;.[dbo].[PersistentTask] pt WITH(NOLOCK) ON pt.[dataId] = alDoc.documentIdentifier&#xD;
    INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = forminfo.documentId &#xD;
    LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K &#xD;
   WHERE meta.status_TDES0 = 'FINAL' &#xD;
     AND Habits.[p_pI_id_#JUT#] IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
   UNION ALL&#xD;
   SELECT null AS DocumentId&#xD;
   ,'' as [DateTime]&#xD;
   ,'' AS Smoker&#xD;
   ,'' AS Tobacco&#xD;
   ,'' AS Alcohol&#xD;
   ,'' AS Drugs&#xD;
   ,'' AS Other&#xD;
   ,'' AS ModelId&#xD;
   ,'true' AS formModeLock, &#xD;
   'Lifestyle Factors' as taskType&#xD;
   ,'' as Author&#xD;
   ,null AS DocumentId&#xD;
   ,'' as title&#xD;
   ,'' as custom&#xD;
   ,'' as Category&#xD;
   ,'' as SubCategory&#xD;
   ,'' as taskIdentifier&#xD;
   ,'' as dataId&#xD;
   ,'Lifestyle Factors' as namespace&#xD;
) as result&#xD;
ORDER BY 2 desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Observation');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>New Lifestyle Assessment</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none;</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>1</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Social History</name>
				<index>0</index>
				<action>if (row.get(0)){ &#xD;
    //Create task item&#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
    //Create task item &#xD;
    var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Observation'); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_Lifestyle Factors');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Smoker Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Tobacco</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Alcohol Intake</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Drugs Addiction</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Other Habits</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Updated by</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskIdentifier</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>dataId</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Context_Medical Hx</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Medical History: Appears as an editable summary.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>3 DESC</order-by>
		<query-string>SELECT * FROM (&#xD;
  SELECT &#xD;
      'Medical' as title &#xD;
      ,di.documentIdentifier as DocumentId&#xD;
      ,DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ )as datetimeCompleted&#xD;
      , cast (medComp.MedHist_#2ROS as varchar(200)) as MedicalProblem&#xD;
      , CASE&#xD;
         WHEN medComp.MPAD_type_UUN$N_cde = 'at_age' THEN cast(CONVERT(DECIMAL(3,0),medComp.MPAD_number_IXBYG) as varchar(200)) &#xD;
         ELSE CONVERT(VARCHAR(10),CAST(medComp.MPAD_data_ALRSP as DATE), 105)&#xD;
      END as inDate&#xD;
      , cast( medComp.Detailsofmedicalproblem_Y#IDR as varchar(200) ) as DetailsOfProblem&#xD;
      , medComp.ActiveInActive_KGFOU_desc as currentDate&#xD;
      , medComp.Srcfnfrmtn_ZNUZH_desc as SourceInformation&#xD;
      , CAST( medComp.Comments_W8R3E as varchar(200) ) as Comments   &#xD;
      , ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "Author"&#xD;
      ,'uuid_' + FormInfo.[modelId] AS modelId&#xD;
      ,'true' as formModeLock &#xD;
FROM v2_CCR#GBL#Medical_JNME3 medComp&#xD;
      INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = medComp.DocumentId&#xD;
      INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = medComp.DOCUMENTID&#xD;
      INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
      LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE (meta.status_TDES0 = 'FINAL' OR meta.status_TDES0 = 'DRAFT')&#xD;
&lt;%if Context.Patient.Id.MRN&lt;&gt;""%&gt;&#xD;
   AND pat.idNumber_9LV7R  IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;&#xD;
) AS medHx</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
a.add-icon{ display:none; important!}&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Medical History&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormMed(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Medical History');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
 &lt;/script&gt;</custom-html>
			<display-name>Medical History</display-name>
			<filter-button>
				<name>Add Medical History</name>
				<index>0</index>
				<action>loadFormMed();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Edit Medical History</name>
				<index>0</index>
				<action>if (!row.get(1)){&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Medical History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medical History Context');</action>
				<css-class>&lt;%if row.get(1).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(1).getOriginalValue()%&gt;&#xD;
&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medical Condition</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;!--&lt;div title="Date modified: &lt;%=DateFormat.format(row.get(2).getOriginalValue,  "dd-MMM-yyyy HH:mm a" )%&gt; by: &lt;%=row.get(3).getOriginalValue%&gt;"&gt; &lt;a href="#" class=""&gt;&lt;/a&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;&lt;/div&gt;&#xD;
--&gt;&#xD;
&lt;%=(js)value%&gt;&#xD;
&lt;!--icon-information information-hover--&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date/Age of Condition</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;span title="&lt;%=(html)value%&gt;"&gt; &lt;%=StringUtil.truncate(value , 50)%&gt;  &lt;/span&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Context_Medication Summary</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Medication Management: Appears as an editable summary.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>SELECT DISTINCT [id]&#xD;
      ,DATEADD(SECOND, [durationStartDate]/1000 ,'1970/1/1')+1 [durationStartDate] &#xD;
      ,[controlledDrug]&#xD;
      ,[brandName]&#xD;
      ,[prescribingTerm]&#xD;
      , dose +' ('+ doseUnit +')' as dose&#xD;
      ,[additionalInstructions]&#xD;
      ,[comments] &#xD;
      ,[frequency] &#xD;
      ,[indication] &#xD;
      ,[prn]&#xD;
      ,[recordState] &#xD;
      ,[route]&#xD;
      ,[status]&#xD;
      ,CAST([prescriberIdentifier] as varchar(20)) "Author"&#xD;
      ,patientIdentifier&#xD;
  FROM &lt;%=AppVars.db_CWSMedMan%&gt;.[dbo].[MedicationPrescription] &#xD;
WHERE 1=1&#xD;
    AND [patientIdentifier] IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    AND status IN ('ACTIVE', 'CHANGED')&#xD;
    AND recordState = 'CURRENT'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
 h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
 &lt;/style&gt;&#xD;
&lt;h2&gt;Medications Summary&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Medication Management", "Medication");&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 800, 1150, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Medication</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Medications Management</name>
				<index>0</index>
				<action>var application = new Application( "Medication Management", "Medication" );&#xD;
 application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,800, 1150,null,null,"resizable=yes");&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_View Medications');</action>
				<css-class>RENAME</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Start Date</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=(html)DateFormat.format(value, "dd-MMM-yyyy")%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Controlled</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Brand</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medication</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Dose</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Additional Instructions</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Frequency</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Indication</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PRN</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>RecordState</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Route</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
/* DEVELOPMENT WORK COMMENTS */&#xD;
//var url = concertoHome + '/ApplicationRedirector.htm?applicationName=Healthcare pathways - CCR&amp;entryPointName='&#xD;
//  + entryPoint &#xD;
//  + '&amp;reloadDocumentFromCdvTree=true' &#xD;
//  + '&amp;documentId=' + row.get(0).replace(/-/g, '%2D'); &#xD;
//  + '&amp;isPatientInContext=true'&#xD;
//  + '&amp;fromCdvTree=true'&#xD;
//  + '&amp;repositoryName=true';&#xD;
/*	var app = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
	app.addQueryParameter ('documentId', row.get(0) );&#xD;
	app.addQueryParameter ('isPatientInContext', 'true');&#xD;
	app.addQueryParameter ('fromCdvTree', 'true');&#xD;
	app.addQueryParameter ('reloadDocumentFromCdvTree', 'true');&#xD;
	app.addQueryParameter ('repositoryName', 'true');&#xD;
	app.setSecureInformationToken(row.getSecureInformationToken());&#xD;
        concerto.openApplication(app,null,null,800,1024,'');&#xD;
*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Context_Obstetric Hx</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Obstetric History:  Appears as an editable summary. - MM</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>obsHx.dateTimeCompleted desc</order-by>
		<query-string>SELECT * from (&#xD;
SELECT &#xD;
    'Obstetric' as title&#xD;
    ,di.documentIdentifier as DocumentId &#xD;
    ,DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst , meta.dateSubmitted_L0HOZ) AS dateTimeCompleted&#xD;
    ,obshx.GScore_OYJ8$_desc as Gravidity&#xD;
    ,obshx.PScore_#FVF$_desc as Parity&#xD;
    ,ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "updatedBy"&#xD;
    ,'uuid_' + FormInfo.[modelId] as modelId&#xD;
    ,'true' as formModeLock&#xD;
    ,meta.cD_userId_PLU2#  as 'DraftUser'&#xD;
FROM v2_MACHGBLIntlAssssmnt_BROE2 mach&#xD;
INNER JOIN v2_MAC#LIA_BROE2_obHsCm_BQ7G3 obslink WITH(NOLOCK) ON mach.v2_MACHGBLIntlAssssmnt_BROE2 = obslink.v2_MACHGBLIntlAssssmnt_BROE2&#xD;
INNER JOIN v2_CNCONTObsttrcHstry_$B4VI obshx WITH(NOLOCK) ON obshx.v2_CNCONTObsttrcHstry_$B4VI = obslink.v2_CNCONTObsttrcHstry_$B4VI&#xD;
INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = mach.DocumentId&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = mach.DOCUMENTID&#xD;
INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE (meta.status_TDES0 = 'FINAL' OR meta.status_TDES0 = 'DRAFT') &#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
    AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
&lt;%end if%&gt;&#xD;
) AS obsHx</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Obstetric History&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
  function loadFormObs(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 800, 600, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Obstetric History</display-name>
			<filter-button>
				<name>Add Obstetric History</name>
				<index>0</index>
				<action>loadFormObs(); &#xD;
&#xD;
/* &lt;%if Context.Patient.Co.Sex == "F" || Context.Patient.Co.Sex == "Female"%&gt; &#xD;
  loadFormObs();  &#xD;
&lt;%else%&gt;&#xD;
if (confirm('Warning: The patient in context is not a Female patient. Do you wish to continue?')) {&#xD;
   loadFormObs();&#xD;
  }&#xD;
&lt;%end if%&gt; */</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Edit Obstetric History</name>
				<index>0</index>
				<action>if (!row.get(1)){&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
  }else{&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
  }&#xD;
/* Commenting this out because there is no need to display warning message since this context window is only displayed if the patient is female&#xD;
&lt;%if Context.Patient.Co.Sex == "F" || Context.Patient.Co.Sex == "Female"%&gt;   &#xD;
if (!row.get(1)){&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
  }else{&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
  }&#xD;
&lt;%else%&gt;&#xD;
if (confirm('Warning: The patient in context is not a Female patient. Do you wish to continue?')) {&#xD;
  if (!row.get(1)){&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History Context');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
  }else{&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
  }&#xD;
}&#xD;
 &lt;%end if%&gt; */&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Obstectric History Context');</action>
				<css-class>&lt;%if row.get(2).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Gravidity</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Parity</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(8).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (!row.get(1)){&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Medical History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medical History');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Context_Surgical Hx</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Surgical History: Appears WITH(NOLOCK) ON editable summaries</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>3 DESC</order-by>
		<query-string>SELECT * FROM (&#xD;
  SELECT &#xD;
      'Surgical' as title&#xD;
      ,di.documentIdentifier as DocumentId&#xD;
      ,DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ ) as datetimeCompleted&#xD;
      ,cast(sur.SurType_#KLE7 as varchar(200))as SurgicalProblem &#xD;
      , CASE&#xD;
         WHEN sur.sD_type_PWSQ5_cde = 'at_age' THEN cast(CONVERT(DECIMAL(3,0), sur.sD_number_Q4Y3Z) as varchar(200)) &#xD;
         ELSE  CONVERT(VARCHAR(10),CAST(sur.sD_data_8RK59 as DATE), 105)&#xD;
      END as inDate &#xD;
      , cast( sur.SurgeryDetail_UBX2O as varchar(200)) as surgeryDetails&#xD;
      , '' as [status] &#xD;
      ,cast( 'Name: '+ sur.NameofSurgeon_EU9C$ as varchar(200)) as surgeonDetails&#xD;
      ,CASE sur.hasComplications_4XA8U WHEN 1 THEN cast(sur.DetailsComplications_AX2LL as varchar(200)) END as compilations&#xD;
      ,CAST(meta.sD_userId_7FQIQ as varchar(20)) "Author"&#xD;
      ,'uuid_' + FormInfo.[modelId] AS modelId&#xD;
      ,'true' as formModeLock&#xD;
      ,meta.cD_userId_PLU2#  as 'DraftUser'&#xD;
FROM v2_CCR#GBL#Surgery_ZNV9Y sur&#xD;
INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = sur.DocumentId&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = sur.DOCUMENTID&#xD;
INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K &#xD;
WHERE (meta.status_TDES0 = 'FINAL' OR meta.status_TDES0 = 'DRAFT')&#xD;
      AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
) AS surgHx</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Surgical History&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormMed(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Medical History');&#xD;
   openForm.addQueryParameter("pathwayId", "AssociateInPathway");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
 function loadFormSurg(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Surgical History');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
 function loadFormObs(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Surgical History</display-name>
			<filter-button>
				<name>Add Surgical History</name>
				<index>0</index>
				<action>loadFormSurg();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>ADD</name>
				<index>0</index>
				<action>if(!row.get(1)){&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Surgical History');&#xD;
openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Surgical History Context');</action>
				<css-class>&lt;%if row.get(1).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(1).getOriginalValue()%&gt;&#xD;
&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Surgical Procedure</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date/Age of Surgery</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details of Procedure</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Surgeon Details</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Complications</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(12).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - AccessCode</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Access Code: Appears WITH(NOLOCK) ON the "Social History Form"</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT TOP 1 results.*,'uuid_f3604b97-2bb8-4c03-8f84-9d1cd24fe5cd' as modelId , 'false' as formModeLock&#xD;
FROM ( SELECT alDoc.documentIdentifier as DocumentId, CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113) as dateSigned , paraCode.accessQuestion_0VDOM as code, meta.sD_userId_7FQIQ as userId&#xD;
    ,'ACCESS' as DocumentType, pat.idNumber_9LV7R as urn FROM v2_GBL#Access#Code_#BCYR  mainCode&#xD;
JOIN v2_GBLAcCd_#BCYR_AccssCd_FHSQ0 subCode WITH(NOLOCK) ON mainCode.v2_GBL#Access#Code_#BCYR = subCode.v2_GBL#Access#Code_#BCYR&#xD;
JOIN v2_GBL#Access#Code_Y3D1N paraCode WITH(NOLOCK) ON paraCode.v2_GBL#Access#Code_Y3D1N = subCode.v2_GBL#Access#Code_Y3D1N &#xD;
INNER JOIN dbo.v_AllDocumentIdentifier alDoc WITH(NOLOCK) ON mainCode.DocumentId = alDoc.documentId&#xD;
LEFT OUTER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = mainCode.documentId &#xD;
LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE meta.status_TDES0 = 'FINAL'&#xD;
        AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
 UNION ALL &#xD;
SELECT null AS DocumentId&#xD;
    ,'' as dateSigned&#xD;
    ,null AS code&#xD;
    ,'' AS userId &#xD;
    ,'NOACCESS' as DocumentType&#xD;
    , '' as urn &#xD;
  ) as results  &#xD;
ORDER BY 2 desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Information');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Update Social Information</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none;</style>
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none;</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>1</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>ADD</name>
				<index>0</index>
				<action>if (!row.get(0)) {&#xD;
   var entryPoint = "Add New Access Code";   &#xD;
}else {&#xD;
   var entryPoint = "View Document";&#xD;
}    &#xD;
parent.form.openEntryPointWithBreadCrumb('Healthcare pathways - CCR',entryPoint  , row.getSecureInformationToken());&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_Access_Code');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>AccessCode</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
     &lt;span class="icon-locked-partial"&gt;&lt;/span&gt;&#xD;
 Restricted access.  &lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DocumentType</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>urn</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (!row.get(0)) {&#xD;
   var entryPoint = "Add New Access Code";   &#xD;
}else {&#xD;
   var entryPoint = "View Document";&#xD;
}    &#xD;
parent.form.openEntryPointWithBreadCrumb('Healthcare pathways - CCR',entryPoint  , row.getSecureInformationToken());&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_Access_Code');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Add Administered Medication</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Medication Management: Appears as a Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT * FROM (&#xD;
SELECT [id]&#xD;
      ,DATEADD(SECOND, [durationStartDate]/1000 ,'1970/1/1')+1 [durationStartDate] &#xD;
      ,[controlledDrug]&#xD;
      ,[brandName]&#xD;
      ,[prescribingTerm]&#xD;
      , dose +' ('+ doseUnit +')' as dose&#xD;
      ,[additionalInstructions] &#xD;
      ,[frequency] &#xD;
      ,[indication] &#xD;
      ,[prn]&#xD;
      ,[recordState] &#xD;
      ,[route]&#xD;
      ,[status]&#xD;
      ,CAST([prescriberIdentifier]  as varchar(20))  "Author"&#xD;
      ,patientIdentifier&#xD;
      ,getDate() as placeDateHolder&#xD;
      ,[comments]&#xD;
  FROM &lt;%=AppVars.db_CWSMedMan%&gt;.[dbo].[MedicationPrescription] &#xD;
WHERE 1=1&#xD;
    AND [patientIdentifier] IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
&lt;%if Request.recordState%&gt;&#xD;
    AND recordState = 'CURRENT'&#xD;
    AND status IN ('ACTIVE', 'CHANGED')&#xD;
 &lt;%end if%&gt;    AND recordState NOT IN ('DRAFT','SUPERCEDED')&#xD;
) AS results&#xD;
ORDER BY 16 DESC, CASE WHEN results.[recordState] = 'CURRENT' THEN 0 ELSE 1 END ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
 h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&#xD;
&#xD;
 &lt;/style&gt;&#xD;
&lt;h2&gt;Medications&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Medication Management", "Medication");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024,1150, null, null,"resizable=yes;");&#xD;
   submitFilter();  &#xD;
&#xD;
parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=EP+%2D+Add+To+Administered+Medications');&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Medication</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Start Date</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=(html)DateFormat.format(value, "dd-MMM-yyyy")%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Controlled</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Brand</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medication</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Dose</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Additional Instructions</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Frequency</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Indication</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PRN</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>RecordState</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Route</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>placeDateHolder</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
   var application = new Application( "Healthcare pathways - CCR Searches", "EP - Add Administered Medication" );&#xD;
   application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog ( application,1024,1150,null,null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=EP+%2D+Add+To+Administered+Medications');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Administered Medications</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Administered Medicationsory: Appears as a Global. (At the moment this is used in Patient Profile and is the same as Administered Medication Search in Nursing Assessment Form but it VIEW ONLY)</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>AdmnDate DESC</order-by>
		<query-string>SELECT * FROM (&#xD;
SELECT&#xD;
'Meds' AS Title&#xD;
,PAT.idNumber_9LV7R AS Patient&#xD;
,DATEADD(MINUTE, ADM.D_AdmnstrdDtTm_LSH#R_Ofst, ADM.D_AdmnstrdDtTm_LSH#R ) AS AdmnDate&#xD;
,ADM.D_Drug_6D0B9 AS Drug&#xD;
,ADM.D_Route_I8H7Y AS Route&#xD;
,ADM.D_Dose_EUSGB AS Dose&#xD;
,DATEADD(MINUTE, META.dateSubmitted_L0HOZ_Ofst, META.dateSubmitted_L0HOZ ) as updatedDateTime&#xD;
,meta.sD_userId_L2ZQP as UserId &#xD;
,'uuid_' + FormInfo.[modelId] AS ModelId&#xD;
,DI.documentIdentifier as DocumentId&#xD;
,meta.cD_userId_PLU2# as 'DraftUser'&#xD;
,meta.status_TDES0 as docstatus&#xD;
FROM v2_GBLMdctnMngmnt_X70#S ADM&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K META WITH(NOLOCK) ON META.DOCUMENTID = ADM.DOCUMENTID&#xD;
INNER JOIN DocumentIdentifier DI  WITH(NOLOCK) ON DI.DOCUMENTID = META.DOCUMENTID&#xD;
INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = ADM.DocumentId&#xD;
LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PAT WITH(NOLOCK) ON PAT.v2_DocumentMetaData_0Z14K = META.v2_DocumentMetaData_0Z14K&#xD;
WHERE (meta.status_TDES0 = 'FINAL' or meta.status_TDES0 = 'DRAFT')&#xD;
    AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Administered Medications&lt;/h2&gt;&#xD;
&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR Searches", 'EP - Add To Administered Medications');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
   //openForm.Close();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Administered Medications</display-name>
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>patientId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Administered Date and Time</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm" )%&gt;&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medication</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]AuditEvent.Co.PatientId</subject-item-name>
			</result-column>
			<result-column>
				<name>Route</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Dose</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Given By</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(11).getOriginalValue = "FINAL"%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(10).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>draftUser</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>status</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Administered Medications EditMode</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Administered Medicationsory: Appears as a Global. (This is the copy of Global - Administered Medications but it alows the user to Add new administered medications)</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>AdmnDate DESC</order-by>
		<query-string>SELECT&#xD;
'Meds' AS Title&#xD;
,PAT.idNumber_9LV7R AS Patient&#xD;
,DATEADD(MINUTE, ADM.D_AdmnstrdDtTm_LSH#R_Ofst, ADM.D_AdmnstrdDtTm_LSH#R ) AS AdmnDate&#xD;
,ADM.D_Drug_6D0B9 AS Drug&#xD;
,ADM.D_Route_I8H7Y AS Route&#xD;
,ADM.D_Dose_EUSGB AS Dose&#xD;
,DATEADD(MINUTE, META.dateSubmitted_L0HOZ_Ofst, META.dateSubmitted_L0HOZ ) as updatedDateTime&#xD;
,meta.sD_userId_L2ZQP as UserId &#xD;
,'uuid_' + FormInfo.[modelId] AS ModelId&#xD;
,DI.documentIdentifier as DocumentId&#xD;
,meta.cD_userId_PLU2# as 'DraftUser'&#xD;
,meta.status_TDES0 as docstatus&#xD;
FROM v2_GBLMdctnMngmnt_X70#S ADM&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K META WITH(NOLOCK) ON META.DOCUMENTID = ADM.DOCUMENTID&#xD;
INNER JOIN DocumentIdentifier DI  WITH(NOLOCK) ON DI.DOCUMENTID = META.DOCUMENTID&#xD;
INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = ADM.DocumentId&#xD;
LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PAT WITH(NOLOCK) ON PAT.v2_DocumentMetaData_0Z14K = META.v2_DocumentMetaData_0Z14K&#xD;
WHERE (meta.status_TDES0 = 'FINAL' or meta.status_TDES0 = 'DRAFT')&#xD;
    &lt;%if Context.Patient.Id.MRN%&gt;&#xD;
    AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
    &lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR Searches", 'EP - Add To Administered Medications');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
   //openForm.Close();&#xD;
  //location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=WD+%2D+Administered+Medications');&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Administered Medications</display-name>
			<filter-button>
				<name>Add Administered Medication</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Edit Administered Medications</name>
				<index>0</index>
				<action>var openForm = new Application("Healthcare pathways - CCR", "View Document");&#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Administered+Medications+EditMode');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>patientId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Administered Date and Time</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm" )%&gt;&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medication</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]AuditEvent.Co.PatientId</subject-item-name>
			</result-column>
			<result-column>
				<name>Route</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Dose</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Given By</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(11).getOriginalValue = "FINAL"%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(10).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>draftUser</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>status</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Administered Medications EditMode');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Global - Allergies and Alerts</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>Allergies and Alerts(ACTPAS) - added to globals</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>1 desc</order-by>
		<query-string>SELECT DISTINCT [details],  [reaction], [dateentered], [dateentered]&#xD;
FROM [Orion_AllergiesAlerts]&#xD;
    WHERE patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Adverse Reactions &amp; Alerts (ACTPAS)&lt;/h2&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Adverse Reactions &amp; Alerts</name>
				<index>0</index>
				<action />
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>1</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>2</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none; important!</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Details</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Reaction</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Entered</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>End Date</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Care Plan</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Care Plan: Added as a global</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>results.datetimeCompleted desc</order-by>
		<query-string>SELECT DISTINCT &#xD;
  results.DocumentId &#xD;
  ,results.datetimeCompleted&#xD;
  ,results.Service&#xD;
  ,results.PathwayId&#xD;
  ,results.goal&#xD;
  ,results.Author&#xD;
  ,results.patientId&#xD;
  ,results.assessmentId&#xD;
  ,results.assessmentModelId&#xD;
  ,results.docid&#xD;
  ,results.ModelId &#xD;
  ,results.taskType &#xD;
  ,results.DraftUser &#xD;
 FROM (&#xD;
 &#xD;
 &#xD;
 SELECT DISTINCT&#xD;
  di.documentIdentifier as DocumentId, comp.ExpectedDateTime_XRB59 as Expected,  DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ ) as datetimeCompleted ,goalLink.Goals as goal, comp.cpInterventions_Y1LIU_desc AS Interventions,    meta.status_TDES0 as DocStatus,'uuid_' + FormInfo.[modelId] AS ModelId, 'true' as formModeLock, 'Care Plan'   as taskType, comp.cpOT_6J1B3_desc as custom, 'Last Updated by: ' + ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) + ', ' + 'Last Updated Date and Time: ' + CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113) as Category, 'Goal: ' + goalLink.Goals as SubCategory, comp.OtcmsOnDschrg_V4W6U_desc as Outcomes, ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "Author", meta.cD_userId_PLU2#  as 'DraftUser', pathwayCodes.staffTeam as Service, di.documentIdentifier  as docid ,care.P_pI_id_#W85V as patientId ,ISNULL(nursingAssessments.assessmentId,'') as assessmentId ,ISNULL(nursingAssessments.modelId,'' ) as assessmentModelId , nursingAssessments.pathwayRefId as pathwayRefId,  pathwayCodes.PathwayId , pathwayCodes.nursingAssessmentDocId as nursingAssessmentDocId&#xD;
  &#xD;
  &#xD;
  &#xD;
  &#xD;
FROM v2_CN#Nursing#Care#Plan_YP1RM care&#xD;
INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I pln WITH(NOLOCK) ON care.v2_CN#Nursing#Care#Plan_YP1RM = pln.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL comp WITH(NOLOCK) ON pln.v2_CCRGBLCrPlnCmpnnt_3XYZL = comp.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = care.DOCUMENTID&#xD;
INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = care.DocumentId &#xD;
&#xD;
/*ALL CARE PLANS LINKED*/&#xD;
LEFT OUTER JOIN (&#xD;
    SELECT careplan.documentIdentifier_0E#DK as careplanId, ad.documentIdentifier&#xD;
as pathwayRefId,ad.documentIdentifier as assessmentId, pt.modelId as modelId &#xD;
    FROM v_AllDocumentIdentifier ad  &#xD;
    INNER JOIN v2_GBLrvwSmmrycmpnnt_83RT5 rvsumcomp WITH(NOLOCK) ON ad.documentId = rvsumcomp.DOCUMENTID&#xD;
    INNER JOIN OH_CM_Task.dbo.PersistentTask pt WITH(NOLOCK) ON pt.dataId = ad.documentIdentifier&#xD;
    INNER JOIN OH_CM_task.dbo.TaskType tt WITH(NOLOCK) ON tt.uniqueId = pt.taskType&#xD;
    LEFT OUTER JOIN OH_CM_clinical.PathwayEnrollment.PES_PathwayEnrollment pe WITH(NOLOCK) ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
    LEFT OUTER JOIN v2_GBLrSc_83RT5_dcLn_HLGE0NH careplan WITH(NOLOCK) ON rvsumcomp.v2_GBLrvwSmmrycmpnnt_83RT5 = careplan.v2_GBLrvwSmmrycmpnnt_83RT5 &#xD;
    WHERE careplan.documentIdentifier_0E#DK is not null&#xD;
    ) nursingAssessments ON nursingAssessments.careplanId = di.documentIdentifier &#xD;
&#xD;
/*ALL ASSESSMENT FORMS*/&#xD;
LEFT OUTER JOIN (  &#xD;
    SELECT pe.pathwayIdentifier as PathwayId, ad.documentIdentifier as nursingAssessmentDocId , cs.DESCRIPTION as staffTeam , tt.identifyingName&#xD;
 FROM v_AllDocumentIdentifier ad   &#xD;
    INNER JOIN OH_CM_task.dbo.PersistentTask pt WITH(NOLOCK) ON pt.dataId = ad.documentIdentifier&#xD;
    INNER JOIN OH_CM_task.dbo.TaskType tt WITH(NOLOCK) ON tt.uniqueId = pt.taskType&#xD;
    LEFT OUTER JOIN OH_CM_clinical.PathwayEnrollment.PES_PathwayEnrollment pe WITH(NOLOCK) ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
    LEFT OUTER JOIN (&#xD;
      SELECT rpm.pathway_enrollmentIdentifier as id , rpm.referral_identifier as referalId FROM  OH_CM_Custom.dbo.ReferralToPathwayMapping rpm &#xD;
      UNION ALL&#xD;
      SELECT srpm.SubPathwayEnrolmentId , rpm.referral_identifier as referalId FROM OH_CM_Custom.dbo.PathwayToSubpathway_Mapping srpm  &#xD;
        INNER JOIN OH_CM_Custom.dbo.ReferralToPathwayMapping rpm ON srpm.PathwayEnrolmentId = rpm.pathway_enrollmentIdentifier&#xD;
    )as pathwayEnrollments ON  pathwayEnrollments.id = pe.enrollmentIdentifier&#xD;
    LEFT OUTER JOIN OH_CM_clinical.Referral.ERF_ReferralView r WITH(NOLOCK) ON pathwayEnrollments.referalId = r.identifier &#xD;
    LEFT OUTER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_CWSStaffTeams cs WITH(NOLOCK) ON cs.CODE = r.receiverCode&#xD;
    ) pathwayCodes ON pathwayCodes.nursingAssessmentDocId = nursingAssessments.assessmentId&#xD;
    &#xD;
    INNER JOIN (&#xD;
   SELECT DISTINCT &#xD;
    comp.DOCUMENTID, &#xD;
    CAST (( STUFF((SELECT ', ' + comp1.cpGoals_2H5DV_desc &#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM care1&#xD;
    INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I pln1 WITH(NOLOCK) ON care.v2_CN#Nursing#Care#Plan_YP1RM = pln.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
    INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL comp1 WITH(NOLOCK) ON pln.v2_CCRGBLCrPlnCmpnnt_3XYZL = comp.v2_CCRGBLCrPlnCmpnnt_3XYZL &#xD;
    WHERE comp.DOCUMENTID = comp1.DOCUMENTID AND pln1.v2_CCRGBLCrPlnCmpnnt_3XYZL = pln.v2_CCRGBLCrPlnCmpnnt_3XYZL AND care1.DOCUMENTID = care.DOCUMENTID&#xD;
                      FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Goals'&#xD;
        &#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM care&#xD;
    INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I pln WITH(NOLOCK) ON care.v2_CN#Nursing#Care#Plan_YP1RM = pln.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
    INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL comp WITH(NOLOCK) ON pln.v2_CCRGBLCrPlnCmpnnt_3XYZL = comp.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
    INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = care.DOCUMENTID&#xD;
    INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
    INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = care.DocumentId &#xD;
    )goalLink ON goalLink.DOCUMENTID = comp.DOCUMENTID&#xD;
&#xD;
) as results &#xD;
WHERE results.patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Care Plans&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function printCareplan(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR Searches", 'WD_Care_Plan_Print');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 800, 600, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Print Care Plan</name>
				<index>1</index>
				<action>printCareplan();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display: none; important!</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message>No Care Plans have been created for this patient. Please add via an Assessment form.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.addQueryParameter("documentIdentifier", row.get(7) );&#xD;
application.addQueryParameter("modelId", row.get(8) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Care_Plan');</action>
				<css-class>&lt;%if row.get(7).getOriginalValue&lt;&gt;""%&gt;SELECT&lt;%else%&gt;&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-action>
				<name>Open Care Plan</name>
				<index>1</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.addQueryParameter("documentIdentifier", row.get(9) );&#xD;
application.addQueryParameter("modelId", row.get(10) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Care_Plan');</action>
				<css-class>&lt;%if row.get(9)%&gt;RENAME&lt;%else%&gt;&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pathway</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Goals</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated by</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(12).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>patientId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>assessmentId</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>assessmetnModelId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Draft User</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
   application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Care_Plan');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Get Drug Names</name>
		<data-source-name>java:comp/env/jdbc/orion/genericDrugfile</data-source-name>
		<description>REMOVE -- Complete List of Medications From MIMS Database</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>description</order-by>
		<query-string>Select&#xD;
DF.description&#xD;
,DF.brandName&#xD;
FROM DrugDetail DF&#xD;
ORDER BY description DESC</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Add Medication</name>
				<index>2</index>
				<action />
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-field>
				<name>IncludeBrands</name>
				<index>0</index>
				<default-value />
				<display-name>Drug</display-name>
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("IncludeBrands", "Include Brands")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>LineBreak</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;/br&gt;")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Drug</name>
				<index>2</index>
				<default-value />
				<display-name />
				<input-type>Autocomplete</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/orion/genericDrugfile")%&gt;&lt;%exec config.setSQLQuery("" + SD + "if FormSearch = \"IncludeBrands\" " + ED + " \r\n\r\nSelect\r\nDF.brandName AS Drug\r\n FROM DrugDetail DF\r\n ORDER BY Drug\r\n\r\n" + SD + "ELSE" + ED + "\r\n\r\nSelect\r\nDF.description AS Drug\r\nFROM DrugDetail DF\r\nORDER BY DF.description DESC\r\n\r\n" + SD + "end if" + ED + "")%&gt;&lt;%exec config.setSubmitColumnName("Drug")%&gt;&lt;%exec config.setDisplayColumnName("Drug")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Drug</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Brand</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Global Tasks</name>
		<data-source-name>java:comp/env/jdbc/orion/task</data-source-name>
		<description>Global Forms List - added to globals as a view of all global forms</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>exec &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[sp_ccr_findAllAdhoc] '&lt;%=Context.Patient.Id.MRN%&gt;'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;h2&gt;Global Forms&lt;/h2&gt;&#xD;
&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
.filter { display: none; important! }&#xD;
.container{ height:100px; width:500px; }&#xD;
.container div{&#xD;
 display: inline-block;&#xD;
 border-left: 2px dotted #ccc;&#xD;
 vertical-align: middle;&#xD;
 line-height: 100px;&#xD;
} &#xD;
.column-left{ float: left; width: 32%;  height:100px;}&#xD;
.column-right{ float: right; width: 32%;  height:100px; border-right: 2px dotted #ccc;}&#xD;
.column-center{ display: inline-block; width: 33%; height:100px;}&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'zzzAdd Global Form');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
} &#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>taskIdentifier</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>dataId</name>
				<index>1</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskStatus</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>dueDate</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>resolvedBy</name>
				<index>5</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Type</name>
				<index>6</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if Request.getServletPath().endsWith(".htm")%&gt;&#xD;
&lt;style type="text/css"&gt;&#xD;
.column-left{ float: left; width: 50%;  height:30px;}&#xD;
.column-right{ float: right; width: 40%;  height:30px; }&#xD;
.column-center{ display: inline-block; width: 10%; height:30px;}  &#xD;
.yui-dt-label{ font-size:12px;}  &#xD;
&lt;/style&gt;&#xD;
&lt;%var age = StringUtil.tokenize(AgeFormat.format(Context.Patient.Co.DateTimeOfBirth), " ")%&gt;&#xD;
 &lt;%var ageInt= new java.lang.Integer(age[0])%&gt;&#xD;
&lt;div class="container"&gt; &#xD;
   &lt;div class="column-left"&gt;&#xD;
     &lt;%if Request.getServletPath().endsWith(".htm")%&gt;&#xD;
      &lt;%if row.get(3).getOriginalValue = "New"%&gt;&#xD;
        &lt;%=row.get(2).getOriginalValue%&gt; has not yet been reviewed&#xD;
      &lt;%else%&gt;&#xD;
        &lt;%=row.get(2).getOriginalValue%&gt; &#xD;
      &lt;%end if%&gt;&#xD;
      &lt;%else%&gt;&#xD;
     &lt;%end if%&gt;&#xD;
    &lt;/div&gt;&#xD;
    &lt;div class="column-center"&gt;&#xD;
         &lt;%if Request.getServletPath().endsWith(".htm")%&gt;&#xD;
          &lt;%if row.get(3).getOriginalValue = "New"%&gt;&#xD;
           &lt;a href="#" class="icon-flag-off flag-off-hover"&gt;&lt;/a&gt;&#xD;
          &lt;%else%&gt;&#xD;
          &lt;%if row.get(3).getOriginalValue = "InProgress"%&gt;&#xD;
           &lt;a href="#" class="icon-resolved-partial"&gt;&lt;/a&gt;&#xD;
          &lt;%else%&gt;&#xD;
          &lt;%if row.get(3).getOriginalValue &lt;&gt; "false"%&gt;&#xD;
             &lt;a href="#" class="icon-resolved"&gt;&lt;/a&gt;&#xD;
          &lt;%else%&gt;&#xD;
           &lt;a href="#" class="icon-flag-off flag-off-hover"&gt;&lt;/a&gt;&#xD;
           &lt;%end if%&gt;    &#xD;
          &lt;%end if%&gt;   &#xD;
          &lt;%end if%&gt;&#xD;
          &lt;%else%&gt;&#xD;
         &lt;%end if%&gt;&#xD;
    &lt;/div&gt;&#xD;
    &lt;div class="column-right"&gt;&#xD;
    &lt;%if row.get(5).getOriginalValue &lt;&gt;""%&gt;&#xD;
          &lt;%if row.get(3).getOriginalValue = "Completed"%&gt;&#xD;
              &lt;span class="yui-dt-label"  &gt;Completed at:  &lt;%=row.get(4).getDisplayValue%&gt; &lt;br/&gt;by: &lt;%=row.get(5).getDisplayValue%&gt;  &lt;/span&gt;&#xD;
          &lt;%end if%&gt;  &#xD;
          &lt;%if row.get(3).getOriginalValue = "InProgress"%&gt;&#xD;
              &lt;span class="yui-dt-label"  &gt;In Progress at: &lt;%=row.get(4).getDisplayValue%&gt; &lt;br/&gt;&lt;/span&gt;&#xD;
          &lt;%end if%&gt;&#xD;
          &lt;%if row.get(3).getOriginalValue = "New"%&gt;&#xD;
              &lt;span class="yui-dt-label"  &gt;New at: &lt;%=row.get(4).getDisplayValue%&gt; &lt;br/&gt;&lt;/span&gt;&#xD;
          &lt;%end if%&gt; &#xD;
      &lt;%else%&gt;&#xD;
        &lt;%if row.get(3).getOriginalValue &lt;&gt; "false"%&gt;&#xD;
                  &lt;span class="yui-dt-label"  &gt;New at: &lt;%=row.get(4).getDisplayValue%&gt; &lt;br/&gt;&lt;/span&gt;&#xD;
      &lt;%end if%&gt; &#xD;
    &lt;%end if%&gt; &#xD;
      &lt;/td&gt;&#xD;
    &lt;/div&gt;&#xD;
&lt;/div&gt; &#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)) {&#xD;
  if(row.get(3) == 'Completed' || row.get(3) == 'InProgress')&#xD;
  {&#xD;
    var entryPoint = "Open Single Task";&#xD;
    var openForm = new Application("Task List", entryPoint ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
    location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Global_Tasks');&#xD;
  }&#xD;
} &#xD;
&#xD;
/* Removed CCR-926&#xD;
else {&#xD;
   var entryPoint = "CCR_Add Adhoc Task";&#xD;
   var openForm = new Application("Task List", entryPoint); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplication(openForm);&#xD;
   location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Global_Tasks');&#xD;
}*/</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Immunisation</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Immunisation: Appears as a Windowlet WITH(NOLOCK) ON the Patient Summary</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>orderDate DESC</order-by>
		<query-string>SELECT * FROM (&#xD;
 SELECT&#xD;
  'Immunisation' as title&#xD;
 ,allDoc.documentIdentifier as DocumentId&#xD;
 ,CONVERT(VARCHAR(11),CAST(immstn.AD_data_S4EUD as DATE),106) as DateGiven&#xD;
 ,cast (round(immstn.I_AD_number_VJP4W,2,0) as Numeric(10,0)) as Age&#xD;
 ,immstn.Vaccine_JVVKT as Vaccine&#xD;
 ,immstn.Givenby_V8SAP as GivenBy&#xD;
 ,immstn.Batch_KRY3R as Batch&#xD;
 ,CAST(immstn.Comment_U46KE as varchar) as Comments&#xD;
 ,DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ) as orderDate&#xD;
 ,ISNULL(CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) , CONVERT(varchar(20), DATEADD(minute, metaData.created_2CIZE_Ofst,metaData.CREATED_2CIZE), 113)) as Date&#xD;
 ,CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author"&#xD;
 ,'uuid_' + document.[modelId] AS modelId&#xD;
 ,metaData.cD_userId_PLU2#  as 'DraftUser'&#xD;
 ,'true' as 'FormModeLock' &#xD;
   from V_DOCUMENT document&#xD;
  INNER JOIN v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId &#xD;
  INNER JOIN V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
  INNER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = metaData.v2_DocumentMetaData_0Z14K&#xD;
  INNER JOIN v2_CCR#Immunisation_GH737 imm WITH(NOLOCK) ON imm.DOCUMENTID = document.documentId&#xD;
  INNER JOIN v2_CCRImns_GH737_Immnstn_#0SHF immstn WITH(NOLOCK) ON imm.v2_CCR#Immunisation_GH737 = immstn.v2_CCR#Immunisation_GH737   &#xD;
WHERE (metaData.status_TDES0 = 'FINAL' or metaData.status_TDES0 = 'DRAFT') &#xD;
        AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
UNION ALL&#xD;
 SELECT &#xD;
  'Immunisation' as title&#xD;
 ,null as DocumentId&#xD;
 ,null as DateGiven&#xD;
 ,null as Age&#xD;
 ,'' as Vaccine&#xD;
 ,'' as GivenBy&#xD;
 ,'' as Batch&#xD;
 ,'' as Comments&#xD;
 ,null as orderDate&#xD;
 ,null as Date&#xD;
 ,'' as "Author"&#xD;
 ,'' as modelid&#xD;
 ,'' as Draftuser&#xD;
 ,'true' as FormModeLock&#xD;
 )as results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
a.add-icon{ display:none; important!}&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Immunisations&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormMed(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Immunisation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
 &lt;/script&gt;</custom-html>
			<display-name>Immunisations</display-name>
			<filter-button>
				<name>Add Immunisation</name>
				<index>0</index>
				<action>loadFormMed();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Immunisation</name>
				<index>0</index>
				<action>if (!row.get(1)) {&#xD;
   var entryPoint = "Add New Immunisation";&#xD;
   var openForm = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");   &#xD;
}else {&#xD;
   var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
   application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Immunisations');</action>
				<css-class>&lt;%if row.get(1).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Age or Date Given</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;&#xD;
&lt;%=(html)row.get(3).getOriginalValue%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Age</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Vaccine</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Given by</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;span title="&lt;%=(html)value%&gt;"&gt; &lt;%=StringUtil.truncate(value , 50)%&gt;  &lt;/span&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Batch</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>orderDate</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(10).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (!row.get(1)) {&#xD;
   var entryPoint = "Add New Immunisation";&#xD;
   var openForm = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");   &#xD;
}else {&#xD;
   var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
   application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Immunisations');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Immunisation Editable Summary</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Immunisation: Appears as an editable summary.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>orderDate DESC</order-by>
		<query-string>SELECT * FROM (&#xD;
 SELECT&#xD;
  'Immunisation' as title&#xD;
 ,allDoc.documentIdentifier as DocumentId&#xD;
 ,CONVERT(VARCHAR(11),CAST(immstn.AD_data_S4EUD as DATE),105) as DateGiven&#xD;
 ,cast (round(immstn.I_AD_number_VJP4W,2,0) as Numeric(10,0)) as Age&#xD;
 ,immstn.Vaccine_JVVKT as Vaccine&#xD;
 ,immstn.Givenby_V8SAP as GivenBy&#xD;
 ,immstn.Batch_KRY3R as Batch&#xD;
 ,CAST(immstn.Comment_U46KE as varchar) as Comments&#xD;
 ,DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ) as orderDate&#xD;
 ,ISNULL(CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) , CONVERT(varchar(20), DATEADD(minute, metaData.created_2CIZE_Ofst,metaData.CREATED_2CIZE), 113)) as Date&#xD;
 ,CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author"&#xD;
 ,'uuid_' + document.[modelId] AS modelId&#xD;
 ,metaData.cD_userId_PLU2#  as 'DraftUser'&#xD;
 ,'true' as 'FormModeLock' &#xD;
   from V_DOCUMENT document&#xD;
  INNER JOIN v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId &#xD;
  INNER JOIN V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
  INNER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = metaData.v2_DocumentMetaData_0Z14K&#xD;
  INNER JOIN v2_CCR#Immunisation_GH737 imm WITH(NOLOCK) ON imm.DOCUMENTID = document.documentId&#xD;
  INNER JOIN v2_CCRImns_GH737_Immnstn_#0SHF immstn WITH(NOLOCK) ON imm.v2_CCR#Immunisation_GH737 = immstn.v2_CCR#Immunisation_GH737   &#xD;
WHERE (metaData.status_TDES0 = 'FINAL' or metaData.status_TDES0 = 'DRAFT') &#xD;
     AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
 )as Immunistaions</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
a.add-icon{ display:none; important!}&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Immunisations&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormMed(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Immunisation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
 &lt;/script&gt;</custom-html>
			<display-name>Immunisations</display-name>
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Add Immunisation</name>
				<index>1</index>
				<action>loadFormMed();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Immunisation</name>
				<index>0</index>
				<action>if (!row.get(1)){&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add Immunisation');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=EP+%2D+Immunisations');</action>
				<css-class>RENAME</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Age or Date Given</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;&#xD;
&lt;%=(html)row.get(3).getOriginalValue%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Age</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Vaccine</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Given by</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Batch</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>orderDate</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(10).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (!row.get(1)) {&#xD;
   var entryPoint = "Add New Immunisation";&#xD;
   var openForm = new Application("Healthcare pathways - CCR", entryPoint ); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");   &#xD;
}else {&#xD;
   var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
   application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Immunisations');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - LifestyleFactors</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Lifestyle Factors: appears as a Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>SELECT TOP 1 * FROM (&#xD;
   SELECT&#xD;
      FormInfo.[documentIdentifier] AS DocumentId,&#xD;
      CONVERT(varchar(20), DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst,meta.dateSubmitted_L0HOZ), 113) as 'Last Updated Date And Time',&#xD;
      ISNULL(Tobacco.SmokingStatus_AB5ZW_desc, 'No smoking status recorded') AS "Smoking Status",&#xD;
      ISNULL(Habits.AlchlCnsmptnYN_IXF00_desc, 'No alcohol consumption recorded') as "Alcohol Intake",&#xD;
      ISNULL(Habits.DrugAddictionYN_VL85$_desc, 'No drug addiction recorded') AS "Substance Use",&#xD;
      'uuid_' + FormInfo.[modelId] AS ModelId, CASE WHEN meta.sD_userId_7FQIQ != null THEN null ELSE 'true' END as formModeLock, 'Lifestyle Factors' as taskType,&#xD;
      ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)) ,meta.sD_userId_7FQIQ) "Author",&#xD;
      meta.cD_userId_PLU2#  as 'DraftUser'&#xD;
   FROM v2_Habits_#LNS4 Habits&#xD;
   INNER JOIN v2_Habits_#LNS4_TbccUsg_PNK6$ HabTob WITH(NOLOCK) ON Habits.v2_Habits_#LNS4 = HabTob.v2_Habits_#LNS4&#xD;
   INNER JOIN v2_CCR#GL#Tobacco_U9TXQ Tobacco WITH(NOLOCK) ON Tobacco.v2_CCR#GL#Tobacco_U9TXQ = HabTob.v2_CCR#GL#Tobacco_U9TXQ &#xD;
   INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = Habits.DocumentId&#xD;
   INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = forminfo.documentId &#xD;
   WHERE (meta.status_TDES0 = 'FINAL' or meta.status_TDES0 = 'DRAFT')&#xD;
    AND Habits.[p_pI_id_#JUT#] IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
   UNION ALL&#xD;
   SELECT null AS DocumentId&#xD;
   ,'' as [DateTime]&#xD;
   ,'' AS "Smoking Status"&#xD;
   ,'' AS "Alcohol Intake"&#xD;
   ,'' AS "Substance Use"&#xD;
   ,'' AS ModelId&#xD;
   ,'true' AS formModeLock&#xD;
   ,'Lifestyle Factors' as taskType&#xD;
   ,'' as Author&#xD;
   ,'' as DraftUser&#xD;
) as result&#xD;
ORDER BY 2 desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Lifestyle Factors</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none; important!</style>
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>1</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Lifestyle Factors</name>
				<index>0</index>
				<action>if (row.get(0)){ &#xD;
    //Create task item&#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
    //Create task item &#xD;
    var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Observation'); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Lifestyle Factors');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date And Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Smoking Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Alcohol Intake</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Substance Use</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(9).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
    //Create task item&#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
//Create task item &#xD;
    var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Observation'); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Lifestyle Factors');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Global - Medical Hx</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Medical History: Appears as a Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 DESC</order-by>
		<query-string>SELECT * FROM (&#xD;
  SELECT &#xD;
      'Medical' as title &#xD;
      ,di.documentIdentifier as DocumentId&#xD;
      ,'All Form Documents' as "namespace"&#xD;
      ,'' as "Category"&#xD;
      ,'' as "SubCategory"&#xD;
      ,DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ ) as datetimeCompleted&#xD;
      , cast (medComp.MedHist_#2ROS as varchar(200)) as MedicalProblem &#xD;
     ,CASE&#xD;
     WHEN medComp.MPAD_type_UUN$N_cde = 'at_age' THEN cast(CONVERT(DECIMAL(3,0),medComp.MPAD_number_IXBYG) as varchar(200)) &#xD;
     ELSE medComp.MPAD_data_ALRSP&#xD;
     END as inDate&#xD;
      , cast( medComp.Detailsofmedicalproblem_Y#IDR as varchar(200) ) as DetailsOfProblem&#xD;
      , ISNULL(medComp.ActiveInActive_KGFOU_desc,'') as StatusOfMedicalCondition&#xD;
      , medComp.ActiveInActive_KGFOU_desc as currentDate&#xD;
      , medComp.Srcfnfrmtn_ZNUZH_desc as SourceInformation&#xD;
      , CAST( medComp.Comments_W8R3E as varchar(200) ) as Comments   &#xD;
      , ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "Author"&#xD;
      ,meta.cD_userId_PLU2#  as 'DraftUser'&#xD;
      ,'uuid_' + FormInfo.[modelId] AS modelId&#xD;
      ,'true' as formModeLock &#xD;
FROM v2_CCR#GBL#Medical_JNME3 medComp&#xD;
      INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = medComp.DocumentId&#xD;
      INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = medComp.DOCUMENTID&#xD;
      INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
      INNER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K &#xD;
WHERE 1=1 AND (meta.status_TDES0 = 'FINAL' OR meta.status_TDES0 = 'DRAFT')&#xD;
    AND pat.idNumber_9LV7R  IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
UNION ALL&#xD;
 SELECT &#xD;
      'Medical' as title &#xD;
      ,null as DocumentId&#xD;
      ,'' as [namespace]&#xD;
      ,'' as cat&#xD;
      ,'' as sub&#xD;
      ,'' as datetimeCompleted&#xD;
      ,'' as MedicalProblem&#xD;
      ,'' inDate&#xD;
      ,'' as DetailsOfProblem&#xD;
      ,'' as StatusOfMedicalCondition&#xD;
      ,'' as [Status]&#xD;
      ,'' as [Source]&#xD;
      ,'' as [Comments]&#xD;
      ,'' as updatedBy&#xD;
      ,'' as DraftUser&#xD;
      ,'' AS modelId&#xD;
      ,'true' as formModeLock &#xD;
) AS medHx</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Medical History&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormMed(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Medical History');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
 function loadFormSurg(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Surgical History');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
 function loadFormObs(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Medical History</display-name>
			<filter-button>
				<name>Add Medical History</name>
				<index>0</index>
				<action>loadFormMed();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Medical History</name>
				<index>0</index>
				<action>if (!row.get(1)){&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Medical History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medical History');</action>
				<css-class>&lt;%if row.get(1).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(1).getOriginalValue&lt;&gt;""%&gt;&#xD;
&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medical Condition</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;&#xD;
&lt;!--icon-information information-hover--&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>In Date</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;!--&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;--&gt;&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;span title="&lt;%=(html)value%&gt; "&gt;&lt;%=(html)value%&gt;   &lt;/span&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status of Medical Condition</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(14).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (!row.get(1)){&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Medical History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medical History');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Medication Management</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Medication Management: Appears as a Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT * FROM (&#xD;
  SELECT [id]&#xD;
      ,DATEADD(SECOND, [durationStartDate]/1000 ,'1970/1/1')+1 [durationStartDate] &#xD;
      ,[controlledDrug]&#xD;
      ,[brandName]&#xD;
      ,[prescribingTerm]&#xD;
      , dose +' ('+ doseUnit +')' as dose&#xD;
      ,[additionalInstructions]&#xD;
      ,[comments] &#xD;
      ,[frequency] &#xD;
      ,[indication] &#xD;
      ,[prn]&#xD;
      ,[recordState] &#xD;
      ,[route]&#xD;
      ,[status]&#xD;
      ,DATEADD(MINUTE, DATEDIFF(minute, getutcdate(), getdate()), dateadd( S, (transactionDate/1000), '1970-1-1')) as orderDate&#xD;
      ,CONVERT(varchar(20), DATEADD(MINUTE, DATEDIFF(minute, getutcdate(), getdate()), dateadd( S, (transactionDate/1000), '1970-1-1')),113) as LastUpdateTime&#xD;
      ,CAST([prescriberIdentifier] as varchar(20))  "Author"&#xD;
      ,patientIdentifier&#xD;
      ,getDate() as placeDateHolder&#xD;
  FROM &lt;%=AppVars.db_CWSMedMan%&gt;.[dbo].[MedicationPrescription] &#xD;
WHERE 1=1&#xD;
AND [patientIdentifier] IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%if Request.recordState%&gt;&#xD;
    AND recordState = 'CURRENT'&#xD;
    AND status IN ('ACTIVE', 'CHANGED')&#xD;
 &lt;%end if%&gt;    AND recordState NOT IN ('DRAFT','SUPERCEDED')&#xD;
UNION ALL&#xD;
    SELECT  &#xD;
       null [id]&#xD;
      ,null [durationStartDate] &#xD;
      ,null [controlledDrug]&#xD;
      ,null [brandName]&#xD;
      ,null [prescribingTerm]&#xD;
      ,null as dose&#xD;
      ,null [additionalInstructions]&#xD;
      ,null [comments] &#xD;
      ,null [frequency] &#xD;
      ,null [indication] &#xD;
      ,null [prn]&#xD;
      ,null [recordState] &#xD;
      ,null [route]&#xD;
      ,null [status]&#xD;
      ,null orderDate&#xD;
      ,null LastUpdateTime&#xD;
      ,null "Author"&#xD;
      ,null patientIdentifier&#xD;
      ,null placeHolderDate&#xD;
) as results&#xD;
ORDER BY 16 DESC, CASE WHEN results.[recordState] = 'CURRENT' THEN 0 ELSE 1 END ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
 h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
 &lt;/style&gt;&#xD;
&lt;h2&gt;Medications Summary&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Medication Management", "Medication");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024,1150, null, null,"resizable=yes;");&#xD;
   submitFilter();  &#xD;
&#xD;
parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medications_max&amp;recordState=true');&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Add Medication</name>
				<index>1</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Medications Management</name>
				<index>0</index>
				<action>var application = new Application( "Medication Management", "Medication" );&#xD;
 application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,800,1150 ,null,null,"resizable=yes");&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medications');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Start Date</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(1).getOriginalValue &lt;&gt;""%&gt;&lt;%=(html)DateFormat.format(value, "dd-MMM-yyyy")%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Controlled</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Brand</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medication</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Dose</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Additional Instructions</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Frequency</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Indication</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PRN</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>RecordState</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Route</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>orderDate</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>placeDateHolder</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Medication Management", "Medication" );&#xD;
//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,1024,1150,null,null,"resizable=yes");&#xD;
//form.openEntryPointWithBreadCrumb('Medication Management','Medications', row.getSecureInformationToken());&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medications&amp;recordState=true');&#xD;
//parent.parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=DR_CCR Dynamic Patient Summary');&#xD;
parent.window.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medications_max&amp;recordState=true');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Medication_Orders</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Medication Orders: Appears as a Global</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
        document.documentIdentifier as "documentId",&#xD;
        'All Form Documents' as "namespace",&#xD;
        TITLE_VX#6G as "Title",&#xD;
        '' as "Category",&#xD;
        SUBCATEGORY_GCJLK as "SubCategory",&#xD;
        DATEADD(MINUTE, metaData.dateSubmitted_L0HOZ_Ofst, metaData.dateSubmitted_L0HOZ ) AS UpdatedDate,&#xD;
        CREATED_2CIZE_OFST as "DateOffset",&#xD;
        STATUS_TDES0 as "Custom",&#xD;
        'Medication Order' as taskType,&#xD;
        'uuid_' + document.modelId as modelId, &#xD;
        '' as Notice, &#xD;
        'true' as formModeLock ,&#xD;
        ISNULL(trorder.DoctorsName_O1XEM,'') as 'Clinician Name',&#xD;
        CAST(trorder.OrderNote_NW2SU as varchar(20)) as Note,&#xD;
        CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author",&#xD;
        trorder.DateString_0OZ4A AS DateTaken,&#xD;
        metaData.cD_userId_PLU2#  as 'DraftUser',&#xD;
        CASE&#xD;
            WHEN DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &lt; 0&#xD;
                THEN 'Expired'&#xD;
            WHEN DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &gt;= 0 AND DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &lt; 30&#xD;
                THEN 'Expiring'&#xD;
            ELSE 'Valid'&#xD;
        END as TreatmentStatus,&#xD;
        trorder.enddate_13HNS AS EndDate,&#xD;
        fasAT.uniqueId as formsInternalId&#xD;
      FROM &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V_DOCUMENT document&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K &#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBL#TreatmentOrder_N1V7I trorder WITH(NOLOCK) ON trorder.documentid = allDoc.documentId&#xD;
      inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_CCRGBLMdctnOrdr_76$RH trorderlink WITH(NOLOCK) ON trorderlink.documentid = trorder.documentId &#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_CCR#LMO_76$RH_mdcOrd_76$RH medor WITH(NOLOCK) ON medor.v2_CCRGBLMdctnOrdr_76$RH = trorderlink.v2_CCRGBLMdctnOrdr_76$RH&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBL#TreatmentOrder_N1V7I gtror WITH(NOLOCK) ON gtror.v2_GBL#TreatmentOrder_N1V7I = medor.v2_GBL#TreatmentOrder_N1V7I&#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBLTrOr_N1V7I_TOSD_R4MWQ  ltror WITH(NOLOCK) ON gtror.v2_GBL#TreatmentOrder_N1V7I = ltror.v2_GBL#TreatmentOrder_N1V7I &#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBLTrOr_N1V7I_atchm_H4KZ5LH  atchm WITH(NOLOCK) ON ltror.v2_GBLTrOr_N1V7I_TOSD_R4MWQ = atchm.v2_GBLTrOr_N1V7I_TOSD_R4MWQ  &#xD;
      LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].[FAS_Attachment] fasAT WITH(NOLOCK) ON fasAT.uniqueId = atchm.formsInternalId_MXZPJ&#xD;
WHERE (metaData.STATUS_TDES0 = 'FINAL' OR metaData.STATUS_TDES0 = 'DRAFT') &#xD;
        AND metaData_patient.IDNUMBER_9LV7R  IN ( &lt;%=AppVars.get("patientURNList")%&gt; ) &#xD;
	 AND &#xD;
     UPPER(TITLE_VX#6G) LIKE UPPER('%Medication Order%')&#xD;
     ORDER BY UpdatedDate DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Medication Orders&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormTreatment(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Medication Order');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Medication Order</name>
				<index>0</index>
				<action>loadFormTreatment();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none; important!}&#xD;
display:none; important!}&#xD;
display:none; important!}&#xD;
display:none; important!</style>
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>30</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Offset</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician Name</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
  &lt;%=(html)row.get(16).getOriginalValue %&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DateTaken</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>TreatmentStatus</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>End Date</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
 &lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy" )%&gt;&#xD;
&lt;%end if%&gt;&#xD;
  &lt;%if row.get(17).getOriginalValue = "Valid"%&gt;&#xD;
  &lt;%elseif row.get(17).getOriginalValue = "Expiring"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #e88b00; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;EXPIRING&lt;/span&gt;&#xD;
  &lt;%elseif row.get(17).getOriginalValue = "Expired"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #be0000; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;EXPIRED&lt;/span&gt; &#xD;
  &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>19</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(19).getOriginalValue &lt;&gt; null%&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
 &lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medication_Order');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Global - Observations and Vitals</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Observations and vital signs: Appears as a Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>2 desc</order-by>
		<query-string>SELECT * FROM (&#xD;
	SELECT  FormInfo.[documentIdentifier] AS DocumentId&#xD;
		,DATEADD(MINUTE, obs.LastAssessment_P5JE0_Ofst, obs.LastAssessment_P5JE0 ) as datetimeCompleted&#xD;
		,'uuid_' + FormInfo.[modelId] AS ModelId&#xD;
		,'BP: ' + cast(ISNULL(bloodPr.BloodPressure_4DSD#,'0') as varchar)   + 'mmHg' +&#xD;
		', Pulse: ' + cast(ISNULL(PulseRateR_BY5S0,0) as varchar)   +&#xD;
		', SpO2: ' + cast(ISNULL(respInfo.SpO2_REJOR,0) as varchar)   + '%' +&#xD;
		', RR: ' + cast(ISNULL(respInfo.RespiratoryRate_W9PO8,0) as varchar)   +&#xD;
		', Temp: ' + cast(CAST(ISNULL(Temperature_O2Q6$,0) AS DECIMAL(10,1))  as varchar) + 'C' as [LoC] &#xD;
		,obs.EWS_Q1TV0 as [EWS]&#xD;
		,meta.sD_userId_7FQIQ  AS ClinicianId&#xD;
		,'' as notice&#xD;
		,DATEADD(MINUTE, FormInfo.dateSubmitted_Ofst, FormInfo.dateSubmitted ) as lastUpdatedDate  &#xD;
		, CAST (meta.sD_userId_7FQIQ as  varchar)  "ClinicianName"&#xD;
		,'true' as formModeLock &#xD;
		,'Observations Vital signs' as taskType&#xD;
		,'Observations Vital signs' as [namespace]&#xD;
		,'Observations Vital signs' as title&#xD;
		,'Updated by ' + ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) as cat&#xD;
		,'BP: ' + cast(ISNULL(bloodPr.BloodPressure_4DSD#,'0') as varchar)   + 'mmHg' +&#xD;
		', Pulse: ' + cast(ISNULL(PulseRateR_BY5S0,0) as varchar)   +&#xD;
		', SpO2: ' + cast(ISNULL(respInfo.SpO2_REJOR,0) as varchar)   + '%' +&#xD;
                ', RR: ' + cast(ISNULL(respInfo.RespiratoryRate_W9PO8,0) as varchar)   +&#xD;
		', Temp: ' + cast(CAST(ISNULL(Temperature_O2Q6$,0) AS DECIMAL(10,1)) as varchar) +  ' C' as sub --, Level: ' + cast(ISNULL(obs.LevelLK_9KU1A_desc,'') as varchar) as sub&#xD;
		,'EWS: ' + CASE WHEN obs.EWS_Q1TV0 IS NULL THEN '' ELSE CAST(obs.EWS_Q1TV0 AS VARCHAR(20)) END  as custom  &#xD;
		, CAST (meta.sD_userId_7FQIQ as  varchar)  "Author"&#xD;
		, meta.cD_userId_PLU2# as DraftUser 	&#xD;
	FROM v2_CCRObsrvtnVtlSgns_YNEQB obs&#xD;
	LEFT OUTER JOIN v2_BMI_SKZT6 bmi WITH(NOLOCK) ON bmi.DOCUMENTID = obs.DOCUMENTID&#xD;
	LEFT OUTER JOIN v2_CCROVS_YNEQB_Rsprtry_9QC3K resp WITH(NOLOCK) ON obs.v2_CCRObsrvtnVtlSgns_YNEQB = resp.v2_CCRObsrvtnVtlSgns_YNEQB&#xD;
	LEFT OUTER JOIN v2_Respiration_2TQ1Q respInfo WITH(NOLOCK) ON respInfo.v2_Respiration_2TQ1Q = resp.v2_Respiration_2TQ1Q&#xD;
	LEFT OUTER JOIN v2_CCROVS_YNEQB_Tmprtr_V1L6X temp WITH(NOLOCK) ON obs.v2_CCRObsrvtnVtlSgns_YNEQB = temp.v2_CCRObsrvtnVtlSgns_YNEQB&#xD;
	LEFT OUTER JOIN v2_Temperature_APSGA tempInfo WITH(NOLOCK) ON temp.v2_Temperature_APSGA = tempInfo.v2_Temperature_APSGA&#xD;
	LEFT OUTER JOIN v2_CCROVS_YNEQB_BldPrsr_HYIP# blood WITH(NOLOCK) ON blood.v2_CCRObsrvtnVtlSgns_YNEQB = obs.v2_CCRObsrvtnVtlSgns_YNEQB&#xD;
	LEFT OUTER JOIN v2_BloodPressure_2I8M5 bloodInfo WITH(NOLOCK) ON blood.v2_BloodPressure_2I8M5 = bloodInfo.v2_BloodPressure_2I8M5&#xD;
        LEFT OUTER JOIN v2_BldPrsr_2I8M5_BlPrRp_XP6GQ bloodPr WITH(NOLOCK) ON bloodPr.v2_BloodPressure_2I8M5 = blood.v2_BloodPressure_2I8M5&#xD;
	LEFT OUTER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = obs.DocumentId&#xD;
	LEFT OUTER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = forminfo.documentId&#xD;
	LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K &#xD;
	WHERE (meta.status_TDES0 = 'FINAL' or meta.status_TDES0 = 'DRAFT')&#xD;
	AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
	UNION ALL &#xD;
&#xD;
	SELECT null AS DocumentId&#xD;
		,'' as datetimeCompleted&#xD;
		,'' AS ModelId&#xD;
		,'' AS LoC&#xD;
		,null AS EWS&#xD;
		,'' AS UserId&#xD;
		,'' AS notice&#xD;
		,'' as lastUpdatedDate  &#xD;
		,'' AS ClinicalName&#xD;
		,'true' as formModeLock &#xD;
		,'Observations Vital signs' as taskType&#xD;
		, '' as [namespace]&#xD;
		, '' as title&#xD;
		, '' as cat&#xD;
		, '' as sub&#xD;
		, '' as custom&#xD;
		, '' as Author&#xD;
		, '' as DraftUser &#xD;
) AS result</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&#xD;
&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Vital Signs and Observations&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Observations Vitals');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
} &#xD;
&lt;/script&gt;</custom-html>
			<display-name>Observations Vital Signs</display-name>
			<filter-button>
				<name>Add Vital Signs and Observations</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>10</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Vital Signs and Observations</name>
				<index>0</index>
				<action>if (!row.get(0)) {&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Observations Vitals');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
&#xD;
}&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Vital Signs and Observations');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Collected</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue &lt;&gt; ""%&gt;&#xD;
&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>EWS</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>updated by</name>
				<index>5</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice for Patient</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(4).getOriginalValue &lt;&gt; null%&gt;&#xD;
 &lt;%var zero = new java.lang.Integer("0") %&gt;&#xD;
 &lt;%var four = new java.lang.Integer("4") %&gt;&#xD;
 &lt;%var five = new java.lang.Integer("5") %&gt;&#xD;
 &lt;%var seven = new java.lang.Integer("7") %&gt; &#xD;
 &lt;%if row.get(4).getOriginalValue = zero%&gt;&#xD;
    &lt;table width="170" style="background-color:#D0D0D0;position:relative;top:-5px;"&gt;&lt;tr&gt;&lt;td style="padding:5px;text-align:center;"&gt;Monitoring max 12hrs&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xD;
 &lt;%else%&gt; &#xD;
 	&lt;%if row.get(4).getOriginalValue &gt;= zero &amp;&amp; row.get(4).getOriginalValue &lt; five%&gt;&#xD;
   		&lt;table width="170" style="background-color:#33FF66;position:relative;top:-5px;"&gt;&lt;tr&gt;&lt;td style="padding:5px;text-align:center;"&gt;Monitoring min 4-6hrs&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xD;
 	&lt;%else%&gt; &#xD;
	 	&lt;%if row.get(4).getOriginalValue &gt;= four &amp;&amp; row.get(4).getOriginalValue &lt; seven%&gt;&#xD;
	   		&lt;table width="170" style="background-color:orange;position:relative;top:-5px;"&gt;&lt;tr&gt;&lt;td style="padding:5px;text-align:center;"&gt;Monitoring min 1h&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xD;
	 	&lt;%else%&gt;  &#xD;
		   	&lt;table width="170" style="background-color:#FF3333;position:relative;top:-5px;"&gt;&lt;tr&gt;&lt;td style="padding:5px;text-align:center;"&gt;Monitoring continuous&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; &#xD;
 		&lt;%end if%&gt;  &#xD;
 	&lt;%end if%&gt;  &#xD;
 &lt;%end if%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue &lt;&gt; ""%&gt;&#xD;
&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(17).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>9</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>10</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>12</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>13</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>14</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>15</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Author</name>
				<index>16</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>17</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (!row.get(0)) {&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Observations Vitals');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
&#xD;
}else{&#xD;
   var application = new Application("Healthcare pathways - CCR", "View Document"); &#xD;
   application.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   concerto.openApplicationInModalDialog(application, 1024, 800, null, null,"resizable=yes;");&#xD;
}&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Vital Signs and Observations');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Obstetric Hx</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Obstetric History: Appears as a Global. - MM</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>obsHx.dateTimeCompleted Desc</order-by>
		<query-string>SELECT * from (&#xD;
SELECT &#xD;
    DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst , meta.dateSubmitted_L0HOZ) AS dateTimeCompleted&#xD;
	, 'G:' + obshx.GScore_OYJ8$_desc + ' , ' + 'P:' + obshx.PScore_#FVF$_desc as title&#xD;
	,di.documentIdentifier as DocumentId&#xD;
	,obshx.lastLNMP_BSRUF as LNMPDate&#xD;
	,obshx.GScore_OYJ8$_desc as Gravidity&#xD;
	,obshx.PScore_#FVF$_desc as Parity&#xD;
 	,ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "updatedBy"&#xD;
    ,'uuid_' + FormInfo.[modelId] as modelId&#xD;
    ,'true' as formModeLock&#xD;
    ,meta.cD_userId_PLU2#  as 'DraftUser'&#xD;
FROM v2_MACHGBLIntlAssssmnt_BROE2 mach&#xD;
INNER JOIN v2_MAC#LIA_BROE2_obHsCm_BQ7G3 obslink WITH(NOLOCK) ON mach.v2_MACHGBLIntlAssssmnt_BROE2 = obslink.v2_MACHGBLIntlAssssmnt_BROE2&#xD;
INNER JOIN v2_CNCONTObsttrcHstry_$B4VI obshx WITH(NOLOCK) ON obshx.v2_CNCONTObsttrcHstry_$B4VI = obslink.v2_CNCONTObsttrcHstry_$B4VI&#xD;
INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = mach.DocumentId&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = mach.DOCUMENTID&#xD;
INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
INNER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K &#xD;
WHERE (meta.status_TDES0 = 'FINAL' OR meta.status_TDES0 = 'DRAFT') &#xD;
	AND pat.idNumber_9LV7R  IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
UNION ALL&#xD;
 SELECT &#xD;
      null as DateTimeCompleted&#xD;
      ,'' as title &#xD;
      ,null as DocumentId&#xD;
      ,null as LNMPDate&#xD;
      ,'' Gravidity&#xD;
      ,'' as Parity&#xD;
      ,'' as updatedBy&#xD;
      ,'' AS modelId&#xD;
      ,'true' as formModeLock &#xD;
      ,''  as DraftUser&#xD;
) AS obsHx</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Obstetric History&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
  function loadFormObs(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Obstetric History</display-name>
			<filter-button>
				<name>Add Obstetric History</name>
				<index>0</index>
				<action>&lt;%if Context.Patient.Co.Sex = "F" || Context.Patient.Co.Sex = "Female"%&gt; &#xD;
  loadFormObs();  &#xD;
&lt;%else%&gt;&#xD;
if (confirm('Warning: The patient in context is not a Female patient. Do you wish to continue?')) {&#xD;
   loadFormObs();&#xD;
  }&#xD;
&lt;%end if%&gt;</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Obstetric History</name>
				<index>0</index>
				<action>&lt;%if Context.Patient.Co.Sex = "F" || Context.Patient.Co.Sex = "Female"%&gt;&#xD;
/* alert(row.get(2)); */&#xD;
if (row.get(2)){&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
  }else{&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
  }&#xD;
&lt;%else%&gt;&#xD;
if (confirm('Warning: The patient in context is not a Female patient. Do you wish to continue?')) {&#xD;
if (row.get(2)){&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
  }else{&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
  }&#xD;
}&#xD;
&lt;%end if%&gt;&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Obstectric History');</action>
				<css-class>&lt;%if row.get(2).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Gravidity and Parity</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>LNMP</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Gravidity</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Parity</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(9).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>&lt;%if Context.Patient.Co.Sex = "F" || Context.Patient.Co.Sex = "Female"%&gt;&#xD;
/* alert(row.get(2)); */&#xD;
if (row.get(2)){&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
  }else{&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
  }&#xD;
&lt;%else%&gt;&#xD;
if (confirm('Warning: The patient in context is not a Female patient. Do you wish to continue?')) {&#xD;
if (row.get(2)){&#xD;
      var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
      application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
      concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes"); &#xD;
  }else{&#xD;
      var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
      openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
  }&#xD;
}&#xD;
&lt;%end if%&gt;&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Obstectric History');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - ProgressNote</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Progress Note: Appears as Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>7 DESC</order-by>
		<query-string>SELECT DISTINCT * FROM (  &#xD;
SELECT&#xD;
  document.documentIdentifier as "documentId",&#xD;
  'All Form Documents' as "namespace",&#xD;
  TITLE_VX#6G as "Title",&#xD;
  CASE pnstr.progressNoteType_8KS4J_cde&#xD;
  WHEN 'isoap' THEN 'ISOAP Format by '&#xD;
  WHEN 'case' THEN 'Case Report by '&#xD;
  ELSE 'Standard by '&#xD;
  END + CAST(metaData.sD_userId_7FQIQ as varchar(20)) as "Category",&#xD;
  CASE pnstr.progressNoteType_8KS4J_cde &#xD;
      WHEN 'isoap' THEN  'Plan of Care: ' + CAST(pnstr.Planofcare_4HFPG as varchar(10)) &#xD;
      WHEN 'Standard' THEN &#xD;
           'Note: '+ CAST(pnstr.Comments_EMXXM as varchar(20))&#xD;
      ELSE&#xD;
      'Significant Other: ' +  CAST(pnstr.SignificantOther_V90WF as varchar(20)) +&#xD;
      ', Reasons for referral to Case Conference: ' +  CAST(pnstr.RsnsfrrfrrltCsCnfrnc_ZTPVE as varchar(50)) &#xD;
      END&#xD;
   as "SubCategory",&#xD;
  ISNULL(CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) , CONVERT(varchar(20), DATEADD(minute, metaData.created_2CIZE_Ofst,metaData.CREATED_2CIZE), 113)) as "Date"&#xD;
,DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ) as orderDate&#xD;
  ,CREATED_2CIZE_OFST as "DateOffset",&#xD;
  STATUS_TDES0 as "Custom",&#xD;
'Progress Note'  as taskType,&#xD;
metaData.cD_userId_PLU2# as 'DraftUser',&#xD;
'uuid_' + document.modelId as modelId,&#xD;
CAST(pnstr.progressNoteType_8KS4J_desc as varchar(255)) as progressType, &#xD;
CASE pnstr.progressNoteType_8KS4J_cde &#xD;
      WHEN 'isoap' THEN  'Plan of Care: ' + CAST(pnstr.Planofcare_4HFPG as varchar(50)) &#xD;
      WHEN 'Standard' THEN &#xD;
           'Note: '+ CAST(pnstr.Comments_EMXXM as varchar(50))&#xD;
      ELSE&#xD;
      'Significant Other: ' +  CAST(pnstr.SignificantOther_V90WF as varchar(50)) +&#xD;
      ', Reasons for referral to Case Conference: ' +  CAST(pnstr.RsnsfrrfrrltCsCnfrnc_ZTPVE as varchar(50)) &#xD;
      END&#xD;
 as comments, &#xD;
CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author", &#xD;
document.documentIdentifier  as docId&#xD;
,nursingAssessments.assessmentId as assessmentId&#xD;
,nursingAssessments.modelId as assessmentModelId&#xD;
,CASE WHEN ISNULL(CAST(attch.formsInternalId_MXZPJ as varchar) ,'') = '' THEN 0 ELSE 1 END  formsInternalId&#xD;
from V_DOCUMENT document&#xD;
  join v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
  inner join v2_CCR#GBL#Progress#Note_G#X$2 pn WITH(NOLOCK) ON document.documentId = pn.DOCUMENTID&#xD;
  inner join v2_CCR#LPN_G#X$2_adPrgrs_BPNSF pnlink WITH(NOLOCK) ON pnlink.v2_CCR#GBL#Progress#Note_G#X$2 = pn.v2_CCR#GBL#Progress#Note_G#X$2&#xD;
  inner join v2_CCRGBLPrgrssNtStr_M$F1Z pnstr WITH(NOLOCK) ON pnstr.v2_CCRGBLPrgrssNtStr_M$F1Z = pnlink.v2_CCRGBLPrgrssNtStr_M$F1Z&#xD;
  LEFT OUTER JOIN v2_CCR#PNS_M$F1Z_SprDcm_BDP5P sprpg WITH(NOLOCK) ON sprpg.v2_CCRGBLPrgrssNtStr_M$F1Z = pnstr.v2_CCRGBLPrgrssNtStr_M$F1Z &#xD;
  LEFT OUTER JOIN v2_CCR#PNS_M$F1Z_atchm_H68QSKH attch WITH(NOLOCK) ON attch.v2_CCR#PNS_M$F1Z_SprDcm_BDP5P = sprpg.v2_CCR#PNS_M$F1Z_SprDcm_BDP5P&#xD;
  inner join V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
  LEFT OUTER JOIN V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K &#xD;
&#xD;
LEFT OUTER JOIN ( &#xD;
    SELECT progressNoteIdentifier.documentIdentifier_0E#DK as progressNoteIdentifier, ad.documentIdentifier&#xD;
as pathwayRefId,ad.documentIdentifier as assessmentId, pt.modelId as modelId  &#xD;
    FROM v_AllDocumentIdentifier ad  &#xD;
    INNER JOIN v2_GBLrvwSmmrycmpnnt_83RT5 rvsumcomp WITH(NOLOCK) ON ad.documentId = rvsumcomp.DOCUMENTID&#xD;
    INNER JOIN OH_CM_Task.dbo.PersistentTask pt WITH(NOLOCK) ON pt.dataId = ad.documentIdentifier&#xD;
    INNER JOIN OH_CM_task.dbo.TaskType tt WITH(NOLOCK) ON tt.uniqueId = pt.taskType&#xD;
    LEFT OUTER JOIN OH_CM_clinical.PathwayEnrollment.PES_PathwayEnrollment pe WITH(NOLOCK) ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
    &#xD;
    LEFT OUTER JOIN v2_GBLrSc_83RT5_dcLn_HDGDFTH progressNoteIdentifier WITH(NOLOCK) ON rvsumcomp.v2_GBLrvwSmmrycmpnnt_83RT5 = progressNoteIdentifier.v2_GBLrvwSmmrycmpnnt_83RT5 &#xD;
    WHERE progressNoteIdentifier.documentIdentifier_0E#DK is not null&#xD;
        ) nursingAssessments ON nursingAssessments.progressNoteIdentifier = allDoc.documentIdentifier&#xD;
      &#xD;
 &#xD;
WHERE 1=1 &#xD;
       AND metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
and&#xD;
 UPPER(TITLE_VX#6G) LIKE UPPER('%Progress%')&#xD;
and &#xD;
  (STATUS_TDES0 = 'FINAL' or STATUS_TDES0 = 'DRAFT')&#xD;
&#xD;
UNION ALL&#xD;
&#xD;
SELECT &#xD;
null as "documentId",&#xD;
null as "namespace",&#xD;
null as "Title",&#xD;
null as "Category",&#xD;
null as "SubCategory", &#xD;
null as "Date",&#xD;
null as "orderDate",&#xD;
null as "DateOffset",&#xD;
null as "Custom",&#xD;
'Progress Note'  as taskType,&#xD;
null as 'DraftUser',&#xD;
null as modelId,&#xD;
null as progressType, &#xD;
null as comments, &#xD;
null as "Author", &#xD;
null as docId&#xD;
,null as assessmentId&#xD;
,null as assessmentModelId&#xD;
,null as formsInternalId  &#xD;
&#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}  &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
  &lt;/style&gt;&#xD;
&lt;h2&gt;Progress Note&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadProgressNote(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Progress Note');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&#xD;
function printProgressNote(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR Searches", 'WD_Progress_Notes_Print');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 800, 600, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Progress Note</name>
				<index>0</index>
				<action>loadProgressNote();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Print Progress Note</name>
				<index>2</index>
				<action>printProgressNote();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment with Progress Note</name>
				<index>0</index>
				<action>if (row.get(16)){ &#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
application.addQueryParameter("documentIdentifier", row.get(16) );&#xD;
application.addQueryParameter("modelId", row.get(17) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Progress_Notes&amp;maxHits=100');&#xD;
}</action>
				<css-class>&lt;%if row.get(16).getOriginalValue&lt;&gt;""%&gt;SELECT&lt;%else%&gt;&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-action>
				<name>Edit Progress Note</name>
				<index>1</index>
				<action>if (row.get(0)){ &#xD;
var openForm = new Application("Healthcare pathways - CCR", 'View Document' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}else{&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Progress Note' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Progress_Notes&amp;maxHits=100');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=""%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=(html)value %&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>orderDate</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Offset</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Progress Note Type</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%elseif row.get(10).getOriginalValue%&gt;&#xD;
&lt;%=(html)row.get(10).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>AssessmentId</name>
				<index>16</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>AssessmentModelId</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>18</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value="1"%&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
 &lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
var openForm = new Application("Healthcare pathways - CCR", 'View Document' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}else{&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Progress Note' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Progress_Notes&amp;maxHits=100');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - ProgressNote_Max</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Progress Note: Appears as Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>7 DESC</order-by>
		<query-string>SELECT DISTINCT * FROM (  &#xD;
SELECT&#xD;
  document.documentIdentifier as "documentId",&#xD;
  'All Form Documents' as "namespace",&#xD;
  TITLE_VX#6G as "Title",&#xD;
  CASE pnstr.progressNoteType_8KS4J_cde&#xD;
  WHEN 'isoap' THEN 'ISOAP Format by '&#xD;
  WHEN 'case' THEN 'Case Report by '&#xD;
  ELSE 'Standard by '&#xD;
  END + CAST(metaData.sD_userId_7FQIQ as varchar(20)) as "Category",&#xD;
  CASE pnstr.progressNoteType_8KS4J_cde &#xD;
      WHEN 'isoap' THEN &#xD;
      'Introduction: ' + CAST(pnstr.Information_4ZTFN as varchar(255)) +&#xD;
      ', Subjective: ' + CAST(pnstr.Subjective_FUQSI as varchar(255)) +&#xD;
      ', Objective: ' + CAST(pnstr.Objective_1PDZM as varchar(255)) +&#xD;
      ', Analysis: ' + CAST(pnstr.Analysis_CBBZ5 as varchar(255)) +&#xD;
      ', Plan of Care: ' + CAST(pnstr.Planofcare_4HFPG as varchar(255)) &#xD;
      WHEN 'Standard' THEN &#xD;
           'Note: '+ CAST(pnstr.Comments_EMXXM as varchar(255))&#xD;
      ELSE&#xD;
      'Significant Other: ' +  CAST(pnstr.SignificantOther_V90WF as varchar(255)) +&#xD;
      ', Reasons for referral to Case Conference: ' +  CAST(pnstr.RsnsfrrfrrltCsCnfrnc_ZTPVE as varchar(255)) &#xD;
      END&#xD;
   as "SubCategory",&#xD;
  ISNULL(CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) , CONVERT(varchar(20), DATEADD(minute, metaData.created_2CIZE_Ofst,metaData.CREATED_2CIZE), 113)) as "Date"&#xD;
,DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ) as orderDate,&#xD;
  CREATED_2CIZE_OFST as "DateOffset",&#xD;
  STATUS_TDES0 as "Custom",&#xD;
'Progress Note'  as taskType,&#xD;
metaData.cD_userId_PLU2# as 'DraftUser',&#xD;
'uuid_' + document.modelId as modelId,&#xD;
CAST(pnstr.progressNoteType_8KS4J_desc as varchar(255)) as progressType, &#xD;
CASE pnstr.progressNoteType_8KS4J_cde &#xD;
      WHEN 'isoap' THEN &#xD;
      'Introduction: ' + CAST(pnstr.Information_4ZTFN as varchar(255)) +&#xD;
      ', Subjective: ' + CAST(pnstr.Subjective_FUQSI as varchar(255)) +&#xD;
      ', Objective: ' + CAST(pnstr.Objective_1PDZM as varchar(255)) +&#xD;
      ', Analysis: ' + CAST(pnstr.Analysis_CBBZ5 as varchar(255)) +&#xD;
      ', Plan of Care: ' + CAST(pnstr.Planofcare_4HFPG as varchar(255)) &#xD;
      WHEN 'Standard' THEN &#xD;
           'Note: '+ CAST(pnstr.Comments_EMXXM as varchar(255))&#xD;
      ELSE&#xD;
      'Significant Other: ' +  CAST(pnstr.SignificantOther_V90WF as varchar(255)) +&#xD;
      ', Reasons for referral to Case Conference: ' +  CAST(pnstr.RsnsfrrfrrltCsCnfrnc_ZTPVE as varchar(255)) &#xD;
      END&#xD;
 as comments, &#xD;
CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author", &#xD;
document.documentIdentifier  as docId&#xD;
,ISNULL(nursingAssessments.assessmentId,'') as assessmentId&#xD;
,ISNULL(nursingAssessments.modelId,'' ) as assessmentModelId&#xD;
,CASE WHEN ISNULL(CAST(attch.formsInternalId_MXZPJ as varchar) ,'') = '' THEN 0 ELSE 1 END formsInternalId&#xD;
from V_DOCUMENT document&#xD;
  join v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
  inner join v2_CCR#GBL#Progress#Note_G#X$2 pn WITH(NOLOCK) ON document.documentId = pn.DOCUMENTID&#xD;
  inner join v2_CCR#LPN_G#X$2_adPrgrs_BPNSF pnlink WITH(NOLOCK) ON pnlink.v2_CCR#GBL#Progress#Note_G#X$2 = pn.v2_CCR#GBL#Progress#Note_G#X$2&#xD;
  inner join v2_CCRGBLPrgrssNtStr_M$F1Z pnstr WITH(NOLOCK) ON pnstr.v2_CCRGBLPrgrssNtStr_M$F1Z = pnlink.v2_CCRGBLPrgrssNtStr_M$F1Z&#xD;
  LEFT OUTER JOIN v2_CCR#PNS_M$F1Z_SprDcm_BDP5P sprpg WITH(NOLOCK) ON sprpg.v2_CCRGBLPrgrssNtStr_M$F1Z = pnstr.v2_CCRGBLPrgrssNtStr_M$F1Z &#xD;
  LEFT OUTER JOIN v2_CCR#PNS_M$F1Z_atchm_H68QSKH attch WITH(NOLOCK) ON attch.v2_CCR#PNS_M$F1Z_SprDcm_BDP5P = sprpg.v2_CCR#PNS_M$F1Z_SprDcm_BDP5P&#xD;
  LEFT OUTER join V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
  LEFT OUTER JOIN V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K &#xD;
&#xD;
    LEFT OUTER JOIN (&#xD;
    &#xD;
    SELECT dclnk.documentIdentifier_0E#DK as progressNoteIdentifier, ad.documentIdentifier as assessmentId, 'uuid_c682e679-4ce4-4d99-83a1-29140c91ec54' as modelId   FROM v_AllDocumentIdentifier ad&#xD;
    INNER JOIN v2_GBLrvwSmmrycmpnnt_83RT5 comp WITH(NOLOCK) ON comp.DOCUMENTID = ad.DOCUMENTID  &#xD;
    INNER JOIN v2_GBLrSc_83RT5_dcLn_HDGDFTH dclnk WITH(NOLOCK) ON comp.v2_GBLrvwSmmrycmpnnt_83RT5 = dclnk.v2_GBLrvwSmmrycmpnnt_83RT5 &#xD;
&#xD;
UNION ALL &#xD;
&#xD;
    SELECT dclnk.documentIdentifier_0E#DK as progressNoteIdentifier, ad.documentIdentifier&#xD;
    as assessmentId, 'uuid_9e373f9d-311d-4bc7-a60f-483b89a4739b' as modelId  FROM v_AllDocumentIdentifier ad&#xD;
    INNER JOIN v2_WIC#TreatmentForm_4HDAY tr WITH(NOLOCK) ON tr.DOCUMENTID = ad.DOCUMENTID  &#xD;
    INNER JOIN v2_WICTrFr_4HDAY_dcLn_H4PAQ9H dclnk WITH(NOLOCK) ON tr.v2_WIC#TreatmentForm_4HDAY = dclnk.v2_WIC#TreatmentForm_4HDAY&#xD;
    &#xD;
UNION ALL &#xD;
 &#xD;
    SELECT dclnk.documentIdentifier_0E#DK as progressNoteIdentifier, ad.documentIdentifier&#xD;
    as assessmentId, 'uuid_bc321875-20b7-405b-afb9-b1abb73238a5' as modelId  FROM v_AllDocumentIdentifier ad&#xD;
    INNER JOIN v2_WICTrtmntRvwFrm_HLL7J tr WITH(NOLOCK) ON tr.DOCUMENTID = ad.DOCUMENTID  &#xD;
    INNER JOIN v2_WICTRF_HLL7J_dcLn_H4PAQ9H dclnk WITH(NOLOCK) ON tr.v2_WICTrtmntRvwFrm_HLL7J = dclnk.v2_WICTrtmntRvwFrm_HLL7J&#xD;
            ) nursingAssessments  ON nursingAssessments.progressNoteIdentifier = allDoc.documentIdentifier&#xD;
      &#xD;
 &#xD;
WHERE 1=1 &#xD;
       AND metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&#xD;
 and&#xD;
 UPPER(TITLE_VX#6G) LIKE UPPER('%Progress%')&#xD;
and &#xD;
  (STATUS_TDES0 = 'FINAL' or STATUS_TDES0 = 'DRAFT')&#xD;
&#xD;
 ) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}  &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
  &lt;/style&gt;&#xD;
&lt;h2&gt;Progress Note&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadProgressNote(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Progress Note');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
function printProgressNote(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR Searches", 'WD_Progress_Notes_Print');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 800, 600, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Progress Note</name>
				<index>0</index>
				<action>loadProgressNote();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Print Progress Note</name>
				<index>2</index>
				<action>printProgressNote();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display: none; important!</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>200</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment with Progress Note</name>
				<index>0</index>
				<action>var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
application.addQueryParameter("documentIdentifier", row.get(16) );&#xD;
application.addQueryParameter("modelId", row.get(17) );&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Progress_Notes&amp;maxHits=100');</action>
				<css-class>&lt;%if row.get(16).getOriginalValue&lt;&gt;""%&gt;SELECT&lt;%else%&gt;&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-action>
				<name>Edit Progress Note</name>
				<index>1</index>
				<action>if (row.get(0)){ &#xD;
var openForm = new Application("Healthcare pathways - CCR", 'View Document' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}else{&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Progress Note' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}&#xD;
&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Progress_Notes&amp;maxHits=100');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=""%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=(html)value %&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>orderDate</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Offset</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Progress Note Type</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%elseif row.get(10).getOriginalValue%&gt;&#xD;
&lt;%=(html)row.get(10).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>AssessmentId</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>AssessmentModelId</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>18</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value="1"%&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
 &lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
var openForm = new Application("Healthcare pathways - CCR", 'View Document' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}else{&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Progress Note' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}&#xD;
&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Progress_Notes&amp;maxHits=100');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - SocialHistory</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Social History: Appears as a Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>1 desc</order-by>
		<query-string>SELECT TOP 1 * FROM (&#xD;
    SELECT  alDoc.documentIdentifier AS DocumentId&#xD;
        ,DATEADD(minute, meta.dateSubmitted_L0HOZ_Ofst , meta.dateSubmitted_L0HOZ) AS datetimeCompleted&#xD;
        ,ISNULL(SOCH.LivingArrangement_$Q12Y_desc,SOCH.LivingArrangementDetails_50OEX) AS Living&#xD;
        ,SOCH.OccupationStatus_HV7FQ_desc AS Work&#xD;
        ,SOCH.Housing_$VQ37_desc AS House&#xD;
      ,CASE WHEN SOCH.isInterpreterRequired_VFSNG = 'false' THEN 'No'&#xD;
            WHEN SOCH.isInterpreterRequired_VFSNG = 'true' THEN 'Yes'&#xD;
      ELSE '-' END AS Interpreter&#xD;
        ,SOCH.Language_J4PY2 AS Language&#xD;
        ,'' AS Carer&#xD;
        ,meta.sD_userId_L2ZQP as UserId &#xD;
        ,'uuid_' + FormInfo.[modelId] AS ModelId &#xD;
        , 'true' as formModeLock, 'Social History' as taskType,&#xD;
        'Social History' as Namespace,&#xD;
        'Social History' as Title,&#xD;
         CAST(meta.sD_userId_7FQIQ as varchar(20))as custom,&#xD;
        'Updated' as Category,&#xD;
        '' as sub,&#xD;
        CAST(meta.sD_userId_7FQIQ as varchar(20)) "Author",&#xD;
        meta.cD_userId_PLU2#  as 'DraftUser',&#xD;
        soilk.formsInternalId_MXZPJ formsInternalId&#xD;
    FROM v2_CCR#GBL#SocialHistory_BHGL3 SOCH &#xD;
    INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = SOCH.DocumentId&#xD;
    INNER JOIN dbo.v_AllDocumentIdentifier alDoc WITH(NOLOCK) ON FormInfo.DocumentId = alDoc.documentId&#xD;
    INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = forminfo.documentId &#xD;
    INNER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
    LEFT OUTER  JOIN v2_CCR#LSH_BHGL3_SpDcRp_$PJL$ gsoi WITH(NOLOCK) ON SOCH.v2_CCR#GBL#SocialHistory_BHGL3 = gsoi.v2_CCR#GBL#SocialHistory_BHGL3 AND gsoi.ordering = 0&#xD;
    LEFT OUTER JOIN v2_CCR#LSH_BHGL3_atchm_HJ0SJQH soilk WITH(NOLOCK) ON soilk.v2_CCR#LSH_BHGL3_SpDcRp_$PJL$ = gsoi.v2_CCR#LSH_BHGL3_SpDcRp_$PJL$&#xD;
    LEFT OUTER JOIN FAS_Attachment att WITH(NOLOCK) ON att.uniqueId = soilk.formsInternalId_MXZPJ &#xD;
    WHERE (meta.status_TDES0 = 'FINAL' or meta.status_TDES0 = 'DRAFT')&#xD;
        AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    UNION ALL &#xD;
    SELECT null AS DocumentId&#xD;
        ,null as datetimeCompleted &#xD;
        ,'' AS Living&#xD;
        ,'' AS Work&#xD;
        ,'' AS House&#xD;
        ,'' AS Interpreter&#xD;
        ,'' AS Language&#xD;
        ,'' AS Carer&#xD;
        ,'' as UserId&#xD;
        ,'' AS ModelId&#xD;
        , 'true' as formModeLock, 'Social History' as taskType,&#xD;
        'Social History' as Namespace,&#xD;
        'Social History' as Title,&#xD;
        ''  as custom,&#xD;
        'Updated' as Category,&#xD;
        '' as sub,&#xD;
        '' as Author,&#xD;
        '' as 'DraftUser',&#xD;
        NULL as formsInternalId&#xD;
) as results&#xD;
ORDER BY 2 desc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Social History&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Information');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Social History</display-name>
			<filter-button>
				<name>Add Social History</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>1</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Social History</name>
				<index>0</index>
				<action>if (!row.get(0)){ &#xD;
    //Create task item&#xD;
    var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Information'); &#xD;
    openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
}else{&#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Social History');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Living Arrangement</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Occupation Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Housing</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Requires Interpreter</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Language</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Has Carer</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By Hidden</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Cat</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>sub</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(18).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(19).getOriginalValue &lt;&gt; null%&gt;&#xD;
  &lt;div class="icon-small-attachment"&gt;&lt;/div&gt;&#xD;
 &lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (!row.get(0)){ &#xD;
    //Create task item&#xD;
    var openForm = new Application("Healthcare pathways - CCR", 'Add New Social Information'); &#xD;
    openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
}else{&#xD;
    var openForm = new Application("Healthcare pathways - CCR", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Social History');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Surgical Hx</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Surgical History: Appears WITH(NOLOCK) ON Globals</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>3 DESC</order-by>
		<query-string>SELECT * FROM (&#xD;
  SELECT &#xD;
      'Surgical' as title&#xD;
      ,di.documentIdentifier as DocumentId&#xD;
      ,DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ ) as datetimeCompleted&#xD;
      ,cast(sur.SurType_#KLE7 as varchar(200))as SurgicalProblem &#xD;
      , CASE&#xD;
         WHEN sur.sD_type_PWSQ5_cde = 'at_age' THEN cast(CONVERT(DECIMAL(3,0), sur.sD_number_Q4Y3Z) as varchar(200)) &#xD;
         ELSE sur.sD_data_8RK59&#xD;
      END as inDate &#xD;
      , cast( sur.SurgeryDetail_UBX2O as varchar(200)) as surgeryDetails&#xD;
      , '' as [status] &#xD;
      ,cast( 'Name: '+ sur.NameofSurgeon_EU9C$ as varchar(200)) as surgeonDetails&#xD;
      ,CASE sur.hasComplications_4XA8U WHEN 1 THEN cast(sur.DetailsComplications_AX2LL as varchar(200)) END as compilations&#xD;
      ,CAST(meta.sD_userId_7FQIQ as varchar(20)) "Author"&#xD;
      ,'uuid_' + FormInfo.[modelId] AS modelId&#xD;
      ,'true' as formModeLock&#xD;
      ,meta.cD_userId_PLU2#  as 'DraftUser'&#xD;
FROM v2_CCR#GBL#Surgery_ZNV9Y sur&#xD;
      INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = sur.DocumentId&#xD;
      INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = sur.DOCUMENTID&#xD;
      INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
      LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K &#xD;
WHERE (meta.status_TDES0 = 'FINAL' OR meta.status_TDES0 = 'DRAFT')&#xD;
        AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
UNION ALL&#xD;
 SELECT &#xD;
      'Surgical' as title &#xD;
      ,null as DocumentId&#xD;
      ,null as datetimeCompleted&#xD;
      ,'' as SurgicalProblem&#xD;
      ,'' inDate&#xD;
      ,'' as DetailsOfProblem&#xD;
      ,'' as [Status]&#xD;
      ,'' as surgeonDetails&#xD;
      ,'' as compilations&#xD;
      ,'' as updatedBy&#xD;
      ,'' AS modelId&#xD;
      ,'true' as formModeLock &#xD;
      ,''  as 'DraftUser'&#xD;
) AS surgHx</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
 input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Surgical History&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormMed(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Medical History');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
 function loadFormSurg(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Surgical History');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
 function loadFormObs(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Obstetric History');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Surgical History</display-name>
			<filter-button>
				<name>Add Surgical History</name>
				<index>0</index>
				<action>loadFormSurg();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Add/Edit Surgical History</name>
				<index>0</index>
				<action>if(!row.get(1)){&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Surgical History');&#xD;
openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Surgical History');</action>
				<css-class>&lt;%if row.get(1).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Surgical Procedure</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>In Date</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details of Procedure</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Surgeon Details</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Complications</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(12).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if(!row.get(1)){&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Surgical History');&#xD;
openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
}else{&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Surgical History');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Treatment_Orders</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Treatment Orders: Appears as a Global</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT DISTINCT * FROM ( &#xD;
    SELECT&#xD;
        document.documentIdentifier as "documentId",&#xD;
        'All Form Documents' as "namespace",&#xD;
        TITLE_VX#6G as "Title",&#xD;
        '' as "Category",&#xD;
        SUBCATEGORY_GCJLK as "SubCategory", &#xD;
        DATEADD(MINUTE, metaData.dateSubmitted_L0HOZ_Ofst, metaData.dateSubmitted_L0HOZ ) as "Date",&#xD;
        CREATED_2CIZE_OFST as "DateOffset",&#xD;
        STATUS_TDES0 as "Custom",&#xD;
        'Treatment Order' as taskType,&#xD;
        'uuid_' + document.modelId as modelId, &#xD;
        '' as Notice, &#xD;
        'true' as formModeLock ,&#xD;
        ISNULL(trorder.DoctorsName_O1XEM,'') as 'Clinician Name',&#xD;
        CAST(trorder.OrderNote_NW2SU as varchar(20)) as Note,&#xD;
        CAST(metaData.sD_userId_7FQIQ as varchar(20)) "Author",&#xD;
        trorder.DateString_0OZ4A AS DateTaken,&#xD;
        metaData.cD_userId_PLU2#  as 'DraftUser',&#xD;
        CASE&#xD;
        WHEN DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &lt; 0&#xD;
        THEN 'Expired'&#xD;
        WHEN DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &gt;= 0 AND DATEDIFF(day, GETDATE(), trorder.enddate_13HNS) &lt; 30&#xD;
        THEN 'Expiring'&#xD;
        ELSE 'Valid'&#xD;
        END as TreatmentStatus,&#xD;
        trorder.enddate_13HNS AS EndDate,&#xD;
                   CASE WHEN ISNULL(CAST(fasAT.uniqueId as varchar) ,'') = '' THEN 0 ELSE 1 END as formsInternalId&#xD;
    FROM &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V_DOCUMENT document&#xD;
    inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
    inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
    inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.[dbo].V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K&#xD;
    inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBL#TreatmentOrder_N1V7I trorder WITH(NOLOCK) ON trorder.documentid = allDoc.documentId&#xD;
    inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_CCRGBLTrtmntOrdr_I87Z6 trorderlink WITH(NOLOCK) ON trorderlink.documentid = trorder.documentId&#xD;
    inner join &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_CCR#LTO_I87Z6_trtOrd_367#7 trtOrd WITH(NOLOCK) ON trorderlink.v2_CCRGBLTrtmntOrdr_I87Z6 = trtOrd.v2_CCRGBLTrtmntOrdr_I87Z6  &#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBLTrOr_N1V7I_TOSD_R4MWQ   gtror WITH(NOLOCK) ON gtror.v2_GBL#TreatmentOrder_N1V7I = trorder.v2_GBL#TreatmentOrder_N1V7I&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.v2_GBLTrOr_N1V7I_atchm_H4KZ5LH gorlk WITH(NOLOCK) ON gorlk.v2_GBLTrOr_N1V7I_TOSD_R4MWQ = gtror.v2_GBLTrOr_N1V7I_TOSD_R4MWQ&#xD;
    LEFT OUTER JOIN &lt;%=AppVars.db_CWS_cRepository%&gt;.dbo.[FAS_Attachment] fasAT WITH(NOLOCK) ON fasAT.uniqueId = gorlk.formsInternalId_MXZPJ&#xD;
    WHERE (metaData.STATUS_TDES0 = 'FINAL' OR metaData.STATUS_TDES0 = 'DRAFT')&#xD;
    AND metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
    AND &#xD;
    UPPER(TITLE_VX#6G) LIKE UPPER('%Treatment Order%')&#xD;
&#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display:none; important! }&#xD;
a.add-icon{ display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Treatment Orders&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadFormTreatment(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Treatment Order');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Treatment Order</name>
				<index>0</index>
				<action>loadFormTreatment();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none; important!</style>
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>30</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Offset</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician Name</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
 &lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
  &lt;%=(html)row.get(16).getOriginalValue %&gt;&#xD;
  &lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DateTaken</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>TreatmentStatus</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>End Date</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
 &lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy" )%&gt;&#xD;
&lt;%end if%&gt;&#xD;
  &lt;%if row.get(17).getOriginalValue = "Valid"%&gt;&#xD;
  &lt;%elseif row.get(17).getOriginalValue = "Expiring"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #e88b00; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;EXPIRING&lt;/span&gt;&#xD;
  &lt;%elseif row.get(17).getOriginalValue = "Expired"%&gt;&#xD;
    &lt;span style="text-align:right; background-color: #be0000; border-color: #ffffff; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #fff"&gt;EXPIRED&lt;/span&gt; &#xD;
  &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attachment</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
 &lt;div class="icon-small-attachment"&gt;&amp;nbsp;&lt;/div&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Medical_Treatment_Order');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Global - Waterlow Assessments</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Waterlow Risk Assessment search - BrettH</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT   di.documentIdentifier as documentId,&#xD;
  DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ ) as "Date and Time",&#xD;
  cast(waterlow.WaterlowScore_0N3F6 as varchar) as 'Waterlow Score',&#xD;
  ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)),meta.sD_userId_7FQIQ) "ClinicianId",&#xD;
  'uuid_' + FormInfo.[modelId] AS modelId&#xD;
&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_GBLWtrlwRskAssssmntTl_JBK#0 waterlow&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = waterlow.DocumentId&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = waterlow.DOCUMENTID  &#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
    INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K &#xD;
&#xD;
WHERE (meta.status_TDES0 = 'FINAL' or meta.status_TDES0 = 'DRAFT')&#xD;
AND pat.idNumber_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
ORDER BY meta.dateSigned_OK9EW DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Waterlow Assessment');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>New Waterlow Assessment</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Waterlow Score</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last updated by</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global_Waterlow Score</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Waterlow Score - BrettH</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>3 desc</order-by>
		<query-string>SELECT TOP 1 *, 'true' as formModeLock FROM (&#xD;
SELECT TOP 1 di.documentIdentifier as documentId,&#xD;
  meta.cD_userId_PLU2# as 'Clinician Id',&#xD;
  cast(waterlow.WaterlowScore_0N3F6 as varchar) as 'Waterlow Score',&#xD;
  meta.dateSigned_OK9EW as Date,&#xD;
    'uuid_' + FormInfo.[modelId] AS modelId&#xD;
FROM v2_GBLWtrlwRskAssssmntTl_JBK#0 waterlow&#xD;
    INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = waterlow.DocumentId&#xD;
    INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = waterlow.DOCUMENTID  &#xD;
    INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
    LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ pat WITH(NOLOCK) ON pat.v2_DocumentMetaData_0Z14K = meta.v2_DocumentMetaData_0Z14K&#xD;
WHERE meta.status_TDES0 = 'FINAL'&#xD;
AND pat.idNumber_9LV7R IN ( '&lt;%=AppVars.get("patientURNList")%&gt;' )&#xD;
UNION ALL&#xD;
SELECT null AS DocumentId&#xD;
    , ' ' as ClinicianId&#xD;
    , ' ' as WaterlowScore&#xD;
    , ' ' as Date_&#xD;
    , ' ' as ModelId&#xD;
)&#xD;
as results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Global Waterlow&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Waterlow Assessment');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Search</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none;</style>
			</filter-button>
			<filter-button>
				<name>Add Global Waterlow</name>
				<index>1</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>11</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>ADD</name>
				<index>0</index>
				<action>if (!row.get(0)){ &#xD;
    //Create task item&#xD;
    var openForm = new Application("Healthcare pathways - CCR", 'Add New Waterlow Assessment'); &#xD;
    openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
}else{&#xD;
   var openForm = new Application("Healthcare pathways - CCR", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Global_Waterlow');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last updated by</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Waterlow Score</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date and Time</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%else%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>formModeLock</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (!row.get(0)){ &#xD;
    //Create task item&#xD;
    var openForm = new Application("Healthcare pathways - CCR", 'Add New Waterlow Assessment'); &#xD;
    openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
}else{&#xD;
    var openForm = new Application("Healthcare pathways - CCR", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Global_Waterlow');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Patient_Overview - All Assessments</name>
		<data-source-name>java:comp/env/jdbc/orion/task</data-source-name>
		<description>All Assessments From the CDV tree "Assessments" entry point on Patient Profile.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT DISTINCT&#xD;
        do.documentIdentifier ,&#xD;
        pt.taskIdentifier AS 'taskIdentifier',&#xD;
    TaskType.identifyingName AS 'identifyingName',&#xD;
    CASE &#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Burns Assessment' THEN 'Burns or Scald Wound Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Burns or Scald Review' THEN 'Burns or Scald Wound Assessment Review' &#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Surgical' THEN 'Surgical Wound Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Surgical Review' THEN 'Surgical Wound Assessment Review'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Skin tear' THEN 'Skin Tear Wound Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Skin tear Review' THEN 'Skin Tear Wound Assessment Review'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Foot Ulcer' THEN 'Foot Ulcer Wound Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Foot Ulcer Review' THEN 'Foot Ulcer Wound Assessment Review'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Leg Ulcer' THEN 'Leg Ulcer Wound Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Leg Ulcer Review' THEN 'Leg Ulcer Wound Assessment Review'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Malignant' THEN 'Malignant Wound Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Malignant Review' THEN 'Malignant Wound Assessment Review'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Other' THEN 'Other Wound Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Other Review' THEN 'Other Wound Assessment Review'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Pressure Sore' THEN 'Pressure Injury Wound Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Pressure Sore Review' THEN 'Pressure Injury Wound Assessment Review' &#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Sinus Fistula' THEN 'Sinus Fistula Wound Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Sinus Fistula Review' THEN 'Sinus Fistula Wound Assessment Review'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Stoma Assessment - Initial' THEN 'Urinary Stoma Assessment'&#xD;
       WHEN REPLACE(TaskType.[identifyingName], 'Wound Site - ','') = 'Stoma Assessment - Review' THEN 'Urinary Stoma Assessment Review'&#xD;
       ELSE REPLACE(TaskType.[identifyingName], 'Wound Site - ','') &#xD;
       END AS 'Title', &#xD;
        replace(replace(cus.Pathway ,'ca','Ca'),'pa','Pa') AS 'Pathway',&#xD;
        creationTime as 'Date',&#xD;
    stg.dueTime AS 'dueTime', &#xD;
        meta.cD_userId_PLU2# as 'UserName',&#xD;
        pt.modelId as 'modelId',&#xD;
        CASE WHEN TaskStatus.identifyingName = 'InProgress' THEN 'Draft' ELSE TaskStatus.identifyingName END as status&#xD;
FROM PersistentTask pt   &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do WITH(NOLOCK) ON do.documentIdentifier = pt.dataId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = do.documentId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.vw_ccr_event_summary cus WITH(NOLOCK) ON cus.taskIdentifier  = pt.taskIdentifier&#xD;
    INNER JOIN SchedulableTaskGroup stg WITH(NOLOCK) ON pt.owner = stg.uniqueId&#xD;
    INNER JOIN PatientId patient WITH(NOLOCK) ON stg.patient = patient.uniqueId&#xD;
    INNER JOIN TaskType WITH(NOLOCK) ON pt.taskType = TaskType.uniqueId&#xD;
    INNER JOIN TaskStatus WITH(NOLOCK) ON pt.taskStatus = TaskStatus.uniqueId&#xD;
              WHERE   1=1 &#xD;
&lt;%if Context.Patient.Id.MRN&lt;&gt;""%&gt;&#xD;
        AND patient.id IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;&#xD;
    &lt;%if get("Date and Time.low") &lt;&gt; ""%&gt;&#xD;
      AND creationTime &gt;= convert(datetime,'&lt;%=get("Date and Time.low")%&gt;',103)&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("Date and Time.high") &lt;&gt; ""%&gt;&#xD;
      AND creationTime  &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Date and Time.high")%&gt;', 103))&#xD;
    &lt;%end if%&gt; &#xD;
    &lt;%if get("Assessment Type") &lt;&gt; ""%&gt;  &#xD;
      AND TaskType.identifyingName  = '&lt;%=get("Assessment Type") %&gt;' &#xD;
    &lt;% end if %&gt;  &#xD;
    &lt;%if get("Pathway") &lt;&gt; ""%&gt;  &#xD;
      AND replace(replace(cus.Pathway ,'ca','Ca'),'pa','Pa') = '&lt;%=get("Pathway") %&gt;' &#xD;
    &lt;% end if %&gt; &#xD;
    &lt;%if get("Last Updated By") &lt;&gt; ""%&gt;  &#xD;
      AND meta.cD_userId_PLU2# = '&lt;%=get("Last Updated By") %&gt;' &#xD;
    &lt;% end if %&gt; &#xD;
    &lt;%if get("Status") &lt;&gt; ""%&gt;  &#xD;
      AND (CASE WHEN TaskStatus.identifyingName  = 'InProgress' THEN 'Draft' ELSE TaskStatus.identifyingName END) = '&lt;%=get("Status") %&gt;' &#xD;
    &lt;% end if %&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Assessment Type</name>
				<index>0</index>
				<default-value />
				<display-name>Assessment Type</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/orion/task")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT \r\n       CASE \r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Burns Assessment' THEN 'Burns or Scald Wound Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Burns or Scald Review' THEN 'Burns or Scald Wound Assessment Review' \r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Surgical' THEN 'Surgical Wound Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Surgical Review' THEN 'Surgical Wound Assessment Review'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Skin tear' THEN 'Skin Tear Wound Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Skin tear Review' THEN 'Skin Tear Wound Assessment Review'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Foot Ulcer' THEN 'Foot Ulcer Wound Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Foot Ulcer Review' THEN 'Foot Ulcer Wound Assessment Review'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Leg Ulcer' THEN 'Leg Ulcer Wound Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Leg Ulcer Review' THEN 'Leg Ulcer Wound Assessment Review'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Malignant' THEN 'Malignant Wound Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Malignant Review' THEN 'Malignant Wound Assessment Review'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Other' THEN 'Other Wound Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Other Review' THEN 'Other Wound Assessment Review'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Pressure Sore' THEN 'Pressure Injury Wound Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Pressure Sore Review' THEN 'Pressure Injury Wound Assessment Review' \r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Sinus Fistula' THEN 'Sinus Fistula Wound Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Sinus Fistula Review' THEN 'Sinus Fistula Wound Assessment Review'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Stoma Assessment - Initial' THEN 'Urinary Stoma Assessment'\r\n       WHEN REPLACE([identifyingName], 'Wound Site - ','') = 'Stoma Assessment - Review' THEN 'Urinary Stoma Assessment Review'\r\n       ELSE REPLACE([identifyingName], 'Wound Site - ','') \r\n       END AS 'DisplayName', \r\n       [identifyingName] AS 'identifyingName' \r\nFROM " + SD + "=AppVars.db_CWSCustom" + ED + ".dbo.vw_ccr_event_summary cus WITH(NOLOCK) \r\nWHERE 1=1 \r\n" + SD + "if Context.Patient.Id.MRN&lt;&gt;\"\"" + ED + "\r\n        AND patientId  IN ( " + SD + "=AppVars.get(\"patientURNList\")" + ED + " )\r\n" + SD + "end if" + ED + " ")%&gt;&lt;%exec config.setOptionColumnName("identifyingName")%&gt;&lt;%exec config.setDisplayColumnName("DisplayName")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Pathway</name>
				<index>1</index>
				<default-value />
				<display-name>Pathway</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/orion/task")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT \r\n        replace(replace(cus.Pathway ,'ca','Ca'),'pa','Pa') AS 'Pathway'\r\nFROM " + SD + "=AppVars.db_CWSCustom" + ED + ".dbo.vw_ccr_event_summary cus WITH(NOLOCK) \r\nWHERE 1=1 \r\n" + SD + "if Context.Patient.Id.MRN&lt;&gt;\"\"" + ED + "\r\n        AND patientId  IN ( " + SD + "=AppVars.get(\"patientURNList\")" + ED + " )\r\n" + SD + "end if" + ED + " ")%&gt;&lt;%exec config.setOptionColumnName("Pathway")%&gt;&lt;%exec config.setDisplayColumnName("Pathway")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Date and Time</name>
				<index>2</index>
				<default-value>;</default-value>
				<display-name>Date and Time</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MMM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Last Updated By</name>
				<index>3</index>
				<default-value />
				<display-name>Last Updated By</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/orion/task")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT\r\nmeta.cD_userId_PLU2# as 'UserName'\r\nFROM PersistentTask pt   \r\nINNER JOIN " + SD + "=AppVars.db_CWSRepository" + ED + ".dbo.v_Document do WITH(NOLOCK) ON do.documentIdentifier = pt.dataId\r\nINNER JOIN " + SD + "=AppVars.db_CWSRepository" + ED + ".dbo.v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = do.documentId\r\nINNER JOIN " + SD + "=AppVars.db_CWSCustom" + ED + ".dbo.vw_ccr_event_summary cus WITH(NOLOCK) ON cus.taskIdentifier  = pt.taskIdentifier \r\n    INNER JOIN TaskType WITH(NOLOCK) ON pt.taskType = TaskType.uniqueId \r\n              WHERE   1=1 \r\n        AND TaskType.identifyingName like '%Assessment%'\r\n        AND cus.Status = 'ENROLLED'\r\n\r\n" + SD + "if Context.Patient.Id.MRN&lt;&gt;\"\"" + ED + "\r\n        AND patientId  IN ( " + SD + "=AppVars.get(\"patientURNList\")" + ED + " )\r\n" + SD + "end if" + ED + " \r\n")%&gt;&lt;%exec config.setOptionColumnName("UserName")%&gt;&lt;%exec config.setDisplayColumnName("UserName")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Status</name>
				<index>4</index>
				<default-value />
				<display-name>Status</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/orion/task")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT\r\n        CASE WHEN TaskStatus.identifyingName = 'InProgress' THEN 'Draft' ELSE TaskStatus.identifyingName END as status\r\nFROM PersistentTask pt   \r\nINNER JOIN " + SD + "=AppVars.db_CWSRepository" + ED + ".dbo.v_Document do WITH(NOLOCK) ON do.documentIdentifier = pt.dataId\r\nINNER JOIN " + SD + "=AppVars.db_CWSRepository" + ED + ".dbo.v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = do.documentId\r\nINNER JOIN " + SD + "=AppVars.db_CWSCustom" + ED + ".dbo.vw_ccr_event_summary cus WITH(NOLOCK) ON cus.taskIdentifier  = pt.taskIdentifier \r\n    INNER JOIN TaskType WITH(NOLOCK) ON pt.taskType = TaskType.uniqueId\r\n    INNER JOIN TaskStatus WITH(NOLOCK) ON pt.taskStatus = TaskStatus.uniqueId\r\n              WHERE   1=1  \r\n        AND TaskType.identifyingName like '%Assessment%'\r\n        AND cus.Status = 'ENROLLED'  \r\n" + SD + "if Context.Patient.Id.MRN&lt;&gt;\"\"" + ED + "\r\n        AND patientId  IN ( " + SD + "=AppVars.get(\"patientURNList\")" + ED + " )\r\n" + SD + "end if" + ED + " ")%&gt;&lt;%exec config.setOptionColumnName("status")%&gt;&lt;%exec config.setDisplayColumnName("status")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open Single Task</name>
				<application>
					<name>Task List</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment</name>
				<index>0</index>
				<action>/*if (row.get(0)){ &#xD;
    //Create task item&#xD;
   //var openForm = new ApplicationI("Healthcare pathways - CCR", "View Document"); &#xD;
   //openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   //openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
&#xD;
}*/&#xD;
&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_All_Assessments');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskIdentifier</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment Type</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pathway</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date And Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>/*if (row.get(0)){ &#xD;
    //Create task item&#xD;
   //var openForm = new ApplicationI("Healthcare pathways - CCR", "View Document"); &#xD;
   //openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   //openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
&#xD;
}*/&#xD;
&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_All_Assessments');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient_Overview - Assessments</name>
		<data-source-name>java:comp/env/jdbc/orion/task</data-source-name>
		<description>? All current tasks in the tasklist</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>6 desc</order-by>
		<query-string>SELECT DISTINCT&#xD;
        do.documentIdentifier ,&#xD;
        pt.taskIdentifier AS 'taskIdentifier',&#xD;
	TaskType.identifyingName AS 'identifyingName',&#xD;
	TaskType.identifyingName AS 'Title', &#xD;
        replace(replace(cus.Pathway ,'ca','Ca'),'pa','Pa') AS 'Pathway',&#xD;
        creationTime as 'Date',&#xD;
	stg.dueTime AS 'dueTime', &#xD;
        meta.cD_userId_PLU2# as 'UserName',&#xD;
        pt.modelId as 'modelId'&#xD;
FROM PersistentTask pt   &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do WITH(NOLOCK) ON do.documentIdentifier = pt.dataId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = do.documentId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.vw_ccr_event_summary cus WITH(NOLOCK) ON cus.taskIdentifier  = pt.taskIdentifier&#xD;
	INNER JOIN SchedulableTaskGroup stg WITH(NOLOCK) ON pt.owner = stg.uniqueId&#xD;
	INNER JOIN PatientId patient WITH(NOLOCK) ON stg.patient = patient.uniqueId&#xD;
	INNER JOIN TaskType WITH(NOLOCK) ON pt.taskType = TaskType.uniqueId&#xD;
	INNER JOIN TaskStatus WITH(NOLOCK) ON pt.taskStatus = TaskStatus.uniqueId&#xD;
              WHERE   1=1 &#xD;
&lt;%if Context.Patient.Id.MRN&lt;&gt;""%&gt;&#xD;
        AND patient.id IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;&#xD;
        AND TaskStatus.identifyingName = 'COMPLETED'&#xD;
        AND TaskType.identifyingName like '%Assessment%'&#xD;
        AND cus.Status = 'ENROLLED'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open Single Task</name>
				<application>
					<name>Task List</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment</name>
				<index>0</index>
				<action>/*if (row.get(0)){ &#xD;
    //Create task item&#xD;
   //var openForm = new ApplicationI("Healthcare pathways - CCR", "View Document"); &#xD;
   //openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   //openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
&#xD;
}*/&#xD;
&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_All_Assessments');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskIdentifier</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment Type</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pathway</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date And Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>/*if (row.get(0)){ &#xD;
    //Create task item&#xD;
   //var openForm = new ApplicationI("Healthcare pathways - CCR", "View Document"); &#xD;
   //openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   //openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
&#xD;
}*/&#xD;
&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_All_Assessments');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient_Overview - Nursing Assessments</name>
		<data-source-name>java:comp/env/jdbc/orion/task</data-source-name>
		<description>Displayed in the Header Section of all forms displays the Nursing Assessment/Reviews</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>creationTime desc</order-by>
		<query-string>SELECT DISTINCT&#xD;
        do.documentIdentifier , &#xD;
        pt.taskIdentifier AS 'taskIdentifier',&#xD;
	TaskType.identifyingName AS 'identifyingName',&#xD;
	TaskType.identifyingName AS 'Title', &#xD;
        replace(replace(cus.Pathway ,'ca','Ca'),'pa','Pa') AS 'Pathway',&#xD;
        creationTime as 'Date',&#xD;
	stg.dueTime AS 'dueTime', &#xD;
        meta.cD_userId_PLU2# as 'UserName',&#xD;
        pt.modelId as 'modelId'&#xD;
FROM PersistentTask pt   &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do WITH(NOLOCK) ON do.documentIdentifier = pt.dataId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = do.documentId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.vw_ccr_event_summary cus WITH(NOLOCK) ON cus.taskIdentifier  = pt.taskIdentifier&#xD;
	INNER JOIN SchedulableTaskGroup stg WITH(NOLOCK) ON pt.owner = stg.uniqueId&#xD;
	INNER JOIN PatientId patient WITH(NOLOCK) ON stg.patient = patient.uniqueId&#xD;
	INNER JOIN TaskType WITH(NOLOCK) ON pt.taskType = TaskType.uniqueId&#xD;
	INNER JOIN TaskStatus WITH(NOLOCK) ON pt.taskStatus = TaskStatus.uniqueId&#xD;
WHERE 1=1 &#xD;
&lt;%if Context.Patient.Id.MRN&lt;&gt;""%&gt;&#xD;
        AND patient.id IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;&#xD;
        AND TaskStatus.identifyingName = 'COMPLETED'&#xD;
        AND (TaskType.identifyingName = 'Nursing Assessment'&#xD;
        OR TaskType.identifyingName = 'Nursing Assessment Review')&#xD;
        AND cus.Status like 'ENR%'	&#xD;
        AND cus.enrollDescription = cus.enrollDescription</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open Single Task</name>
				<application>
					<name>Task List</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment</name>
				<index>0</index>
				<action>/*if (row.get(0)){ &#xD;
    //Create task item&#xD;
   //var openForm = new ApplicationI("Healthcare pathways - CCR", "View Document"); &#xD;
   //openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   //openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
&#xD;
}*/&#xD;
&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_Nursing_Assessments');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskIdentifier</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment Type</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pathway</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date And Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DueDate</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>/*if (row.get(0)){ &#xD;
    //Create task item&#xD;
   //var openForm = new ApplicationI("Healthcare pathways - CCR", "View Document"); &#xD;
   //openForm.setSecureInformationToken(row.getSecureInformationToken()); &#xD;
   //openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
&#xD;
}*/&#xD;
&#xD;
var application = new Application( "Healthcare pathways - CCR", "View Document" );&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR&amp;entryPointName=WD_Nursing_Assessments');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient_Overview - Pathways</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Displays pathway enrolment for a patient. Located on the Patient Profile.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>enrollmentTime DESC</order-by>
		<query-string>select &#xD;
	enrollmentTime&#xD;
,enrollerUserId &#xD;
,(CASE WHEN typeCode = 'BurnScald' THEN 'Burn or Scald Wound Pathway'&#xD;
       WHEN typeCode = 'FootUlcer' THEN 'Foot Ulcer Wound Pathway'  &#xD;
       WHEN typeCode = 'LegUlcer' THEN 'Leg Ulcer Wound Pathway'    &#xD;
       WHEN typeCode = 'Malignant' THEN 'Malignant Wound Pathway'   &#xD;
       WHEN typeCode = 'Other' THEN 'Other Wound Pathway'   &#xD;
       WHEN typeCode = 'PressureSores' THEN 'Pressure Injury Wound Pathway' &#xD;
       WHEN typeCode = 'SinusFistula' THEN 'Sinus / Fistula Wound Pathway'&#xD;
       WHEN typeCode = 'SkinTear' THEN 'Skin Tear Wound Pathway'&#xD;
       WHEN typeCode = 'Surgical' THEN 'Surgical Wound Pathway'&#xD;
       WHEN typeCode = 'BowelStoma' THEN 'Bowel Stoma Pathway'&#xD;
       WHEN typeCode = 'UrinaryStoma' THEN 'Urinary Stoma Pathway'&#xD;
       WHEN typeCode = 'UrinaryStoma' THEN 'Urinary Stoma Pathway' ELSE pathwayIdentifier&#xD;
 END) as  pathwayIdentifier&#xD;
,(CASE WHEN enrollmentStatus = 'DEACTIVATED' THEN 'CLOSED'&#xD;
		ELSE enrollmentStatus&#xD;
		END) as enrollmentStatus&#xD;
		 &#xD;
  FROM &lt;%=AppVars.db_CWSClinical%&gt;.PathwayEnrollment.PES_PathwayEnrollment	pe&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWSCustom%&gt;.dbo.[PathwayToSubpathway_Mapping] custom WITH(NOLOCK) ON custom.SubPathwayEnrolmentId = pe.enrollmentIdentifier&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
  WHERE patientId IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!} &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Pathway Enrolments&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Observation');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormFootUlcer(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Foot Ulcer');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt; &#xD;
&lt;script language='javascript'&gt;&#xD;
function loadFormPressureSore(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Wound Site - Pressure Sore');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Pathways Enrolment</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style>display:none !important</style>
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Enrolment Date</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value&lt;&gt;""%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm" )%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Enrolled by Clinician</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pathway Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Print - Care Plan</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Care Plan: Used for Printing all care plans rendering pdf</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT DISTINCT&#xD;
  di.documentIdentifier as DocumentId,    &#xD;
  DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ ) as datetimeCompleted ,&#xD;
  REPLACE(goalLink.Goals,'-','') as Goal, &#xD;
    REPLACE(REPLACE(intervenLink.Intervention ,'-',''),'&amp;amp;','and') AS Interventions, &#xD;
  intervenLink.ExpectedDate AS ExpectedDate , &#xD;
  intervenLink.Comments AS Comments ,  &#xD;
  intervenLink.Outcomes AS Outcomes ,&#xD;
  care.EstmtdNmbrOfVstsnmbr_MQRKP as EstVisits,&#xD;
  CAST(hands.HandoutsRepeating_UNWHW as varchar) AS numberHandOuts,&#xD;
  CAST(care.SpecificInstructions_1B0VK as varchar) AS SpecificInstructions,&#xD;
  CAST(care.Comments_L6KST as varchar) as mainComments,&#xD;
  care.patientCopy_1Z9LL AS patientCopy,&#xD;
  care.patientConsent_K7#NU AS patientConsent,&#xD;
  meta.status_TDES0 as DocStatus ,&#xD;
  'uuid_' + FormInfo.[modelId] AS ModelId,  &#xD;
  ISNULL(CAST(meta.sD_userId_7FQIQ as varchar(20)) ,meta.sD_userId_7FQIQ) "Author", &#xD;
  meta.cD_userId_PLU2#  as 'DraftUser', &#xD;
  di.documentIdentifier  as docid ,&#xD;
  care.P_pI_id_#W85V as patientId,&#xD;
 UPPER('&lt;%=Context.Patient.Co.PatientName.familyName%&gt;') +', &lt;%=Context.Patient.Co.PatientName.givenName%&gt;'  as Name,&#xD;
 '&lt;%=Context.Patient.Co.Sex%&gt;' as Gender,&#xD;
 '&lt;%=Context.Patient.Co.DateTimeOfBirth%&gt;' as DoB&#xD;
&#xD;
   &#xD;
FROM v2_CN#Nursing#Care#Plan_YP1RM care&#xD;
INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I pln WITH(NOLOCK) ON care.v2_CN#Nursing#Care#Plan_YP1RM = pln.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL comp WITH(NOLOCK) ON pln.v2_CCRGBLCrPlnCmpnnt_3XYZL = comp.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
LEFT OUTER JOIN v2_CNNCP_YP1RM_HndRpt_UNWHW hands ON care.v2_CN#Nursing#Care#Plan_YP1RM = hands.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K meta WITH(NOLOCK) ON meta.DOCUMENTID = care.DOCUMENTID&#xD;
INNER JOIN DocumentIdentifier di  WITH(NOLOCK) ON di.DOCUMENTID = meta.DOCUMENTID&#xD;
INNER JOIN v_Document FormInfo WITH(NOLOCK) ON FormInfo.DocumentId = care.DocumentId  &#xD;
  &#xD;
    INNER JOIN (&#xD;
   SELECT DISTINCT &#xD;
    comp.DOCUMENTID, &#xD;
    CAST (( STUFF((SELECT ', ' + comp1.cpGoals_2H5DV_desc &#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM care1&#xD;
    INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I pln1 WITH(NOLOCK) ON care.v2_CN#Nursing#Care#Plan_YP1RM = pln.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
    INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL comp1 WITH(NOLOCK) ON pln.v2_CCRGBLCrPlnCmpnnt_3XYZL = comp.v2_CCRGBLCrPlnCmpnnt_3XYZL &#xD;
    WHERE comp.DOCUMENTID = comp1.DOCUMENTID AND pln1.v2_CCRGBLCrPlnCmpnnt_3XYZL = pln.v2_CCRGBLCrPlnCmpnnt_3XYZL AND care1.DOCUMENTID = care.DOCUMENTID&#xD;
    FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Goals'&#xD;
        &#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM care&#xD;
    INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I pln WITH(NOLOCK) ON care.v2_CN#Nursing#Care#Plan_YP1RM = pln.v2_CN#Nursing#Care#Plan_YP1RM&#xD;
    INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL comp WITH(NOLOCK) ON pln.v2_CCRGBLCrPlnCmpnnt_3XYZL = comp.v2_CCRGBLCrPlnCmpnnt_3XYZL &#xD;
    )goalLink ON goalLink.DOCUMENTID = comp.DOCUMENTID&#xD;
    &#xD;
    LEFT OUTER JOIN (&#xD;
   SELECT DISTINCT &#xD;
    careplan.DOCUMENTID, &#xD;
    CAST (( STUFF((SELECT ', ' + interven1.I_cpInterventions_9L4R6_desc &#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM careplan1&#xD;
	INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I careplanlink1 ON careplan1.v2_CN#Nursing#Care#Plan_YP1RM = careplanlink1.v2_CN#Nursing#Care#Plan_YP1RM &#xD;
	INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL carecomp1 ON carecomp1.v2_CCRGBLCrPlnCmpnnt_3XYZL = careplanlink1.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
	INNER JOIN v2_CCR#CPC_3XYZL_Intrvnt_PNU1C interven1 ON carecomp1.v2_CCRGBLCrPlnCmpnnt_3XYZL = interven1.v2_CCRGBLCrPlnCmpnnt_3XYZL &#xD;
    WHERE careplan1.DOCUMENTID = careplan.DOCUMENTID &#xD;
    FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Intervention',&#xD;
    &#xD;
    CAST (( STUFF((SELECT ', ' + CONVERT(varchar,interven1.ExpectedReviewDate_U12HJ,121)&#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM careplan1&#xD;
	INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I careplanlink1 ON careplan1.v2_CN#Nursing#Care#Plan_YP1RM = careplanlink1.v2_CN#Nursing#Care#Plan_YP1RM &#xD;
	INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL carecomp1 ON carecomp1.v2_CCRGBLCrPlnCmpnnt_3XYZL = careplanlink1.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
	INNER JOIN v2_CCR#CPC_3XYZL_Intrvnt_PNU1C interven1 ON carecomp1.v2_CCRGBLCrPlnCmpnnt_3XYZL = interven1.v2_CCRGBLCrPlnCmpnnt_3XYZL &#xD;
    WHERE careplan1.DOCUMENTID = careplan.DOCUMENTID &#xD;
    FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'ExpectedDate',&#xD;
        &#xD;
    CAST (( STUFF((SELECT ', ' + interven1.Comments_KOHUV&#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM careplan1&#xD;
	INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I careplanlink1 ON careplan1.v2_CN#Nursing#Care#Plan_YP1RM = careplanlink1.v2_CN#Nursing#Care#Plan_YP1RM &#xD;
	INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL carecomp1 ON carecomp1.v2_CCRGBLCrPlnCmpnnt_3XYZL = careplanlink1.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
	INNER JOIN v2_CCR#CPC_3XYZL_Intrvnt_PNU1C interven1 ON carecomp1.v2_CCRGBLCrPlnCmpnnt_3XYZL = interven1.v2_CCRGBLCrPlnCmpnnt_3XYZL &#xD;
    WHERE careplan1.DOCUMENTID = careplan.DOCUMENTID &#xD;
    FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Comments',&#xD;
    &#xD;
    CAST (( STUFF((SELECT ', ' + interven1.I_Outcomes_1C2II_desc&#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM careplan1&#xD;
	INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I careplanlink1 ON careplan1.v2_CN#Nursing#Care#Plan_YP1RM = careplanlink1.v2_CN#Nursing#Care#Plan_YP1RM &#xD;
	INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL carecomp1 ON carecomp1.v2_CCRGBLCrPlnCmpnnt_3XYZL = careplanlink1.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
	INNER JOIN v2_CCR#CPC_3XYZL_Intrvnt_PNU1C interven1 ON carecomp1.v2_CCRGBLCrPlnCmpnnt_3XYZL = interven1.v2_CCRGBLCrPlnCmpnnt_3XYZL &#xD;
    WHERE careplan1.DOCUMENTID = careplan.DOCUMENTID &#xD;
    FOR XML PATH('')), 1, 1, '') ) as varchar(255)) as 'Outcomes' &#xD;
        &#xD;
        &#xD;
    FROM v2_CN#Nursing#Care#Plan_YP1RM careplan&#xD;
	INNER JOIN v2_CNNCP_YP1RM_crpln_X1Q2I careplanlink ON careplan.v2_CN#Nursing#Care#Plan_YP1RM = careplanlink.v2_CN#Nursing#Care#Plan_YP1RM &#xD;
	INNER JOIN v2_CCRGBLCrPlnCmpnnt_3XYZL carecomp ON carecomp.v2_CCRGBLCrPlnCmpnnt_3XYZL = careplanlink.v2_CCRGBLCrPlnCmpnnt_3XYZL&#xD;
	INNER JOIN v2_CCR#CPC_3XYZL_Intrvnt_PNU1C interven ON carecomp.v2_CCRGBLCrPlnCmpnnt_3XYZL = interven.v2_CCRGBLCrPlnCmpnnt_3XYZL &#xD;
    WHERE careplan.DOCUMENTID = careplan.DOCUMENTID&#xD;
    )intervenLink ON intervenLink.DOCUMENTID = comp.DOCUMENTID&#xD;
 &#xD;
WHERE care.P_pI_id_#W85V IN ( &lt;%=AppVars.get("patientURNList")%&gt; )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Care Plans&lt;/h2&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Refresh</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>1</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>true</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message>No Care Plans have been created for this patient. Please add via an Assessment form.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>careplan.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Goals</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Interventions</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>INT_ExpectedReviewDate</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value&lt;&gt;""%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>INT_Comments</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>INT_Outcomes</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Visits</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Handouts</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SpecificInstructions</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>mainComments</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>patientCopy</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>patientConsent</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated by</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)row.get(12).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Draft User</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>patientId</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName</subject-item-name>
			</result-column>
			<result-column>
				<name>Gender</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>DoB</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application( "Healthcare pathways - CCR", "View Document" ); &#xD;
   application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Care_Plan');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Print - ProgressNote</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Progress Note: Print Progress Notes.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>7 DESC</order-by>
		<query-string>SELECT DISTINCT * FROM (  &#xD;
SELECT&#xD;
  document.documentIdentifier as "documentId",&#xD;
  'All Form Documents' as "namespace",&#xD;
  TITLE_VX#6G as "Title",&#xD;
  CASE pnstr.progressNoteType_8KS4J_cde&#xD;
  WHEN 'isoap' THEN 'ISOAP Format by '&#xD;
  WHEN 'case' THEN 'Case Report by '&#xD;
  ELSE 'Standard by '&#xD;
  END + CAST(metaData.sD_userId_7FQIQ as varchar) as "Category",&#xD;
  CASE pnstr.progressNoteType_8KS4J_cde &#xD;
      WHEN 'isoap' THEN  'Plan of Care: ' + CAST(pnstr.Planofcare_4HFPG as varchar)&#xD;
      WHEN 'Standard' THEN &#xD;
           'Note: '+ CAST(pnstr.Comments_EMXXM as varchar)&#xD;
      ELSE&#xD;
      'Significant Other: ' +  CAST(pnstr.SignificantOther_V90WF as varchar(20)) +&#xD;
      ', Reasons for referral to Case Conference: ' +  CAST(pnstr.RsnsfrrfrrltCsCnfrnc_ZTPVE as varchar) &#xD;
      END&#xD;
   as "SubCategory",&#xD;
  ISNULL(CONVERT(varchar(20), DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ), 113) , CONVERT(varchar(20), DATEADD(minute, metaData.created_2CIZE_Ofst,metaData.CREATED_2CIZE), 113)) as "Date"&#xD;
,DATEADD(minute, metaData.dateSubmitted_L0HOZ_Ofst,metaData.dateSubmitted_L0HOZ) as orderDate&#xD;
  ,CREATED_2CIZE_OFST as "DateOffset",&#xD;
  STATUS_TDES0 as "Custom",&#xD;
'Progress Note'  as taskType,&#xD;
metaData.cD_userId_PLU2# as 'DraftUser',&#xD;
'uuid_' + document.modelId as modelId,&#xD;
CAST(pnstr.progressNoteType_8KS4J_desc as varchar) as progressType, &#xD;
    CASE pnstr.progressNoteType_8KS4J_cde WHEN 'isoap' THEN &#xD;
      'Introduction: ' + CAST(pnstr.Information_4ZTFN as varchar) +&#xD;
      ', Subjective: ' + CAST(pnstr.Subjective_FUQSI as varchar) +&#xD;
      ', Objective: ' + CAST(pnstr.Objective_1PDZM as varchar) +&#xD;
      ', Analysis: ' + CAST(pnstr.Analysis_CBBZ5 as varchar) +&#xD;
      ', Plan of Care: ' + CAST(pnstr.Planofcare_4HFPG as varchar) &#xD;
      WHEN 'Standard' THEN  'Note: '+ CAST(pnstr.Comments_EMXXM as varchar) &#xD;
      ELSE 'Significant Other: ' +  CAST(pnstr.SignificantOther_V90WF as varchar) + ', Reasons for referral to Case Conference: ' +  CAST(pnstr.RsnsfrrfrrltCsCnfrnc_ZTPVE as varchar) END as details, &#xD;
CAST(metaData.sD_userId_7FQIQ as varchar) "Author", &#xD;
document.documentIdentifier  as docId,&#xD;
  '&lt;%=Context.Patient.Id.MRN%&gt;' as patientId,&#xD;
 UPPER('&lt;%=Context.Patient.Co.PatientName.familyName%&gt;') +', &lt;%=Context.Patient.Co.PatientName.givenName%&gt;'  as Name,&#xD;
 '&lt;%=Context.Patient.Co.Sex%&gt;' as Gender,&#xD;
 '&lt;%=Context.Patient.Co.DateTimeOfBirth%&gt;' as DoB&#xD;
&#xD;
FROM V_DOCUMENT document&#xD;
  join v_AllDocumentIdentifier allDoc WITH(NOLOCK) ON allDoc.documentId = document.documentId&#xD;
  inner join v2_CCR#GBL#Progress#Note_G#X$2 pn WITH(NOLOCK) ON document.documentId = pn.DOCUMENTID&#xD;
  inner join v2_CCR#LPN_G#X$2_adPrgrs_BPNSF pnlink WITH(NOLOCK) ON pnlink.v2_CCR#GBL#Progress#Note_G#X$2 = pn.v2_CCR#GBL#Progress#Note_G#X$2&#xD;
  inner join v2_CCRGBLPrgrssNtStr_M$F1Z pnstr WITH(NOLOCK) ON pnstr.v2_CCRGBLPrgrssNtStr_M$F1Z = pnlink.v2_CCRGBLPrgrssNtStr_M$F1Z&#xD;
  LEFT OUTER JOIN v2_CCR#PNS_M$F1Z_SprDcm_BDP5P sprpg WITH(NOLOCK) ON sprpg.v2_CCRGBLPrgrssNtStr_M$F1Z = pnstr.v2_CCRGBLPrgrssNtStr_M$F1Z &#xD;
  LEFT OUTER JOIN v2_CCR#PNS_M$F1Z_atchm_H68QSKH attch WITH(NOLOCK) ON attch.v2_CCR#PNS_M$F1Z_SprDcm_BDP5P = sprpg.v2_CCR#PNS_M$F1Z_SprDcm_BDP5P&#xD;
  inner join V2_DOCUMENTMETADATA_0Z14K metaData WITH(NOLOCK) ON metaData.documentId = document.documentId&#xD;
  LEFT OUTER JOIN V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient WITH(NOLOCK) ON metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K &#xD;
&#xD;
LEFT OUTER JOIN ( &#xD;
    SELECT progressNoteIdentifier.documentIdentifier_0E#DK as progressNoteIdentifier, ad.documentIdentifier&#xD;
as pathwayRefId,ad.documentIdentifier as assessmentId, pt.modelId as modelId  &#xD;
    FROM v_AllDocumentIdentifier ad  &#xD;
    INNER JOIN v2_GBLrvwSmmrycmpnnt_83RT5 rvsumcomp WITH(NOLOCK) ON ad.documentId = rvsumcomp.DOCUMENTID&#xD;
    INNER JOIN OH_CM_Task.dbo.PersistentTask pt WITH(NOLOCK) ON pt.dataId = ad.documentIdentifier&#xD;
    INNER JOIN OH_CM_task.dbo.TaskType tt WITH(NOLOCK) ON tt.uniqueId = pt.taskType&#xD;
    LEFT OUTER JOIN OH_CM_clinical.PathwayEnrollment.PES_PathwayEnrollment pe WITH(NOLOCK) ON pe.enrollmentIdentifier = REPLACE(pt.subjectKey,'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
    &#xD;
    LEFT OUTER JOIN v2_GBLrSc_83RT5_dcLn_HDGDFTH progressNoteIdentifier WITH(NOLOCK) ON rvsumcomp.v2_GBLrvwSmmrycmpnnt_83RT5 = progressNoteIdentifier.v2_GBLrvwSmmrycmpnnt_83RT5 &#xD;
    WHERE progressNoteIdentifier.documentIdentifier_0E#DK is not null&#xD;
        ) nursingAssessments ON nursingAssessments.progressNoteIdentifier = allDoc.documentIdentifier&#xD;
      &#xD;
 &#xD;
WHERE 1=1 &#xD;
     AND metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=AppVars.get("patientURNList")%&gt; )&#xD;
and&#xD;
 UPPER(TITLE_VX#6G) LIKE UPPER('%Progress%')&#xD;
and &#xD;
  (STATUS_TDES0 = 'FINAL' or STATUS_TDES0 = 'DRAFT')&#xD;
 &#xD;
&#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { display:none; important!}  &#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
  &lt;/style&gt;&#xD;
&lt;h2&gt;Progress Note&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadProgressNote(){&#xD;
   var openForm = new Application("Healthcare pathways - CCR", 'Add New Progress Note');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");&#xD;
   submitFilter();  }&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Progress Note</name>
				<index>0</index>
				<action>loadProgressNote();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>1</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Refresh</name>
				<index>2</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>3</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>true</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>progressnotes.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=(html)value %&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>orderDate</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date Offset</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DraftUser</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Progress Note Type</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Details</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value %&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%elseif row.get(10).getOriginalValue%&gt;&#xD;
&lt;%=(html)row.get(10).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Gender</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DoB</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy")%&gt; (&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
var openForm = new Application("Healthcare pathways - CCR", 'View Document' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}else{&#xD;
var openForm = new Application("Healthcare pathways - CCR", 'Add New Progress Note' ); &#xD;
    openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
    concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Progress_Notes&amp;maxHits=100');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<system-object>false</system-object>
	<windowlet>
		<name>Administered Medications</name>
		<maximized-entry-point>
			<name>WD_Administered Medications_Max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Administered Medications</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Global Forms</name>
		<maximized-entry-point>
			<name>WD_Global_Tasks_Max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Global_Tasks</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Immunisations</name>
		<maximized-entry-point>
			<name>WD_Immunisations_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Immunisations</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Lifestyle Factors</name>
		<minimized-entry-point>
			<name>WD_Lifestyle Factors</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Medical History</name>
		<maximized-entry-point>
			<name>WD_Medical History_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Medical History</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Medication Orders</name>
		<maximized-entry-point>
			<name>WD_Medication_Order_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Medication_Order</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Medications</name>
		<maximized-entry-point>
			<name>WD_Medications_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Medications</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Obstetric History</name>
		<maximized-entry-point>
			<name>WD_Obstectric History_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Obstectric History</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Pathway Enrolments</name>
		<maximized-entry-point>
			<name>PP_PathwayEnrollments_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>PP_PathwayEnrollments</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Progress Notes</name>
		<maximized-entry-point>
			<name>WD_Progress_Notes_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Progress_Notes</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Social History</name>
		<minimized-entry-point>
			<name>WD_Social History</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Surgical History</name>
		<maximized-entry-point>
			<name>WD_Surgical History_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Surgical History</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Treatment Orders</name>
		<maximized-entry-point>
			<name>WD_Medical_Treatment_Order_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Medical_Treatment_Order</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Vital Signs and Observations</name>
		<maximized-entry-point>
			<name>WD_Vital Signs and Observations_max</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>WD_Vital Signs and Observations</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>Healthcare pathways - WIC</name>
	<access-controller>
		<allowed-group>
			<name>Communtiy Health Centre Admin</name>
		</allowed-group>
		<allowed-group>
			<name>Nursing - WiC</name>
		</allowed-group>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>DesignerServerBase</name>
		<protected>false</protected>
		<value>/forms-designer</value>
	</application-variable>
	<application-variable>
		<name>DocType</name>
		<protected>false</protected>
		<value>WIC</value>
	</application-variable>
	<application-variable>
		<name>DocTypeStatus</name>
		<protected>false</protected>
		<value>WIC</value>
	</application-variable>
	<application-variable>
		<name>Referral Consumed SOAP Service</name>
		<protected>false</protected>
		<value>ReferralConsumedSoapService</value>
	</application-variable>
	<application-variable>
		<name>SMTdocumentDB</name>
		<protected>false</protected>
		<value>CDRPROD</value>
	</application-variable>
	<application-variable>
		<name>ServerBase</name>
		<protected>false</protected>
		<value>/forms-5.5</value>
	</application-variable>
	<application-variable>
		<name>cDictionaryJdbcUrl</name>
		<protected>false</protected>
		<value>java:comp/env/jdbc/orion/dictionary</value>
	</application-variable>
	<application-variable>
		<name>cFormsJdbcUrl</name>
		<protected>false</protected>
		<value>java:comp/env/jdbc/orion/forms</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>OHCCM</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>2.4</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>db_CWSClinical</name>
		<protected>false</protected>
		<value>OH_CM_Clinical</value>
	</application-variable>
	<application-variable>
		<name>db_CWSCustom</name>
		<protected>false</protected>
		<value>OH_CM_Custom</value>
	</application-variable>
	<application-variable>
		<name>db_CWSMedMan</name>
		<protected>false</protected>
		<value>OH_CM_medicationManagement</value>
	</application-variable>
	<application-variable>
		<name>db_CWSRepository</name>
		<protected>false</protected>
		<value>OH_CM_cRepository</value>
	</application-variable>
	<application-variable>
		<name>db_CWSTask</name>
		<protected>false</protected>
		<value>OH_CM_Task</value>
	</application-variable>
	<application-variable>
		<name>db_CWS_ClinicalPortal</name>
		<protected>false</protected>
		<value>OH_CP_ClinicalPortal</value>
	</application-variable>
	<application-variable>
		<name>displayPatientInformation</name>
		<protected>false</protected>
		<value>true</value>
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>isAdministrator</name>
		<protected>false</protected>
		<value>&lt;%=User.isMemberOf("Forms Administrators")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation &lt;&gt; null &amp;&amp; SecureInformation.patientId &lt;&gt; ""%&gt;&lt;%=SecureInformation.patientId%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNHIList</name>
		<protected>false</protected>
		<value>&lt;%var idlist = ""%&gt;&lt;%var first = true%&gt;&lt;%var nhis = StringUtil.join(Context.get("Patient.Id.PatientIdList"), "," )%&gt;&lt;%if nhis.length() &gt; 0%&gt;&lt;%for each token in StringUtil.tokenize(nhis, ",", true)%&gt;&lt;%if token &lt;&gt; "" &amp;&amp; token &lt;&gt; "Emp"%&gt;&lt;%if first%&gt;&lt;%var first = false%&gt;&lt;%var idlist = token%&gt;&lt;%else%&gt;&lt;%var idlist = idlist+ "','" + token%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end for%&gt;&lt;%=idlist%&gt;&lt;%else%&gt;&lt;%=Context.get("Patient.Id.MRN")%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>patientURNList</name>
		<protected>false</protected>
		<value>&lt;%=SqlParameter.Add(Context.Patient.Id.MRN)%&gt;&lt;%var minorids=AppVars.get("Minor Patient Identifiers")%&gt;&lt;%for each token in minorids%&gt;&lt;%if token &lt;&gt; ""%&gt;,&lt;%=SqlParameter.Add(token)%&gt;&lt;%end if%&gt;&lt;%end for%&gt;</value>
	</application-variable>
	<application-variable>
		<name>renderer</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>userNamespace</name>
		<protected>false</protected>
		<value>clinical-portal-user</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;CaseManHome</url>
	</default-help-redirection>
	<description>::WIC:: Healthcare pathways application</description>
	<entry-point>
		<name>Clerical Home Page</name>
		<access-controller>
			<allowed-group>
				<name>Clerical Home Page</name>
			</allowed-group>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>The Clinician Home Page is an entry point that is used by Clinicians when they first log into Concerto. It is a portal page with configurable windowlets which provides information that relates specifically to the Clinician.</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Icon Redirection</description>
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/applications/Doctor.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Redirection step 0</description>
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Clerical Homepage</value>
				</query-parameter>
				<query-parameter>
					<name>configure</name>
					<index>1</index>
					<value>false</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>DocumentLink_PatientDMA</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient - Add DMA</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Add Administered Medication</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add New Administered Medication</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>true</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_680ad0b1-2caf-44ab-8c86-e4b3b65ffe84</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>Drug</name>
					<index>21</index>
					<value>&lt;%=SecureInformation.Medication%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>Dose</name>
					<index>22</index>
					<value>&lt;%=SecureInformation.Dose%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>Route</name>
					<index>23</index>
					<value>&lt;%=SecureInformation.Route%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Add Rapid Assessment</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add New Rapid Assessment</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>true</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_de058ba7-f133-4d08-9809-672e8e658218</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Add To Administered Medications</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Add Administered Medication</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - All Treatment Protocols</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Treatment Protocol</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>EP - All Treatment Protocols</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Key Word List</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Edit DMA</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC Form Admin</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>DMA Key Word Search</value>
				</query-parameter>
				<query-parameter>
					<name>documentId</name>
					<index>2</index>
					<value>&lt;%=Request.get("documentId")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Patient DMAs</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Edit DMA</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient - Completed DMAs</value>
				</query-parameter>
				<query-parameter>
					<name>documentId</name>
					<index>2</index>
					<value>&lt;%=Request.get("documentId")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Patient Final Clinical Impression</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient - Final Clinical Impressions</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Patient WiC Assessments</name>
		<access-controller>
			<allowed-group>
				<name>Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient - WiC Assessments</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Patient WiC Treatment Forms</name>
		<access-controller>
			<allowed-group>
				<name>Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/text and documents/documents/form_blue.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient - WiC Treatment Forms</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Recomended Treatment Protocols</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient - Recomended Treatment Protocols</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Edit DMA</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add/Edit Decision Making Algorithm (DMA)</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>true</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_784ff0b0-a054-4e3e-8a09-0e48a1797701</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>4</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>5</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>6</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>documentId</name>
					<index>7</index>
					<value>&lt;%=SecureInformation.get("DocumentId")%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>DocumentID</name>
					<index>0</index>
					<value />
				</query-parameter>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Homepage - Clerical</name>
		<access-controller>
			<allowed-group>
				<name>CCR Clerical Group</name>
			</allowed-group>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>entryPointName</name>
					<index>1</index>
					<value>Clerical Home Page</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/ApplicationRedirector.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Homepage - Nursing</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>cWhiteboard</value>
				</query-parameter>
				<query-parameter>
					<name>entryPointName</name>
					<index>1</index>
					<value>My Ward</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/ApplicationRedirector.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Nursing Home Page</name>
		<access-controller>
			<allowed-group>
				<name>Clerical Home Page</name>
			</allowed-group>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>The Clinician Home Page is an entry point that is used by Clinicians when they first log into Concerto. It is a portal page with configurable windowlets which provides information that relates specifically to the Clinician.</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Icon Redirection</description>
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/applications/Doctor.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Redirection step 0</description>
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>WiC Nursing Home Page</value>
				</query-parameter>
				<query-parameter>
					<name>configure</name>
					<index>1</index>
					<value>false</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Patient - Add DMA</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add New DMA</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>true</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>&lt;%=SecureInformation.ModelId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>PathwayID</name>
					<index>21</index>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Patient - WiC Daily Reporting</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient - WiC Reporting</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Document</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Displays the Document from the CDV tree.&#xD;
&#xD;
This is marked as Unsecure so it can receive the form token, but reads no other parameters from the request so does not sign any untrusted content. This must not be updated to read other parameters from the request.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CompletingTaskForms</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>formRequestToken</name>
					<index>0</index>
					<value>&lt;%=Request.formRequestToken%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>documentId</name>
					<index>1</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.documentId%&gt;&#xD;
&lt;%elseif Request.documentIdentifier%&gt;&#xD;
&lt;%=Request.documentIdentifier%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.modelId%&gt;&lt;%elseif Request.modelId%&gt;&lt;%=Request.modelId%&gt;&lt;%else%&gt;uuid_aa226254-a10a-4cdd-94c7-2e57af1006a4&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>3</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isPatientInContext%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>4</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.fromCdvTree%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>5</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.RepositoryName%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>responsible</name>
					<index>6</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.responsible%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>assigned</name>
					<index>7</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.assigned%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isDialog</name>
					<index>8</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isDialog%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>9</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>10</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>11</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>12</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>13</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>14</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>15</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>16</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>17</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>18</index>
					<value>&lt;%if SecureInformation.formModeLock%&gt;edit&lt;%else%&gt;view&lt;%end if%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Document Secure</name>
		<access-controller>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Displays the Document from the CDV tree.&#xD;
&#xD;
This is marked as Unsecure so it can receive the form token, but reads no other parameters from the request so does not sign any untrusted content. This must not be updated to read other parameters from the request.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CompletingTaskForms</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>formRequestToken</name>
					<index>0</index>
					<value>&lt;%=Request.formRequestToken%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>documentId</name>
					<index>1</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.documentId%&gt;&#xD;
&lt;%elseif Request.documentIdentifier%&gt;&#xD;
&lt;%=Request.documentIdentifier%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.modelId%&gt;&lt;%elseif Request.modelId%&gt;&lt;%=Request.modelId%&gt;&lt;%else%&gt;uuid_aa226254-a10a-4cdd-94c7-2e57af1006a4&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>3</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isPatientInContext%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>4</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.fromCdvTree%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>5</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.RepositoryName%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>responsible</name>
					<index>6</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.responsible%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>assigned</name>
					<index>7</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.assigned%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isDialog</name>
					<index>8</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isDialog%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>9</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>10</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>11</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>12</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>13</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>14</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>15</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>16</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>17</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>18</index>
					<value>&lt;%if SecureInformation.formModeLock%&gt;edit&lt;%else%&gt;view&lt;%end if%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD - Administered Medications</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Administered Medications</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Global - Administered Medications</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WD_PatientDMA</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient - DMA Document Link</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Log in to the Forms Application</description>
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<query-parameter>
				<name>username</name>
				<index>0</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>isAdministrator</name>
				<index>1</index>
				<value>&lt;%=AppVars.isAdministrator%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>concertoHome</name>
				<index>2</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>3</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>applicationName</name>
				<index>4</index>
				<value>&lt;%=Application.Name%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userGivenName</name>
				<index>5</index>
				<value>&lt;%var givenName = User.getAttribute("Users", "Full Name.Given Name(s)")%&gt;&lt;%if givenName = "" %&gt;.&lt;%else%&gt;&lt;%= givenName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userFamilyName</name>
				<index>6</index>
				<value>&lt;%var familyName = User.getAttribute("Users", "Full Name.Family Name")%&gt;&lt;%if familyName = "" %&gt;&lt;%= User.UserID%&gt;&lt;%else%&gt;&lt;%= familyName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userLanguage</name>
				<index>7</index>
				<value>&lt;%=User.getLanguage()%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>namespace</name>
				<index>8</index>
				<value>&lt;%=AppVars.userNamespace%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>9</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<redirection-key>cForms</redirection-key>
			<url>&lt;%=AppVars.ServerBase%&gt;/login</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>600000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.ServerBase%&gt;/logout</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>EP - All Treatment Protocols</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of all uploaded treatment protocol PDF documents for viewable with cViewer</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT DISTINCT&#xD;
ADMN.SDMAF_modelId_Z#STW AS modelID&#xD;
,SDMAF_Title_IJV8K AS DMA&#xD;
,TPTL.TreatmentProtocolName_WSW2X&#xD;
,TPTL.VersionDate_CV1UL AS VDate&#xD;
,fasAT.filename as name&#xD;
,fasAT.uniqueId as 'uniqueId'&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdmnstrtnFrm_DWQIL ADMN&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_TrtPrt_L9OVK TPTL ON ADMN.v2_WICAdmnstrtnFrm_DWQIL = TPTL.v2_WICAdmnstrtnFrm_DWQIL&#xD;
JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_atchm_HTVE2HH ATACH ON TPTL.v2_WICAdFr_DWQIL_TrtPrt_L9OVK = ATACH.v2_WICAdFr_DWQIL_TrtPrt_L9OVK AND ATACH.ordering = 0&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K META ON META.DOCUMENTID = ADMN.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier DI  on DI.DOCUMENTID = META.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FINFO ON FINFO.DocumentId = META.DOCUMENTID&#xD;
left outer join &lt;%=AppVars.db_CWSRepository%&gt;.dbo.FAS_Attachment fasAT ON fasAT.uniqueId = ATACH.formsInternalId_MXZPJ&#xD;
&lt;%if get("TPName") &lt;&gt; ""%&gt; &#xD;
    WHERE TPTL.TreatmentProtocolName_WSW2X LIKE '%&lt;%=get("TPName")%&gt;%' &#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>TPName</name>
				<index>0</index>
				<default-value />
				<display-name>Treatment Protocol Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>ModelID</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DMA</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Treatment Protocol</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Version Date</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>File Name</name>
				<index>4</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PDF Attachment</name>
				<index>5</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(4))  &#xD;
{&#xD;
var AddCp = new Application("Healthcare pathways - WIC Form Admin", 'EP - Open PDF In New Window');&#xD;
AddCp.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(AddCp, 1024, 800, null, null,"resizable=yes");&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Global - Add Administered Medication</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Medication Management: Appears as a Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT * FROM (&#xD;
SELECT [id]&#xD;
      ,DATEADD(SECOND, [durationStartDate]/1000 ,'1970/1/1') [durationStartDate] &#xD;
      ,[controlledDrug]&#xD;
      ,[brandName]&#xD;
      ,[prescribingTerm]&#xD;
      , dose +' ('+ doseUnit +')' as dose&#xD;
      ,[additionalInstructions] &#xD;
      ,[frequency] &#xD;
      ,[indication] &#xD;
      ,[prn]&#xD;
      ,[recordState] &#xD;
      ,[route]&#xD;
      ,[status]&#xD;
      ,CAST([prescriberIdentifier]+' ('+UserAttribute.cValue  as varchar(20))+') ' "Author"&#xD;
      ,patientIdentifier&#xD;
      ,getDate() as placeDateHolder&#xD;
      ,[comments]&#xD;
  FROM &lt;%=AppVars.db_CWSMedMan%&gt;.[dbo].[MedicationPrescription]&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[cUser] cUser ON prescriberIdentifier = cUser.name&#xD;
  LEFT OUTER JOIN &lt;%=AppVars.db_CWS_ClinicalPortal%&gt;.[dbo].[UserAttribute] UserAttribute ON cUser.uniqueId = UserAttribute.cUser AND UserAttribute.name = 'ACTPAS Speciality'&#xD;
WHERE 1=1&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
    AND [patientIdentifier] = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if Request.recordState%&gt;&#xD;
    AND recordState = 'CURRENT'&#xD;
    AND status IN ('ACTIVE', 'CHANGED')&#xD;
 &lt;%end if%&gt;    AND recordState NOT IN ('DRAFT','SUPERCEDED')&#xD;
) AS results&#xD;
ORDER BY 16 DESC, CASE WHEN results.[recordState] = 'CURRENT' THEN 0 ELSE 1 END ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
 h1 { display:none; important!}&#xD;
input { display: none; important! }&#xD;
.add-icon { display: none; important! }&#xD;
&lt;/style&gt;&#xD;
&lt;h2&gt;Medications&lt;/h2&gt;&#xD;
&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Medication Management", "Medication");&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 1024,1150, null, null,"resizable=yes;");&#xD;
   submitFilter();  &#xD;
&#xD;
parent.location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=EP+%2D+Add+To+Administered+Medications');&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Add Medication</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Start Date</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=(html)DateFormat.format(value, "dd-MMM-yyyy")%&gt;&#xD;
&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Controlled</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Brand</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medication</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Dose</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Additional Instructions</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Frequency</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Indication</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PRN</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>RecordState</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Route</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated By</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>URN</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>placeDateHolder</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
   var application = new Application( "Healthcare pathways - WIC", "EP - Add Administered Medication" );&#xD;
   application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog ( application,400,800,null,null,"resizable=yes");&#xD;
}&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=EP+%2D+Add+To+Administered+Medications');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Global - Administered Medications</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Administered Medicationsory: Appears as a Global.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>AdmnDate DESC</order-by>
		<query-string>SELECT * FROM (&#xD;
SELECT&#xD;
'Meds' AS Title&#xD;
,PAT.idNumber_9LV7R AS Patient&#xD;
,DATEADD(MINUTE, meta.dateSubmitted_L0HOZ_Ofst, meta.dateSubmitted_L0HOZ ) as AdmnDate&#xD;
,ADM.D_Drug_6D0B9 AS Drug&#xD;
,ADM.D_Route_I8H7Y AS Route&#xD;
,ADM.D_Dose_EUSGB AS Dose&#xD;
,DATEADD(MINUTE, META.dateSubmitted_L0HOZ_Ofst, META.dateSubmitted_L0HOZ ) as updatedDateTime&#xD;
,meta.sD_userId_L2ZQP as UserId &#xD;
,CONVERT(varchar(250), ADM.D_Comments_R09Q6) as Comments&#xD;
,'uuid_' + FormInfo.[modelId] AS ModelId&#xD;
,DI.documentIdentifier as DocumentId&#xD;
,meta.cD_userId_PLU2# as 'DraftUser'&#xD;
,meta.status_TDES0 as docstatus&#xD;
FROM v2_GBLMdctnMngmnt_X70#S ADM&#xD;
INNER JOIN v2_DocumentMetaData_0Z14K META ON META.DOCUMENTID = ADM.DOCUMENTID&#xD;
INNER JOIN DocumentIdentifier DI  on DI.DOCUMENTID = META.DOCUMENTID&#xD;
INNER JOIN v_Document FormInfo ON FormInfo.DocumentId = ADM.DocumentId&#xD;
LEFT OUTER JOIN v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PAT ON PAT.v2_DocumentMetaData_0Z14K = META.v2_DocumentMetaData_0Z14K&#xD;
WHERE (meta.status_TDES0 = 'FINAL' or meta.status_TDES0 = 'DRAFT')&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
    AND pat.idNumber_9LV7R = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt; &#xD;
UNION ALL &#xD;
    SELECT null AS Title&#xD;
        ,'' AS Patient&#xD;
        ,'' AS AdmnDate &#xD;
        ,'' AS Drug&#xD;
        ,'' AS Route&#xD;
        ,'' AS Dose&#xD;
        ,'' AS updatedDateTime&#xD;
        ,'' AS UserId&#xD;
        ,'' AS Comments&#xD;
        ,'' AS ModelId&#xD;
        ,'' AS DocumentId&#xD;
        ,'' AS 'DraftUser'&#xD;
        ,'' AS docstatus&#xD;
) AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;script language='javascript'&gt;&#xD;
 function loadForm(){&#xD;
   var openForm = new Application("Healthcare pathways - WIC", 'EP - Add To Administered Medications');&#xD;
   openWindow = concerto.openApplicationInModalDialog(openForm, 600, 550, null, null,"resizable=yes;");&#xD;
   submitFilter();&#xD;
   //openForm.Close();&#xD;
  //location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=WD+%2D+Administered+Medications');&#xD;
}&#xD;
&lt;/script&gt;</custom-html>
			<display-name>Administered Medications</display-name>
			<filter-button>
				<name>Add Administered Medication</name>
				<index>0</index>
				<action>loadForm();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none;</style>
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>5</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>ADD</name>
				<index>0</index>
				<action>if (!row.get(0)){ &#xD;
    //Create task item&#xD;
    var openForm = new Application("Healthcare pathways - WIC", 'EP - Add To Administered Medications');&#xD;
    openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;"); &#xD;
}else{&#xD;
   var openForm = new Application("Healthcare pathways - WIC", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=WD+%2D+Administered+Medications');</action>
				<css-class>&lt;%if row.get(0).getOriginalValue%&gt;RENAME&lt;%else%&gt;ADD&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>patientId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Administered Date and Time</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(0).getOriginalValue()%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%else%&gt;&lt;div&gt;&lt;a href="#" title="No results found - Please select row to create new form"&gt;&lt;/a&gt; &lt;/div&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medication</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]AuditEvent.Co.PatientId</subject-item-name>
			</result-column>
			<result-column>
				<name>Route</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Dose</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date and Time</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Given By</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if row.get(12).getOriginalValue = "DRAFT"%&gt;&#xD;
&lt;%=(html)row.get(11).getOriginalValue%&gt;&#xD;
&lt;span style="text-align:right; background-color: #fbedd8; border-color: #8b5300; display: inline-block; vertical-align: baseline; zoom: 1; border-width: 1px; border-style: solid; border-radius: 3px; padding: 1px 6px; font-size: 10px; line-height: normal; font-weight: bold;text-align: center;text-transform: uppercase;color: #000"&gt;DRAFT &lt;/span&gt;&#xD;
&lt;%else%&gt;&#xD;
&lt;%=(html)value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Comments</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(js)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>draftUser</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>status</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)){ &#xD;
   var openForm = new Application("Healthcare pathways - WIC", "View Document");    &#xD;
   openForm.setSecureInformationToken(row.getSecureInformationToken());&#xD;
   concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes");&#xD;
}&#xD;
//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+CCR+Searches&amp;entryPointName=WD_Social History');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Patient - Add DMA</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of DMAs linked to key words, treatment protocols and views on the Administration form</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>1</order-by>
		<query-string>&lt;%if Context.Patient.Co.DateTimeOfBirth %&gt;&#xD;
&#xD;
DECLARE @Age integer &#xD;
DECLARE @DOB datetime &#xD;
SET @DOB = convert(datetime , LEFT(&lt;%=SqlParameters.add(Context.Patient.Co.DateTimeOfBirth)%&gt;, 8), 105)&#xD;
SET @Age = DATEDIFF(year, @DOB, GETDATE()) &#xD;
&#xD;
IF @Age &gt;= 18 BEGIN&#xD;
&#xD;
SELECT DISTINCT &#xD;
RESULTS.ModelID&#xD;
,RESULTS.Name&#xD;
,RESULTS.Title &#xD;
FROM (&#xD;
SELECT &#xD;
   ADMN.SDMAF_modelId_Z#STW AS ModelID&#xD;
   ,ADMN.SDMAF_Title_IJV8K AS Title&#xD;
   ,ADMN.SDMAF_Name_PFZ26 AS Name, &#xD;
   STUFF((SELECT ', ' + kw.KeyWords_78TTB &#xD;
    FROM v2_WICAdFr_DWQIL_KyWrds_78TTB kw&#xD;
    WHERE kw.v2_WICAdmnstrtnFrm_DWQIL = ADMN.v2_WICAdmnstrtnFrm_DWQIL&#xD;
    ORDER BY KW.KeyWords_78TTB &#xD;
    FOR XML PATH('')), 1, 1, '') [Keywords]&#xD;
FROM v2_WICAdmnstrtnFrm_DWQIL ADMN&#xD;
WHERE 1=1&#xD;
GROUP BY ADMN.v2_WICAdmnstrtnFrm_DWQIL,ADMN.SDMAF_modelId_Z#STW ,ADMN.SDMAF_Title_IJV8K ,ADMN.SDMAF_Name_PFZ26 &#xD;
&#xD;
) AS RESULTS&#xD;
WHERE 1=1&#xD;
AND RESULTS.Name NOT LIKE ('WIC_DMA_PAED_%')&#xD;
&#xD;
&lt;%if get("KeyWord") &lt;&gt; ""%&gt;&#xD;
   &lt;%var StringTokenList =  get("KeyWord")%&gt;&#xD;
   &lt;%for each token in StringUtil.tokenize(StringTokenList,";")%&gt;&#xD;
      &lt;%if token &lt;&gt; "" %&gt;&#xD;
         AND RESULTS.Keywords like '%&lt;%=token%&gt;%'&#xD;
      &lt;%end if%&gt;&#xD;
   &lt;%end for%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
ORDER BY RESULTS.Name&#xD;
&#xD;
&#xD;
&#xD;
END ELSE IF @Age &lt; 18 BEGIN&#xD;
&#xD;
SELECT DISTINCT &#xD;
RESULTS.ModelID&#xD;
,RESULTS.Name&#xD;
,RESULTS.Title &#xD;
FROM (&#xD;
SELECT &#xD;
   ADMN.SDMAF_modelId_Z#STW AS ModelID&#xD;
   ,ADMN.SDMAF_Title_IJV8K AS Title&#xD;
   ,ADMN.SDMAF_Name_PFZ26 AS Name, &#xD;
   STUFF((SELECT ', ' + kw.KeyWords_78TTB &#xD;
    FROM v2_WICAdFr_DWQIL_KyWrds_78TTB kw&#xD;
    WHERE kw.v2_WICAdmnstrtnFrm_DWQIL = ADMN.v2_WICAdmnstrtnFrm_DWQIL&#xD;
    ORDER BY KW.KeyWords_78TTB &#xD;
    FOR XML PATH('')), 1, 1, '') [Keywords]&#xD;
FROM v2_WICAdmnstrtnFrm_DWQIL ADMN&#xD;
WHERE 1=1&#xD;
GROUP BY ADMN.v2_WICAdmnstrtnFrm_DWQIL,ADMN.SDMAF_modelId_Z#STW ,ADMN.SDMAF_Title_IJV8K ,ADMN.SDMAF_Name_PFZ26 &#xD;
&#xD;
) AS RESULTS&#xD;
WHERE 1=1&#xD;
AND RESULTS.Name LIKE ('WIC_DMA_PAED_%')&#xD;
&#xD;
&#xD;
&lt;%if get("KeyWord") &lt;&gt; ""%&gt;&#xD;
   &lt;%var StringTokenList =  (html) get("KeyWord")%&gt;&#xD;
   &lt;%for each token in StringUtil.tokenize(StringTokenList,";")%&gt;&#xD;
      &lt;%if token &lt;&gt; "" %&gt;&#xD;
         AND RESULTS.Keywords like '%&lt;%=token%&gt;%'&#xD;
      &lt;%end if%&gt;&#xD;
   &lt;%end for%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
ORDER BY RESULTS.Name&#xD;
&#xD;
&#xD;
&#xD;
END&#xD;
&#xD;
&lt;%else%&gt;&#xD;
&#xD;
SELECT DISTINCT &#xD;
RESULTS.ModelID&#xD;
,RESULTS.Name&#xD;
,RESULTS.Title &#xD;
FROM (&#xD;
SELECT &#xD;
   ADMN.SDMAF_modelId_Z#STW AS ModelID&#xD;
   ,ADMN.SDMAF_Title_IJV8K AS Title&#xD;
   ,ADMN.SDMAF_Name_PFZ26 AS Name, &#xD;
   STUFF((SELECT ', ' + kw.KeyWords_78TTB &#xD;
    FROM v2_WICAdFr_DWQIL_KyWrds_78TTB kw&#xD;
    WHERE kw.v2_WICAdmnstrtnFrm_DWQIL = ADMN.v2_WICAdmnstrtnFrm_DWQIL&#xD;
   ORDER BY KW.KeyWords_78TTB &#xD;
    FOR XML PATH('')), 1, 1, '') [Keywords]&#xD;
FROM v2_WICAdmnstrtnFrm_DWQIL ADMN&#xD;
WHERE 1=1&#xD;
GROUP BY ADMN.v2_WICAdmnstrtnFrm_DWQIL,ADMN.SDMAF_modelId_Z#STW ,ADMN.SDMAF_Title_IJV8K ,ADMN.SDMAF_Name_PFZ26  &#xD;
) AS RESULTS&#xD;
WHERE 1=1&#xD;
&#xD;
&#xD;
&lt;%if get("KeyWord") &lt;&gt; ""%&gt;&#xD;
   &lt;%var StringTokenList =  get("KeyWord")%&gt;&#xD;
   &lt;%for each token in StringUtil.tokenize(StringTokenList,";")%&gt;&#xD;
      &lt;%if token &lt;&gt; "" %&gt;&#xD;
         AND RESULTS.Keywords like '%&lt;%=token%&gt;%'&#xD;
      &lt;%end if%&gt;&#xD;
   &lt;%end for%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
ORDER BY RESULTS.Name&#xD;
&#xD;
&#xD;
&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>KeyWord</name>
				<index>0</index>
				<default-value />
				<display-name>Type Key Words seperated by colon (;)</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setStyleParam("")%&gt;&lt;%exec config.setRows("3")%&gt;&lt;%exec config.setColumns("60")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>LineBreak</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;/br&gt;&lt;/br&gt;")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit DMA</name>
				<application>
					<name>Healthcare pathways - WIC</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>200</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>ModelId</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0))  &#xD;
{&#xD;
var AddCp = new Application("Healthcare pathways - WIC", 'Patient - Add DMA');&#xD;
AddCp.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(AddCp, 1024, 800, null, null,"resizable=yes");&#xD;
&#xD;
}&#xD;
&#xD;
location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=WD_PatientDMA');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Patient - Completed DMAs</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of DMAs linked to the current eligibility check, used on the WiC Treatment form</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT ELIG.DOCUMENTID ECheck&#xD;
,'uuid_' + DOC.modelId as ModelId&#xD;
,TPL.title_PXB$P as DMA&#xD;
,TPL.documentIdentifier_0E#DK as documentId&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICPtntSlctDMAs_9O73V ELIG &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WIC#DMA_9O73V_dcLn_HP69#QH TPL ON TPL.v2_WICPtntSlctDMAs_9O73V = ELIG.v2_WICPtntSlctDMAs_9O73V&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document DOC  ON DOC.documentIdentifier = TPL.documentIdentifier_0E#DK&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K META ON META.DOCUMENTID = ELIG.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PMD on META.v2_DocumentMetaData_0Z14K = PMD.v2_DocumentMetaData_0Z14K&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdmnstrtnFrm_DWQIL ADMN ON 'uuid_' + DOC.modelId = ADMN.SDMAF_modelId_Z#STW &#xD;
WHERE ELIG.DOCUMENTID = (SELECT TOP 1 ELIG.DOCUMENTID&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICPtntSlctDMAs_9O73V ELIG&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K META ON META.DOCUMENTID = ELIG.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PMD on META.v2_DocumentMetaData_0Z14K = PMD.v2_DocumentMetaData_0Z14K&#xD;
WHERE META.status_TDES0 = 'Final'&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
  AND PMD.idNumber_9LV7R = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt;&#xD;
ORDER BY ELIG.DOCUMENTID DESC&#xD;
) ORDER BY META.dateSubmitted_L0HOZ DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>EligibilityDoc</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>1</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DMA</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>documentId</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0))  &#xD;
{&#xD;
var AddCp = new Application("Healthcare pathways - WIC", 'View Document');&#xD;
AddCp.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(AddCp, 1024, 800, null, null,"resizable=yes");&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient - DMA Document Link</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Search for TOP 1 DMA just processed to link to eligibility check form</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>DECLARE @tablename varchar(30)=(Select &#xD;
Q1.DMATable&#xD;
FROM &#xD;
(SELECT DISTINCT&#xD;
 ADMN.SDMAF_modelId_Z#STW as modelId&#xD;
,ADMN.SDMAF_Title_IJV8K as Title&#xD;
,ADMN.SDMAF_Name_PFZ26 as Name&#xD;
,ADMN.SelectView_8MAA5 as DMATable&#xD;
FROM &#xD;
&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdmnstrtnFrm_DWQIL ADMN&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_KyWrds_78TTB kw on kw.v2_WICAdmnstrtnFrm_DWQIL = ADMN.v2_WICAdmnstrtnFrm_DWQIL&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = ADMN.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = ADMN.DocumentId) AS Q1,&#xD;
&#xD;
(SELECT TOP 1 &#xD;
    META.DOCUMENTID As DocumentID&#xD;
    ,FINFO.documentIdentifier IdentiFier&#xD;
    ,'uuid_' + FINFO.modelId As ModelId&#xD;
    ,PMD.idNumber_9LV7R PatientId&#xD;
    ,META.title_VX#6G FormTitle&#xD;
    ,dateadd(minute,FINFO.dateSubmitted_Ofst,FINFO.dateSubmitted) as Completed&#xD;
    ,PMD.idNamespace_9V64K as Namespace&#xD;
    ,META.cD_userId_PLU2# as Author&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K META &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier DI  on DI.DOCUMENTID = META.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FINFO ON FINFO.DocumentId = META.DocumentId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PMD on META.v2_DocumentMetaData_0Z14K = PMD.v2_DocumentMetaData_0Z14K &#xD;
WHERE META.status_TDES0 = 'Final'&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
  /* AND PMD.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; ) */&#xD;
  AND PMD.idNumber_9LV7R = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt;&#xD;
ORDER BY Completed DESC&#xD;
) AS Q2&#xD;
&#xD;
WHERE Q1.modelId = Q2.ModelId);&#xD;
&#xD;
DECLARE @Recomended varchar(30)=(Select &#xD;
Q3.Recomended&#xD;
FROM &#xD;
(SELECT DISTINCT&#xD;
 ADMN.SDMAF_modelId_Z#STW as modelId&#xD;
,ADMN.SDMAF_Title_IJV8K as Title&#xD;
,ADMN.SDMAF_Name_PFZ26 as Name&#xD;
,ADMN.SlctRcmddDspstnFld_5E18A as Recomended&#xD;
FROM &#xD;
&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdmnstrtnFrm_DWQIL ADMN&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_KyWrds_78TTB kw on kw.v2_WICAdmnstrtnFrm_DWQIL = ADMN.v2_WICAdmnstrtnFrm_DWQIL&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = ADMN.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = ADMN.DocumentId) AS Q3,&#xD;
&#xD;
(SELECT TOP 1 &#xD;
META.DOCUMENTID As DocumentID&#xD;
,FINFO.documentIdentifier IdentiFier&#xD;
,'uuid_' + FINFO.modelId As ModelId&#xD;
,PMD.idNumber_9LV7R PatientId&#xD;
,META.title_VX#6G FormTitle&#xD;
,dateadd(minute,FINFO.dateSubmitted_Ofst,FINFO.dateSubmitted) as Completed&#xD;
,PMD.idNamespace_9V64K as Namespace&#xD;
,META.cD_userId_PLU2# as Author&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K META &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier DI  on DI.DOCUMENTID = META.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FINFO ON FINFO.DocumentId = META.DocumentId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PMD on META.v2_DocumentMetaData_0Z14K = PMD.v2_DocumentMetaData_0Z14K &#xD;
WHERE META.status_TDES0 = 'Final'&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
/*  AND PMD.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; ) */&#xD;
  AND PMD.idNumber_9LV7R = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt;&#xD;
ORDER BY Completed DESC&#xD;
) AS Q4&#xD;
&#xD;
WHERE Q3.modelId = Q4.ModelId);&#xD;
&#xD;
DECLARE @Applied varchar(30)=(Select &#xD;
Q5.Applied&#xD;
FROM &#xD;
(SELECT DISTINCT&#xD;
 ADMN.SDMAF_modelId_Z#STW as modelId&#xD;
,ADMN.SDMAF_Title_IJV8K as Title&#xD;
,ADMN.SDMAF_Name_PFZ26 as Name&#xD;
,ADMN.SlctAppldDspstnFld_##BR# as Applied&#xD;
FROM &#xD;
&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdmnstrtnFrm_DWQIL ADMN&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_KyWrds_78TTB kw on kw.v2_WICAdmnstrtnFrm_DWQIL = ADMN.v2_WICAdmnstrtnFrm_DWQIL&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = ADMN.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = ADMN.DocumentId) AS Q5,&#xD;
&#xD;
(SELECT TOP 1 &#xD;
META.DOCUMENTID As DocumentID&#xD;
,FINFO.documentIdentifier IdentiFier&#xD;
,'uuid_' + FINFO.modelId As ModelId&#xD;
,PMD.idNumber_9LV7R PatientId&#xD;
,META.title_VX#6G FormTitle&#xD;
,dateadd(minute,FINFO.dateSubmitted_Ofst,FINFO.dateSubmitted) as Completed&#xD;
,PMD.idNamespace_9V64K as Namespace&#xD;
,META.cD_userId_PLU2# as Author&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K META &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier DI  on DI.DOCUMENTID = META.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FINFO ON FINFO.DocumentId = META.DocumentId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PMD on META.v2_DocumentMetaData_0Z14K = PMD.v2_DocumentMetaData_0Z14K &#xD;
WHERE META.status_TDES0 = 'Final'&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
/*  AND PMD.idNumber_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; ) */&#xD;
AND PMD.idNumber_9LV7R = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt;&#xD;
ORDER BY Completed DESC&#xD;
) AS Q6&#xD;
&#xD;
WHERE Q5.modelId = Q6.ModelId);&#xD;
&#xD;
IF @tablename  IS NOT NULL&#xD;
&#xD;
BEGIN&#xD;
&#xD;
EXEC ('Select Top 1&#xD;
 Q7.modelId&#xD;
,Q7.Title &#xD;
,Q7.Name&#xD;
,Q8.DocumentID&#xD;
,Q8.IdentiFier&#xD;
,Q8.PatientId&#xD;
,Q8.Completed&#xD;
,'''' AS Category&#xD;
,''Applied Disposition:- '' + Q8.SubCategory AS SubCategory&#xD;
,Q8.Author&#xD;
,Q8.Namespace&#xD;
,''Recommended Disposition:- '' + Q8.Category AS Custom&#xD;
,'''' AS Instr&#xD;
&#xD;
FROM &#xD;
&#xD;
(SELECT DISTINCT&#xD;
ADMN.SDMAF_modelId_Z#STW as modelId&#xD;
,ADMN.SDMAF_Title_IJV8K as Title&#xD;
,ADMN.SDMAF_Name_PFZ26 as Name&#xD;
,ADMN.SlctAppldDspstnFld_##BR#&#xD;
,ADMN.SlctRcmddDspstnFld_5E18A&#xD;
,ADMN.SelectView_8MAA5&#xD;
&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdmnstrtnFrm_DWQIL ADMN&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_KyWrds_78TTB kw on kw.v2_WICAdmnstrtnFrm_DWQIL = ADMN.v2_WICAdmnstrtnFrm_DWQIL&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = ADMN.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = ADMN.DocumentId) AS Q7,&#xD;
&#xD;
(SELECT TOP 10 &#xD;
META.DOCUMENTID As DocumentID&#xD;
,FINFO.documentIdentifier IdentiFier&#xD;
,''uuid_'' + FINFO.modelId As ModelId&#xD;
,PMD.idNumber_9LV7R PatientId&#xD;
,META.title_VX#6G FormTitle&#xD;
,dateadd(minute,FINFO.dateSubmitted_Ofst,FINFO.dateSubmitted) as Completed&#xD;
,PMD.idNamespace_9V64K as Namespace&#xD;
,META.cD_userId_PLU2# as Author&#xD;
,'+ @Recomended + ' as Category&#xD;
,'+ @Applied + ' as SubCategory      &#xD;
      &#xD;
FROM ' + @tablename + ' DMA &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K META ON META.DOCUMENTID = DMA.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier DI  on DI.DOCUMENTID = META.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FINFO ON FINFO.DocumentId = META.DocumentId&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PMD on META.v2_DocumentMetaData_0Z14K = PMD.v2_DocumentMetaData_0Z14K &#xD;
WHERE META.status_TDES0 = ''Final''&#xD;
ORDER BY Completed DESC) AS Q8&#xD;
&#xD;
WHERE Q7.modelId = Q8.modelId');&#xD;
END&#xD;
&#xD;
ELSE&#xD;
    &#xD;
SELECT TOP 1&#xD;
 'uuid_' + document.modelId  AS "modelId"&#xD;
 ,TITLE_VX#6G AS "Title"&#xD;
 ,'' AS "Name"&#xD;
 ,'' AS "DocId"&#xD;
 ,document.documentIdentifier AS "documentId"&#xD;
 ,metaData_patient.IDNUMBER_9LV7R AS "PatientId"&#xD;
 ,dateSubmitted_L0HOZ AS "Date"&#xD;
 ,CATEGORY_1Y7XM AS "Category"&#xD;
 ,SUBCATEGORY_GCJLK AS "SubCategory"&#xD;
 ,CD_GIVENNAMES_J26OU + ' ' + CD_FAMILYNAME_B#46F AS "Author"&#xD;
 ,SERVICE_5#LNM AS "Namespace"&#xD;
 ,STATUS_TDES0 AS "Status"&#xD;
 ,'' AS "Custom"&#xD;
 from V_DOCUMENT document&#xD;
 join V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = document.documentId&#xD;
 LEFT OUTER JOIN V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K&#xD;
 WHERE 1=2&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
/* AND metaData_patient.IDNUMBER_9LV7R IN ( &lt;%=SqlParameters.add( AppVars.get("patientURNList") )%&gt; ) */&#xD;
AND metaData_patient.idNumber_9LV7R = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&#xD;
&lt;%end if%&gt;&#xD;
 AND STATUS_TDES0 = 'FINAL'&#xD;
 ORDER BY dateSubmitted_L0HOZ DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>Patient - DMA_Doc_Link</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>true</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit DMA</name>
				<application>
					<name>Healthcare pathways - WIC</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message>No DMA Selected</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>ModelId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DocumntID</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Document ID</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PatientId</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy hh:mm" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Author</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Custom</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Instructions</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;span style="text-align:center; &#xD;
background-color: #B3EE3A; &#xD;
display: inline; &#xD;
vertical-align: baseline; &#xD;
zoom: 1; &#xD;
border-width: 0px; &#xD;
border-style: solid; &#xD;
border-width: 5px; &#xD;
border-color: #B3EE3A; &#xD;
border-radius: 5px; &#xD;
font-size: 11px; &#xD;
line-height: normal; &#xD;
font-weight: bold; &#xD;
text-transform: &#xD;
uppercase;color: #000"&#xD;
&gt; SELECT THIS LINE TO LINK THIS COMPLETED DMA TO THE WiC DMA FORM &lt;/span&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (row.get(0))  &#xD;
{&#xD;
context.setApplication(new Application("Healthcare pathways - WIC", "WD_PatientDMA"));&#xD;
concerto.setContext(context, concertoHome);&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient - Final Clinical Impressions</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of Final clinical impressions, populates on the WiC Treatment Form</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>2</order-by>
		<query-string>SELECT ItemNo&#xD;
      ,MainItem&#xD;
FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.WICFinalClinicalImpression&#xD;
WHERE 1=1&#xD;
&lt;%if get("ClinicalImpressionDetail") &lt;&gt; ""%&gt; &#xD;
    AND MainItem LIKE '%&lt;%=get("ClinicalImpressionDetail")%&gt;%' &#xD;
&lt;%end if%&gt;&#xD;
ORDER BY SubItem ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>ClinicalImpressionDetail</name>
				<index>0</index>
				<default-value />
				<display-name>Clinical Impression</display-name>
				<input-type>Autocomplete</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/orion/repository")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT MainItem\r\n      FROM \r\n" + SD + "=AppVars.db_CWSCustom" + ED + ".dbo.WICFinalClinicalImpression\r\nORDER BY MainItem ASC")%&gt;&lt;%exec config.setSubmitColumnName("MainItem")%&gt;&lt;%exec config.setDisplayColumnName("MainItem")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit DMA</name>
				<application>
					<name>Healthcare pathways - WIC</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>ItemNo</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinical Impression</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient - Recomended Treatment Protocols</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of uploaded treatment protocol PDF documents, viewable with cViewer filtered on selected DMAs on eligibility check form</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT ELIG.DOCUMENTID DocumentId&#xD;
,PMD.idNumber_9LV7R as PatientId&#xD;
,'uuid_' + DOC.modelId as ModelId&#xD;
,TPL.title_PXB$P as DMA&#xD;
,TPTL.TreatmentProtocolName_WSW2X as Treatment_Protocol&#xD;
,fasAT.filename as name&#xD;
,fasAT.uniqueId as 'uniqueId'&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICPtntSlctDMAs_9O73V ELIG &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WIC#DMA_9O73V_dcLn_HP69#QH TPL ON TPL.v2_WICPtntSlctDMAs_9O73V = ELIG.v2_WICPtntSlctDMAs_9O73V&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document DOC  ON DOC.documentIdentifier = TPL.documentIdentifier_0E#DK&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K META ON META.DOCUMENTID = ELIG.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PMD on META.v2_DocumentMetaData_0Z14K = PMD.v2_DocumentMetaData_0Z14K&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdmnstrtnFrm_DWQIL ADMN ON 'uuid_' + DOC.modelId = ADMN.SDMAF_modelId_Z#STW &#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_TrtPrt_L9OVK TPTL ON ADMN.v2_WICAdmnstrtnFrm_DWQIL = TPTL.v2_WICAdmnstrtnFrm_DWQIL&#xD;
JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_atchm_HTVE2HH ATACH ON TPTL.v2_WICAdFr_DWQIL_TrtPrt_L9OVK = ATACH.v2_WICAdFr_DWQIL_TrtPrt_L9OVK AND ATACH.ordering = 0&#xD;
left outer join &lt;%=AppVars.db_CWSRepository%&gt;.dbo.FAS_Attachment fasAT ON fasAT.uniqueId = ATACH.formsInternalId_MXZPJ &#xD;
WHERE ELIG.DOCUMENTID = (SELECT TOP 1 ELIG.DOCUMENTID&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICPtntSlctDMAs_9O73V ELIG&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K META ON META.DOCUMENTID = ELIG.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DcmMtDt_0Z14K_p_ptnId_6KYRZ PMD on META.v2_DocumentMetaData_0Z14K = PMD.v2_DocumentMetaData_0Z14K&#xD;
WHERE META.status_TDES0 = 'Final'&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
  AND PMD.idNumber_9LV7R = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt;&#xD;
ORDER BY ELIG.DOCUMENTID DESC&#xD;
) ORDER BY META.dateSubmitted_L0HOZ DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>DocId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PatientId</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ModelID</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DMA</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Treatment Protocol</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>File Name</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>PDF Attachment</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(6))  &#xD;
{&#xD;
var AddCp = new Application("Healthcare pathways - WIC Form Admin", 'EP - Open PDF In New Window');&#xD;
AddCp.setSecureInformationToken(row.getSecureInformationToken());&#xD;
concerto.openApplicationInModalDialog(AddCp, 1024, 800, null, null,"resizable=yes");&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient - WiC Assessments</name>
		<data-source-name>java:comp/env/jdbc/orion/task</data-source-name>
		<description>Returns all WiC Assessments</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
do.documentIdentifier ,&#xD;
pt.taskIdentifier AS 'taskIdentifier',&#xD;
	TaskType.identifyingName AS 'identifyingName',&#xD;
	TaskType.identifyingName AS 'Title', &#xD;
        modificationTime as 'Date',&#xD;
	stg.dueTime AS 'dueTime', &#xD;
pt.modelId as 'modelId'&#xD;
FROM PersistentTask pt   &#xD;
JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
	JOIN SchedulableTaskGroup stg ON pt.owner = stg.uniqueId&#xD;
	JOIN PatientId patient ON stg.patient = patient.uniqueId&#xD;
	JOIN TaskType on pt.taskType = TaskType.uniqueId&#xD;
	JOIN TaskStatus on pt.taskStatus = TaskStatus.uniqueId&#xD;
      WHERE   1=1 &#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
        AND patient.id = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt; &#xD;
        AND TaskStatus.identifyingName = 'COMPLETED'&#xD;
        AND TaskType.identifyingName like '%WiC Nursing Assessment%'&#xD;
ORDER BY creationTime DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open Single Task</name>
				<application>
					<name>Task List</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>50</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment</name>
				<index>0</index>
				<action>//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=EP+%2D+Patient+WiC+Assessments');&#xD;
&#xD;
var application = new Application( "Healthcare pathways - WIC", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskIdentifier</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment Type</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>/*//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=EP+%2D+Patient+WiC+Assessments');*/&#xD;
&#xD;
&#xD;
var application = new Application( "Healthcare pathways - WIC", "View Document Secure" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient - WiC Reporting</name>
		<data-source-name>java:comp/env/jdbc/crepository</data-source-name>
		<description />
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT DISTINCT &#xD;
      pat.sex sex &#xD;
      ,pat.givenName givenName&#xD;
      ,pat.familyName familyName&#xD;
      ,'' Title&#xD;
      ,pat.IndigenousStatus IndigenousStatus&#xD;
      ,CONVERT(VARCHAR(25),pat.dateTimeOfBirth,103) dob&#xD;
      ,pat.country  BirthCountry&#xD;
      ,pat.patientID patientID&#xD;
      ,pat.MedicareNo  MedicareNumber&#xD;
      ,pat.stateorprovince state&#xD;
      ,pat.country country&#xD;
      ,pat.ziporpostalcode postcode&#xD;
      ,pat.streetaddress1 str1&#xD;
      ,pat.city suburb&#xD;
      ,'HOME' AddrType&#xD;
      ,base.RT_SS_StaffCode_9NXA$ ReferralTo &#xD;
      ,appt.clinicCode Location&#xD;
      ,CONVERT(VARCHAR(10),map.ACTPASID) pasRefId&#xD;
      ,map.referral_identifier RefId&#xD;
      ,ref.receivedDate RefCreateDate&#xD;
      ,ref.lastModifiedDate RefCloseDate&#xD;
      ,appt.AppointmentDttm ApptDate&#xD;
      ,appt.SeenAt AppSeenTime&#xD;
      ,appt.AppointmentEndDttm ApptEndDate&#xD;
      ,metaData.sD_userId_7FQIQ  TreatNurse&#xD;
      ,CASE WHEN trmlist.ReviewRequired_HVF7R=1 THEN 'Y' ELSE 'N' END  ReviewStatus&#xD;
      ,base.RT_source_RAZFB_desc RefSource&#xD;
      ,trmlist.SelectFinalDisposition_6EOMD FinalDispos&#xD;
      ,CONVERT(VARCHAR(255),nr.PP_PresentingProblem_6P$0W)  PresentProb&#xD;
      ,dmalist.title_PXB$P DMATitle&#xD;
      ,CASE WHEN dmalist.disposition IS NOT NULL THEN 'YES' ELSE 'NO' END DMAOverRide&#xD;
      ,CONVERT(VARCHAR(255),dmalist.reason) DMAReason&#xD;
      ,trmlist.ClinicalImpression_7Z#Q5 ClinicalImpression&#xD;
      ,patpc.firstName + ' '+ patpc.surname   PCPProviderName&#xD;
FROM OH_CM_Task.dbo.PersistentTask pt   &#xD;
INNER JOIN OH_CM_Task.dbo.SchedulableTaskGroup stg ON pt.owner = stg.uniqueId&#xD;
INNER JOIN OH_CM_Task.dbo.PatientId pid ON stg.patient = pid.uniqueId&#xD;
INNER JOIN OH_CM_Task.dbo.TaskType ty on pt.taskType = ty.uniqueId&#xD;
INNER JOIN OH_CM_Task.dbo.TaskStatus ts on pt.taskStatus = ts.uniqueId&#xD;
INNER JOIN OH_CM_Custom.dbo.ReferralToPathwayMapping map ON map.pathway_enrollmentIdentifier = REPLACE(pt.subjectKey, 'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
INNER JOIN OH_CM_clinical.[PathwayEnrollment].PES_PathwayEnrollment pe ON pe.enrollmentIdentifier = map.[pathway_enrollmentIdentifier]&#xD;
INNER JOIN OH_CM_clinical.Referral.ERF_Referral ref ON ref.identifier = map.referral_identifier&#xD;
INNER JOIN OH_CM_clinical.Referral.ERF_ReferralMetaData refmeta ON refmeta.id = ref.metaDataId&#xD;
INNER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_CWSPatientDemographics pat ON pat.patientID = pe.patientId &#xD;
INNER JOIN ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments appt ON appt.referralID = map.ACTPASID and appt.AppointmentType = 'Walk-In'&#xD;
LEFT JOIN ACTPAS_CDR_VIEWS.dbo.orion_CWSPatientGP patpc on patpc.PATNT_REFNO = pat.patnt_refno &#xD;
LEFT JOIN OH_CM_cRepository.dbo.v_Document doc on doc.documentIdentifier = pt.dataId&#xD;
LEFT JOIN OH_CM_cRepository.dbo.V2_DOCUMENTMETADATA_0Z14K metaData ON metaData.documentId = doc.documentId AND metaData.status_TDES0 != 'DRAFT'&#xD;
LEFT JOIN OH_CM_cRepository.dbo.v2_WIC#NursingAssessment_IIZ1$ nr ON nr.DOCUMENTID = doc.documentId &#xD;
LEFT JOIN OH_CM_cRepository.dbo.v_Document refdoc on refdoc.documentIdentifier = refmeta.dataId &#xD;
LEFT JOIN OH_CM_cRepository.dbo.v2_INT#CR#Base_DDKVM base ON base.DOCUMENTID = refdoc.documentId &#xD;
LEFT OUTER JOIN (SELECT ptdma.dataId dmaDataid ,pedma.enrollmentIdentifier dmaenrollId,sl.PresentingProblem_2IK9Y,  dcl.title_PXB$P,dcl.subcategory_$UUX1 , dcl.documentIdentifier_0E#DK, chd.documentId, dlist.reason, dlist.disposition&#xD;
         FROM OH_CM_Task.dbo.PersistentTask ptdma  &#xD;
         INNER JOIN OH_CM_Task.dbo.SchedulableTaskGroup stgdma ON ptdma.owner = stgdma.uniqueId &#xD;
         INNER JOIN OH_CM_Task.dbo.TaskType tydma on ptdma.taskType = tydma.uniqueId AND tydma.identifyingName = 'Eligibility Check'&#xD;
         INNER JOIN OH_CM_Task.dbo.TaskStatus tsdma on ptdma.taskStatus = tsdma.uniqueId and tsdma.identifyingName = 'COMPLETED'&#xD;
         INNER JOIN OH_CM_Custom.dbo.ReferralToPathwayMapping mapdma ON mapdma.pathway_enrollmentIdentifier = REPLACE(ptdma.subjectKey, 'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
         INNER JOIN OH_CM_clinical.[PathwayEnrollment].PES_PathwayEnrollment pedma ON pedma.enrollmentIdentifier = mapdma.[pathway_enrollmentIdentifier]&#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v_AllDocumentIdentifier al ON al.documentIdentifier = ptdma.dataid&#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v2_WICPtntSlctDMAs_9O73V sl ON sl.documentId = al.documentId&#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v2_WIC#DMA_9O73V_dcLn_HP69#QH dcl ON sl.v2_WICPtntSlctDMAs_9O73V = dcl.v2_WICPtntSlctDMAs_9O73V AND dcl.ordering = 0&#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v_AllDocumentIdentifier chd ON chd.documentIdentifier = dcl.documentIdentifier_0E#DK&#xD;
         LEFT JOIN OH_CM_Custom.dbo.vw_wic_get_DMA_results dlist ON dlist.documentId = chd.documentId&#xD;
         ) dmalist ON dmalist.dmaenrollId = pe.enrollmentIdentifier&#xD;
LEFT OUTER JOIN  (SELECT * FROM (&#xD;
&#xD;
SELECT pttrm.dataId trmDataid ,petrm.enrollmentIdentifier trmenrollId , trm.ReviewRequired_HVF7R, trm.SelectFinalDisposition_6EOMD, imp.ClinicalImpression_7Z#Q5  ,imp.ORDERING , metaData_patient.idNumber_9LV7R, applink.AppointmentNumber&#xD;
         FROM OH_CM_Task.dbo.PersistentTask pttrm &#xD;
         INNER JOIN OH_CM_Task.dbo.SchedulableTaskGroup stgtrm ON pttrm.owner = stgtrm.uniqueId &#xD;
         INNER JOIN OH_CM_Task.dbo.TaskType tytrm on pttrm.taskType = tytrm.uniqueId AND tytrm.identifyingName = 'WiC Treatment Form'&#xD;
         INNER JOIN OH_CM_Task.dbo.TaskStatus tstrm on pttrm.taskStatus = tstrm.uniqueId and tstrm.identifyingName = 'COMPLETED'&#xD;
         INNER JOIN OH_CM_Custom.dbo.ReferralToPathwayMapping maptrm ON maptrm.pathway_enrollmentIdentifier = REPLACE(pttrm.subjectKey, 'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
         INNER JOIN OH_CM_clinical.[PathwayEnrollment].PES_PathwayEnrollment petrm ON petrm.enrollmentIdentifier = maptrm.[pathway_enrollmentIdentifier]&#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v_AllDocumentIdentifier altrm ON altrm.documentIdentifier = pttrm.dataid&#xD;
       LEFT JOIN  OH_CM_cRepository.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = altrm.documentId&#xD;
           INNER JOIN OH_CM_cRepository.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K  &#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v2_WIC#TreatmentForm_4HDAY trm on trm.documentID = altrm.documentID&#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v2_WICTrFr_4HDAY_FnClIm_C7COZ imp ON trm.v2_WIC#TreatmentForm_4HDAY = imp.v2_WIC#TreatmentForm_4HDAY &#xD;
         LEFT JOIN (&#xD;
          SELECT TOP 1 appt.AppointmentNumber, appt.referralID FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments appt &#xD;
          WHERE appt.AppointmentType = 'Walk-In' and appt.PatientId = '&lt;%=get("URN")%&gt;' ORDER BY AppointmentDttm DESC&#xD;
         )as applink ON applink.referralID = maptrm.ACTPASID&#xD;
UNION ALL   &#xD;
   &#xD;
SELECT pttrm.dataId trmDataid ,petrm.enrollmentIdentifier trmenrollId , null, trm.SelectFinalDisposition_6EOMD, imp.ClinicalImpression_7Z#Q5&#xD;
 , imp.ORDERING , metaData_patient.idNumber_9LV7R, applink.AppointmentNumber&#xD;
         FROM OH_CM_Task.dbo.PersistentTask pttrm  &#xD;
         INNER JOIN OH_CM_Task.dbo.SchedulableTaskGroup stgtrm ON pttrm.owner = stgtrm.uniqueId &#xD;
         INNER JOIN OH_CM_Task.dbo.TaskType tytrm on pttrm.taskType = tytrm.uniqueId AND tytrm.identifyingName = 'WiC Treatment Review Form'&#xD;
         INNER JOIN OH_CM_Task.dbo.TaskStatus tstrm on pttrm.taskStatus = tstrm.uniqueId and tstrm.identifyingName = 'COMPLETED'&#xD;
         INNER JOIN OH_CM_Custom.dbo.ReferralToPathwayMapping maptrm ON maptrm.pathway_enrollmentIdentifier = REPLACE(pttrm.subjectKey, 'ESI:com.orchestral.workflow.pathway.enrollment.api_3_1.esw.PathwayEnrollmentSubjectType:','')  &#xD;
         INNER JOIN OH_CM_clinical.[PathwayEnrollment].PES_PathwayEnrollment petrm ON petrm.enrollmentIdentifier = maptrm.[pathway_enrollmentIdentifier]&#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v_AllDocumentIdentifier altrm ON altrm.documentIdentifier = pttrm.dataid&#xD;
       LEFT JOIN  OH_CM_cRepository.dbo.V2_DOCUMENTMETADATA_0Z14K metaData on metaData.documentId = altrm.documentId&#xD;
           INNER JOIN OH_CM_cRepository.dbo.V2_DCMMTDT_0Z14K_P_PTNID_6KYRZ metaData_patient on metaData_patient.V2_DOCUMENTMETADATA_0Z14K = metaData.V2_DOCUMENTMETADATA_0Z14K  &#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v2_WICTrtmntRvwFrm_HLL7J trm on trm.documentID = altrm.documentID&#xD;
         LEFT JOIN OH_CM_cRepository.dbo.v2_WICTRF_HLL7J_FnClIm_C7COZ imp ON trm.v2_WICTrtmntRvwFrm_HLL7J = imp.v2_WICTrtmntRvwFrm_HLL7J&#xD;
         LEFT JOIN (&#xD;
          SELECT TOP 1 appt.AppointmentNumber, appt.referralID FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSAppointments appt &#xD;
          WHERE appt.AppointmentType = 'Walk-In' and appt.PatientId = '&lt;%=get("URN")%&gt;' ORDER BY AppointmentDttm ASC&#xD;
         )as applink ON applink.referralID = maptrm.ACTPASID&#xD;
         &#xD;
        ) as results&#xD;
        where results.ORDERING = 0&#xD;
         ) trmlist ON trmlist.trmenrollId = pe.enrollmentIdentifier  and trmlist.AppointmentNumber = appt.AppointmentNumber&#xD;
&#xD;
WHERE 1=1&#xD;
&lt;%if get("URN") &lt;&gt; ""%&gt; &#xD;
        AND pid.id = '&lt;%=get("URN")%&gt;'&#xD;
&lt;%end if%&gt; &#xD;
&lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;  &#xD;
    AND pat.givenName LIKE  '%&lt;%=get("Name.Given Name")%&gt;%'&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;  &#xD;
    AND pat.familyName LIKE  '%&lt;%=get("Name.Family Name")%&gt;%'&#xD;
&lt;%end if%&gt;  &#xD;
&lt;%if get("Appointment Arrive Date.low") &lt;&gt; ""%&gt;&#xD;
    AND appt.AppointmentDttm &gt;= convert(datetime,'&lt;%=get("Appointment Arrive Date.low")%&gt;',103)&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Appointment Arrive Date.high") &lt;&gt; ""%&gt;&#xD;
    AND appt.AppointmentDttm &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("Appointment Arrive Date.high")%&gt;', 103))&#xD;
 &lt;%end if%&gt; &#xD;
AND ts.identifyingName = 'COMPLETED'&#xD;
AND ty.identifyingName = 'WiC Nursing Assessment'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>URN</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>1</index>
				<default-value />
				<display-name>Patient Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Appointment Arrive Date</name>
				<index>2</index>
				<default-value>;</default-value>
				<display-name>Appointment Arrive Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>true</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Sex</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Surname</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Indig. Status</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date of Birth</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Country of Birth</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Medicare Number</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>State</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Country</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Postcode</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Street Address (Lines 1-4)</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Suburb</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Address Type</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Staff Team</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinic Code</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID (ACTPAS)</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID (CWS)</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date received</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date closed</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointment Arrived Date and Time</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointment Seen Date and Time</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointment Departed Date and Time</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value%&gt;&#xD;
&lt;%=DateFormat.format( value, "dd-MMM-yyyy HH:mm:ss" )%&gt;&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>User ID</name>
				<index>24</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Review required?</name>
				<index>25</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Source</name>
				<index>26</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Final Disposition</name>
				<index>27</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Presenting Problem</name>
				<index>28</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DMA Title</name>
				<index>29</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DMA Overide</name>
				<index>30</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DMA Override Reason</name>
				<index>31</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Final Clinical Impression</name>
				<index>32</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>GP</name>
				<index>33</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient - WiC Treatment Forms</name>
		<data-source-name>java:comp/env/jdbc/orion/task</data-source-name>
		<description>Returns all WiC Assessments</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
do.documentIdentifier , &#xD;
pt.taskIdentifier AS 'taskIdentifier',&#xD;
	TaskType.identifyingName AS 'identifyingName',&#xD;
	TaskType.identifyingName AS 'Title', &#xD;
        creationTime as 'Date',&#xD;
	stg.dueTime AS 'dueTime', &#xD;
pt.modelId as 'modelId'&#xD;
FROM PersistentTask pt   &#xD;
JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document do on do.documentIdentifier = pt.dataId&#xD;
	JOIN SchedulableTaskGroup stg ON pt.owner = stg.uniqueId&#xD;
	JOIN PatientId patient ON stg.patient = patient.uniqueId&#xD;
	JOIN TaskType on pt.taskType = TaskType.uniqueId&#xD;
	JOIN TaskStatus on pt.taskStatus = TaskStatus.uniqueId&#xD;
      WHERE   1=1 &#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&#xD;
        AND patient.id = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt; &#xD;
        AND TaskStatus.identifyingName = 'COMPLETED'&#xD;
        AND TaskType.identifyingName like '%WiC Treatment Form%'&#xD;
ORDER BY creationTime DESC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open Single Task</name>
				<application>
					<name>Task List</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>50</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Open Assessment</name>
				<index>0</index>
				<action>//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=EP+%2D+Patient+WiC+Assessments');&#xD;
&#xD;
var application = new Application( "Healthcare pathways - WIC", "View Document" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</action>
				<css-class>&lt;%if row.get(0).getOriginalValue=null%&gt;ADD&lt;%else%&gt;RENAME&lt;%end if%&gt;</css-class>
				<style />
			</result-action>
			<result-column>
				<name>documentId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskIdentifier</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>taskType</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assessment Type</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Notice</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>modelId</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>/*//location.replace('/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+%2D+WIC&amp;entryPointName=EP+%2D+Patient+WiC+Assessments');*/&#xD;
&#xD;
&#xD;
var application = new Application( "Healthcare pathways - WIC", "View Document Secure" );&#xD;
	//concerto.openApplicationInWindow ( application,null,null,1000,800);&#xD;
	application.setSecureInformationToken(row.getSecureInformationToken());&#xD;
	concerto.openApplicationInModalDialog ( application,1024,800,null,null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<system-object>false</system-object>
	<windowlet>
		<name>DMA</name>
		<minimized-entry-point>
			<name>DocumentLink_PatientDMA</name>
			<application>
				<name>Healthcare pathways - WIC</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Recent Patients</name>
		<minimized-entry-point>
			<name>DocumentLink_PatientDMA</name>
			<application>
				<name>Healthcare pathways - WIC</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>Healthcare pathways - WIC Form Admin</name>
	<access-controller>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>DesignerServerBase</name>
		<protected>false</protected>
		<value>/forms-designer</value>
	</application-variable>
	<application-variable>
		<name>DocType</name>
		<protected>false</protected>
		<value>DISDOC2</value>
	</application-variable>
	<application-variable>
		<name>DocTypeStatus</name>
		<protected>false</protected>
		<value>DISDOC</value>
	</application-variable>
	<application-variable>
		<name>Referral Consumed SOAP Service</name>
		<protected>false</protected>
		<value>ReferralConsumedSoapService</value>
	</application-variable>
	<application-variable>
		<name>SMTdocumentDB</name>
		<protected>false</protected>
		<value>CDRPROD</value>
	</application-variable>
	<application-variable>
		<name>ServerBase</name>
		<protected>false</protected>
		<value>/forms-5.5</value>
	</application-variable>
	<application-variable>
		<name>cDictionaryJdbcUrl</name>
		<protected>false</protected>
		<value>java:comp/env/jdbc/orion/dictionary</value>
	</application-variable>
	<application-variable>
		<name>cFormsJdbcUrl</name>
		<protected>false</protected>
		<value>java:comp/env/jdbc/orion/forms</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>OHCCM</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>2.4</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>db_CWSClinical</name>
		<protected>false</protected>
		<value>OH_CM_Clinical</value>
	</application-variable>
	<application-variable>
		<name>db_CWSCustom</name>
		<protected>false</protected>
		<value>OH_CM_Custom</value>
	</application-variable>
	<application-variable>
		<name>db_CWSMedMan</name>
		<protected>false</protected>
		<value>OH_CM_medicationManagement</value>
	</application-variable>
	<application-variable>
		<name>db_CWSRepository</name>
		<protected>false</protected>
		<value>OH_CM_cRepository</value>
	</application-variable>
	<application-variable>
		<name>db_CWSTask</name>
		<protected>false</protected>
		<value>OH_CM_Task</value>
	</application-variable>
	<application-variable>
		<name>displayPatientInformation</name>
		<protected>false</protected>
		<value>true</value>
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>isAdministrator</name>
		<protected>false</protected>
		<value>&lt;%=User.isMemberOf("Forms Administrators")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation &lt;&gt; null &amp;&amp; SecureInformation.patientId &lt;&gt; ""%&gt;&lt;%=SecureInformation.patientId%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNHIList</name>
		<protected>false</protected>
		<value>&lt;%var idlist = ""%&gt;&lt;%var first = true%&gt;&lt;%var nhis = StringUtil.join(Context.get("Patient.Id.PatientIdList"), "," )%&gt;&lt;%if nhis.length() &gt; 0%&gt;&lt;%for each token in StringUtil.tokenize(nhis, ",", true)%&gt;&lt;%if token &lt;&gt; "" &amp;&amp; token &lt;&gt; "Emp"%&gt;&lt;%if first%&gt;&lt;%var first = false%&gt;&lt;%var idlist = token%&gt;&lt;%else%&gt;&lt;%var idlist = idlist+ "','" + token%&gt;&lt;%end if%&gt;&lt;%end if%&gt;&lt;%end for%&gt;&lt;%=idlist%&gt;&lt;%else%&gt;&lt;%=Context.get("Patient.Id.MRN")%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>renderer</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>userNamespace</name>
		<protected>false</protected>
		<value>clinical-portal-user</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;CaseManHome</url>
	</default-help-redirection>
	<description>::WIC:: Healthcare pathways application</description>
	<entry-point>
		<name>Add New DMA</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add New DMA</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>true</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_784ff0b0-a054-4e3e-8a09-0e48a1797701</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>5</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>7</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientEthnicity</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Co.Ethnicity%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>10</index>
					<value>&lt;%=SecureInformation.isPatientInContext%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>11</index>
					<value>&lt;%=SecureInformation.fromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>12</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationName</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.pN%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>prepopulationValue</name>
					<index>15</index>
					<value>&lt;%=SecureInformation.pV%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>16</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>17</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>18</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>reloadDocumentFromCdvTree</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.reloadDocumentFromCdvTree%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - DMA List</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Edit DMA</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC Form Admin</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>DMA Administration Form Search</value>
				</query-parameter>
				<query-parameter>
					<name>documentId</name>
					<index>2</index>
					<value>&lt;%=Request.get("documentId")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Disposition List</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Disposition List</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC Form Admin</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>DMA Disposition List</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Fact Sheets</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Disposition List</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC Form Admin</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>WIC Fact Sheets</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Final Disposition List</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Disposition List</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC Form Admin</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>WiC Final Disposition List</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Get DMA Fields</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC Form Admin</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>DMA View Field Search</value>
				</query-parameter>
				<query-parameter>
					<name>ViewName</name>
					<index>2</index>
					<value>&lt;%=Request.get("ViewName")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Get DMA Views</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC Form Admin</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>DMA View Name Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Get WIC Forms</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC Form Admin</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>WIC Form Name Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Open PDF In New Window</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>CHI Referrals</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>name</name>
					<index>0</index>
					<value>OpenWICPdfInNewWindow</value>
				</query-parameter>
				<query-parameter>
					<name>DocumentId</name>
					<index>1</index>
					<value>&lt;%=SecureInformation.DocumentId%&gt;&lt;%=SecureInformation.get("PDF Attachment")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/cViewer/process.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - PDF Search</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>PDF Search of Repository</description>
				<method>GET</method>
				<query-parameter>
					<name>name</name>
					<index>0</index>
					<value>WIC_TP_PDFSearch</value>
				</query-parameter>
				<url>/cViewer/process.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>EP - Treatment Protocol List</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name>Disposition List</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - WIC Form Admin</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>WIC Treatment Protocols</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Edit DMA</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Adds a new document to Clinical Documentation.</description>
		<display-name>Add/Edit Decision Making Algorithm (DMA)</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AddingViewingandEditingLetters</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>saveNewDocument</name>
					<index>0</index>
					<value>true</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>1</index>
					<value>edit</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>uuid_784ff0b0-a054-4e3e-8a09-0e48a1797701</value>
				</content-parameter>
				<content-parameter>
					<name>modelVersion</name>
					<index>3</index>
					<value>&lt;%=SecureInformation.modelVersion%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>4</index>
					<value>&lt;%=SecureInformation.repositoryName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>5</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>currentDateTime</name>
					<index>6</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>documentId</name>
					<index>7</index>
					<value>&lt;%=SecureInformation.get("DocumentId")%&gt;</value>
				</content-parameter>
				<description>&lt;%=Request.modelId%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>DocumentID</name>
					<index>0</index>
					<value />
				</query-parameter>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Document</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Administrators</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Maintainers</name>
			</allowed-group>
			<allowed-group>
				<name>Forms Users</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Displays the Document from the CDV tree.&#xD;
&#xD;
This is marked as Unsecure so it can receive the form token, but reads no other parameters from the request so does not sign any untrusted content. This must not be updated to read other parameters from the request.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CompletingTaskForms</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>formRequestToken</name>
					<index>0</index>
					<value>&lt;%=Request.formRequestToken%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>documentId</name>
					<index>1</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.documentId%&gt;&#xD;
&lt;%elseif Request.documentIdentifier%&gt;&#xD;
&lt;%=Request.documentIdentifier%&gt;&#xD;
&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>modelId</name>
					<index>2</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.modelId%&gt;&lt;%elseif Request.modelId%&gt;&lt;%=Request.modelId%&gt;&lt;%else%&gt;uuid_aa226254-a10a-4cdd-94c7-2e57af1006a4&lt;%end if%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isPatientInContext</name>
					<index>3</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isPatientInContext%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>fromCdvTree</name>
					<index>4</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.fromCdvTree%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>repositoryName</name>
					<index>5</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.RepositoryName%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>responsible</name>
					<index>6</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.responsible%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>assigned</name>
					<index>7</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.assigned%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>isDialog</name>
					<index>8</index>
					<value>&lt;%if SecureInformation%&gt;&lt;%=SecureInformation.isDialog%&gt;&lt;%end if%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>renderer</name>
					<index>9</index>
					<value>&lt;%=AppVars.renderer%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>displayPatientInformation</name>
					<index>10</index>
					<value>&lt;%=AppVars.displayPatientInformation%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientId</name>
					<index>11</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientNamespace</name>
					<index>12</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGivenName</name>
					<index>13</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientFamilyName</name>
					<index>14</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientDateOfBirth</name>
					<index>15</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth, "yyyy-MM-dd")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.code</name>
					<index>16</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>patientGender.codingSystem</name>
					<index>17</index>
					<value>GenderLookup</value>
				</content-parameter>
				<content-parameter>
					<name>formMode</name>
					<index>18</index>
					<value>&lt;%if SecureInformation.formModeLock%&gt;edit&lt;%else%&gt;view&lt;%end if%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<redirection-key>cForms</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/openDocument.html</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Log in to the Forms Application</description>
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<query-parameter>
				<name>username</name>
				<index>0</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>isAdministrator</name>
				<index>1</index>
				<value>&lt;%=AppVars.isAdministrator%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>concertoHome</name>
				<index>2</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>3</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>applicationName</name>
				<index>4</index>
				<value>&lt;%=Application.Name%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userGivenName</name>
				<index>5</index>
				<value>&lt;%var givenName = User.getAttribute("Users", "Full Name.Given Name(s)")%&gt;&lt;%if givenName = "" %&gt;.&lt;%else%&gt;&lt;%= givenName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userFamilyName</name>
				<index>6</index>
				<value>&lt;%var familyName = User.getAttribute("Users", "Full Name.Family Name")%&gt;&lt;%if familyName = "" %&gt;&lt;%= User.UserID%&gt;&lt;%else%&gt;&lt;%= familyName %&gt;&lt;%end if%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userLanguage</name>
				<index>7</index>
				<value>&lt;%=User.getLanguage()%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>namespace</name>
				<index>8</index>
				<value>&lt;%=AppVars.userNamespace%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>9</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<redirection-key>cForms</redirection-key>
			<url>&lt;%=AppVars.ServerBase%&gt;/login</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>600000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.ServerBase%&gt;/logout</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>DMA Administration Form Search</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Search for Decision Making Algorithm Forms that have been linked which displays on the Administration Edit DMA Page</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
di.documentIdentifier as documentID&#xD;
,ADMN.SDMAF_Title_IJV8K as Title&#xD;
,ADMN.SDMAF_Name_PFZ26 as Name&#xD;
,ADMN.SDMAF_modelId_Z#STW as modelId&#xD;
FROM &#xD;
v2_WICAdmnstrtnFrm_DWQIL ADMN&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = ADMN.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.DocumentIdentifier di  on di.DOCUMENTID = meta.DOCUMENTID&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v_Document FormInfo ON FormInfo.DocumentId = ADMN.DocumentId&#xD;
WHERE  (UPPER(ADMN.SDMAF_Name_PFZ26) LIKE UPPER('%&lt;%=get("FormName").toString().replace("'", "''").replace("#", "##").replace("%", "#%").replace("_", "#_")%&gt;%') ESCAPE '#'&#xD;
   OR UPPER(ADMN.SDMAF_Title_IJV8K) LIKE UPPER('%&lt;%=get("FormName").toString().replace("'", "''").replace("#", "##").replace("%", "#%").replace("_", "#_")%&gt;%') ESCAPE '#')&#xD;
AND meta.status_TDES0 = 'Final'&#xD;
ORDER BY ADMN.SDMAF_Title_IJV8K</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Add New DMA</name>
				<index>0</index>
				<action>var openForm = new Application("Healthcare pathways - WIC Form Admin", 'Add New DMA');&#xD;
openWindow = concerto.openApplicationInModalDialog(openForm, 1024, 800, null, null,"resizable=yes;");</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Create New DMA Form</name>
				<index>1</index>
				<action>var application = new Application("Forms", "Create New Form");&#xD;
concerto.openApplication(application, '/concerto');</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>2</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>3</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>FormName</name>
				<index>0</index>
				<default-value />
				<display-name>Form Title/Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>LineBreak</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;/br&gt;")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>DocumentId</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Id</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>if (row.get(0)) &#xD;
{&#xD;
var AddCp = new Application("Healthcare pathways - WIC Form Admin", 'Edit DMA');&#xD;
AddCp.setSecureInformationToken(row.getSecureInformationToken());&#xD;
}&#xD;
&#xD;
concerto.openApplicationInModalDialog(AddCp, 1024, 800, null, null,"resizable=yes");</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>DMA Disposition List</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of Dispositions related to the DMAs from Custom DB</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT ItemNo&#xD;
      ,Disposition&#xD;
      ,Priority&#xD;
FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.WICDispositions&#xD;
&lt;%if get("Name") &lt;&gt; ""%&gt; &#xD;
    WHERE Disposition LIKE '%&lt;%=get("Name")%&gt;%' &#xD;
&lt;%end if%&gt;&#xD;
ORDER BY Priority ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>DMA Disposition List</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Name</name>
				<index>0</index>
				<default-value />
				<display-name>Disposition</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>DispositionId</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Disposition</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>DMA Key Word Search</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Search for Forms for the Form Designer</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT DISTINCT&#xD;
KeyWords_78TTB AS KW&#xD;
FROM&#xD;
v2_WICAdFr_DWQIL_KyWrds_78TTB&#xD;
ORDER BY KW ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>KeyWord</name>
				<index>0</index>
				<default-value />
				<display-name>Key Word</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>LineBreak</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;/br&gt;")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Key Word</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>DMA View Field Search</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of Fields on each DMA form filtered by View Name</description>
		<escape-quote-as>'65grg5</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
COLUMN_NAME &#xD;
FROM information_schema.columns &#xD;
&lt;%if Request.get("ViewName") &lt;&gt; ""%&gt;&#xD;
  WHERE table_name ='&lt;%=Request.get("ViewName")%&gt;' &#xD;
&lt;%end if%&gt;&#xD;
&#xD;
ORDER BY COLUMN_NAME</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>DMA View Field Search</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>DMA Field</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>DMA View Name Search</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of SQL Views over the DMAs created from Schema Data</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
DMAV.name as DMATAble&#xD;
FROM sys.columns FLD&#xD;
INNER JOIN sys.objects  DMAV on FLD.object_id=DMAV.object_id&#xD;
WHERE FLD.name like '%AppliedDisposition_%' &#xD;
AND DMAV.name like 'v2_%'&#xD;
ORDER BY DMAV.modify_date asc</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>DMA View Name Search</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>DMA View</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Key Word Search</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>Distinct list of key words used in all DMAs</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT DISTINCT&#xD;
KeyWords_78TTB AS KW&#xD;
FROM&#xD;
&lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_KyWrds_78TTB&#xD;
ORDER BY KW ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>KeyWord</name>
				<index>0</index>
				<default-value />
				<display-name>Key Word</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>LineBreak</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;/br&gt;")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Key Word</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>WIC Fact Sheets</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of current Fact sheets used by WiC from Custom DB</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT ItemNo&#xD;
      ,InfoSheet&#xD;
FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.WICInformationSheets&#xD;
WHERE 1=1&#xD;
&lt;%if get("IName") &lt;&gt; ""%&gt; &#xD;
    AND InfoSheet LIKE '%&lt;%=get("IName")%&gt;%' &#xD;
&lt;%end if%&gt; &#xD;
ORDER BY InfoSheet ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>IName</name>
				<index>0</index>
				<default-value />
				<display-name>Info Sheet Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>UniqueId</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Information Sheet</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>WIC Form Name Search</name>
		<data-source-name>java:comp/env/jdbc/orion/formdefinition</data-source-name>
		<description>List of DMA Form Name and DMA Title for linking the DMAs to Key words and fields on the DMA Administration page</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
   sfi.title as title,&#xD;
   sfi.dataTypeName as name,&#xD;
   sfi.dataTypeId as modelId&#xD;
FROM XFM_SharedFormItem sfi &#xD;
WHERE&#xD;
   (UPPER(sfi.dataTypeName) LIKE UPPER('%&lt;%=get("FormName").toString().replace("'", "''").replace("#", "##").replace("%", "#%").replace("_", "#_")%&gt;%') ESCAPE '#'&#xD;
   OR UPPER(sfi.title) LIKE UPPER('%&lt;%=get("FormName").toString().replace("'", "''").replace("#", "##").replace("%", "#%").replace("_", "#_")%&gt;%') ESCAPE '#')&#xD;
   AND (&#xD;
      sfi.itemType = 'Form'&#xD;
      AND sfi.dataTypeName LIKE 'WIC_DMA%'&#xD;
   )&#xD;
AND UPPER(sfi.title) NOT LIKE '%DELETE%' &#xD;
AND UPPER(sfi.dataTypeName) NOT LIKE '%DELETE%'&#xD;
AND UPPER(sfi.title) NOT LIKE '%DONT%' &#xD;
AND UPPER(sfi.dataTypeName) NOT LIKE '%DONT%'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>FormName</name>
				<index>0</index>
				<default-value />
				<display-name>Form Name/Title</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>LineBreak</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;/br&gt;")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Edit Existing Form</name>
				<application>
					<name>Forms</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>100</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Title</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Id</name>
				<index>2</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>WIC Treatment Protocols</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of Treatment Protocols from DMA Administration Data</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT DISTINCT TPTL.TreatmentProtocolName_WSW2X&#xD;
FROM &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdFr_DWQIL_TrtPrt_L9OVK TPTL&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_WICAdmnstrtnFrm_DWQIL ADMN ON ADMN.v2_WICAdmnstrtnFrm_DWQIL = TPTL.v2_WICAdmnstrtnFrm_DWQIL&#xD;
INNER JOIN &lt;%=AppVars.db_CWSRepository%&gt;.dbo.v2_DocumentMetaData_0Z14K meta ON meta.DOCUMENTID = ADMN.DOCUMENTID&#xD;
WHERE TPTL.TreatmentProtocolName_WSW2X IS NOT NULL&#xD;
AND meta.status_TDES0 = 'Final'&#xD;
&lt;%if get("Name") &lt;&gt; ""%&gt; &#xD;
    AND TPTL.TreatmentProtocolName_WSW2X LIKE '%&lt;%=get("Name")%&gt;%' &#xD;
&lt;%end if%&gt; &#xD;
ORDER BY TPTL.TreatmentProtocolName_WSW2X</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Name</name>
				<index>0</index>
				<default-value />
				<display-name>Treatment Protocol Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Treatment Protocol</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>WiC Final Disposition List</name>
		<data-source-name>java:comp/env/jdbc/orion/repository</data-source-name>
		<description>List of Dispositions related to the Treatment Form, from Custom DB</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT ItemNo&#xD;
      ,Disposition&#xD;
FROM &lt;%=AppVars.db_CWSCustom%&gt;.dbo.WICFinalDisposition&#xD;
ORDER BY Ordering ASC</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>WiC Final Disposition List</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>30</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>DispositionId</name>
				<index>0</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Disposition</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<system-object>false</system-object>
</application>
<application>
	<name>Medication Management</name>
	<access-controller>
		<allowed-group>
			<name>Generic Community User</name>
		</allowed-group>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
		<denied-group>
			<name>Administrators</name>
		</denied-group>
		<denied-group>
			<name>CCR CHI1</name>
		</denied-group>
	</access-controller>
	<application-variable>
		<name>PlatformBase</name>
		<protected>false</protected>
		<value>/cws</value>
	</application-variable>
	<application-variable>
		<name>applicationName</name>
		<protected>false</protected>
		<value>Medication Management</value>
	</application-variable>
	<application-variable>
		<name>concertoHome</name>
		<protected>false</protected>
		<value>/concerto</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>MEM</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>0.3</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>internalConcertoHome</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation.get("Patient ID")&lt;&gt; ""%&gt;&lt;%=SecureInformation.get("Patient ID")%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt; &lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>securityDomain</name>
		<protected>false</protected>
		<value>medman</value>
	</application-variable>
	<application-variable>
		<name>serverBase</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.PlatformBase%&gt;/medman</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;HelpRedirections</url>
	</default-help-redirection>
	<description />
	<document-repository>
		<name>Prescription</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>CCR Clerical Group</name>
			</allowed-group>
			<allowed-group>
				<name>CHHS User</name>
			</allowed-group>
			<allowed-group>
				<name>CHI Referrals</name>
			</allowed-group>
			<allowed-group>
				<name>Clinical User</name>
			</allowed-group>
			<allowed-group>
				<name>Clinician Home Page</name>
			</allowed-group>
			<allowed-group>
				<name>Clinician Homepage</name>
			</allowed-group>
			<allowed-group>
				<name>Clinicians</name>
			</allowed-group>
			<allowed-group>
				<name>Community Home Page</name>
			</allowed-group>
			<allowed-group>
				<name>Community Nurse Practitioner - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>Community Nursing</name>
			</allowed-group>
			<allowed-group>
				<name>Community OT</name>
			</allowed-group>
			<allowed-group>
				<name>Community Physio</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<allowed-group>
				<name>Team Leader - CN</name>
			</allowed-group>
			<allowed-group>
				<name>cOrders - Add Alerts and Diagnosis</name>
			</allowed-group>
			<allowed-group>
				<name>cOrders - Administer Medication</name>
			</allowed-group>
			<allowed-group>
				<name>cOrders - Administration</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<default-image-url />
		<description>Retrieves printed Prescription</description>
		<display-control-bar>false</display-control-bar>
		<display-control-bar-title>false</display-control-bar-title>
		<document-control-bar-button>
			<name>Print</name>
			<index>0</index>
			<action>cdvDocument.print();</action>
			<disable />
			<display>true</display>
			<display-name>Print</display-name>
		</document-control-bar-button>
		<entry-point>
			<name>View Document</name>
			<application>
				<name>Medication Management</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<max-document-count>250</max-document-count>
		<parent-folder-name />
		<repository-class-name>nz.co.orion.concerto.cdv.SQLDocumentRepository</repository-class-name>
		<repository-parameter>
			<name>authorColumnName</name>
			<value>Author</value>
		</repository-parameter>
		<repository-parameter>
			<name>categoryColumnName</name>
			<value>Category</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.columnName</name>
			<value>patientIdentifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.0.name</name>
			<value>patientIdentifier</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.columnName</name>
			<value>patientNamespace</value>
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.defaultValue</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>customAttribute.1.name</name>
			<value>patientNamespace</value>
		</repository-parameter>
		<repository-parameter>
			<name>dataSourceName</name>
			<value>java:comp/env/jdbc/orion/medman</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateColumnName</name>
			<value>archiveDate</value>
		</repository-parameter>
		<repository-parameter>
			<name>dateFormat</name>
			<value>yyyy-MM-dd HH:mm:ss.SSS</value>
		</repository-parameter>
		<repository-parameter>
			<name>defaultAuthor</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultService</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultSubCategory</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>defaultTitle</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>idColumnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>serviceColumnName</name>
			<value>Service</value>
		</repository-parameter>
		<repository-parameter>
			<name>singleDocumentSql</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>sql</name>
			<value>select 
   documentId,
   title as Title,
   category as Category,
   archiveDate,
   authorIdentifier as Author,
   patientIdentifier,
   patientNamespace

from ArchiveDocumentMetaData
where patientIdentifier = '&lt;%=(sql)AppVars.patientId%&gt;'</value>
		</repository-parameter>
		<repository-parameter>
			<name>subCategoryColumnName</name>
			<value>SubCategory</value>
		</repository-parameter>
		<repository-parameter>
			<name>titleColumnName</name>
			<value>Title</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlColumnName</name>
			<value>documentId</value>
		</repository-parameter>
		<repository-parameter>
			<name>urlTemplate</name>
			<value />
		</repository-parameter>
		<repository-parameter>
			<name>usePreparedStatements</name>
			<value>false</value>
		</repository-parameter>
	</document-repository>
	<entry-point>
		<name>Medication</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
			<denied-group>
				<name>CCR CHI1</name>
			</denied-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;HelpRedirections</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/medical/pill_red.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>patientId</name>
					<index>0</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>securityDomain</name>
					<index>2</index>
					<value>&lt;%=AppVars.securityDomain%&gt;</value>
				</query-parameter>
				<redirection-key>com.orchestral.medman</redirection-key>
				<url>&lt;%=AppVars.serverBase%&gt;/Dashboard.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Document</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>View the Prescription retrieved from CDV tree.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ViewPrescriptions</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/patient/Document.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<redirection-key>com.orchestral.medman</redirection-key>
				<url>/patient/&lt;%=SecureInformation.patientIdentifier%&gt;@&lt;%=SecureInformation.patientNamespace%&gt;/medman/document/&lt;%=SecureInformation.URL%&gt;</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<query-parameter>
				<name>concertoHome</name>
				<index>0</index>
				<value>&lt;%=AppVars.concertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>1</index>
				<value>&lt;%=AppVars.internalConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>applicationName</name>
				<index>2</index>
				<value>&lt;%=AppVars.applicationName%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>username</name>
				<index>3</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>securityDomain</name>
				<index>4</index>
				<value>&lt;%=AppVars.securityDomain%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>5</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<redirection-key>com.orchestral.core.login</redirection-key>
			<url>&lt;%=AppVars.PlatformBase%&gt;/login-concerto/login</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>300000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>POST</method>
			<query-parameter>
				<name>securityDomain</name>
				<index>0</index>
				<value>&lt;%=AppVars.securityDomain%&gt;</value>
			</query-parameter>
			<url>&lt;%=AppVars.PlatformBase%&gt;/login-concerto/logout</url>
		</redirection>
	</logout-redirection-script>
	<system-object>false</system-object>
</application>
<application>
	<name>Orion - Homepage</name>
	<application-variable>
		<name>redirectionAppName</name>
		<protected>false</protected>
		<value>&lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("ClPtl_CommunityAlliedHealth") || User.hasRole("ClPtl_CNTeamleader") || User.hasRole("ClPtl_CommunityClinician") || User.hasRole("Apps_ClPtl_Intake_IAM_Health") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health") || User.hasRole("Apps_ClPtl_CommunityAlliedHealth_IAM_Health") || User.hasRole("Apps_ClPtl_CNTeamleader_IAM_Health") || User.hasRole("Apps_ClPtl_CommunityClinician_IAM_Health")%&gt;&#xD;
Healthcare pathways - CCR&#xD;
&lt;%elseif User.hasRole("ClPtl_WiCNurse")|| User.hasRole("Apps_ClPtl_WiCNurse_IAM_Health")|| User.hasRole("ClPtl_CommunityHealthCentreAdmin")|| User.hasRole("Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health")%&gt;&#xD;
Healthcare pathways - WiC&#xD;
&lt;%elseif User.isMemberOf("Administrator User")%&gt;&#xD;
ACT Admin&#xD;
&lt;%elseif User.isMemberOf("BreastScreening Radiographer Homepage")%&gt;&#xD;
BreastScreening ACT&#xD;
&lt;%elseif User.isMemberOf("Breast Screening User")%&gt;&#xD;
cBreastScreening&#xD;
&lt;%elseif User.isMemberOf("cOrders - NIX OPD/ED") || User.isMemberOf("cOrders - NIX WIC") || User.isMemberOf("cOrders - NIX Thoracic/CCU") || User.isMemberOf("cOrders - Doctor") || User.isMemberOf("cOrders - Administration")%&gt;&#xD;
Concerto Orders&#xD;
&lt;%elseif User.isMemberOf("Clinician Homepage")%&gt;&#xD;
Orion - Clinician Homepage&#xD;
&lt;%else%&gt;&#xD;
Orion - Homepage&#xD;
&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>redirectionEntryPointName</name>
		<protected>false</protected>
		<value>&lt;%if User.hasRole("ClPtl_Intake") || User.hasRole("Apps_ClPtl_Intake_IAM_Health")%&gt;&#xD;
Homepage - CHI 1&#xD;
&lt;%elseif User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health")%&gt;&#xD;
Homepage - CHI 2&#xD;
&lt;%elseif User.hasRole("ClPtl_WiCNurse")|| User.hasRole("Apps_ClPtl_WiCNurse_IAM_Health")%&gt;&#xD;
Homepage - Nursing&#xD;
&lt;%elseif User.hasRole("ClPtl_CommunityHealthCentreAdmin")|| User.hasRole("Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health") || User.hasRole("ClPtl_CHILevel2") || User.hasRole("Apps_ClPtl_CHILevel2_IAM_Health")%&gt;&#xD;
Homepage - Clerical&#xD;
&lt;%elseif User.hasRole("ClPtl_CommunityAlliedHealth")|| User.hasRole("Apps_ClPtl_CommunityAlliedHealth_IAM_Health")%&gt;&#xD;
Homepage - Community Clinician Homepage&#xD;
&lt;%elseif User.hasRole("ClPtl_CommunityClinician")|| User.hasRole("Apps_ClPtl_CommunityClinician_IAM_Health")%&gt;&#xD;
Homepage - Community Clinician Homepage&#xD;
&lt;%elseif User.hasRole("ClPtl_CNTeamleader")|| User.hasRole("Apps_ClPtl_CNTeamleader_IAM_Health")%&gt;&#xD;
Homepage - Community Teamleader&#xD;
&lt;%elseif User.isMemberOf("Administrator User")%&gt;&#xD;
Administrator Homepage&#xD;
&lt;%elseif User.isMemberOf("BreastScreening Radiographer Homepage")%&gt;&#xD;
BreastScreening Radiographer Homepage&#xD;
&lt;%elseif User.hasRole("Apps_ClPtl_BSACTClerical_IAM_Health")%&gt;&#xD;
Appointments&#xD;
&lt;%elseif User.hasRole("ClPtl_BSACTClerical")%&gt;&#xD;
Appointments&#xD;
&lt;%elseif User.isMemberOf("Breast Screening User")%&gt;&#xD;
Client Search&#xD;
&lt;%elseif User.isMemberOf("cOrders - NIX OPD/ED") || User.isMemberOf("cOrders - NIX WIC") || User.isMemberOf("cOrders - NIX Thoracic/CCU") || User.isMemberOf("cOrders - Doctor") || User.isMemberOf("cOrders - Administration")%&gt;&#xD;
Orders Clinician Home Page&#xD;
&lt;%elseif User.isMemberOf("Clinician Homepage")%&gt;&#xD;
Clinician Homepage&#xD;
&lt;%else%&gt;&#xD;
User Homepage&#xD;
&lt;%end if%&gt;</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;Clinician Homepage</url>
	</default-help-redirection>
	<description>Home page selector application</description>
	<login-redirection-script />
	<login-timeout>300000</login-timeout>
	<logout-redirection-script />
	<system-object>false</system-object>
</application>
<application>
	<name>Orion - Patient Searches &amp; Demographics</name>
	<access-controller>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
		<denied-group>
			<name>Administrators</name>
		</denied-group>
	</access-controller>
	<application-variable>
		<name>InitiatePassword</name>
		<protected>false</protected>
		<value>system</value>
	</application-variable>
	<application-variable>
		<name>InitiateURL</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>InitiateUser</name>
		<protected>false</protected>
		<value>system</value>
	</application-variable>
	<application-variable>
		<name>Patient Identifier</name>
		<protected>false</protected>
		<value>&lt;%=Context.get("Patient.Id.MRN")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>Patient Minor Identifiers</name>
		<protected>false</protected>
		<value>&lt;%=Context.get("Patient.Id.Alternate")%&gt;</value>
	</application-variable>
	<application-variable>
		<name>PatientDBType</name>
		<protected>false</protected>
		<value>MSSQL</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>RDECON</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>1.1</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value>b3887ca1-0298-41e7-93f2-4c3aefbe9b23</value>
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<description>This is the main Patient search application.</description>
	<login-redirection-script />
	<login-timeout>300000</login-timeout>
	<logout-redirection-script />
	<search>
		<name>Demographic Search</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>20/09/2014: TP - Modified for CCR solution.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>3,5</order-by>
		<query-string>&lt;%if get("Identifier") &lt;&gt; ""%&gt;&#xD;
SELECT patientID,&#xD;
UPPERfamilyName + ', ' + coalesce(givenName + ' ' + middleInitialOrName, givenName, ''),&#xD;
familyName,&#xD;
middleInitialOrName,&#xD;
givenName,&#xD;
dateTimeOfBirth,&#xD;
sex&#xD;
FROM Orion_PatientDemographicsMini&#xD;
WHERE patientID IN ( SELECT majorpatientid&#xD;
FROM Orion_PatientMerges&#xD;
WHERE minorpatientid IN ('&lt;%=get("Identifier").replace(",","','")%&gt;')&#xD;
)&#xD;
OR patientID IN ('&lt;%=get("Identifier").replace(",","','")%&gt;')&#xD;
&#xD;
--these lines to be added for the Calvary integration&#xD;
--&lt;%if User.getAttribute("Campus","User Location") &lt;&gt; "" %&gt;&#xD;
-- And facility = '&lt;%=User.getAttribute("Campus","UserLocation")%&gt;'&#xD;
--&lt;%else%&gt;&#xD;
-- And facility &lt;&gt; 'CHCACT'&#xD;
--&lt;%end if%&gt;&#xD;
--end of Calvary changes&#xD;
&#xD;
&lt;%else%&gt;&#xD;
	SELECT --isnull(b.MajorPatientid,a.patientID) as patientID&#xD;
patientID, UPPERfamilyName + ', ' +  coalesce(givenName + ' ' + middleInitialOrName, givenName, ''),&#xD;
		familyName, middleInitialOrName, givenName , dateTimeOfBirth, sex&#xD;
	FROM Orion_PatientDemographicsMini a&#xD;
	--LEFT OUTER JOIN Orion_PatientMerges b on a.patientID=b.MinorPatientId &#xD;
	where UPPERfamilyName LIKE '&lt;%=get("Name.Family Name")%&gt;%'&#xD;
	&lt;%if get("Name.Middle Name") &lt;&gt; ""%&gt;&#xD;
		AND middleInitialOrName LIKE '&lt;%=get("Name.Middle Name")%&gt;%'&#xD;
	&lt;%end if%&gt;&#xD;
	&lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;&#xD;
		AND givenName LIKE '&lt;%=get("Name.Given Name")%&gt;%'&#xD;
	&lt;%end if%&gt;&#xD;
	&lt;%if get("Date of Birth") &lt;&gt; ""%&gt;&#xD;
		AND dateTimeOfBirth &gt;= CONVERT(datetime,'&lt;%=get("Date of Birth")%&gt;')&#xD;
		AND dateTimeOfBirth &lt; DATEADD(d,1,CONVERT(datetime,'&lt;%=get("Date of Birth")%&gt;'))&#xD;
	&lt;%end if%&gt;&#xD;
	&lt;%if get("Sex") &lt;&gt; "A"%&gt;&#xD;
		AND sex= '&lt;%=get("Sex")%&gt;'&#xD;
	&lt;%end if%&gt;&#xD;
&#xD;
&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;SCRIPT&gt;&#xD;
function validate( params ) {&#xD;
&#xD;
    // Validate Filter Fields Here&#xD;
    if (document.all.item( 'attribute.Identifier' ).value == "" &amp;&amp; &#xD;
        (trim(document.all.item( 'attribute.Name' ).value) == "" || &#xD;
         trim(document.all.item( 'attribute.Name' ).value) == ",")) {&#xD;
        alert("Please include either an Identifier or Name in your search, and try again.");&#xD;
        return false;&#xD;
    }&#xD;
    return true;&#xD;
}&#xD;
&lt;/SCRIPT&gt;&#xD;
&lt;script type="text/javascript" src="/resources/script/ContextSwitching.js"&gt;&lt;/script&gt;&#xD;
&lt;span class="icon-search"&gt;&lt;/span&gt; &lt;a href="javascript:switchToActpas('ContextEngine NewPatientRegistration')" onclick="self.close()" &gt;New Patient Registration (ACTPAS)&lt;/a&gt;&#xD;
&lt;iframe style="display: none" name="form-target"&gt;&lt;/iframe&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>1</index>
				<default-value />
				<display-name>Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Middle Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Spacer</name>
				<index>2</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Date of Birth</name>
				<index>3</index>
				<default-value />
				<display-name>Date of Birth</display-name>
				<input-type>Date</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("d/MM/yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-M-d")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Spacer 2</name>
				<index>4</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Sex</name>
				<index>5</index>
				<default-value>A</default-value>
				<display-name>Sex</display-name>
				<input-type>Radio Buttons</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("M", "Male")%&gt;&lt;%exec config.setOption("F", "Female")%&gt;&lt;%exec config.setOption("A", "All")%&gt;&lt;%exec config.setDefaultValue("A")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>true</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>URN</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>Middle Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.middleInitialOrName</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.givenName</subject-item-name>
			</result-column>
			<result-column>
				<name>Date of Birth ( Age )</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt; ( &lt;%=AgeFormat.format( value )%&gt; )</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value.equals("M")%&gt; Male &lt;%elseif value.equals("F")%&gt; Female &lt;%else%&gt; Unknown &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var application = new Application("Community", "CCR Community View");&#xD;
&#xD;
//var application = new Application("Healthcare pathways - CCR", "PP_Patient Overview");&#xD;
&#xD;
var context = new Context("Patient");&#xD;
context.put("Patient.Id.MRN", row.get(0));&#xD;
&#xD;
context.setApplication(application);&#xD;
      concerto.setContext(context);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<system-object>false</system-object>
</application>
<application>
	<name>Referral Request</name>
	<access-controller>
		<allowed-group>
			<name>Generic Community User</name>
		</allowed-group>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>PlatformBase</name>
		<protected>false</protected>
		<value>/cws</value>
	</application-variable>
	<application-variable>
		<name>Referral Consumed SOAP Service</name>
		<protected>false</protected>
		<value>ReferralConsumedSoapService</value>
	</application-variable>
	<application-variable>
		<name>Referral WSDL URL</name>
		<protected>false</protected>
		<value>/cws/ws/ReferralSOAPService?wsdl</value>
	</application-variable>
	<application-variable>
		<name>ServerBase</name>
		<protected>false</protected>
		<value>/cws/referral-request;securityDomain=&lt;%=AppVars.securityDomain%&gt;</value>
	</application-variable>
	<application-variable>
		<name>applicationName</name>
		<protected>false</protected>
		<value>Referral Request</value>
	</application-variable>
	<application-variable>
		<name>clinicalDbType</name>
		<protected>false</protected>
		<value>sql</value>
	</application-variable>
	<application-variable>
		<name>concertoHome</name>
		<protected>false</protected>
		<value>/concerto</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>REF</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>3.1</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>db_ACTPAS</name>
		<protected>false</protected>
		<value>ACTPAS_CDR_VIEWS.dbo.Orion_PatientDemographics</value>
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>internalConcertoHome</name>
		<protected>false</protected>
		<value>/concerto</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation.get("Patient ID")&lt;&gt;""%&gt;&lt;%=SecureInformation.get("Patient ID")%&gt;&lt;%else%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>portalUserNamespace</name>
		<protected>false</protected>
		<value>clinical-portal-user</value>
	</application-variable>
	<application-variable>
		<name>requestInfoCode</name>
		<protected>false</protected>
		<value>Requestinginformation</value>
	</application-variable>
	<application-variable>
		<name>requestInfoCodingSystem</name>
		<protected>false</protected>
		<value>Orion</value>
	</application-variable>
	<application-variable>
		<name>returnApplication</name>
		<protected>false</protected>
		<value>Orion - Homepage</value>
	</application-variable>
	<application-variable>
		<name>returnEntryPoint</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>securityDomain</name>
		<protected>false</protected>
		<value>forms</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;ReferralsHome</url>
	</default-help-redirection>
	<description>:::CCR::: Referral Request Application contains the entry points and searches specifically for the Fax referrals.</description>
	<entry-point>
		<name>Create Referral Request</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Redirect to the service type selection</description>
		<display-name>Referral Request</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CreatingReferral</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/devices/fax.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Open an existing Referral Request by Id if supplied otherwise redirect to the service type selection</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>patientId</name>
					<index>0</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>referralRequestId</name>
					<index>2</index>
					<value />
				</query-parameter>
				<redirection-key>referral-request</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/ReferralRequest.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>My Referrals</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Not Used:: Access to My Referrals Search</description>
		<display-name>My Referrals</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ViewingReferralsList</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/patient/Document.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Community Referrals Overview</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>New CHI Referral</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>INTERNAL USERS ONLY - This is a New 'Generic' Referral Request - opens referral form directly passing 'int_cr_internal' for the 'community_health' template. Designed for users within services.</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/devices/fax.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>entryPointName</name>
					<index>1</index>
					<value>Open New Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>referralService</name>
					<index>2</index>
					<value>community_health</value>
				</query-parameter>
				<query-parameter>
					<name>referralType</name>
					<index>3</index>
					<value>int_cr_internal</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>5</index>
					<value>OHCP</value>
				</query-parameter>
				<url>/concerto/ApplicationRedirector.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>New CHI Referral Request</name>
		<access-controller>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<denied-group>
				<name>Community Nurse Practitioner - WiC</name>
			</denied-group>
			<denied-group>
				<name>Community Nursing</name>
			</denied-group>
			<denied-group>
				<name>Community Nutrition</name>
			</denied-group>
			<denied-group>
				<name>Community OT</name>
			</denied-group>
			<denied-group>
				<name>Community Physio</name>
			</denied-group>
			<denied-group>
				<name>Community Podiatry</name>
			</denied-group>
			<denied-group>
				<name>Community Social Worker</name>
			</denied-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Complex and Non-Complex Referrals for CHI.</description>
		<display-name>CHI Referral</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/devices/fax.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>CHI Referral Request</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>New Internal Referral Request</name>
		<access-controller>
			<allowed-group>
				<name>Clinicians</name>
			</allowed-group>
			<allowed-group>
				<name>Community Nurse Practitioner - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>Community Nursing</name>
			</allowed-group>
			<allowed-group>
				<name>Community Nutrition</name>
			</allowed-group>
			<allowed-group>
				<name>Community OT</name>
			</allowed-group>
			<allowed-group>
				<name>Community Physio</name>
			</allowed-group>
			<allowed-group>
				<name>Community Podiatry</name>
			</allowed-group>
			<allowed-group>
				<name>Community Social Worker</name>
			</allowed-group>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>New 'Generic' Referral Request - opens referral form directly passing 'int_cr_internal' for the 'community_health' template.</description>
		<display-name>New Referral Request</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/devices/fax.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>referralType:: int_cr_complex&lt;%else%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>entryPointName</name>
					<index>1</index>
					<value>Open New Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>referralService</name>
					<index>2</index>
					<value>community_health</value>
				</query-parameter>
				<query-parameter>
					<name>referralType</name>
					<index>3</index>
					<value>int_cr_internal</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>5</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>referralRequestId</name>
					<index>6</index>
					<value>&lt;%if SecureInformation.get("Referral Request ID")&lt;&gt;""%&gt;&lt;%=SecureInformation.get("Referral Request ID")%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<redirection-key>referral-request</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/ReferralRequest.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>New Referral Request</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CreatingReferral</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/devices/fax.gif</url>
		</icon-redirection>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Community Referrals Overview</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.name</name>
					<index>1</index>
					<value>Create_Referral_Request</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.minHeight</name>
					<index>2</index>
					<value>200</value>
				</query-parameter>
				<query-parameter>
					<name>windowlet.0.maxHeight</name>
					<index>3</index>
					<value>200</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Open External Request</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Clears patient context and opens the external referral request by Id.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;RegisterReferral</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>referralRequestId</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.get("Referral Request ID")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>returnApp</name>
					<index>1</index>
					<value>&lt;%=AppVars.returnApplication%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>returnEntryPoint</name>
					<index>2</index>
					<value>&lt;%=AppVars.returnEntryPoint%&gt;</value>
				</content-parameter>
				<description>Clears patient context and opens the external referral request registration screen.&#xD;
&#xD;
&#xD;
&lt;%=SecureInformation.get("returnApplication")%&gt;&#xD;
&lt;%=SecureInformation.get("returnEntryPoint")%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>clearPatientContext</name>
					<index>0</index>
					<value />
				</query-parameter>
				<redirection-key>referral-request</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/ReferralRequestRegistration.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Open External Request for Rejected Referrals</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Clears patient context and opens the external referral by Id. (this is used for the Rejected Referral queue)</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;RegisterReferral</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>referralRequestId</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.get("Referral ID")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>returnApp</name>
					<index>1</index>
					<value>&lt;%=AppVars.returnApplication%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>returnEntryPoint</name>
					<index>2</index>
					<value>&lt;%=AppVars.returnEntryPoint%&gt;</value>
				</content-parameter>
				<description>Clears patient context and opens the external referral request registration screen.&#xD;
&#xD;
&#xD;
&lt;%=SecureInformation.get("returnApplication")%&gt;&#xD;
&lt;%=SecureInformation.get("returnEntryPoint")%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>clearPatientContext</name>
					<index>0</index>
					<value />
				</query-parameter>
				<redirection-key>referral-request</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/ReferralRequestRegistration.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Open Internal Referral Request</name>
		<access-controller>
			<allowed-group>
				<name>Clinicians</name>
			</allowed-group>
			<allowed-group>
				<name>Community Nurse Practitioner - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>Community Nursing</name>
			</allowed-group>
			<allowed-group>
				<name>Community Nutrition</name>
			</allowed-group>
			<allowed-group>
				<name>Community OT</name>
			</allowed-group>
			<allowed-group>
				<name>Community Physio</name>
			</allowed-group>
			<allowed-group>
				<name>Community Podiatry</name>
			</allowed-group>
			<allowed-group>
				<name>Community Social Worker</name>
			</allowed-group>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>New 'Generic' Referral Request - opens referral form directly passing 'int_cr_internal' for the 'community_health' template.</description>
		<display-name>New Referral Request</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/devices/fax.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>referralType:: int_cr_complex&lt;%else%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>patientId</name>
					<index>0</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>referralRequestId</name>
					<index>2</index>
					<value>&lt;%if SecureInformation.get("Referral Request ID")&lt;&gt;""%&gt;&lt;%=SecureInformation.get("Referral Request ID")%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<redirection-key>referral-request</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/ReferralRequest.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Open New Referral Request</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>An insecure entry point that can be used in conjunction with the Portal JS API to open the request editing page for a new request</description>
		<display-name>Create a Request, after selecting the Service and Type of Request to create</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CreatingReferral</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<content-parameter>
					<name>referralId</name>
					<index>0</index>
					<value>&lt;%=Request.get("referralId")%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>returnApp</name>
					<index>1</index>
					<value>&lt;%=AppVars.returnApplication%&gt;</value>
				</content-parameter>
				<content-parameter>
					<name>returnEntryPoint</name>
					<index>2</index>
					<value>&lt;%=AppVars.returnEntryPoint%&gt;</value>
				</content-parameter>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>referralService</name>
					<index>0</index>
					<value>&lt;%=Request.get("referralService")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>referralType</name>
					<index>1</index>
					<value>&lt;%=Request.get("referralType")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>referralId</name>
					<index>2</index>
					<value>&lt;%=Request.get("referralId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>pasReferralId</name>
					<index>3</index>
					<value>&lt;%=Request.get("pasReferralId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>4</index>
					<value>&lt;%=Context.Patient.Id.MRN%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>5</index>
					<value>OHCP</value>
				</query-parameter>
				<query-parameter>
					<name>pasReferralIdNamespace</name>
					<index>6</index>
					<value>&lt;%=Request.get("pasReferralIdNamespace")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>returnApp</name>
					<index>7</index>
					<value>&lt;%=AppVars.returnApplication%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>returnEntryPoint</name>
					<index>8</index>
					<value>&lt;%=AppVars.returnEntryPoint%&gt;</value>
				</query-parameter>
				<redirection-key>referral-request</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/ReferralRequest.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>PAS Referral Id</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Chrome</allowed-custom-user-agent>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>Safari</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Open the PAS Referral Id search</description>
		<display-name>PAS Referral Id</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CreatingReferral</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>iPM Web Services Integration</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Link ACTPAS Referral</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Patient Id</name>
					<index>2</index>
					<value>&lt;%=Request.patientIdentifier%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referrer Id</name>
					<index>3</index>
					<value>&lt;%=Request.referrerId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Service</name>
					<index>4</index>
					<value>&lt;%=Request.service%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Type</name>
					<index>5</index>
					<value>&lt;%=Request.type%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Reciever Code</name>
					<index>6</index>
					<value>&lt;%=Request.receiverCode%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Source Id</name>
					<index>7</index>
					<value>&lt;%=Request.sourceReferralId%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Pending Referrals</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Open the Pending Referrals search</description>
		<display-name>Pending</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ViewingReferralsList</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Pending Referrals</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Referral Request</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Open an existing Referral Request by Id if supplied otherwise redirect to the service type selection</description>
		<display-name>Referral Request</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CreatingReferral</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/business and data/office/devices/fax.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Open an existing Referral Request by Id if supplied otherwise redirect to the service type selection&#xD;
&#xD;
&#xD;
&lt;%=SecureInformation.get("Referral Request ID")%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>patientId</name>
					<index>0</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>referralRequestId</name>
					<index>2</index>
					<value>&lt;%=SecureInformation.get("Referral Request ID")%&gt;</value>
				</query-parameter>
				<redirection-key>referral-request</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/ReferralRequest.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Referral Request Demographic Search</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Demographic Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Referral Services</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Not Used: Open the Referral Services search</description>
		<display-name>Referral Services</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;CreatingReferral</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Reference Services</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Referrals to Register</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Not Used: Entry point for opening the external requests search</description>
		<display-name>Referrals to Register</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;RegisterReferral</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>zzReferrals Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Referring Clinician</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Clinician Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Rejected Referrals</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Entry point for opening Rejected referrals search.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;RejectedReferrals</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Referral Request</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Rejected Referrals</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<query-parameter>
				<name>concertoHome</name>
				<index>0</index>
				<value>&lt;%=AppVars.concertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>1</index>
				<value>&lt;%=AppVars.internalConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>applicationName</name>
				<index>2</index>
				<value>&lt;%=AppVars.applicationName%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>username</name>
				<index>3</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>securityDomain</name>
				<index>4</index>
				<value>&lt;%=AppVars.securityDomain%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>5</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<redirection-key>com.orchestral.core.login</redirection-key>
			<url>&lt;%=AppVars.PlatformBase%&gt;/login-concerto/login</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>300000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>POST</method>
			<query-parameter>
				<name>securityDomain</name>
				<index>0</index>
				<value>&lt;%=AppVars.securityDomain%&gt;</value>
			</query-parameter>
			<url>&lt;%=AppVars.PlatformBase%&gt;/login-concerto/logout</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>CHI Referral Request</name>
		<data-source-name>java:comp/env/jdbc/cwsclinical</data-source-name>
		<description>Setup to create a CHI specific referral - Complex / Non-Complex</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT 'community_health', '&lt;%=get("Referral Type")%&gt;'</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Create</name>
				<index>0</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action />
				<css-class>Button</css-class>
				<default>true</default>
				<style>display:none !important</style>
			</filter-button>
			<filter-button>
				<name>Reset</name>
				<index>2</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Referral Type</name>
				<index>0</index>
				<default-value />
				<display-name>Referral Type</display-name>
				<input-type>Radio Buttons</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("int_cr_complex", "Complex")%&gt;&lt;%exec config.setOption("int_cr_non_complex", "Non-Complex")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>true</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Service</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Type</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var concertoHome='&lt;%=ConcertoHome%&gt;';&#xD;
var applicationName = "Referral Request";&#xD;
var entryPoint = "Open New Referral Request";&#xD;
 &#xD;
 var url = concertoHome + '/ApplicationRedirector.htm?applicationName='+ applicationName  +'&amp;entryPointName='&#xD;
  + entryPoint  + '&amp;referralService=' + row.get(0) + '&amp;referralType=' + row.get(1)&#xD;
&#xD;
parent.location.replace(url);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Clinician Search</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>Clinician Popup Search</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT distinct clinicianID, isnull(title,'') + ' ' + givenName + ' ' + UPPER(familyName) AS name, familyName, givenName, title ,clinicianID, facility, clinicianID, 'QS',   isnull(title,'') + ' ' + givenName + ' ' + UPPER(familyName) AS name&#xD;
FROM Orion_CWSClinicians&#xD;
WHERE 1=1&#xD;
&lt;%if get("Name.Family Name") &lt;&gt; ""%&gt;&#xD;
 AND familyName LIKE '&lt;%=get("Name.Family Name")%&gt;%'&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;&#xD;
 AND givenName LIKE '&lt;%=get("Name.Given Name")%&gt;%'&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Name</name>
				<index>0</index>
				<default-value />
				<display-name>Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Provider</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Provider.Id.ProviderIDAndType</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>Provider.Co.ProviderName</subject-item-name>
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>clinicianID</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value.equals("ACTCC")%&gt;  ACT Health Public  &lt;%elseif value.equals("CHCACT")%&gt;  Calvary Health Care  &lt;%elseif value.equals("DHHCC")%&gt;  ACT Health  &lt;%else%&gt;  &lt;%=value%&gt;  &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>identifier.id</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>identifier.namespace</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>primaryDisplayName</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Demographic Search</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description />
		<escape-quote-as>''</escape-quote-as>
		<order-by>3,5</order-by>
		<query-string>&lt;%if get("Identifier") &lt;&gt; ""%&gt;&#xD;
SELECT patientID,&#xD;
UPPER(familyName) + ', ' + coalesce(givenName + ' ' + middleInitialOrName, givenName, ''),&#xD;
familyName,&#xD;
middleInitialOrName,&#xD;
givenName,&#xD;
dateTimeOfBirth,&#xD;
sex,&#xD;
patientID,&#xD;
'&lt;%=AppVars.patientNamespace%&gt;',&#xD;
'',&#xD;
sex,&#xD;
dateTimeOfBirth&#xD;
&#xD;
&#xD;
FROM Orion_PatientDemographicsMini&#xD;
WHERE patientID IN ( SELECT majorpatientid&#xD;
FROM Orion_PatientMerges&#xD;
WHERE minorpatientid IN ('&lt;%=get("Identifier").replace(",","','")%&gt;')&#xD;
)&#xD;
OR patientID IN ('&lt;%=get("Identifier").replace(",","','")%&gt;')&#xD;
&#xD;
--these lines to be added for the Calvary integration&#xD;
--&lt;%if User.getAttribute("Campus","User Location") &lt;&gt; "" %&gt;&#xD;
-- And facility = '&lt;%=User.getAttribute("Campus","UserLocation")%&gt;'&#xD;
--&lt;%else%&gt;&#xD;
-- And facility &lt;&gt; 'CHCACT'&#xD;
--&lt;%end if%&gt;&#xD;
--end of Calvary changes&#xD;
&#xD;
&lt;%else%&gt;&#xD;
	SELECT --isnull(b.MajorPatientid,a.patientID) as patientID&#xD;
patientID, UPPERfamilyName + ', ' +  coalesce(givenName + ' ' + middleInitialOrName, givenName, ''),&#xD;
		familyName, middleInitialOrName, givenName , dateTimeOfBirth, sex,&#xD;
patientID,&#xD;
'&lt;%=AppVars.patientNamespace%&gt;',&#xD;
'',&#xD;
sex,&#xD;
dateTimeOfBirth&#xD;
&#xD;
	FROM Orion_PatientDemographicsMini a&#xD;
	--LEFT OUTER JOIN Orion_PatientMerges b on a.patientID=b.MinorPatientId &#xD;
	where UPPERfamilyName LIKE '&lt;%=get("Name.Family Name")%&gt;%'&#xD;
	&lt;%if get("Name.Middle Name") &lt;&gt; ""%&gt;&#xD;
		AND middleInitialOrName LIKE '&lt;%=get("Name.Middle Name")%&gt;%'&#xD;
	&lt;%end if%&gt;&#xD;
	&lt;%if get("Name.Given Name") &lt;&gt; ""%&gt;&#xD;
		AND givenName LIKE '&lt;%=get("Name.Given Name")%&gt;%'&#xD;
	&lt;%end if%&gt;&#xD;
	&lt;%if get("Date of Birth") &lt;&gt; ""%&gt;&#xD;
		AND dateTimeOfBirth &gt;= CONVERT(datetime,'&lt;%=get("Date of Birth")%&gt;')&#xD;
		AND dateTimeOfBirth &lt; DATEADD(d,1,CONVERT(datetime,'&lt;%=get("Date of Birth")%&gt;'))&#xD;
	&lt;%end if%&gt;&#xD;
	&lt;%if get("Sex") &lt;&gt; "A"%&gt;&#xD;
		AND sex= '&lt;%=get("Sex")%&gt;'&#xD;
	&lt;%end if%&gt;&#xD;
&#xD;
&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;SCRIPT&gt;&#xD;
function validate( params ) {&#xD;
&#xD;
    // Validate Filter Fields Here&#xD;
    if (document.all.item( 'attribute.Identifier' ).value == "" &amp;&amp; &#xD;
        (trim(document.all.item( 'attribute.Name' ).value) == "" || &#xD;
         trim(document.all.item( 'attribute.Name' ).value) == ",")) {&#xD;
        alert("Please include either an Identifier or Name in your search, and try again.");&#xD;
        return false;&#xD;
    }&#xD;
    return true;&#xD;
}&#xD;
&lt;/SCRIPT&gt;&#xD;
&#xD;
&lt;script type="text/javascript" src="/resources/script/ContextSwitching.js"&gt;&lt;/script&gt;&#xD;
&lt;span class="icon-search"&gt;&lt;/span&gt;  &lt;a href="#" onclick="switchToActpas('ContextEngine NewPatientRegistration');return false"&gt;New Patient Registration (ACTPAS)&lt;/a&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>URN</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Name</name>
				<index>1</index>
				<default-value />
				<display-name>Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name")%&gt;&lt;%exec config.setNamePart("Middle Name")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Spacer</name>
				<index>2</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Date of Birth</name>
				<index>3</index>
				<default-value />
				<display-name>Date of Birth</display-name>
				<input-type>Date</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("d/MM/yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-M-d")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Spacer 2</name>
				<index>4</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Sex</name>
				<index>5</index>
				<default-value>A</default-value>
				<display-name>Sex</display-name>
				<input-type>Radio Buttons</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("M", "Male")%&gt;&lt;%exec config.setOption("F", "Female")%&gt;&lt;%exec config.setOption("A", "All")%&gt;&lt;%exec config.setDefaultValue("A")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>true</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>true</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>URN</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>Middle Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.middleInitialOrName</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.givenName</subject-item-name>
			</result-column>
			<result-column>
				<name>Date of Birth ( Age )</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt; ( &lt;%=AgeFormat.format( value )%&gt; )</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value.equals("M")%&gt; Male &lt;%elseif value.equals("F")%&gt; Female &lt;%else%&gt; Unknown &lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>identifier</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>namespace</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>address</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>gender</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>dateOfBirth</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format( value, "dd-MMM-yyyy" )%&gt; ( &lt;%=AgeFormat.format( value )%&gt; )</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Draft Referrals</name>
		<data-source-name>java:comp/env/jdbc/referralrequest</data-source-name>
		<description>Displays all entries in the Referral Request DB</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>creationDateTime ASC</order-by>
		<query-string>SELECT&#xD;
    demographic.familyName,&#xD;
    demographic.middleInitialOrName,&#xD;
    demographic.givenName,&#xD;
    demographic.dateTimeOfBirth,&#xD;
    demographic.sex,&#xD;
    UPPER(demographic.familyName) + ', ' + demographic.givenName,&#xD;
&#xD;
    rr.urgent,&#xD;
    rr.referralRequestId,&#xD;
    rr.status,&#xD;
    rr.patientId,&#xD;
    rr.referralService,&#xD;
    rr.referralType,&#xD;
    rr.eventDateTime,&#xD;
    rr.creationDateTime,&#xD;
    acd.shortDescription&#xD;
FROM &#xD;
    RefRequest.ERF_ReferralRequestView rr&#xD;
    LEFT JOIN CodeSet.CodeDefinition acd on rr.acuityCode = acd.code AND rr.acuityCodingSystem = acd.codingsystem&#xD;
    JOIN Codeset.CodeSet acs on acs.identifier = 'com.orchestral.referrals.common.api_2_0.Acuity' AND (acs.id = acd.codesetid or rr.acuityCode is null)&#xD;
    LEFT JOIN &lt;%=AppVars.get("db_ACTPAS")%&gt; demographic ON demographic.patientID = rr.patientId&#xD;
&#xD;
WHERE  rr.status = 'DRAFT'&#xD;
    AND rr.receivedMessageId IS NULL</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Referral Request</name>
				<application>
					<name>Referral Request</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Family Name</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>Middle Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.PatientName.middleInitialOrName</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.AliasName.givenName</subject-item-name>
			</result-column>
			<result-column>
				<name>Date of Birth (Age)</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.DateTimeOfBirth</subject-item-name>
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>Patient.Co.Sex</subject-item-name>
			</result-column>
			<result-column>
				<name>Name</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>Status</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value.toUpperCase.substring(0,1)%&gt;&lt;%=(html)value.toLowerCase.substring(1)%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Type</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Event Date</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creation Date</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Acuity</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var concertoHome = '&lt;%=AppVars.concertoHome%&gt;';&#xD;
var applicationName = '&lt;%=AppVars.applicationName%&gt;';&#xD;
var token = row.getSecureInformationToken();&#xD;
&#xD;
var application = new Application(applicationName, 'Referral Request');&#xD;
//  var application = new Application( "Healthcare pathways - CCR Referrals", "View Referral by Id");&#xD;
application.setSecureInformationToken(token);&#xD;
&#xD;
var context = new Context('Patient');&#xD;
context.put('Patient.Id.MRN', row[9]);&#xD;
context.setApplication(application);&#xD;
&#xD;
concerto.setContext(context);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Original PAS Referral Id</name>
		<data-source-name>java:comp/env/jdbc/osgi_integration</data-source-name>
		<description>PAS Referral Id Search</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string />
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>pasReferralId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>PAS Referral Id</name>
		<data-source-name>java:comp/env/jdbc/osgi_ws</data-source-name>
		<description>This can be used to create a new referral for a patient to a service , team or speciality. &#xD;
While the webservice supports createion , assignment, approval by / to clinicians the list of active clinicians is in the thousands</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
Results.ReferralOID as pasReferralId,&#xD;
Results.pasReferralIdNamespace as pasReferralIdNamespace, &#xD;
Results.Status as Status, &#xD;
Results.Message as Message&#xD;
FROM {{&#xD;
	// this call is to the web service to add a new referral - the generic search will provide a set of variables which are then used to populate the required message fields based on user input &#xD;
	// this will require  sequence of 3 calls &#xD;
	// call 1 - get the patient OID &#xD;
	// call 2 add a new referral for the patient &#xD;
	// call 3 - call to get referrals with a from datetime constraint of the date passed in from the generic search. Note although constrained this call could return multiple rows - so we will traverse and look for a match based on the same &#xD;
	// criteria used to create the referral to find the OID as ACTPAS returns an e007 error if you try to create 2 with the same criteria so the one in the system must be the one we create if we recieve an A000 to the second web service call&#xD;
	&#xD;
	// general variables &#xD;
	var testing = false ; &#xD;
	var messageID =  new java.util.UUID.randomUUID().toString();&#xD;
	var logger = org.apache.log4j.Logger.getLogger("com.orchestral.common.webservice.WebService");&#xD;
    var portalUserID =  ((testing) ? 'Testing' : '&lt;%=(js)User.userID%&gt;' ) ; &#xD;
	var patientURN = "20240657" ; // (js) &lt;%=Request.get("patientIdentifier")%&gt;  ; // via &lt;%=Request.patientIdentifier%&gt;&#xD;
    // original line modified 27th November to use the filter parameter from referrals screens var patientURN =   ((testing) ? '20157946' : '&lt;%=(js)Context.get("Patient.Id.MRN")%&gt;' );&#xD;
	&#xD;
    var actpasPatientOID = '' ; &#xD;
    var noErrors = true ;  &#xD;
    &#xD;
	var workstationID = ((!testing) ? 'WEBSVC' : '&lt;%=(js)AppVars.get("iPM.Generic Workstation ID") %&gt;') ; &#xD;
	var timeout =  ((testing) ? 5000 : '&lt;%=(js)AppVars.get("iPM.WS.Timeout")%&gt;' ) ; 		&#xD;
	var isACTPASUser = ((testing) ? true : &lt;%=(js)User.isMemberOf("Community") %&gt;) ; &#xD;
	//these will contain null if the template processing fails to find the group or if the user is not a member - which is why we set the boolean value to control processing decisions&#xD;
	var actpasUserName =  ((!testing) ?  'WEBSRV' : '&lt;%= (js)User.getAttribute("Community", "ACTPAS User ID")%&gt;' ) ; &#xD;
	var actpasPassword = ((!testing) ? 'websrvdev' : '&lt;%=(js)User.getAttribute("Community","ACTPAS Password")%&gt;' ) ; &#xD;
	var actpasClinicID =  ((testing) ? '&lt;%=(js)AppVars.get("iPM.Generic Clinic ID")%&gt;' :  '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinic ID")%&gt;' ) ; &#xD;
	var actpasSpeciality = ((testing) ? '&lt;%=(js)AppVars.get("iPM.Generic Speciality")%&gt;' : '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;' ) ; &#xD;
	&#xD;
	//these hold the resultset to return to Portal after execution &#xD;
	var rows = [];&#xD;
	var row = new Object;&#xD;
	//set this to true to add additonal information to the log4j output, and to us test values configured as application variables  - useful when hitting the test button in Generic search config where you dont have a patient in context etc. &#xD;
	// note : in test mode for squirrel you will need to provide hardcoded string values for the left term of the ternary otherwise you will get the left term as a literal string - template processing does not occur for Integration driver calls from Squirrel&#xD;
	&#xD;
	//variables from the geneneric search form &#xD;
&#xD;
	var RecvdDttm = '&lt;%=(js) RecvdDttm%&gt;' ;  &#xD;
	var ReferralReason = '&lt;%=(js) ReferralReason%&gt;' ;  &#xD;
	var SentDttm = '&lt;%=(js) SentDttm1%&gt;'; &#xD;
	var Priority = '&lt;%=(js) Priority%&gt;'; &#xD;
	var OrdtaDttm = '&lt;%=(js) OrdtaDttm%&gt;';&#xD;
	var AdministrativeCategory = '&lt;%=(js) AdministrativeCategory%&gt;' ; &#xD;
	var SourceofReferral  = '&lt;%=(js) SourceofReferral%&gt;' ;  &#xD;
	var ExpiryDttm = '&lt;%=(js) ExpiryDttm1%&gt;'; &#xD;
	var Comments = '&lt;%=(js) Comments%&gt;';&#xD;
	var ReferralType ='&lt;%=(js) ReferralType%&gt;';&#xD;
	var ReferredByClinician = '&lt;%=(js) ReferredByClinician%&gt;' ;&#xD;
	var ReferredBySpecialty = '&lt;%=(js) ReferredBySpecialty%&gt;' ;&#xD;
	var AccidentRelatedStatus = '&lt;%=(js) AccidentRelatedStatus%&gt;' ; &#xD;
	var ReferredToClinician = '&lt;%=(js) ReferredToClinician%&gt;' ;&#xD;
	var ReferredToSpecialty = '&lt;%=(js) ReferredToSpecialty%&gt;' ; &#xD;
	var ReferredToHealthOrganisation = '&lt;%=(js) ReferredToHealthOrganisation%&gt;' ;  &#xD;
	var OwnerHealthOrganisation = '&lt;%=(js) OwnerHealthOrganisation%&gt;' ;  // this may need to be changed&#xD;
	var ReferredToStaffTeam = '&lt;%=(js) ReferredTST%&gt;' ; &#xD;
	var Status = "";&#xD;
	var Message = "";&#xD;
	var hasErrors = false; &#xD;
	var timeSuffix = "T00:00:00" ; &#xD;
	var referralReferralOID = "";  // this will hold the OID of the referral once we successfully create one &#xD;
	var pasReferralIdNamespace = "ACTPAS01" ;  // hadrcoded value - name space is required to differentiate PAS ID from different PAS, ACT has only one PAS so this will be hardcoded for ACTPAS &#xD;
	var existingReferralOID = '&lt;%=(js) existingReferralOID %&gt;'  ; // this holds the OID of an existing referral if the user selected one rather than creating one &#xD;
	&#xD;
	// web service variables &#xD;
	//base URL for WSDL and service &#xD;
	var webserviceName = ((testing) ? 'https://actpaswebservices.test.act.gov.au:2124/iPM_WEB_API?wsdl' :  '&lt;%=(js)AppVars.get("iPM.WS.Base Location URL") %&gt;') ;&#xD;
	//all methods in this sequence use the same Namespace and port - they only differ in the action to call &#xD;
	var referralWSNamespace = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace' : '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Namespace") %&gt;' ); &#xD;
	var referralsWSPort = ((testing) ? 'ReferralServiceEndPoint' : '&lt;%=(js)AppVars.get("iPM.WS.Referral Port Name") %&gt;');  &#xD;
	// these are used to retrieve the patient OID for use in later web service calls 	&#xD;
	//var getPatientWSPort = ((testing) ? 'ReferralServiceEndPoint' : '&lt;%=(js)AppVars.get("iPM.WS.Referral Port Name") %&gt;');  // change this to the generic referrals WS endpoint in cleanup delete once tested &#xD;
	var getPatientWSAction = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/GetPatientByPatientId' : '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Action.GetPatientByID") %&gt;'); &#xD;
	var getPatientSuccess = false;  &#xD;
	&#xD;
	//these are used to call the method to add the new referral &#xD;
	var addReferralWSAction = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/AddReferral' : '&lt;%= (js)AppVars.get("iPM.WS.Referrals.Action.Add Referral") %&gt;');&#xD;
	var addReferralSuccess = false; &#xD;
	&#xD;
	//these are used after the call to add a referral to call all the referrals made after or equal to  the RecvdDttm we use in our messages &#xD;
	// this will be a list of 1 or more referrals to be travered looking for the unique combinaiton of the mandatory fields wich will enable us to then retrieve the &#xD;
	//referral OID related to the add referral transaction  - note if the add step is successful but the get fails (e.g. timeout) we shoudl inform the user .. project needs to decide what happens then ?&#xD;
	//Note this would be avoided if the iPM web service was made more robust by adding the OID to the response message &#xD;
	&#xD;
	var getReferralsWSAction = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/GetReferralByPatientOid' : '&lt;%= (js)AppVars.get("iPM.WS.Referrals.Action.Get Referrals by Patient") %&gt;' ); &#xD;
	var getReferralsSuccess = false; &#xD;
&#xD;
	logger.info("iPM Add Referrals Generic Search init");&#xD;
&#xD;
	&#xD;
	// verify none of the mandatory fields are blank - note their may be others that ACT needs to ake mandatory, these are the minimum for the web service to successsfully add &#xD;
	// 1. Owner Health Organisation ; 2. Patient OID ( passed via context)  3. Referral Reason 4. Recieved date time and 5. source of referral &#xD;
	// Note this combination also ensures uniqueness - if you try and add 2 referrals with these details the same the system will reject it with an error code E007. &#xD;
	// note it's unclear if owner health organisation is the org who referred the patient or the org who fulfils it from the documentation neeed to raise &#xD;
	// Note there is no equivalent field in the ACTPAS GUI - for now will set both referred to and owner HO to the same value &#xD;
	&#xD;
	if (OwnerHealthOrganisation === "") {&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please select the Owner Health Orginisation for the referral.\n";&#xD;
	}&#xD;
	&#xD;
	if (ReferralReason === "") {&#xD;
	&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please select the Referral Reason\n"; &#xD;
	&#xD;
	}&#xD;
	if (RecvdDttm ==="") {&#xD;
		&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please enter the date the Referral was recieved\n"; &#xD;
		&#xD;
	}&#xD;
	if (SourceofReferral ==="") {&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please select the Source of the Referral\n" ; &#xD;
	}&#xD;
	if (ReferralType ==="") {&#xD;
		hasErrors = true; &#xD;
		Status = "Failed with input error" ; &#xD;
		Message += "\n * Please select the Referral Type\n" ; &#xD;
		&#xD;
	&#xD;
	}&#xD;
	&#xD;
	if (!isACTPASUser) {&#xD;
		hasErrors = true; &#xD;
		Status = 'EOH0003';&#xD;
		Message = "You are not a member of the ACTPAS users Group - please engage your support team to resolve this issue";	&#xD;
	}&#xD;
	&#xD;
&#xD;
	&#xD;
	&#xD;
	//if there are no errors, the user is an actpas user and the user has not selected an existing referral ID create a new one &#xD;
	// otherwise pass the selected OID back as the return value - this is to support integration with CWS referrals so that the user &#xD;
	// can either select an existing referral or create a new one via the one workflow, at the end of which the action within Clinical Referrals &#xD;
	// to associate the PAS referral ID to the Clinical Referral ID &#xD;
	// at the completion either as OID has been returned in the rowset, or the OID is null  (see documentation for reasons this may occur) &#xD;
	// returning null is safe as this is essentially the same (from a Clinical Referrals workflow persepctive) as if the Workflow Action  has&#xD;
	// never been completed  - which means the user will need to take steps to resolve before the action may be completed &#xD;
	// (for example change paramters, select an existing OID, work around an issue with the remote host being unavailable by completing the &#xD;
	// action at a later time and so on. &#xD;
	&#xD;
	&#xD;
	&#xD;
	if (existingReferralOID != "" ) {&#xD;
		Status = "Success AOH000" ; &#xD;
		Message = "Please click here to continue" ;  // note we porbably don't need the user to click anything in the CWS workflow - leave in until we know how we pass the result columns back to the workflow action &#xD;
		referralReferralOID = existingReferralOID ; &#xD;
	}&#xD;
	else {&#xD;
	&#xD;
		if (!hasErrors &amp;&amp; isACTPASUser ) {&#xD;
		//format the dates as required for the web service : note ACTPAS GUI has no input for the time part so we will follow the same amout of specificity and set all to 00:00:00&#xD;
		RecvdDttm += timeSuffix; &#xD;
		&#xD;
			logger.info("ACTPAS User Group evaluated to |" +  isACTPASUser + " |\n" );&#xD;
			logger.info("ACTPAS user is |" + '&lt;%= (js)User.getAttribute("Community", "ACTPAS User ID")%&gt;' + "|\n") ; &#xD;
			logger.info("ACTPAS user is |" + '&lt;%= (js)User.getAttribute("Community", "ACTPAS Password") %&gt;'  + "|\n") ; &#xD;
		&#xD;
			try {&#xD;
			&#xD;
			//try to get patient OID &#xD;
			logger.info("\nCalling iPM Webservice to Get Patient OID by pas ID\n") ;&#xD;
			var webservice = webServiceFactory.createWebService(webserviceName);&#xD;
			&#xD;
			webservice.setPortName(referralWSNamespace, referralsWSPort); &#xD;
			webservice.setMessageMode();  // we will supply the full envelope and message components so set the mode to message&#xD;
			//next line should not be required in message mode but there is a bug - not setting this explicitly results in a null action being set by the calls to JAX-WS and that causes a SOAP Fault for the iPM webservices &#xD;
			webservice.setSoapAction(getPatientWSAction);&#xD;
&#xD;
			webservice.setRequestTimeout(java.lang.Integer.parseInt(timeout));&#xD;
			webservice.setConnectTimeout(java.lang.Integer.parseInt(timeout));&#xD;
					&#xD;
			webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
									 &lt;soapenv:Header/&gt;&#xD;
										 &lt;soapenv:Body&gt;&#xD;
											  &lt;isof:GetPatientByPatientId&gt;												&#xD;
												 &lt;isof:PatientId&gt;{patientURN}&lt;/isof:PatientId&gt;&#xD;
											  &lt;/isof:GetPatientByPatientId&gt;&#xD;
										   &lt;/soapenv:Body&gt;&#xD;
									&lt;/soapenv:Envelope&gt; ;&#xD;
			logger.info("iPM.WS :: Calling Referrals Service. Message ID is " + messageID + " Request Message is :" + webserviceRequest); &#xD;
					&#xD;
			var webserviceResponse = webservice.call(webserviceRequest); &#xD;
			 &#xD;
&#xD;
			// now to process the response - for some reason this is less likely to fail if you declare the defaults first &#xD;
			default xml namespace = "";&#xD;
			&#xD;
			var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
			var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
			var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
			//var GetPatientByPatientIdResponse = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace");&#xD;
&#xD;
			var xmlInfo = webserviceResponse.s::Body.elements() ; &#xD;
			&#xD;
			//var Header = webserviceResponse.s::Header.elements();  	// this works but needs more investigation as to why the preferred methodreturns something other than the expected value &#xD;
			// the header contains an activity id which is unique per message response from the server  - it's not documented but useful for logging &#xD;
			var responseUID =  webserviceResponse.s::Header[0].*[0]; 		// test to see what happens if you create a response with more than one element in the header &#xD;
			//var Header =  webserviceResponse.s::Header.elements().ActivityId ; 			&#xD;
			var PatientOID = xmlInfo..a::Patient..a::PatientOid.toString(); // call this explicitly otherwise e4x will try and put the entire element structure in the next xml object when we use the patientID &#xD;
			var responseStatus = xmlInfo..a::ResultCode ; &#xD;
			var responseMessage = xmlInfo..a::ResultDescription; &#xD;
			&#xD;
			if ( responseStatus == 'A000') {&#xD;
			&#xD;
			getPatientSuccess = true; &#xD;
			Status = "Success" ;&#xD;
			Message += "Successfully retrieved Patient OID\n" ; &#xD;
			//log output has to be masked if successful as the response to the getPatient by ID service returns a lot of PII in the response SOAP object &#xD;
			logger.info("iPM.WS :: Response from Get Patient by Patient id  web Service was :\n" + "AOOO - Success\n Actual response message suppressed as it contains PII\n"  + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
			&#xD;
			}&#xD;
			else {&#xD;
			Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
			Message += "Could not retrieve Patient OID from ACTPAS web service.\nUnable to create referral. Web service message was :\n" + responseMessage ; 	&#xD;
			//note this next line is safe as the error responses only contain the message UID, error response code and error response message - no PII&#xD;
			logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
			}&#xD;
			&#xD;
			&#xD;
			// if no errors try and add referral &#xD;
			&#xD;
			if (getPatientSuccess) &#xD;
			{&#xD;
				webservice.setSoapAction(addReferralWSAction);&#xD;
				messageID =  new java.util.UUID.randomUUID().toString(); // unique ID for each request in the series &#xD;
				logger.info("\n\n\nin the loop to try and add a referral\n");&#xD;
				&#xD;
				webserviceRequest = &#xD;
					&lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace" &#xD;
						xmlns:isof1="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary" &#xD;
						xmlns:isof2="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts" &#xD;
						xmlns:isof3="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts"&#xD;
						xmlns:i="http://www.w3.org/2001/XMLSchema-instance"&gt;&#xD;
&#xD;
						   &lt;soapenv:Header/&gt;&#xD;
						   &lt;soapenv:Body&gt;&#xD;
							  &lt;isof:AddReferral&gt;&#xD;
								 &lt;!--Optional:--&gt;&#xD;
								 &lt;isof:Credential&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:Department&gt;WEBSRV&lt;/isof1:Department&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:Name&gt;{actpasUserName}&lt;/isof1:Name&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:Password&gt;{actpasPassword}&lt;/isof1:Password&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:UserId&gt;{actpasUserName}&lt;/isof1:UserId&gt;&#xD;
									&lt;!--Optional:--&gt;&#xD;
									&lt;isof1:Workstation&gt;WEBSERVICES&lt;/isof1:Workstation&gt;&#xD;
								 &lt;/isof:Credential&gt;							&#xD;
								 &lt;!--Optional:--&gt;&#xD;
								 &lt;isof:referral&gt;           &#xD;
								   &lt;!--mandatory field - this is multicampus--&gt; &#xD;
								   &#xD;
									&lt;isof2:ACCApprovalStatus i:nil="true"/&gt;&#xD;
									&lt;isof2:ACCType i:nil="true"/&gt;&#xD;
									&lt;isof2:AccClaimNumber i:nil="true"/&gt;&#xD;
									&lt;isof2:AccNumber i:nil="true"/&gt;&#xD;
									&lt;isof2:AccidentRelatedStatus i:nil="true"/&gt;&#xD;
									&lt;isof2:ActivityType i:nil="true"/&gt;&#xD;
									&lt;isof2:AdministrativeCategory i:nil="true"/&gt;&#xD;
									&lt;isof2:Authorisation i:nil="true"/&gt;&#xD;
									&lt;isof2:AuthorisedByClinician i:nil="true"/&gt;&#xD;
									&lt;isof2:AuthrDttm i:nil="true"/&gt;&#xD;
									&lt;isof2:CancdDttm i:nil="true"/&gt;&#xD;
									&lt;isof2:ClosrDate i:nil="true"/&gt;&#xD;
									&lt;isof2:Comments i:nil="true"/&gt;&#xD;
									&lt;isof2:ExpiryDttm i:nil="true"/&gt;&#xD;
									&lt;isof2:FundingArrangement i:nil="true"/&gt;&#xD;
									&lt;isof2:FundingProgram i:nil="true"/&gt;&#xD;
									&lt;isof2:FundingSubprogram i:nil="true"/&gt;&#xD;
									&lt;isof2:OrdtaDttm i:nil="true"/&gt;			&#xD;
									&lt;isof2:OwnerHealthOrganisation&gt;&#xD;
									   &lt;isof3:Code&gt;{OwnerHealthOrganisation}&lt;/isof3:Code&gt;								   &#xD;
									&lt;/isof2:OwnerHealthOrganisation&gt;&#xD;
									&lt;isof2:ParntOid i:nil="true"/&gt;&#xD;
									&lt;isof2:PatientOid&gt;{PatientOID}&lt;/isof2:PatientOid&gt;								     &#xD;
									&lt;isof2:RecvdDttm&gt;{RecvdDttm}&lt;/isof2:RecvdDttm&gt;&#xD;
									&lt;isof2:ReferralCancellationReason i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferralClosureReason i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferralOid i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferralOutcome i:nil="true"/&gt;			&#xD;
									&lt;isof2:ReferralReason&gt;&#xD;
									   &lt;isof3:Code&gt;{ReferralReason}&lt;/isof3:Code&gt;&#xD;
									&lt;/isof2:ReferralReason&gt;     &#xD;
									&lt;isof2:ReferralStatus i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferralType&gt;&#xD;
										&lt;isof3:Code&gt;{ReferralType}&lt;/isof3:Code&gt;&#xD;
									&lt;/isof2:ReferralType&gt;&#xD;
									&lt;isof2:ReferredToHealthOrganisation i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferredBySpecialty i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferredToStaffTeam i:nil="true"/&gt;&#xD;
									&lt;isof2:ReferredToClinician i:nil="true"/&gt;								&#xD;
									&lt;isof2:SourceofReferral&gt;&#xD;
									   &lt;isof3:Code&gt;{SourceofReferral}&lt;/isof3:Code&gt;			&#xD;
									&lt;/isof2:SourceofReferral&gt;&#xD;
									&lt;isof2:Urgency i:nil="true"/&gt;&#xD;
								 &lt;/isof:referral&gt;&#xD;
							  &lt;/isof:AddReferral&gt;&#xD;
						   &lt;/soapenv:Body&gt;&#xD;
					&lt;/soapenv:Envelope&gt; ;&#xD;
					&#xD;
				&#xD;
				&#xD;
				&#xD;
				var soapenv = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
				var isof = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"); &#xD;
				var isof1 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary");&#xD;
				var isof2 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts");&#xD;
				var isof3 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
				var xmlReferral = webserviceRequest.soapenv::Body..isof::AddReferral..isof::referral;  // this is just to make the adding of childern to the soap body a little less cumbersome in terms of parent/child nodes&#xD;
				&#xD;
				//need to test if there is a value and insert it as new child nodes. This litters the output with e4x namespaces but can't be avoided as the remote host returns errors or exceptions for empty values. &#xD;
&#xD;
				&#xD;
				if (SentDttm) {&#xD;
					SentDttm += timeSuffix ;&#xD;
					xmlReferral.isof2::SentDttm += SentDttm; 		&#xD;
				}&#xD;
				if (Priority) {&#xD;
					xmlReferral.isof2::Priority.isof3::Code += Priority ; &#xD;
				}&#xD;
				if (OrdtaDttm) {&#xD;
					OrdtaDttm += timeSuffix; &#xD;
					xmlReferral.isof2::OrdtaDttm += OrdtaDttm ; 		&#xD;
				} &#xD;
				if (AdministrativeCategory ) {&#xD;
					xmlReferral.isof2::AdministrativeCategory.isof3::Code += AdministrativeCategory ;&#xD;
				}		// try moving this wehere priority is and see if it makes a difference to the structure output ?  no visible difference between the assignment but the out put namespaces are different &#xD;
				if (ExpiryDttm) &#xD;
				{&#xD;
					ExpiryDttm += timeSuffix ; &#xD;
					xmlReferral.isof2::ExpiryDttm += ExpiryDttm ;&#xD;
				} &#xD;
				if (Comments) &#xD;
				{&#xD;
					xmlReferral.isof2::Comments += Comments ; &#xD;
				}&#xD;
				if (ReferredByClinician) {&#xD;
					xmlReferral.isof2::ReferredByClinician.isof3::Code += ReferredByClinician ;&#xD;
				}&#xD;
				if (ReferredBySpecialty){&#xD;
					xmlReferral.isof2::ReferredBySpecialty.isof3::Code += ReferredBySpecialty ; 				&#xD;
				}&#xD;
				if (AccidentRelatedStatus ) {&#xD;
					xmlReferral.isof2::AccidentRelatedStatus.isof3::Code += AccidentRelatedStatus ; &#xD;
				}&#xD;
				if (ReferredToClinician ) {&#xD;
					xmlReferral.isof2::ReferredToClinician.isof3::Code += ReferredToClinician ; &#xD;
				}&#xD;
				if (ReferredToSpecialty) {&#xD;
					xmlReferral.isof2::ReferredToSpecialty.isof3::Code += ReferredToSpecialty ;&#xD;
				}&#xD;
				if (ReferredToHealthOrganisation) {&#xD;
					xmlReferral.isof2::ReferredToHealthOrganisation.isof3::Code += ReferredToHealthOrganisation ; &#xD;
				}&#xD;
				if (ReferredToStaffTeam) {&#xD;
					xmlReferral.isof2::ReferredToStaffTeam.isof3::Code += ReferredToStaffTeam ; &#xD;
				}&#xD;
				&#xD;
				// the following are used to mask the password output in the concerto log, using the string value rather than the e4x literal or we would wind up changing the actual XML element value 			&#xD;
				var logMaskedEntryString = webserviceRequest.toString().replace(/&lt;isof1:Password&gt;(.+?)&lt;\/isof1:Password&gt;/, "&lt;isof1:Password&gt;Masked User Entered Password&lt;/isof1:Password&gt;" ) ; &#xD;
				//no PII in the request message so this is safe - it's all coded data 	&#xD;
				logger.info("iPM.WS :: Calling Add Referral  Service. Message ID is " + messageID + "\n Request Message is :\n" + logMaskedEntryString); 	&#xD;
				&#xD;
					&#xD;
				var webserviceResponse = webservice.call(webserviceRequest); &#xD;
				default xml namespace = "";&#xD;
			&#xD;
				var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
				var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary");&#xD;
				var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
			&#xD;
						&#xD;
				var xmlInfo = webserviceResponse.s::Body.elements() ; 	&#xD;
				var responseUID =  webserviceResponse.s::Header[0].*[0]; &#xD;
				var responseStatus = xmlInfo..a::ResultCode ; &#xD;
				var responseMessage = xmlInfo..a::ResultDescription ; &#xD;
				//no PII in the response for this request type - only a UID, status code and status message &#xD;
				logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
				&#xD;
				&#xD;
				if ( responseStatus == 'A000') {&#xD;
				&#xD;
				addReferralSuccess = true ; &#xD;
				Status = "Success" ;&#xD;
				Message = "\n Successfully added a new referral \n" ; &#xD;
				&#xD;
				&#xD;
				}&#xD;
				else {&#xD;
				Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
				Message = "Could not Create a new referral. Web service error message was :\n" + responseMessage ; 					&#xD;
				}&#xD;
				&#xD;
&#xD;
			&#xD;
			&#xD;
			&#xD;
			&#xD;
			} // end of adding a referral &#xD;
			&#xD;
			// if no errors try and retrieve the OID for the referral &#xD;
			&#xD;
			// cut from here &#xD;
			//just doing this for testing until the database transaction log issue is resolved by SSICT &#xD;
			if  (addReferralSuccess) {&#xD;
				&#xD;
					webservice.setSoapAction(getReferralsWSAction);&#xD;
					referralsMessageID =  new java.util.UUID.randomUUID().toString(); // unique ID for each request in the series &#xD;
					logger.info("\n\n\nin the loop to try and retrieve the OID for the new referral \n");&#xD;
					&#xD;
					//note this message type will use the optional from date time parameter - with the date die set to the recievedDttm we used to create the referral in the prior step&#xD;
					// this should reduce the numebr of referrals in the response that we have to iterate over &#xD;
					webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
											   &lt;soapenv:Header/&gt;&#xD;
											   &lt;soapenv:Body&gt;&#xD;
												  &lt;isof:GetReferralByPatientOid&gt;&#xD;
													 &#xD;
													 &lt;isof:PatientOid&gt;{PatientOID}&lt;/isof:PatientOid&gt;&#xD;
													 &lt;isof:FromDttm&gt;{RecvdDttm}&lt;/isof:FromDttm&gt;&#xD;
													 &lt;isof:ToDttm&gt;{RecvdDttm}&lt;/isof:ToDttm&gt;&#xD;
													&#xD;
												  &lt;/isof:GetReferralByPatientOid&gt;&#xD;
											   &lt;/soapenv:Body&gt;&#xD;
											&lt;/soapenv:Envelope&gt; ; &#xD;
&#xD;
					//no PII in the message for this service call - all coded data &#xD;
					logger.info("iPM.WS:: Calling to get Patient Referrals. Unique Source  Message ID  : " + referralsMessageID + "\n Relates to Patient OID from message : " + messageID + "\n Request message is : \n" + webserviceRequest +"\n *******END OF REQUEST TRANSACTION*******\n");&#xD;
									&#xD;
					var webserviceResponse = webservice.call(webserviceRequest);&#xD;
&#xD;
					// the namespaces change in different response types hence we need to set them up again : &#xD;
					var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts") ; &#xD;
					var b = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
					&#xD;
					var referralsXML = webserviceResponse.s::Body.elements() ; &#xD;
					&#xD;
					var Header =  webserviceResponse.s::Header[0].*[0]; 		// UID for the response message from the web service is contained within the header &#xD;
&#xD;
					var resultCode = referralsXML..a::ResultCode ; &#xD;
					var resultMessage = referralsXML..a::ResultDescription ; &#xD;
					&#xD;
					var referralsList = "" ; &#xD;
&#xD;
					logger.info("iPM.WS :: Response from Referrals Service was :" + webserviceResponse + "\n Response Unique Message ID was : " + Header + "\n *****END OF RESPONSE TRANSACTION for Source Message ID : " + messageID + " ********\n") ; &#xD;
					if (referralsXML..a::ResultCode == 'A000'){&#xD;
						//iPM use the same namespace object to hold all the referrals as they do for each individual referral&#xD;
						//to avoid needing to test for null for the first array element we need to extract all of the outpatient appointment descendents that are one level below the first : &#xD;
						&#xD;
						referralsList = referralsXML..a::Referral..a::Referral;  // there can be more than one per response&#xD;
						//test to see if this happens - we may simply get an E004 or E008 in which case we can remove this logic &#xD;
						&#xD;
						if (referralsList.length() == 0 ) {&#xD;
						// if there were no referrals returned in the message response return an error message to the user &#xD;
						Status = "Error." ; &#xD;
						Message = "Referral was added but we could not retrieve the OID from the ACTPAS web service. You may need to manually resolve this issue. " ; &#xD;
						}&#xD;
						else{&#xD;
							//there is at lease one referrral in the response now we need to process it and see if we find a match for the values used when creating the referral in the earlier steps &#xD;
									 &#xD;
									var referralRecvdDttm = ""; &#xD;
									var referralSourceofReferral = ""; &#xD;
									var referralReferralReason = "" ; &#xD;
									var referralReferralTypeCode = "" ; &#xD;
									var referralReferredToClinicianCode = "" ;   // currently there looks to be a bug in web service processing - leave out for now &#xD;
									var referralReferredToSpecialtyCode = "" ;   // same &#xD;
									var referralReferredToHealthOrganisation = "" ;  // web service func spec says this is one of the mandatory check fields but either the doc is wrong or the web service is using the wrong field as this is ignored in testing &#xD;
									var referralOwnerHealthOrganisation = "" ;  // however this field is not listed in the interface processing rules but will result in error if not specific AND will result in rejection ala the funcitonal specificaiton w.r.t. the referred to health org &#xD;
									&#xD;
									for (var i = 0 ; i &lt; referralsList.length() ; i++) &#xD;
									{&#xD;
										&#xD;
										&#xD;
										referralRecvdDttm = referralsList[i]..a::RecvdDttm;&#xD;
										referralReferralReason = referralsList[i]..a::ReferralReason..b::Code ;&#xD;
										referralReferralTypeCode = referralsList[i]..a::ReferralType..b::Code;&#xD;
										referralSourceofReferral = referralsList[i]..a::SourceofReferral..b::Code;&#xD;
										referralReferredToClinicianCode = referralsList[i]..a::ReferredToClinician..b::Code[0] ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
										referralReferredToSpecialtyCode = referralsList[i]..a::ReferredToSpecialty..b::Code ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
										referralReferredToHealthOrganisation = referralsList[i]..a::ReferredToHealthOrganisation..b::Code ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
										referralOwnerHealthOrganisation =  referralsList[i]..a::OwnerHealthOrganisation..b::Code ;&#xD;
										&#xD;
										// test to see if this row matches our input variables &#xD;
										&#xD;
										if ( referralRecvdDttm == RecvdDttm  &amp;&amp; referralSourceofReferral == SourceofReferral  &amp;&amp;  referralReferralReason == ReferralReason &amp;&amp; referralReferralTypeCode == ReferralType  &amp;&amp; referralOwnerHealthOrganisation == OwnerHealthOrganisation) {&#xD;
											referralReferralOID =  referralsList[i]..a::ReferralOid ; &#xD;
										}	&#xD;
										&#xD;
										var outputStr = "|Message referralRecvdDttm = "  + referralRecvdDttm  + "| User set RecvdDttm = " + RecvdDttm + " |\n" ; &#xD;
										outputStr += "| referralSourceofReferral = " + referralSourceofReferral + "| SourceofReferral = "  + SourceofReferral + "|\n" ;&#xD;
										outputStr += "| referralReferralReason = " + referralReferralReason + " | ReferralReason = " + ReferralReason + "|\n"  ; &#xD;
										outputStr += "| referralReferralTypeCode = " + referralReferralTypeCode + " | ReferralType = " + ReferralType + "|\n" ; &#xD;
										outputStr += "| referralOwnerHealthOrganisation = " + referralOwnerHealthOrganisation + " | OwnerHealthOrganisation = "  + OwnerHealthOrganisation + "|\n" ; &#xD;
										logger.info( outputStr) ; &#xD;
										&#xD;
									} //loop checking to find the OID &#xD;
									&#xD;
									if (referralReferralOID) {&#xD;
							&#xD;
										Status = "Success AOH000" ; &#xD;
										Message = "Please click here to continue" ; &#xD;
										&#xD;
									}&#xD;
									else {&#xD;
										Status = "Error E0H0001" ; &#xD;
										Message = "Referral Created but no matching OID was retrieved from the web service - this will require manual resolution" ; &#xD;
									&#xD;
									}&#xD;
									&#xD;
							} // end of else condition - we recieved referrals data back &#xD;
						&#xD;
						&#xD;
					} //  end if result code A000 - success calling web service to get referrals &#xD;
					else {&#xD;
					//we got an error message from the retreive referrals web service, but previously got success to add the referral so we need to tell this to the user &#xD;
					Status = "EOH0002" ; &#xD;
					Message = "Referral Created but the Webservice could not return Referral OID. Error Code was : " + resultCode + "\n Message was : " + resultMessage ; &#xD;
				&#xD;
				&#xD;
					}&#xD;
				&#xD;
				&#xD;
				} // end add referral success if block &#xD;
			//to here &#xD;
			&#xD;
			&#xD;
			&#xD;
			} // try &#xD;
			catch (ex) &#xD;
			{&#xD;
				//this needs to be updated to account for the situation where the referral is created but the call to get the OID experiences a timeout or other exception&#xD;
			&#xD;
				logger.info("trapped an exception info as follows\n") ; &#xD;
				logger.info(ex.toString()); &#xD;
				&#xD;
				//add condition checking for the type of exception as well as the boolean state to determine how far through the processing the error was encountered &#xD;
				// and return a more meaningful message to the end user &#xD;
				Status = "Error - encountered an exception" ; &#xD;
				Message = "Could not complete action due to an unexpected exception"  ; &#xD;
			&#xD;
			&#xD;
			&#xD;
			&#xD;
			} &#xD;
			&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		&#xD;
		} // end web service processing if there were no initial errors and the user is a member of the ACTPAS users group &#xD;
	} // end of the else statement that determines if the user was choosing an existing referral vs. creating a new one &#xD;
	&#xD;
	//regardless of success or failure return the following to the caller as the result set  - if status is not AOH000 the status code &#xD;
	// and the message will describe the kind of error that has been envcountered &#xD;
	&#xD;
	row.Status = Status;&#xD;
	row.Message = Message; &#xD;
	row.ReferralOID = referralReferralOID ; &#xD;
	row.pasReferralIdNamespace = pasReferralIdNamespace ; &#xD;
	 &#xD;
	&#xD;
	rows[0] = row;&#xD;
	rows;&#xD;
	&#xD;
		}}&#xD;
AS Results</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Create/Link</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Choose Existing Referral ID ------</name>
				<index>0</index>
				<default-value />
				<display-name>Choose Existing Referral ID ------</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Choose ID blank spacer</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>existingReferralOID</name>
				<index>2</index>
				<default-value />
				<display-name>Existing Referral OID</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Referral List")%&gt;&lt;%exec config.setReturnValueName("1")%&gt;&lt;%exec config.setDisplayValueName("1")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral OID blank spacer</name>
				<index>3</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Copy of fillerDummy3</name>
				<index>4</index>
				<default-value />
				<display-name>OR :</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Or Blank Spacer</name>
				<index>5</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Create a New Referral Label</name>
				<index>6</index>
				<default-value />
				<display-name>Create a New Referral :</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>fillerdummy5</name>
				<index>7</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>RecvdDttm</name>
				<index>8</index>
				<default-value />
				<display-name>Date Received *</display-name>
				<input-type>Date</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("d-M-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-MM-dd")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 6</name>
				<index>9</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferralReason</name>
				<index>10</index>
				<default-value />
				<display-name>Reason *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'REASN' and [ARCHV_FLAG] NOT IN ('D','Y') ")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 4</name>
				<index>11</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>SourceofReferral</name>
				<index>12</index>
				<default-value />
				<display-name>Source of Referral *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'SORRF' and [ARCHV_FLAG] NOT IN ('D','Y') \r\n --WHERE MAIN_CODE = 'REASN'")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 5</name>
				<index>13</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferralType</name>
				<index>14</index>
				<default-value />
				<display-name>ACTPAS Referral Type *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'RETYP' and [ARCHV_FLAG] NOT IN ('D','Y') ")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler3</name>
				<index>15</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>OwnerHealthOrganisation</name>
				<index>16</index>
				<default-value />
				<display-name>Owner Health Organisation *</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Main Facility")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Location")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 8</name>
				<index>17</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToSpecialty</name>
				<index>18</index>
				<default-value />
				<display-name>Referred To Specialty</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [MAIN_IDENT]\r\n      ,[DESCRIPTION]\r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[SPECIALTIES]\r\n  WHERE [ARCHV_FLAG] NOT IN ('D', 'Y') ")%&gt;&lt;%exec config.setOptionColumnName("MAIN_IDENT")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 9</name>
				<index>19</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredTST</name>
				<index>20</index>
				<default-value />
				<display-name>Referred To Staff Team</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [DESCRIPTION]\r\n      ,[CODE]\r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[STAFF_TEAMS]")%&gt;&lt;%exec config.setOptionColumnName("CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 10</name>
				<index>21</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 2</name>
				<index>22</index>
				<default-value />
				<display-name>---Referred  By :  (Optional)</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 3</name>
				<index>23</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredByClinician</name>
				<index>24</index>
				<default-value />
				<display-name>Referred By Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("ACTPAS Clinician ID")%&gt;&lt;%exec config.setReturnValueName("Clinician ID")%&gt;&lt;%exec config.setDisplayValueName("Clinician")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 6</name>
				<index>25</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredBySpecialty</name>
				<index>26</index>
				<default-value />
				<display-name>Referred By Specialty</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT SpecialtyCode, Specialty\r\n      \r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CliniciansSpecialty]")%&gt;&lt;%exec config.setOptionColumnName("SpecialtyCode")%&gt;&lt;%exec config.setDisplayColumnName("Specialty")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 7</name>
				<index>27</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred To Spacer</name>
				<index>28</index>
				<default-value />
				<display-name>-----Referred To: (Optional)</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 5</name>
				<index>29</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToClinician</name>
				<index>30</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("ACTPAS Clinician ID")%&gt;&lt;%exec config.setReturnValueName("Clinician ID")%&gt;&lt;%exec config.setDisplayValueName("Clinician")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 7</name>
				<index>31</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToHealthOrganisation</name>
				<index>32</index>
				<default-value />
				<display-name>Referred To Health Organisation (?*)</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Health Organisations")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Location")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referred to Blank</name>
				<index>33</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Patient ID</name>
				<index>34</index>
				<default-value />
				<display-name>Patient ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message>Enter Referral details above and press "Create"</initial-message>
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>true</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>pasReferralId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pasReferralIdNamespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Message</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (row.get(1) != "Success AOH000") {&#xD;
alert("There are errors requiring your attention before you can continue") ;&#xD;
&#xD;
}&#xD;
&#xD;
else {&#xD;
return; &#xD;
		&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Pending Referrals</name>
		<data-source-name>java:comp/env/jdbc/referralrequest</data-source-name>
		<description>Displays submitted Referral Requests which have not yet been processed</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>creationDateTime ASC</order-by>
		<query-string>SELECT&#xD;
    demographic.givenName + ' ' + demographic.familyName,&#xD;
    rr.urgent,&#xD;
    rr.referralRequestId,&#xD;
    rr.sourceReferralId,&#xD;
    rr.patientId,&#xD;
    rr.referralService,&#xD;
    rr.referralType,&#xD;
    rr.submittedDateTime,&#xD;
    rr.submitterIdentifier&#xD;
FROM &#xD;
    RefRequest.ERF_ReferralRequestView rr&#xD;
    LEFT JOIN &lt;%=AppVars.get("db_ACTPAS")%&gt; demographic ON demographic.patientID = rr.patientId &#xD;
WHERE&#xD;
    (&#xD;
        (rr.creatorIdentifier=&lt;%=SqlParameters.add(User.userID)%&gt; AND rr.creatorNamespace=&lt;%=SqlParameters.add(AppVars.portalUserNamespace)%&gt;)&#xD;
        OR&#xD;
        (rr.referringClinicianIdentifier=&lt;%=SqlParameters.add(User.userID)%&gt; AND rr.referringClinicianNamespace=&lt;%=SqlParameters.add(AppVars.portalUserNamespace)%&gt;)&#xD;
        OR&#xD;
        (rr.submitterIdentifier=&lt;%=SqlParameters.add(User.userID)%&gt; AND rr.submitterNamespace=&lt;%=SqlParameters.add(AppVars.portalUserNamespace)%&gt;)&#xD;
&#xD;
    )&#xD;
&lt;%if Context.Patient.Id.MRN &lt;&gt;"" %&gt;&#xD;
AND rr.patientId = &lt;%=SqlParameters.add(Context.Patient.Id.MRN)%&gt;&#xD;
&lt;%end if%&gt;&#xD;
    AND rr.status = 'SUBMITTED'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Name</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Type</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pending Since</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Submitter</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Pending Referrals for patient</name>
		<data-source-name>java:comp/env/jdbc/referralrequest</data-source-name>
		<description>Displays submitted Referral Requests which have not yet been processed for a patient</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>creationDateTime ASC</order-by>
		<query-string>SELECT&#xD;
    demographic.givenName + ' ' + demographic.familyName,&#xD;
    rr.urgent,&#xD;
    rr.referralRequestId,&#xD;
    rr.sourceReferralId,&#xD;
    rr.patientId,&#xD;
    rr.patientNamespace,&#xD;
    rr.referralService,&#xD;
    rr.referralType,&#xD;
    rr.submittedDateTime,&#xD;
    rr.submitterIdentifier&#xD;
FROM &#xD;
    RefRequest.ERF_ReferralRequestView rr&#xD;
    LEFT JOIN  &lt;%=AppVars.get("db_ACTPAS")%&gt;  demographic ON demographic.patientID = rr.patientId &#xD;
WHERE&#xD;
    (&#xD;
        (rr.creatorIdentifier=&lt;%=SqlParameters.add(User.userID)%&gt; AND rr.creatorNamespace=&lt;%=SqlParameters.add(AppVars.portalUserNamespace)%&gt;)&#xD;
        OR&#xD;
        (rr.referringClinicianIdentifier=&lt;%=SqlParameters.add(User.userID)%&gt; AND rr.referringClinicianNamespace=&lt;%=SqlParameters.add(AppVars.portalUserNamespace)%&gt;)&#xD;
        OR&#xD;
        (rr.submitterIdentifier=&lt;%=SqlParameters.add(User.userID)%&gt; AND rr.submitterNamespace=&lt;%=SqlParameters.add(AppVars.portalUserNamespace)%&gt;)&#xD;
&#xD;
    )&#xD;
    AND rr.status = 'SUBMITTED'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>No Results Found.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Name</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Urgent</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]ReferralRequest.Id.RequestId</subject-item-name>
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>patientNamespace</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Type</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Pending Since</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Submitter</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Reference Services</name>
		<data-source-name>java:comp/env/jdbc/osgi_integration</data-source-name>
		<description>Displays a list of configured Referral Services</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT results.identifyingName, results.descriptiveName, results.displayName&#xD;
FROM {{&#xD;
    &#xD;
    // Retrieve the consumed web service 'ReferralConsumedSoapService' from OHP&#xD;
    var webserviceService = osgiServiceFactory.getService('com.orchestral.foundation.webservices.api_6_9.WebServiceService');&#xD;
    var webservice = webserviceService.getWebService('&lt;%=AppVars.get("Referral Consumed SOAP Service")%&gt;');&#xD;
 &#xD;
    var referralSOAPServiceNamespace = 'http://www.orionhealth.com/ReferralSOAPService/';&#xD;
    default xml namespace = referralSOAPServiceNamespace;&#xD;
&#xD;
    // Note that the message below is not a String, but an E4X XML literal&#xD;
    var message = &lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ref="http://www.orionhealth.com/ReferralSOAPService/"&gt;&#xD;
       &lt;soap:Header/&gt;&#xD;
       &lt;soap:Body&gt;&#xD;
          &lt;ref:getReferralServices&gt;&#xD;
             &lt;!--Optional:--&gt;&#xD;
             &lt;ref:language&gt;&lt;%=User.getLanguage()%&gt;&lt;/ref:language&gt;&#xD;
             &lt;ref:includeDeleted&gt;?&lt;/ref:includeDeleted&gt;&#xD;
          &lt;/ref:getReferralServices&gt;&#xD;
       &lt;/soap:Body&gt;&#xD;
    &lt;/soap:Envelope&gt;;&#xD;
   &#xD;
    // Wrap the XML node before calling the web service&#xD;
    var inNode = org.mozilla.javascript.xmlimpl.XMLLibImpl.toDomNode(message);&#xD;
    var responseNode = webservice.call(inNode);&#xD;
   &#xD;
    // Unwrap the response after calling the web service&#xD;
    var response = new XML(responseNode);&#xD;
&#xD;
    // Log the response to Log4J&#xD;
     org.apache.log4j.Logger.getLogger("my.webservice").info(response);&#xD;
    // Log the response to System.out&#xD;
   //    java.lang.System.out.println(response);&#xD;
&#xD;
    var soapenv = new Namespace ("http://www.w3.org/2003/05/soap-envelope");&#xD;
    var ns3 =  new Namespace (referralSOAPServiceNamespace);&#xD;
    var rows = [];&#xD;
    for each (p in  response.soapenv::Body.ns3::getReferralServicesResponse.*) {&#xD;
        var row = new Object();&#xD;
        row.identifyingName = p.@identifyingName;        &#xD;
        row.descriptiveName = p.@descriptiveName;       &#xD;
        row.displayName = p.@descriptiveName;       &#xD;
        rows[rows.length] = row;&#xD;
        }&#xD;
    rows;&#xD;
}} AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>identifyingName</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>descriptiveName</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Reference Services</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals to Register</name>
		<data-source-name>java:comp/env/jdbc/referralrequest</data-source-name>
		<description>External draft referral search</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>creationDateTime DESC</order-by>
		<query-string>SELECT&#xD;
    rr.urgent,&#xD;
    rr.referralRequestId,&#xD;
    rr.status,&#xD;
    rr.sourceReferralId,&#xD;
    rr.patientId,&#xD;
    rr.referralService,&#xD;
    rr.referralType,&#xD;
    rr.eventDateTime,&#xD;
    rr.creationDateTime,&#xD;
    acd.shortDescription,&#xD;
    'Referral Request' AS returnApplication,&#xD;
    'Referrals to Register' AS returnEntryPoint&#xD;
FROM&#xD;
&lt;% if AppVars.clinicalDbType = "oracle" %&gt;&#xD;
    ERF_ReferralRequestView rr&#xD;
    LEFT JOIN CodeDefinition acd on rr.acuityCode = acd.code AND rr.acuityCodingSystem = acd.codingsystem&#xD;
    LEFT JOIN CodeSet acs on acs.identifier = 'com.orchestral.referrals.common.api_2_0.Acuity' AND (acs.id = acd.codesetid or rr.acuityCode is null)&#xD;
&lt;% else %&gt;&#xD;
    RefRequest.ERF_ReferralRequestView rr&#xD;
    LEFT JOIN CodeSet.CodeDefinition acd on rr.acuityCode = acd.code AND rr.acuityCodingSystem = acd.codingsystem&#xD;
    LEFT JOIN Codeset.CodeSet acs on acs.identifier = 'com.orchestral.referrals.common.api_2_0.Acuity' AND (acs.id = acd.codesetid or rr.acuityCode is null)&#xD;
&lt;% end if %&gt;&#xD;
    WHERE 1 = 1&#xD;
    &lt;%if get("showStatus") = "Draft"%&gt;&#xD;
        AND rr.status = 'DRAFT'&#xD;
     &lt;%elseif get("showStatus") = "Resubmitted"%&gt;&#xD;
        AND rr.status = 'RESUBMITTED'&#xD;
     &lt;%else%&gt;&#xD;
        AND rr.status IN ('DRAFT', 'RESUBMITTED')&#xD;
    &lt;%end if%&gt;    &#xD;
    AND rr.receivedMessageId IS NOT NULL&#xD;
    &lt;% if get("Urgent") = 1%&gt;&#xD;
        AND rr.urgent = 1&#xD;
    &lt;% end if %&gt;&#xD;
    &lt;% if get("Service") &lt;&gt; ""%&gt;&#xD;
       &lt;% if AppVars.clinicalDbType = "mssql" %&gt;&#xD;
        AND UPPER(rr.referralService) LIKE UPPER(&lt;%=SqlParameters.add("%" + likeSqlServerEncode(get("Service"))+ "%")%&gt;) ESCAPE '#'&#xD;
       &lt;% else %&gt;&#xD;
            --Handles both derby and Oracle&#xD;
            AND UPPER(rr.referralService) LIKE UPPER(&lt;%=SqlParameters.add("%" + likeOracleEncode(get("Service"))+ "%")%&gt;) ESCAPE '#'&#xD;
       &lt;% end if %&gt;&#xD;
    &lt;% end if %&gt;&#xD;
    &lt;%if get("CreationDate.low") &lt;&gt; ""%&gt;&#xD;
        AND rr.creationDateTime &gt;= '&lt;%=get("CreationDate.low")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("CreationDate.high")&lt;&gt;""%&gt; &#xD;
        AND rr.creationDateTime &lt;= '&lt;%=get("CreationDate.high")%&gt;'&#xD;
    &lt;%end if%&gt;&#xD;
&lt;% end if %&gt;&#xD;
&lt;%if get("SourceReferralID")&lt;&gt;""%&gt; AND rr.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt;&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Service</name>
				<index>0</index>
				<default-value />
				<display-name>Referral Service</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>CreationDate</name>
				<index>1</index>
				<default-value />
				<display-name>CreationDate</display-name>
				<input-type>newDateRange</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOutputDateFormat("yyyy-MM-dd HH:mm:ss")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SourceReferralID</name>
				<index>2</index>
				<default-value />
				<display-name>Source Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Urgent</name>
				<index>3</index>
				<default-value />
				<display-name>Urgent</display-name>
				<input-type>Check Boxes</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("1", " ")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>showStatus</name>
				<index>4</index>
				<default-value />
				<display-name>Status</display-name>
				<input-type>reset radioButtonGroup</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Draft", "")%&gt;&lt;%exec config.setOption("Resubmitted", "")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>true</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Referral</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open External Request</name>
				<application>
					<name>Referral Request</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Urgent</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Type</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Event Date</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creation Date</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Acuity</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>returnApplication</name>
				<index>10</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>returnEntryPoint</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>openEntryPoint</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Rejected Referrals</name>
		<data-source-name>java:comp/env/jdbc/referralrequest</data-source-name>
		<description>External draft referral search</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>creationDateTime DESC</order-by>
		<query-string>SELECT&#xD;
    rr.urgent,&#xD;
    rr.referralRequestId,&#xD;
    rr.status,&#xD;
    rr.sourceReferralId,&#xD;
    rr.patientId,&#xD;
    rr.referralService,&#xD;
    rr.referralType,&#xD;
    rr.eventDateTime,&#xD;
    rr.creationDateTime,&#xD;
    acd.shortDescription,&#xD;
    'Referral Request' AS returnApplication,&#xD;
    'Rejected Referrals' AS returnEntryPoint,&#xD;
    CAST(rr.rejectReasonCode as varchar(255)) as RejectReason,&#xD;
    CAST(rr.rejectReasonComment as varchar(255))as RejectComment&#xD;
FROM&#xD;
&lt;% if AppVars.clinicalDbType = "oracle" %&gt;&#xD;
    ERF_ReferralRequestView rr&#xD;
    LEFT JOIN CodeDefinition acd on rr.acuityCode = acd.code AND rr.acuityCodingSystem = acd.codingsystem&#xD;
&lt;% else %&gt;&#xD;
    RefRequest.ERF_ReferralRequestView rr&#xD;
    LEFT JOIN CodeSet.CodeDefinition acd on rr.acuityCode = acd.code AND rr.acuityCodingSystem = acd.codingsystem&#xD;
    LEFT JOIN Codeset.CodeSet acs on acs.identifier = 'com.orchestral.referrals.common.api_2_0.Acuity' AND (acs.id = acd.codesetid or rr.acuityCode is null)&#xD;
    &lt;% end if %&gt;&#xD;
    WHERE rr.status = 'REJECTED'&#xD;
    AND rr.receivedMessageId IS NOT NULL&#xD;
    &lt;% if get("Urgent") = 1%&gt;&#xD;
        AND rr.urgent = 1&#xD;
    &lt;% end if %&gt;&#xD;
    &lt;% if get("Service") &lt;&gt; ""%&gt;&#xD;
       &lt;% if AppVars.clinicalDbType = "mssql" %&gt;&#xD;
        AND UPPER(rr.referralService) LIKE UPPER(&lt;%=SqlParameters.add("%" + likeSqlServerEncode(get("Service"))+ "%")%&gt;) ESCAPE '#'&#xD;
       &lt;% else %&gt;&#xD;
            --Handles both derby and Oracle&#xD;
            AND UPPER(rr.referralService) LIKE UPPER(&lt;%=SqlParameters.add("%" + likeOracleEncode(get("Service"))+ "%")%&gt;) ESCAPE '#'&#xD;
       &lt;% end if %&gt;&#xD;
    &lt;% end if %&gt;  &#xD;
    &lt;%if get("CreationDate.low") &lt;&gt; ""%&gt;&#xD;
        AND rr.creationDateTime &gt;= convert(datetime,'&lt;%=get("CreationDate.low")%&gt;',103)&#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("CreationDate.high")&lt;&gt;""%&gt; &#xD;
        AND rr.creationDateTime &lt; DATEADD(d, 1, convert(datetime,'&lt;%=get("CreationDate.high")%&gt;', 103))&#xD;
    &lt;%end if%&gt;&#xD;
&lt;% end if %&gt;&#xD;
&lt;%if get("SourceReferralID")&lt;&gt;""%&gt; AND rr.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt;&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html>&lt;style type="text/css"&gt;&#xD;
h1 { &#xD;
     color: #fff;&#xD;
    }&#xD;
&lt;/style&gt;</custom-html>
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>CreationDate</name>
				<index>0</index>
				<default-value>;</default-value>
				<display-name>Received On Date</display-name>
				<input-type>Date Range</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setDefaultValue("")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Referral</name>
			</context-view>
			<default-context-view-entry-point>
				<context-view>
					<name>Referral</name>
				</context-view>
				<entry-point>
					<name>CCR DR Referral Context</name>
					<application>
						<name>Healthcare pathways - CCR</name>
					</application>
					<secure-enabled>false</secure-enabled>
				</entry-point>
			</default-context-view-entry-point>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open External Request for Rejected Referrals</name>
				<application>
					<name>Referral Request</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Urgent</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;&#xD;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;&#xD;
&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Type</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Last Updated Date</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy")%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Received On</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;(&lt;%=AgeFormat.format(value, AgeFormat.SHORT)%&gt;)</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Acuity</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>returnApplication</name>
				<index>10</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>returnEntryPoint</name>
				<index>11</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Reject Reason</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Reject Comment</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>openEntryPoint</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<windowlet>
		<name>Create_Referral_Request</name>
		<maximized-entry-point>
			<name>Create Referral Request</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>Create Referral Request</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Pending Referrals</name>
		<maximized-entry-point>
			<name>Pending Referrals</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>Pending Referrals</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Referrals To Register</name>
		<maximized-entry-point>
			<name>Referrals to Register</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>Create Referral Request</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Rejected Referrals</name>
		<minimized-entry-point>
			<name>Rejected Referrals</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>Referrals</name>
	<access-controller>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>PlatformBase</name>
		<protected>false</protected>
		<value>/cws</value>
	</application-variable>
	<application-variable>
		<name>Referral Consumed SOAP Service</name>
		<protected>false</protected>
		<value>ReferralConsumedSoapService</value>
	</application-variable>
	<application-variable>
		<name>Referral WSDL URL</name>
		<protected>false</protected>
		<value>/cws/ws/ReferralSOAPService?wsdl</value>
	</application-variable>
	<application-variable>
		<name>SMTdocumentDB</name>
		<protected>false</protected>
		<value>CDRPROD</value>
	</application-variable>
	<application-variable>
		<name>ServerBase</name>
		<protected>false</protected>
		<value>/cws/referrals;securityDomain=&lt;%=AppVars.securityDomain%&gt;</value>
	</application-variable>
	<application-variable>
		<name>applicationName</name>
		<protected>false</protected>
		<value>Referrals</value>
	</application-variable>
	<application-variable>
		<name>clinicalDbType</name>
		<protected>false</protected>
		<value>oracle</value>
	</application-variable>
	<application-variable>
		<name>concertoHome</name>
		<protected>false</protected>
		<value>/concerto</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>REF</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>3.1</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>internalConcertoHome</name>
		<protected>false</protected>
		<value>/concerto</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation.get("Patient ID")&lt;&gt; ""%&gt;&lt;%=SecureInformation.get("Patient ID")%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>referralId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation.get("Referral ID")&lt;&gt; ""%&gt;&lt;%=SecureInformation.get("Referral ID")%&gt;&lt;%elseif Context.get("[orionhealth.com]Referral.Id.ReferralId")&lt;&gt; ""%&gt;&lt;%=Context.get("[orionhealth.com]Referral.Id.ReferralId")%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>requestInfoCode</name>
		<protected>false</protected>
		<value>Requestinginformation</value>
	</application-variable>
	<application-variable>
		<name>requestInfoCodingSystem</name>
		<protected>false</protected>
		<value>Orion</value>
	</application-variable>
	<application-variable>
		<name>securityDomain</name>
		<protected>false</protected>
		<value>forms</value>
	</application-variable>
	<application-variable>
		<name>viewId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation.get("View ID")&lt;&gt; ""%&gt;&#xD;
  &lt;%=SecureInformation.get("View ID")%&gt;&#xD;
&lt;%elseif Context.get("[orionhealth.com]Referral.Co.ViewId") &lt;&gt; ""%&gt;&#xD;
  &lt;%=Context.get("[orionhealth.com]Referral.Co.ViewId")%&gt;&#xD;
&lt;%end if%&gt;</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;ReferralsHome</url>
	</default-help-redirection>
	<description>:::CCR::: Referrals Application - Contains the entry points and searches specific to the Referrals application.</description>
	<entry-point>
		<name>Assignee</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ManagingReferrals</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>&lt;%=AppVars.applicationName%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Assignee</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Service</name>
					<index>2</index>
					<value>&lt;%=Request.service%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Type</name>
					<index>3</index>
					<value>&lt;%=Request.type%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Current Assignee</name>
					<index>4</index>
					<value>&lt;%=Request.receiver%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Action</name>
					<index>5</index>
					<value>&lt;%=Request.action%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.assigneeCode</name>
					<index>6</index>
					<value>&lt;%=Request.receiverCode %&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.assigneeCodingSystem</name>
					<index>7</index>
					<value>&lt;%=Request.receiverCodingSystem%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Document Linking</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Referrals</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Document Linking Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>PAS Referral Id</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community User</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Chrome</allowed-custom-user-agent>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>Safari</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Open the PAS Referral Id search</description>
		<display-name>PAS Referral Id</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>iPM Web Services Integration</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Link ACTPAS Referral ::FOR FUTURE USE</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Service</name>
					<index>2</index>
					<value>&lt;%=Request.service%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Type</name>
					<index>3</index>
					<value>&lt;%=Request.type%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Patient Id</name>
					<index>4</index>
					<value>&lt;%=Request.patientIdentifier%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Patient Namespace</name>
					<index>5</index>
					<value>&lt;%=Request.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Patient First Name</name>
					<index>6</index>
					<value>&lt;%=Request.patientFirstName%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Patient Surname</name>
					<index>7</index>
					<value>&lt;%=Request.patientSurname%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Patient DOB</name>
					<index>8</index>
					<value>&lt;%=Request.patientDOB%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referrer Id</name>
					<index>9</index>
					<value>&lt;%=Request.referrerId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referrer Namespace</name>
					<index>10</index>
					<value>&lt;%=Request.referrerNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Receiver Code</name>
					<index>11</index>
					<value>&lt;%=Request.receiverCode%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Receiver Coding System</name>
					<index>12</index>
					<value>&lt;%=Request.receiverCodingSystem%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Source Coding System</name>
					<index>13</index>
					<value>&lt;%=Request.referralSourceCodingSystem%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Referral Source Code</name>
					<index>14</index>
					<value>&lt;%=Request.referralSourceCode%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Source Referral Id</name>
					<index>15</index>
					<value>&lt;%=Request.sourceReferralId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Source System Id</name>
					<index>16</index>
					<value>&lt;%=Request.sourceSystemId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Acuity Code</name>
					<index>17</index>
					<value>&lt;%=Request.acuityCode%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Acuity Coding System</name>
					<index>18</index>
					<value>&lt;%=Request.acuityCodingSystem%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Urgent</name>
					<index>19</index>
					<value>&lt;%=Request.urgent%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Source Id</name>
					<index>20</index>
					<value>&lt;%=Request.sourceReferralId%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Patient Referrals In Progress</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<display-name>Patient Referrals</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;PatientReferrals</url>
		</help-redirection>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>&lt;%=AppVars.applicationName%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Patient Referrals</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLResults.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Referrals for Patient</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;PatientReferrals</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/patient/Document.gif</url>
		</icon-redirection>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>templateName</name>
					<index>0</index>
					<value>Patient Referrals</value>
				</query-parameter>
				<url>/concerto/UserStartPage.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Referrals to Review</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Access to 'Referrals to Review' generic search</description>
		<display-name>Referrals to Review</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ReviewingReferrals</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>&lt;%=AppVars.applicationName%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referrals to Review</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Referral - CDV Tree View</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View a Referral in the CDV Tree.</description>
		<display-name>View Referral</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ReferralDetails</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>referralId</name>
					<index>0</index>
					<value>&lt;%=AppVars.referralId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>2</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>viewId</name>
					<index>3</index>
					<value>&lt;%="cdv_view"%&gt;</value>
				</query-parameter>
				<redirection-key>referrals</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/Referral.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Referral - Read Only</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View a Referral as Read Only.</description>
		<display-name>View Referral</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ReferralDetails</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>referralId</name>
					<index>0</index>
					<value>&lt;%=AppVars.referralId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>2</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>viewId</name>
					<index>3</index>
					<value>&lt;%="readOnly"%&gt;</value>
				</query-parameter>
				<redirection-key>referrals</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/Referral.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Referral - Referrer View</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Referrer view of a Referral.</description>
		<display-name>View Referral</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ReferralDetails</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>referralId</name>
					<index>0</index>
					<value>&lt;%=AppVars.referralId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=SecureInformation.get("Patient ID")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>2</index>
					<value>&lt;%=SecureInformation.Namespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>viewId</name>
					<index>3</index>
					<value>&lt;% if SecureInformation.get("Code") = AppVars.requestInfoCode &amp;&amp; SecureInformation.get("StatusCodingSystem") = AppVars.requestInfoCodingSystem%&gt;
  &lt;%="provide_information_view"%&gt;
&lt;% else %&gt;
  &lt;%="referrer_view"%&gt;
&lt;% end if %&gt;</value>
				</query-parameter>
				<redirection-key>referrals</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/Referral.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>View Referral by Id</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>View a Referrals for a Patient, if a ReferralId is supplied as a query parameter then that specific referral will be opened, otherwise will be redirected nto the specified entry point, such as the "In Progress" referrals for the patient.</description>
		<display-name>Referrals</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ReferralDetails</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/concerto/configuredocumentcapture.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>referralId</name>
					<index>0</index>
					<value>&lt;%=AppVars.referralId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>2</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>viewId</name>
					<index>3</index>
					<value>&lt;%=Context.get("[orionhealth.com]Referral.Co.ViewId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>noReferralIdRedirect</name>
					<index>4</index>
					<value>&lt;%="Referrals for Patient"%&gt;</value>
				</query-parameter>
				<redirection-key>referrals</redirection-key>
				<url>&lt;%=AppVars.ServerBase%&gt;/Referral.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<query-parameter>
				<name>concertoHome</name>
				<index>0</index>
				<value>&lt;%=AppVars.concertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>1</index>
				<value>&lt;%=AppVars.internalConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>applicationName</name>
				<index>2</index>
				<value>&lt;%=AppVars.applicationName%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>username</name>
				<index>3</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>securityDomain</name>
				<index>4</index>
				<value>&lt;%=AppVars.securityDomain%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>5</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<redirection-key>com.orchestral.core.login</redirection-key>
			<url>&lt;%=AppVars.PlatformBase%&gt;/login-concerto/login</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>300000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>POST</method>
			<query-parameter>
				<name>securityDomain</name>
				<index>0</index>
				<value>&lt;%=AppVars.securityDomain%&gt;</value>
			</query-parameter>
			<url>&lt;%=AppVars.PlatformBase%&gt;/login-concerto/logout</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>Assignee</name>
		<data-source-name>java:comp/env/jdbc/osgi_integration</data-source-name>
		<description />
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT results.receiverCode, results.receiverCodingSystem, results.description, results.receiver
FROM {{
    
    // Retrieve the consumed web service 'ReferralConsumedSoapService' from OHP
    var webserviceService = osgiServiceFactory.getService('com.orchestral.foundation.webservices.api_6_9.WebServiceService');
    var webservice = webserviceService.getWebService('&lt;%=AppVars.get("Referral Consumed SOAP Service")%&gt;');
 
    var referralSOAPServiceNamespace = 'http://www.orionhealth.com/ReferralSOAPService/';
    default xml namespace = referralSOAPServiceNamespace;

    // Note that the message below is not a String, but an E4X XML literal
    var message = &lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ref="http://www.orionhealth.com/ReferralSOAPService/"&gt;
       &lt;soap:Header/&gt;
       &lt;soap:Body&gt;
          &lt;ref:getReferralReceivers&gt;
             &lt;!--Optional:--&gt;
             &lt;ref:language&gt;&lt;%=User.getLanguage()%&gt;&lt;/ref:language&gt;
             &lt;ref:includeDeleted&gt;?&lt;/ref:includeDeleted&gt;
          &lt;/ref:getReferralReceivers&gt;
       &lt;/soap:Body&gt;
    &lt;/soap:Envelope&gt;;
   
    // Wrap the XML node before calling the web service
    var inNode = org.mozilla.javascript.xmlimpl.XMLLibImpl.toDomNode(message);
    var responseNode = webservice.call(inNode);
   
    // Unwrap the response after calling the web service
    var response = new XML(responseNode);

    // Log the response to Log4J
    // org.apache.log4j.Logger.getLogger("my.webservice").info(response);
    // Log the response to System.out
    //    java.lang.System.out.println(response);

    var soapenv = new Namespace ("http://www.w3.org/2003/05/soap-envelope");
    var ns3 =  new Namespace (referralSOAPServiceNamespace);
    var rows = [];
    for each (p in  response.soapenv::Body.ns3::getReferralReceiversResponse.*) {
        var row = new Object();
        row.receiverCode= p.@code.toString();
        row.receiverCodingSystem = p.@codingSystem.toString();
        row.description = p.@description.toString();
        row.receiver= p.@description.toString();
        rows[rows.length] = row;
        }
    rows;
}} AS results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Referral Service</name>
				<index>0</index>
				<default-value />
				<display-name>Referral Service</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral Type</name>
				<index>1</index>
				<default-value />
				<display-name>Referral Type</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Current Assignee</name>
				<index>2</index>
				<default-value />
				<display-name>Current Assignee</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>assigneeCode</name>
				<index>3</index>
				<default-value />
				<display-name>Code</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>assigneeCodingSystem</name>
				<index>4</index>
				<default-value />
				<display-name>Coding System</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Action</name>
				<index>5</index>
				<default-value />
				<display-name>Action</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Assignee</name>
				<index>6</index>
				<default-value>CHI</default-value>
				<display-name>Assignee</display-name>
				<input-type>radioButtonGroup</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("CHI", "CHI")%&gt;&lt;%exec config.setOption("Nurse", "Nurse")%&gt;&lt;%exec config.setOption("Phy", "Physio")%&gt;&lt;%exec config.setOption("Nut", "Nutrition")%&gt;&lt;%exec config.setOption("Social", "Social")%&gt;&lt;%exec config.setOption("Occ", "Occupational")%&gt;&lt;%exec config.setOption("Pod", "Podiatry")%&gt;&lt;%exec config.setDefaultValue("CHI")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>receiverCode</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>receiverCodingSystem</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>description</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Assignee</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Document Linking Search</name>
		<data-source-name>java:comp/env/jdbc/orion/referral</data-source-name>
		<description>Search used to allow document linking.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT
  r.identifier AS "documentId",
  'Referrals Repository' AS "namespace",
  r.referralType AS "Title",
  r.referralService AS "Category",
  r.referralType AS "Subcategory",
  r.receivedDate AS "Date",
  r.submitterIdentifier AS "Author"
  
FROM
  &lt;% if AppVars.clinicalDbType = "oracle" %&gt;
    ERF_ReferralView r
  &lt;% else %&gt;
    Referral.ERF_ReferralView AS r
  &lt;% end if %&gt;

WHERE
  r.patientIdentifier = '&lt;%=AppVars.patientId%&gt;'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral - CDV Tree View</name>
				<application>
					<name>Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Document ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Title</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Category</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Subcategory</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Author</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Patient Referrals</name>
		<data-source-name>java:comp/env/jdbc/orion/referral</data-source-name>
		<description>Displays all entries in the Referral DB but should be those only for the current patient in context</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>receivedDate ASC</order-by>
		<query-string>SELECT 
    r.urgent,
    r.sourceReferralId,
    scd.shortDescription as status,
    r.receivedDate,
    r.patientIdentifier as patientId,
    r.patientNamespace as patientNamespace,
    r.referralRequestID,
    r.version,
    r.referralService,
    r.statusCode,
    pcd.shortDescription as priority,
    acd.shortDescription as acuity,
    r.requestCreatorIdentifier,
    r.identifier
FROM
&lt;% if AppVars.clinicalDbType = "oracle" %&gt;
    ERF_ReferralView r
    LEFT OUTER JOIN CodeDefinition acd ON acd.code = r.acuityCode AND acd.codingSystem = r.acuityCodingSystem
    LEFT OUTER JOIN CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem
    LEFT OUTER JOIN CodeDefinition pcd ON pcd.code = r.priorityCode AND pcd.codingSystem = r.priorityCodingSystem
    JOIN CodeSet acs on acs.identifier = 'com.orchestral.referrals.common.api_2_0.Acuity' AND (acs.id = acd.codesetid or r.acuityCode is null)
    JOIN CodeSet scs on scs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralStatus' AND (scs.id = scd.codesetid or r.statusCode is null)
    JOIN CodeSet pcs on pcs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralPriority' AND (pcs.id = pcd.codesetid or r.priorityCode is null)
&lt;% else %&gt;
    Referral.ERF_ReferralView r
    LEFT OUTER JOIN Codeset.CodeDefinition acd ON acd.code = r.acuityCode AND acd.codingSystem = r.acuityCodingSystem
    LEFT OUTER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem
    LEFT OUTER JOIN Codeset.CodeDefinition pcd ON pcd.code = r.priorityCode AND pcd.codingSystem = r.priorityCodingSystem
    JOIN Codeset.CodeSet acs on acs.identifier = 'com.orchestral.referrals.common.api_2_0.Acuity' AND (acs.id = acd.codesetid or r.acuityCode is null)
    JOIN Codeset.CodeSet scs on scs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralStatus' AND (scs.id = scd.codesetid or r.statusCode is null)
    JOIN Codeset.CodeSet pcs on pcs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralPriority' AND (pcs.id = pcd.codesetid or r.priorityCode is null)
&lt;% end if %&gt;
WHERE
(r.patientIdentifier = '&lt;%=AppVars.patientId%&gt;' and r.patientNamespace = '&lt;%=AppVars.patientNamespace%&gt;')
&lt;%for each mergeChain in PatientIdentity.getMergeChains()%&gt;
  OR (r.patientIdentifier = '&lt;%=mergeChain.getCurrent()%&gt;' and r.patientNamespace = '&lt;%=mergeChain.getNamespace()%&gt;')
  &lt;%for each prior in mergeChain.getPriors()) %&gt;
    OR (r.patientIdentifier = '&lt;%=prior%&gt;' and r.patientNamespace = '&lt;%=mergeChain.getNamespace()%&gt;')
  &lt;%end for%&gt;
&lt;%end for%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral - Referrer View</name>
				<application>
					<name>Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>There are no items to display.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Urgent</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Received On</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Version</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Code</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Acuity</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>openEntryPoint</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<search>
		<name>Referrals to Review</name>
		<data-source-name>java:comp/env/jdbc/orion/referral</data-source-name>
		<description>Displays all entries in the Referral DB</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by>receivedDate ASC</order-by>
		<query-string>SELECT
    r.urgent,
    r.sourceReferralId,
    scd.shortDescription as status,
    r.receivedDate,
    r.patientIdentifier as patientId,
    r.patientNamespace as patientNamespace,
    r.referralRequestID,
    r.version,
    r.referralService,
    r.statusCode,
    pcd.shortDescription as priority,
    acd.shortDescription as acuity,
    r.requestCreatorIdentifier,
    r.identifier,
    'triage_view' AS ViewId,
    r.requiresReview
    
FROM
&lt;% if AppVars.clinicalDbType = "oracle" %&gt;
    ERF_ReferralView r
    LEFT OUTER JOIN CodeDefinition acd ON acd.code = r.acuityCode AND acd.codingSystem = r.acuityCodingSystem
    LEFT OUTER JOIN CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem
    LEFT OUTER JOIN CodeDefinition pcd ON pcd.code = r.priorityCode AND pcd.codingSystem = r.priorityCodingSystem
    JOIN CodeSet acs on acs.identifier = 'com.orchestral.referrals.common.api_2_0.Acuity' AND (acs.id = acd.codesetid or r.acuityCode is null)
    JOIN CodeSet scs on scs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralStatus' AND (scs.id = scd.codesetid or r.statusCode is null)
    JOIN CodeSet pcs on pcs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralPriority' AND (pcs.id = pcd.codesetid or r.priorityCode is null)
&lt;% else %&gt;
    Referral.ERF_ReferralView r
    LEFT OUTER JOIN Codeset.CodeDefinition acd ON acd.code = r.acuityCode AND acd.codingSystem = r.acuityCodingSystem
    LEFT OUTER JOIN Codeset.CodeDefinition scd ON scd.code = r.statusCode AND scd.codingSystem = r.statusCodingSystem
    LEFT OUTER JOIN Codeset.CodeDefinition pcd ON pcd.code = r.priorityCode AND pcd.codingSystem = r.priorityCodingSystem
    JOIN Codeset.CodeSet acs on acs.identifier = 'com.orchestral.referrals.common.api_2_0.Acuity' AND (acs.id = acd.codesetid or r.acuityCode is null)
    JOIN Codeset.CodeSet scs on scs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralStatus' AND (scs.id = scd.codesetid or r.statusCode is null)
    JOIN Codeset.CodeSet pcs on pcs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralPriority' AND (pcs.id = pcd.codesetid or r.priorityCode is null)
&lt;% end if %&gt;
WHERE 1=1
&lt;% if get("Receiver") &lt;&gt; "" %&gt;
  &lt;% if AppVars.clinicalDbType = "mssql" %&gt;
     AND r.RECEIVERCODE + r.RECEIVERCODINGSYSTEM  = &lt;%=SqlParameters.add(get("Receiver"))%&gt; 
  &lt;% elseIf AppVars.clinicalDbType = "derby" %&gt;
    AND r.RECEIVERCODE || r.RECEIVERCODINGSYSTEM like &lt;%=SqlParameters.add(get("Receiver"))%&gt;
  &lt;% elseIf AppVars.clinicalDbType = "oracle" %&gt;
    AND r.RECEIVERCODE || r.RECEIVERCODINGSYSTEM = &lt;%=SqlParameters.add(get("Receiver"))%&gt;
  &lt;% end if %&gt;
&lt;% end if %&gt;
&lt;%if get("Identifier")&lt;&gt;""%&gt; AND r.identifier LIKE &lt;%=SqlParameters.add(get("Identifier") + "%")%&gt;&lt;%end if%&gt;
&lt;%if get("SourceReferralID")&lt;&gt;""%&gt; AND r.sourceReferralId LIKE &lt;%=SqlParameters.add(get("SourceReferralID") + "%")%&gt;&lt;%end if%&gt;
&lt;%if AppVars.patientId &lt;&gt;"" %&gt;
  AND r.patientNamespace = &lt;%=SqlParameters.add(AppVars.patientNamespace)%&gt;
  AND r.patientIdentifier = &lt;%=SqlParameters.add(AppVars.patientId)%&gt;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Identifier</name>
				<index>0</index>
				<default-value />
				<display-name>Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Receiver</name>
				<index>1</index>
				<default-value />
				<display-name>Assignee</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/osgi_integration")%&gt;&lt;%exec config.setSQLQuery("SELECT results.id, results.description, results.shortDescription\nFROM {{\n    \n    // Retrieve the consumed web service from OHP e.g.'ReferralConsumedSoapService'\n    var webserviceService = osgiServiceFactory.getService('com.orchestral.foundation.webservices.api_6_9.WebServiceService');\n    var webservice = webserviceService.getWebService('" + SD + "=AppVars.get(\"Referral Consumed SOAP Service\")" + ED + "');\n \n    var referralSOAPServiceNamespace = 'http://www.orionhealth.com/ReferralSOAPService/';\n    default xml namespace = referralSOAPServiceNamespace;\n\n    // Note that the message below is not a String, but an E4X XML literal\n    var message = &lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:ref=\"http://www.orionhealth.com/ReferralSOAPService/\"&gt;\n       &lt;soap:Header/&gt;\n       &lt;soap:Body&gt;\n          &lt;ref:getReferralReceivers&gt;\n             &lt;!--Optional:--&gt;\n             &lt;ref:language&gt;" + SD + "=User.getLanguage()" + ED + "&lt;/ref:language&gt;\n             &lt;ref:includeDeleted&gt;?&lt;/ref:includeDeleted&gt;\n          &lt;/ref:getReferralReceivers&gt;\n       &lt;/soap:Body&gt;\n    &lt;/soap:Envelope&gt;;\n   \n    // Wrap the XML node before calling the web service\n    var inNode = org.mozilla.javascript.xmlimpl.XMLLibImpl.toDomNode(message);\n    var responseNode = webservice.call(inNode);\n   \n    // Unwrap the response after calling the web service\n    var response = new XML(responseNode);\n\n    // Log the response to Log4J\n    // org.apache.log4j.Logger.getLogger(\"my.webservice\").info(response);\n    // Log the response to System.out\n    //    java.lang.System.out.println(response);\n\n    var soapenv = new Namespace (\"http://www.w3.org/2003/05/soap-envelope\");\n    var ns3 =  new Namespace (referralSOAPServiceNamespace);\n    var rows = [];\n    for each (p in  response.soapenv::Body.ns3::getReferralReceiversResponse.*) {\n        var row = new Object();\n        row.id = p.@code.toString() + p.@codingSystem.toString();        \n        row.description = p.@description.toString();       \n        row.shortDescription = p.@shortDescription.toString();       \n        rows[rows.length] = row;\n        }\n    rows;\n}} AS results")%&gt;&lt;%exec config.setOptionColumnName("results.id")%&gt;&lt;%exec config.setDisplayColumnName("results.shortDescription")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SourceReferralID</name>
				<index>2</index>
				<default-value />
				<display-name>Source Referral ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Patient</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>View Referral by Id</name>
				<application>
					<name>Referrals</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>There are no items to display.</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Urgent</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;
  &lt;%="&lt;span class='icon-important'&gt;&lt;/span&gt;"%&gt;
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Source Referral ID</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Received On</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm")%&gt;</display-format>
				<hidden>0</hidden>
				<style>&lt;%=DateFormat.format(value, "dd-MMM-yyyy HH:mm:ss")%&gt;</style>
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient ID</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>Patient.Id.MRN</subject-item-name>
			</result-column>
			<result-column>
				<name>Namespace</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Request ID</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Version</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral Service</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.Service</subject-item-name>
			</result-column>
			<result-column>
				<name>code</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Priority</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Acuity</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Creator</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral ID</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Id.ReferralId</subject-item-name>
			</result-column>
			<result-column>
				<name>ViewId</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]Referral.Co.ViewId</subject-item-name>
			</result-column>
			<result-column>
				<name>Requires Review</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value = 1%&gt;
Yes
&lt;%else if%&gt;
No
&lt;%end if%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>true</use-prepared-statements>
	</search>
	<windowlet>
		<name>Patient Referrals</name>
		<maximized-entry-point>
			<name>Patient Referrals In Progress</name>
			<application>
				<name>Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</maximized-entry-point>
		<minimized-entry-point>
			<name>Patient Referrals In Progress</name>
			<application>
				<name>Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>Soprano Workflow Medical Templates</name>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;SMTHome</url>
	</default-help-redirection>
	<description>Soprano Workflow Medical Templates administration pages and other application entry points.</description>
	<entry-point>
		<name>Add CCR Event Status</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Clinical User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Opens the Event Status update from Patient Correspondence view.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=ApplicationVariables.ServerHelpBase%&gt;</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>&lt;%=SecureInformation.get("SpecialtyCode")%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>documentId</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.get("ExternalEventId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>documentType</name>
					<index>1</index>
					<value>DISDOC</value>
				</query-parameter>
				<query-parameter>
					<name>encodingCharacters</name>
					<index>2</index>
					<value>&lt;%=ApplicationVariables.encodingCharacters%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>enterpriseId</name>
					<index>3</index>
					<value>&lt;%=ApplicationVariables.enterpriseId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>entryUrl</name>
					<index>4</index>
					<value>&lt;%=ApplicationVariables.ServerBase%&gt;/handler/document/open</value>
				</query-parameter>
				<query-parameter>
					<name>episodeType</name>
					<index>5</index>
					<value>&lt;%=SecureInformation.get("episodeType")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>hasFinalAccess</name>
					<index>6</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasWriteAccess</name>
					<index>7</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasPrintAccess</name>
					<index>8</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasScriptAccess</name>
					<index>9</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasHistoryAccess</name>
					<index>10</index>
					<value>&lt;%=ApplicationVariables.hasHistoryAccess%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>hospitalNo</name>
					<index>11</index>
					<value>&lt;%if Request.get("hospitalNo") &lt;&gt; ""%&gt;&lt;%=Request.get("hospitalNo")%&gt;&lt;%else%&gt;CHHS&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>panelMode</name>
					<index>12</index>
					<value>popup</value>
				</query-parameter>
				<query-parameter>
					<name>patientIdList</name>
					<index>13</index>
					<value>&lt;%=ApplicationVariables.patientIdList%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>specialtyType</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.get("SpecialtyCode")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>refreshCdvTreeOnExit</name>
					<index>15</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>eventId</name>
					<index>16</index>
					<value>new:&lt;%=SecureInformation.get("ExternalEventId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>backUrl</name>
					<index>17</index>
					<value>/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+-+CCR&amp;entryPointName=CDV_CCR+Patient+Summary</value>
				</query-parameter>
				<query-parameter>
					<name>dischargeEventId</name>
					<index>18</index>
					<value>&lt;%if SecureInformation.get("ExternalEventId") &lt;&gt; ""%&gt;&lt;%=SecureInformation.get("ExternalEventId")%&gt;&lt;%else%&gt;-1&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>admitDate</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.get("Referral Received On")%&gt;</value>
				</query-parameter>
				<redirection-key>Medical Templates</redirection-key>
				<url>&lt;%=ApplicationVariables.ServerBase%&gt;/common/ConcertoEDSEntryInterface</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add CCR Event Summary</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Clinical User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Opens the Event Summary discharge from Patient Correspondence view.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=ApplicationVariables.ServerHelpBase%&gt;</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>&lt;%=SecureInformation.get("SpecialtyCode")%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>documentId</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.get("ExternalEventId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>documentType</name>
					<index>1</index>
					<value>DISDOC2</value>
				</query-parameter>
				<query-parameter>
					<name>encodingCharacters</name>
					<index>2</index>
					<value>&lt;%=ApplicationVariables.encodingCharacters%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>enterpriseId</name>
					<index>3</index>
					<value>&lt;%=ApplicationVariables.enterpriseId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>entryUrl</name>
					<index>4</index>
					<value>&lt;%=ApplicationVariables.ServerBase%&gt;/handler/document/open</value>
				</query-parameter>
				<query-parameter>
					<name>episodeType</name>
					<index>5</index>
					<value>&lt;%=SecureInformation.get("episodeType")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>hasFinalAccess</name>
					<index>6</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasWriteAccess</name>
					<index>7</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasPrintAccess</name>
					<index>8</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasScriptAccess</name>
					<index>9</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasHistoryAccess</name>
					<index>10</index>
					<value>&lt;%=ApplicationVariables.hasHistoryAccess%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>hospitalNo</name>
					<index>11</index>
					<value>&lt;%if Request.get("hospitalNo") &lt;&gt; ""%&gt;&lt;%=Request.get("hospitalNo")%&gt;&lt;%else%&gt;CHHS&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>panelMode</name>
					<index>12</index>
					<value>popup</value>
				</query-parameter>
				<query-parameter>
					<name>patientIdList</name>
					<index>13</index>
					<value>&lt;%=ApplicationVariables.patientIdList%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>specialtyType</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.get("SpecialtyCode")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>refreshCdvTreeOnExit</name>
					<index>15</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>eventId</name>
					<index>16</index>
					<value>new:&lt;%=SecureInformation.get("ExternalEventId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>backUrl</name>
					<index>17</index>
					<value>/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+-+CCR&amp;entryPointName=CDV_CCR+Patient+Summary</value>
				</query-parameter>
				<query-parameter>
					<name>dischargeEventId</name>
					<index>18</index>
					<value>&lt;%if SecureInformation.get("ExternalEventId") &lt;&gt; ""%&gt;&lt;%=SecureInformation.get("ExternalEventId")%&gt;&lt;%else%&gt;-1&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>admitDate</name>
					<index>19</index>
					<value>&lt;%=SecureInformation.get("Referral Received On")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>dischargeDate</name>
					<index>20</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "dd/MM/yyyy HH:mm:ss")%&gt;</value>
				</query-parameter>
				<redirection-key>Medical Templates</redirection-key>
				<url>&lt;%=ApplicationVariables.ServerBase%&gt;/common/ConcertoEDSEntryInterface</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Add WiC Event Summary</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI1</name>
			</allowed-group>
			<allowed-group>
				<name>CCR CHI2</name>
			</allowed-group>
			<allowed-group>
				<name>Clinical User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Opens the Event Summary discharge from Patient Correspondence view.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=ApplicationVariables.ServerHelpBase%&gt;</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>documentId</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.get("ExternalEventId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>documentType</name>
					<index>1</index>
					<value>WIC</value>
				</query-parameter>
				<query-parameter>
					<name>encodingCharacters</name>
					<index>2</index>
					<value>&lt;%=ApplicationVariables.encodingCharacters%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>enterpriseId</name>
					<index>3</index>
					<value>&lt;%=ApplicationVariables.enterpriseId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>entryUrl</name>
					<index>4</index>
					<value>&lt;%=ApplicationVariables.ServerBase%&gt;/handler/document/open</value>
				</query-parameter>
				<query-parameter>
					<name>episodeType</name>
					<index>5</index>
					<value>&lt;%=SecureInformation.get("episodeType")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>hasFinalAccess</name>
					<index>6</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasWriteAccess</name>
					<index>7</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasPrintAccess</name>
					<index>8</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasScriptAccess</name>
					<index>9</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasHistoryAccess</name>
					<index>10</index>
					<value>&lt;%=ApplicationVariables.hasHistoryAccess%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>panelMode</name>
					<index>11</index>
					<value>popup</value>
				</query-parameter>
				<query-parameter>
					<name>patientIdList</name>
					<index>12</index>
					<value>&lt;%=ApplicationVariables.patientIdList%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>specialtyType</name>
					<index>13</index>
					<value>&lt;%=SecureInformation.get("SpecialtyCode")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>refreshCdvTreeOnExit</name>
					<index>14</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>eventId</name>
					<index>15</index>
					<value>new:&lt;%=SecureInformation.get("ExternalEventId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>backUrl</name>
					<index>16</index>
					<value>/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+-+CCR&amp;entryPointName=CDV_CCR+Patient+Summary</value>
				</query-parameter>
				<query-parameter>
					<name>dischargeEventId</name>
					<index>17</index>
					<value>&lt;%if SecureInformation.get("ExternalEventId") &lt;&gt; ""%&gt;&lt;%=SecureInformation.get("ExternalEventId")%&gt;&lt;%else%&gt;-1&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>admitDate</name>
					<index>18</index>
					<value>&lt;%=SecureInformation.get("Referral Received On")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>dischargeDate</name>
					<index>19</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "dd/MM/yyyy HH:mm:ss")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>hospitalNo</name>
					<index>20</index>
					<value>&lt;%if Request.get("hospitalNo") &lt;&gt; ""%&gt;&lt;%=Request.get("hospitalNo")%&gt;&lt;%else%&gt;CHHS&lt;%end if%&gt;</value>
				</query-parameter>
				<redirection-key>Medical Templates</redirection-key>
				<url>&lt;%=ApplicationVariables.ServerBase%&gt;/common/ConcertoEDSEntryInterface</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>WIC Event Summary</name>
		<access-controller>
			<allowed-group>
				<name>Administrator User</name>
			</allowed-group>
			<allowed-group>
				<name>Clinical User</name>
			</allowed-group>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=ApplicationVariables.ServerHelpBase%&gt;</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>&lt;%=SecureInformation.get("SpecialtyCode")%&gt;</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>documentId</name>
					<index>0</index>
					<value>&lt;%=SecureInformation.get("EpisodeId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>documentType</name>
					<index>1</index>
					<value>WIC</value>
				</query-parameter>
				<query-parameter>
					<name>encodingCharacters</name>
					<index>2</index>
					<value>&lt;%=ApplicationVariables.encodingCharacters%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>enterpriseId</name>
					<index>3</index>
					<value>&lt;%=ApplicationVariables.enterpriseId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>entryUrl</name>
					<index>4</index>
					<value>&lt;%=ApplicationVariables.ServerBase%&gt;/handler/document/open</value>
				</query-parameter>
				<query-parameter>
					<name>episodeType</name>
					<index>5</index>
					<value>&lt;%=SecureInformation.get("episodeType")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>hasFinalAccess</name>
					<index>6</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasWriteAccess</name>
					<index>7</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasPrintAccess</name>
					<index>8</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasScriptAccess</name>
					<index>9</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>hasHistoryAccess</name>
					<index>10</index>
					<value>&lt;%=ApplicationVariables.hasHistoryAccess%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>hospitalNo</name>
					<index>11</index>
					<value>&lt;%if Request.get("hospitalNo") &lt;&gt; ""%&gt;&lt;%=Request.get("hospitalNo")%&gt;&lt;%else%&gt;CHHS&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>panelMode</name>
					<index>12</index>
					<value>popup</value>
				</query-parameter>
				<query-parameter>
					<name>patientIdList</name>
					<index>13</index>
					<value>&lt;%=ApplicationVariables.patientIdList%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>specialtyType</name>
					<index>14</index>
					<value>&lt;%=SecureInformation.get("SpecialtyCode")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>refreshCdvTreeOnExit</name>
					<index>15</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>eventId</name>
					<index>16</index>
					<value>new:&lt;%=SecureInformation.get("EpisodeId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>backUrl</name>
					<index>17</index>
					<value>/concerto/ApplicationRedirector.htm?applicationName=Healthcare+pathways+-+CCR&amp;entryPointName=CDV+_+Patient+Overview</value>
				</query-parameter>
				<query-parameter>
					<name>dischargeEventId</name>
					<index>18</index>
					<value>&lt;%if SecureInformation.get("EpisodeId") &lt;&gt; ""%&gt;&lt;%=SecureInformation.get("EpisodeId")%&gt;&lt;%else%&gt;-1&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>admitDate</name>
					<index>19</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "dd/MM/yyyy HH:mm:ss.000")%&gt;</value>
				</query-parameter>
				<redirection-key>Medical Templates</redirection-key>
				<url>&lt;%=ApplicationVariables.ServerBase%&gt;/common/ConcertoEDSEntryInterface</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<content-parameter>
				<name>clientTimeZone</name>
				<index>0</index>
				<value>&lt;%=User.getTimeZoneID%&gt;</value>
			</content-parameter>
			<content-parameter>
				<name>concertoHome</name>
				<index>1</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</content-parameter>
			<content-parameter>
				<name>userLogin</name>
				<index>2</index>
				<value>&lt;%=User.userID%&gt;</value>
			</content-parameter>
			<content-parameter>
				<name>userName</name>
				<index>3</index>
				<value>&lt;%if User.get("Full Name") &lt;&gt; ""%&gt;&lt;%=User.get("Full Name")%&gt;&lt;%else%&gt;&lt;%=User.userID%&gt;&#xD;
&lt;%end if%&gt;</value>
			</content-parameter>
			<content-parameter>
				<name>concertoApplicationName</name>
				<index>4</index>
				<value>&lt;%=Application.Name%&gt;</value>
			</content-parameter>
			<content-parameter>
				<name>userRole</name>
				<index>5</index>
				<value>&lt;%=User.getAttribute("Clinical User", "SMT Role")%&gt;</value>
			</content-parameter>
			<content-parameter>
				<name>userAccessPolicies</name>
				<index>6</index>
				<value>&lt;%if User.hasRole("Apps_ClPtl_DrCHHS_IAM_Health") || User.hasRole("ClPtl_DrCHHS")%&gt;DOC&lt;%elseif User.hasRole("Apps_ClPtl_ClnPhrmCHHS_IAM_Health") || User.hasRole("ClPtl_ClnPhrmCHHS")%&gt;PHARM&lt;%elseif User.hasRole("Apps_ClPtl_ClinicianCHHS_IAM_Health") || User.hasRole("ClPtl_ClinicianCHHS")%&gt;CLIN&lt;%elseif User.hasRole("Apps_ClPtl_ClericalCHHS_IAM_Health") || User.hasRole("ClPtl_ClericalCHHS")%&gt;CLER&lt;%elseif User.hasRole("Apps_ClPtl_MedStudentCHHS_IAM_Health") || User.hasRole("ClPtl_MedStudentCHHS")%&gt;MEDSTU&lt;%elseif User.hasRole("Apps_ClPtl_Admin_IAM_Health") || User.hasRole("ClPtl_Admin")%&gt;SYSADMIN&lt;%elseif User.hasRole("Apps_ClPtl_DrCalvary_IAM_Health") || User.hasRole("ClPtl_DrCalvary")%&gt;CALDOC&lt;%elseif User.hasRole("Apps_ClPtl_ClinicianCalvary_IAM_Health") || User.hasRole("ClPtl_ClinicianCalvary")%&gt;CALCLIN&lt;%elseif User.hasRole("Apps_ClPtl_ClnPhrmCalvary_IAM_Health") || User.hasRole("ClPtl_ClnPhrmCalvary")%&gt;CALPHARM&lt;%elseif User.hasRole("Apps_ClPtl_ClericalCalvary_IAM_Health") || User.hasRole("ClPtl_ClericalCalvary")%&gt;CALCLER&lt;%end if%&gt;</value>
			</content-parameter>
			<description>Used to initialise user session information such as the user name and time zone.</description>
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>POST</method>
			<redirection-key>Medical Templates</redirection-key>
			<url>&lt;%=ApplicationVariables.ServerBase%&gt;/handler/common/loginaction</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>300000</login-timeout>
	<logout-redirection-script />
	<system-object>false</system-object>
</application>
<application>
	<name>cResults</name>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-allowed-user-agent>iPad</default-allowed-user-agent>
	<description>Application that can be used to view laboratory and radiology results from existing hospital systems.</description>
	<entry-point>
		<name>CCR Vital Signs EWS Flow Sheet</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>The main entry point to Flow Sheet.  All the external applications that wish to access the Flow Sheet should call this page.</description>
		<display-name>Vital Signs and Observations</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Help for the application.  Defaulted to the Single result viewer.</description>
			<method>GET</method>
			<url>&lt;%=AppVars.get("home")%&gt;/help/WebHelp/SRV_Online_Help.htm#Viewing_a_Laboratory_Results_Flowsheet.htm</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Icon Redirection</description>
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/applications/Library.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>This is the main entry point of Flow Sheet.&#xD;
Query parameters prefixed with 'sql.' and 'header.' are dynamically added into the SQL parameters and Header parameters lists, respectively.  &#xD;
To retrieve the SQL parameters in the SQL Configuration template, the user will refer to the parameter without the prefix. For example, 'sql.parameter1' is referred as 'parameter1'.&#xD;
To retrieve the header parameters in the html template, the user will need to access it through the sessionInfo object.  For example, 'header.userName' is retrieved as 'sessionInfo.getHeader("userName")'.&#xD;
Query Parameters:&#xD;
accessReasonRequired - boolean that determines whether or not the Concerto user is required to give the access reason. Uses &lt;%=User.get("Access Reason Required")%&gt;&#xD;
concertoHome - the HTTP home location of Concerto. Uses &lt;%=ConcertoHome%&gt;.&#xD;
disableResultsGrouping - specifies whether to disable the grouping of the report when generating the page. Default is "false".&#xD;
displayEmptyTestCodes - specifies whether the to display the empty test codes.  This is only applicable when disableResultsGrouping=true. Default is "false".&#xD;
encounterNumber - the encounter number of the report to be viewed. It is not being used here.&#xD;
externalUserID - the external unique identifier of user that is currently viewing the report. Uses &lt;%=User.getAttribute("HealthcareProviderId")%&gt; as default.&#xD;
header.patientDOB - the date of birth of the patient in which the report is being viewed. Uses &lt;%=Context.Patient.Co.DateTimeOfBirth%&gt;.&#xD;
header.patientFullName - the full name of the patient in which the report is being viewed. Uses &lt;%=Context.Patient.Co.PatientName.familyName%&gt;, &lt;%=Context.Patient.Co.PatientName.givenName%&gt; &lt;%=Context.Patient.Co.PatientName.middleInitialOrName%&gt;.&#xD;
header.patientGender - the gender of the patient. Uses &lt;%=Context.Patient.Co.Sex%&gt;.&#xD;
pageHeader - the information to be used as the header of the report for printing. If it is not provided, then the header will be internally constructed by using the patient ID, patient name, patient DOB and patient gender.&#xD;
pageTitle - the name that will be used as the title of the page. Uses "Laboratory Results Flow Sheet".&#xD;
patientID - the unique identifier of the patient. This value is retrieved from Concerto Context. Uses &lt;%=Context.Patient.Id.IdList%&gt;.&#xD;
reportView - the report view associated with the current report. Uses &lt;%=Request.reportView%&gt;.&#xD;
resultsOrderingField - the field of the report to be used to order the summary.  Uses "DateTimeCollected" by default.&#xD;
showDebugInformation - boolean that determines whether to display the debug information on the screen. Uses &lt;%=User.getAttribute("Show Debug Information")%&gt;.&#xD;
userFullName - the full name of the Concerto user. Uses &lt;%=User.getAttribute("Full Name")%&gt;.&#xD;
userID - the logon of the Concerto user. Uses &lt;%=User.userID%&gt;.</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>accessReasonRequired</name>
					<index>0</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>concertoHome</name>
					<index>1</index>
					<value>&lt;%=ConcertoHome%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>disableResultsGrouping</name>
					<index>2</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>displayEmptyTestCodes</name>
					<index>3</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>encounterNumber</name>
					<index>4</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>externalUserID</name>
					<index>5</index>
					<value>&lt;%=User.getAttribute("HealthcareProviderId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>header.patientDOB</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.DateTimeOfBirth%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>header.patientFullName</name>
					<index>7</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;, &lt;%=Context.Patient.Co.PatientName.givenName%&gt; &lt;%=Context.Patient.Co.PatientName.middleInitialOrName%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>header.patientGender</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>pageHeader</name>
					<index>9</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>pageTitle</name>
					<index>10</index>
					<value>Vital Signs &amp; EWS Flow Sheets</value>
				</query-parameter>
				<query-parameter>
					<name>patientID</name>
					<index>11</index>
					<value>&lt;%=Context.Patient.Id.MRN%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>reportView</name>
					<index>12</index>
					<value>VitalSignsEWSFlowSheet_REP</value>
				</query-parameter>
				<query-parameter>
					<name>resultsOrderingField</name>
					<index>13</index>
					<value>datetimeCompleted</value>
				</query-parameter>
				<query-parameter>
					<name>showDebugInformation</name>
					<index>14</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>userFullName</name>
					<index>15</index>
					<value>&lt;%=User.get("Full Name")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>userID</name>
					<index>16</index>
					<value>&lt;%=User.userID%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>header.patientIDForPrinting</name>
					<index>17</index>
					<value>&lt;%=Context.Patient.Id%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>signoffAndNext</name>
					<index>18</index>
					<value>&lt;%=Request.signoffAndNext%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>signoffAndNextReportToken</name>
					<index>19</index>
					<value>&lt;%=Request.signoffAndNextReportToken%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>flowsheetConfig</name>
					<index>20</index>
					<value>VitalSignsEWSFlowSheet</value>
				</query-parameter>
				<query-parameter>
					<name>flowsheetEntryPointName</name>
					<index>21</index>
					<value>Flow Sheet</value>
				</query-parameter>
				<redirection-key>cResults User Key</redirection-key>
				<url>&lt;%=AppVars.get("home")%&gt;/SummaryResultsFrames.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<login-timeout>300000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>GET</method>
			<redirection-key>cResults User Key</redirection-key>
			<url>&lt;%if AppVars.get("inPortalOhp") &lt;&gt; "true"%&gt;&lt;%=AppVars.get("home")%&gt;/LogoutServlet&lt;%end if%&gt;</url>
		</redirection>
	</logout-redirection-script>
	<system-object>false</system-object>
	<windowlet>
		<name>WD_Vital Signs and Observations Flowsheet</name>
		<minimized-entry-point>
			<name>CCR Vital Signs EWS Flow Sheet</name>
			<application>
				<name>cResults</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>cWhiteboard</name>
	<access-controller>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>DbPassword</name>
		<protected>false</protected>
		<value>c@nb3rr@</value>
	</application-variable>
	<application-variable>
		<name>DbUsername</name>
		<protected>false</protected>
		<value>cWhiteboard</value>
	</application-variable>
	<application-variable>
		<name>JdbcUrl</name>
		<protected>false</protected>
		<value>jdbc:jtds:sqlserver://TSTSQL013vs.test.act.gov.au:1433/OH_cWhiteboard;instance=orion</value>
	</application-variable>
	<application-variable>
		<name>canPerformNurseSeenBy</name>
		<protected>false</protected>
		<value>true</value>
	</application-variable>
	<application-variable>
		<name>canPerformTreatment</name>
		<protected>false</protected>
		<value>true&#xD;
true</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>CWHITEBOARD</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>5.1</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value>b3887ca1-0298-41e7-93f2-4c3aefbe9b23</value>
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>home</name>
		<protected>false</protected>
		<value>/whiteboard</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;WhiteboardHome</url>
	</default-help-redirection>
	<description>cWhiteboard Administration pages and other applications Entry Points</description>
	<entry-point>
		<name>Assigned Consultants by Specialty/Facility Search</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;AssignedConsultantsbySpecialtyFacilitySearch</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>cWhiteboard</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Assigned Consultants by Specialty/Facility Search</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.facilityId</name>
					<index>2</index>
					<value>&lt;%=Request.get("facilityId")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User KeycWhiteboard</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Consultant Facility Assignment Popup</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<method>GET</method>
			<url />
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>facilityId</name>
					<index>0</index>
					<value>&lt;%=Request.facilityId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>specialtyId</name>
					<index>1</index>
					<value>&lt;%=Request.specialtyId%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/admin/ConsultantFacilityAssignment.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Discharge Editor</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Medical Discharge</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Physical Discharge</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description>Using this editor, you can do a transfer, admit, discharge or physical discharge.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>/whiteboard/help/Whiteboard.htm#Status_Editor.htm</url>
		</help-redirection>
		<permit-user-override>true</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Discharge Editor application.</description>
				<method>GET</method>
				<query-parameter>
					<name>documentType</name>
					<index>0</index>
					<value>&lt;%=Request.get("documentType")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientDOB</name>
					<index>1</index>
					<value>&lt;%=Request.patientDOB%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientGender</name>
					<index>2</index>
					<value>&lt;%=Request.patientGender%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>stayReferenceNumber</name>
					<index>3</index>
					<value>&lt;%=Request.get("stayReferenceNumber")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>smtContextName</name>
					<index>4</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>smtApplicationName</name>
					<index>5</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>smtEntryPointName</name>
					<index>6</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>arrivedDttm</name>
					<index>7</index>
					<value>&lt;%=Request.arrivedDttm%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>cacheNumber</name>
					<index>8</index>
					<value>&lt;%=Request.cacheNumber%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/DischargeEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Doctor Handover Editor</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Doctor Handover</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Using this Editor, you can change the assigned Doctor of a patient.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>/whiteboard/help/Whiteboard.htm#Doc_Editor.htm</url>
		</help-redirection>
		<permit-user-override>true</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Handover Editor application.</description>
				<method>GET</method>
				<query-parameter>
					<name>doctorHandoverDialog</name>
					<index>0</index>
					<value>&lt;%=Request.get("doctorHandoverDialog")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>cacheNumbers</name>
					<index>1</index>
					<value>&lt;%=(sc)Request.get("cacheNumbers")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/HandoverEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Doctor Popup Search</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Doctor Handover</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Doctor Seenby</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description>Allows clinical users to search for other clinical users.</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Icon Redirection</description>
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/search/Search.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the "Entity Search" generic search application.

Query Parameters:
applicationName - the name of the application that the user search is contained in. Uses "cWhiteboard".
genericSearchName - the name of the generic search application to open. This is "Entity Search". If the name of the generic search is modified, then this field must also be modified.

Uses Concerto 4.x Security Encryption with the Local User Key.</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>cWhiteboard</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Entity Search</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.entityGroupName</name>
					<index>2</index>
					<value>&lt;%=Request.entityGroupName%&gt;</value>
				</query-parameter>
				<redirection-key>Local User KeycWhiteboard</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Doctor SeenBy Editor</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Doctor Seenby</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description>Using this Editor, you can assign a Seen By Doctor to a patient.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>/whiteboard/help/Whiteboard.htm#Status_Editor.htm</url>
		</help-redirection>
		<permit-user-override>true</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the SeenBy Editor application.</description>
				<method>GET</method>
				<query-parameter>
					<name>arrivedDttm</name>
					<index>0</index>
					<value>&lt;%=Request.arrivedDttm%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>cacheNumber</name>
					<index>1</index>
					<value>&lt;%=Request.cacheNumber%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientDOB</name>
					<index>2</index>
					<value>&lt;%=Request.patientDOB%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientGender</name>
					<index>3</index>
					<value>&lt;%=Request.patientGender%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>smtApplicationName</name>
					<index>4</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>smtContextName</name>
					<index>5</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>smtEntryPointName</name>
					<index>6</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>triageCategoriesToEnableSeenAtArrivalTimeCheckbox</name>
					<index>7</index>
					<value>&lt;%=Request.get("triageCategoriesToEnableSeenAtArrivalTimeCheckbox")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/DoctorSeenbyEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Facility Details</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>facilityId</name>
					<index>0</index>
					<value>&lt;%=Request.get("facilityId")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/admin/FacilityDetails.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Facility Manager</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;FacilityManager</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>cWhiteboard</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Facility Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Integrated Managers</name>
		<access-controller>
			<allowed-group>
				<name>Administrators</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>true</allow-custom-user-agents>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Administation Tools for managing and configuration Whiteboard Applications, these include managing columns, filters, views, maps etc.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;IntegratedManagers</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Icon Redirection</description>
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/applications/Preferences.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Integrated Managers application.</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>moduleName</name>
					<index>0</index>
					<value>cWhiteboard Managers</value>
				</query-parameter>
				<redirection-key>cWhiteboard</redirection-key>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/admin/IntegratedAdminFrame.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Location Editor</name>
		<access-controller>
			<allowed-group>
				<name>cWhiteboard Edit Location</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description>This is an editor use to update the patient's location from Whiteboard application.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>/whiteboard/help/Whiteboard.htm#Loc_Editor.htm</url>
		</help-redirection>
		<permit-user-override>true</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Location Editor application.</description>
				<method>GET</method>
				<query-parameter>
					<name>cacheNumber</name>
					<index>0</index>
					<value>&lt;%=Request.get("cacheNumber")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/LocationEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>My Ward</name>
		<access-controller>
			<allowed-group>
				<name>Communtiy Health Centre Admin</name>
			</allowed-group>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Doctor</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Nurse</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/medical/bed.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Note: For some reason the MyWard is not working correctly.
&lt;%=AppVars.get("home")%&gt;/jsp/user/WhiteboardViewResult.jsp</description>
				<method>GET</method>
				<query-parameter>
					<name>viewName</name>
					<index>0</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>siteId</name>
					<index>1</index>
					<value>&lt;%=User.getAttribute("MyWard")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;&lt;%if User.getAttribute("MyWard")%&gt;&lt;%if User.getAttribute("MyWard").equals("") %&gt;/jsp/error/WardNotSelectedWarning.jsp&lt;%else%&gt;/jsp/user/WhiteboardViewResult.jsp&lt;%end if%&gt;&lt;%else%&gt;/jsp/error/WardNotSelectedWarning.jsp&lt;%end if%&gt;</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Note Editor</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Update Note</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description>This is an editor use to update the patient's notes from Whiteboard.</description>
		<display-name />
		<permit-user-override>true</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Note Editor application.</description>
				<method>POST</method>
				<query-parameter>
					<name>cacheNumber</name>
					<index>0</index>
					<value>&lt;%=Request.cacheNumber%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>canFormFieldBeNull</name>
					<index>1</index>
					<value>&lt;%=Request.get("canFormFieldBeNull")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>columnName</name>
					<index>2</index>
					<value>&lt;%=Request.get("columnName")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>columnSize</name>
					<index>3</index>
					<value>&lt;%=Request.get("columnSize")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>editorTitleKey</name>
					<index>4</index>
					<value>&lt;%=Request.get("editorTitleKey")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>fieldValue</name>
					<index>5</index>
					<value>&lt;%=Request.get("fieldValue")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>mode</name>
					<index>6</index>
					<value>&lt;%=Request.get("mode")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/SingleInputFieldEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Nurse Handover Editor</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Nurse Handover</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Using this Editor, you can change the assigned Nurse of a patient.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>/whiteboard/help/Whiteboard.htm#Doc_Editor.htm</url>
		</help-redirection>
		<permit-user-override>true</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Handover Editor application.</description>
				<method>GET</method>
				<query-parameter>
					<name>doctorHandoverDialog</name>
					<index>0</index>
					<value>&lt;%=Request.get("doctorHandoverDialog")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>cacheNumbers</name>
					<index>1</index>
					<value>&lt;%=(sc)Request.get("cacheNumbers")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/HandoverEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Nurse Popup Search</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Nurse Handover</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Nurse Seenby</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Allows clinical users to search for other clinical users.</description>
		<display-name />
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the "Entity Search" generic search application.&#xD;
&#xD;
Query Parameters:&#xD;
applicationName - the name of the application that the user search is contained in. Uses "cWhiteboard".&#xD;
genericSearchName - the name of the generic search application to open. This is "Entity Search". If the name of the generic search is modified, then this field must also be modified.&#xD;
&#xD;
Uses Concerto 4.x Security Encryption with the Local User Key.</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>cWhiteboard</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Entity Search</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.entityGroupName</name>
					<index>2</index>
					<value>&lt;%=Request.entityGroupName%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Nurse SeenBy Editor</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Nurse Seenby</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description>Using this Editor, you can assign a Seen By Nurse to a patient.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
		</help-redirection>
		<permit-user-override>true</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the SeenBy Editor application.</description>
				<method>GET</method>
				<query-parameter>
					<name>cacheNumber</name>
					<index>0</index>
					<value>&lt;%=Request.cacheNumber%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/NurseSeenbyEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Patient Summary</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard View Patient Summary</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description>Patient Summary</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>/whiteboard/help/Whiteboard.htm#Status_Editor.htm</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Icon Redirection</description>
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/patient/Prescriptions.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Patient Dynamic Summary application.</description>
				<method>GET</method>
				<query-parameter>
					<name>arrivedDttm</name>
					<index>0</index>
					<value>&lt;%=DateFormat.format(Context.Encounter.Co.AdmitDateTime, "yyyy-MM-dd HH:mm:ss")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>backURL</name>
					<index>1</index>
					<value>&lt;%=Request.get("backURL")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>concertoHome</name>
					<index>2</index>
					<value>&lt;%=ConcertoHome%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>encounterNumber</name>
					<index>3</index>
					<value>&lt;%=Context.Encounter.Id.VisitNumber%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>episodeType</name>
					<index>4</index>
					<value>&lt;%=Context.Encounter.Co.PatientClass%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientDOB</name>
					<index>5</index>
					<value>&lt;%=DateFormat.format(Context.Patient.Co.DateTimeOfBirth)%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientFirstGivenName</name>
					<index>6</index>
					<value>&lt;%=Context.Patient.Co.PatientName.givenName
%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientGender</name>
					<index>8</index>
					<value>&lt;%=Context.Patient.Co.Sex%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>9</index>
					<value>&lt;%=Context.Patient.Id.NationalIdNumber%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientSurname</name>
					<index>10</index>
					<value>&lt;%=Context.Patient.Co.PatientName.familyName%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/patientdetails/PatientDetails.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Physical Discharge Editor</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Physical Discharge</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description>This Editor can be used to enter the details of a physical discharge event.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>/whiteboard/help/Whiteboard.htm#Status_Editor.htm</url>
		</help-redirection>
		<permit-user-override>true</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Physical Discharge Editor application.</description>
				<method>GET</method>
				<query-parameter>
					<name>cacheNumber</name>
					<index>0</index>
					<value>&lt;%=Request.get("cacheNumber")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/PhysicalDischargeEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Popup Site Search</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>Users</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Site Popup search to allow users to specify the ward they are working on.</description>
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/XP Style/medical/bed.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Popup Site Search, to allow users to select the site they are working at.</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>cWhiteboard</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Popup Site Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Remove Physical Discharge Editor</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Remove Physical Discharge</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description>This Editor can be used to remove a physical discharge event.</description>
		<display-name />
		<permit-user-override>true</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Remove Physical Discharge Editor application.</description>
				<method>GET</method>
				<query-parameter>
					<name>cacheNumber</name>
					<index>0</index>
					<value>&lt;%=Request.get("cacheNumber")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/RemovePhysicalDischargeEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Sample cWhiteboard Site</name>
		<access-controller>
			<allowed-group>
				<name>cWhiteboard View</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/XP Style/medical/ambulance.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>siteName</name>
					<index>0</index>
					<value>Sample Site</value>
				</query-parameter>
				<query-parameter>
					<name>facilityName</name>
					<index>1</index>
					<value>Sample Facility</value>
				</query-parameter>
				<query-parameter>
					<name>viewName</name>
					<index>2</index>
					<value />
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/WhiteboardViewResult.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Sample cWhiteboard Site Map</name>
		<access-controller>
			<allowed-group>
				<name>cWhiteboard View</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/XP Style/medical/search/ambulance.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>siteName</name>
					<index>0</index>
					<value>Sample Site</value>
				</query-parameter>
				<query-parameter>
					<name>facilityName</name>
					<index>1</index>
					<value>Sample Facility</value>
				</query-parameter>
				<query-parameter>
					<name>areaName</name>
					<index>2</index>
					<value />
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/patientmap/PatientMapUserFrame.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Site Patient Map</name>
		<access-controller>
			<allowed-group>
				<name>cWhiteboard View</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Displays a Patient Map for a given site</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>/whiteboard/help/Whiteboard.htm#Introduction.htm</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Whiteboard application.</description>
				<method>GET</method>
				<query-parameter>
					<name>siteId</name>
					<index>0</index>
					<value>&lt;%=Request.get("siteId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>areaId</name>
					<index>1</index>
					<value />
				</query-parameter>
				<query-parameter>
					<name>cacheNumber</name>
					<index>2</index>
					<value>&lt;%=Request.get("cacheNumber")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/patientmap/PatientMapUserFrame.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Site Search</name>
		<access-controller>
			<allowed-group>
				<name>cWhiteboard View</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name>Location Search</display-name>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=ConcertoHome%&gt;/icons/XP Style/medical/bed.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>cWhiteboard</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Site Search</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Triage Category Editor</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard Update Triage Category</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<description />
		<display-name />
		<permit-user-override>true</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Triage Editor application.</description>
				<method>GET</method>
				<query-parameter>
					<name>cacheNumber</name>
					<index>0</index>
					<value>&lt;%=Request.get("cacheNumber")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>columnName</name>
					<index>1</index>
					<value>&lt;%=Request.get("columnName")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>columnValue</name>
					<index>2</index>
					<value>&lt;%=Request.get("columnValue")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>editorLabelKey</name>
					<index>3</index>
					<value>&lt;%=Request.get("editorLabelKey")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>editorTitleKey</name>
					<index>4</index>
					<value>&lt;%=Request.get("editorTitleKey")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>triageCategoryDisplayFormat</name>
					<index>5</index>
					<value>&lt;%=Request.get("triageCategoryDisplayFormat")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>triageCategoryValues</name>
					<index>6</index>
					<value>&lt;%=Request.get("triageCategoryValues")%&gt;</value>
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/editors/TriageCategoryEditor.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Unassigned Consultants by Specialty/Facility Search</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<permit-user-override>false</permit-user-override>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>cWhiteboard</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Unassigned Consultants by Specialty/Facility Search</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.specialtyFacilityLinkId</name>
					<index>2</index>
					<value>&lt;%=Request.get("specialtyFacilityLinkId")%&gt;</value>
				</query-parameter>
				<redirection-key>Local User KeycWhiteboard</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Whiteboard</name>
		<access-controller>
			<allowed-group>
				<name>Nursing - WiC</name>
			</allowed-group>
			<allowed-group>
				<name>cWhiteboard View</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>This is the main view of Whiteboard application, which display a list of patient details. Filters are also available to restrict the data being displayed.</description>
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description>Redirection step</description>
			<method>GET</method>
			<url>/whiteboard/help/Whiteboard.htm#Introduction.htm</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Opens the web page showing the Whiteboard application.</description>
				<method>GET</method>
				<query-parameter>
					<name>siteId</name>
					<index>0</index>
					<value>&lt;%=Request.get("siteId")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>viewName</name>
					<index>1</index>
					<value />
				</query-parameter>
				<url>&lt;%=AppVars.get("home")%&gt;/jsp/user/WhiteboardViewResult.jsp</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>GET</method>
			<query-parameter>
				<name>concertoHome</name>
				<index>0</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>isAdmin</name>
				<index>1</index>
				<value>&lt;%=User.isMemberOf("Administrators")%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userLogin</name>
				<index>2</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>canPerformNurseSeenBy</name>
				<index>3</index>
				<value>&lt;%=ApplicationVariables.canPerformNurseSeenBy%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userName</name>
				<index>4</index>
				<value>&lt;%=User.get("Full Name")%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>isOverriddenUser</name>
				<index>5</index>
				<value>&lt;%=User.overriddenUser%&gt;</value>
			</query-parameter>
			<redirection-key>cWhiteboard</redirection-key>
			<server-error-message>cWhiteboard is not available. Check with your System Administrator to ensure the cWhiteboard application is running.</server-error-message>
			<url>&lt;%=AppVars.get("home")%&gt;/common/LoginServlet</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>300000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.get("home")%&gt;/common/LogoutServlet</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>Assigned Consultants by Specialty/Facility Search</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>Displays a list of Consultants that has been assigned to the given Specialty at a particular Facility</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>consultant.surname, consultant.firstGivenName</order-by>
		<query-string>SELECT DISTINCT consultantSpecialtyFacilityLink.consultantSpecialtyFacLinkId,&#xD;
	consultant.surname,&#xD;
	consultant.firstGivenName,&#xD;
	specialty.description&#xD;
FROM Consultant consultant&#xD;
	INNER JOIN ConsultantSpecialtyFacLink consultantSpecialtyFacilityLink ON consultantSpecialtyFacilityLink.consultantId = consultant.consultantId&#xD;
	INNER JOIN SpecialtyFacilityLink specialtyFacilityLink ON specialtyFacilityLink.specialtyFacilityLinkId = consultantSpecialtyFacilityLink.specialtyFacilityLinkId&#xD;
	INNER JOIN Specialty specialty ON specialty.specialtyId = specialtyFacilityLink.specialtyId&#xD;
	INNER JOIN Facility facility ON facility.facilityId = specialtyFacilityLink.facilityId&#xD;
WHERE facility.facilityId = &lt;%=get("facilityId")%&gt;&#xD;
&lt;%if get("specialtyId") &lt;&gt; ""%&gt;AND specialty.specialtyId = &lt;%=get("specialtyId")%&gt;&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Assign Consultant</name>
				<index>2</index>
				<action>var specialtyId = document.all("attribute.specialtyId").value;&#xD;
var facilityId = document.all("attribute.facilityId").value;&#xD;
&#xD;
var application = new Application("cWhiteboard", "Consultant Facility Assignment Popup");&#xD;
application.addQueryParameter("specialtyId", specialtyId);&#xD;
application.addQueryParameter("facilityId", facilityId);&#xD;
var result = concerto.openApplicationInModalDialog(application, 200, 500, "resizable:no; scroll:no; status:no");&#xD;
if (result == "reload") {&#xD;
	parent.SearchFilter.submitFilter();&#xD;
}</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Back</name>
				<index>3</index>
				<action>var facilityId = document.all("attribute.facilityId").value;&#xD;
var application = new Application("cWhiteboard", "Facility Details");&#xD;
application.addQueryParameter("facilityId", facilityId);&#xD;
concerto.openApplication(application);</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-field>
				<name>facilityId</name>
				<index>0</index>
				<default-value />
				<display-name>facilityId</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>specialtyId</name>
				<index>1</index>
				<default-value />
				<display-name>Specialty</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/whiteboard")%&gt;&lt;%exec config.setSQLQuery("SELECT specialtyId, description FROM Specialty")%&gt;&lt;%exec config.setOptionColumnName("specialtyId")%&gt;&lt;%exec config.setDisplayColumnName("description")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Delete</name>
				<index>0</index>
				<action>var consultantSpecialtyFacilityLinkId = row[0];&#xD;
var text = "&lt;%=(js)Translator.translate( "Are you sure you want to delete this link")%&gt;";&#xD;
if (confirm(text)){ &#xD;
	var request = new HttpResource( "&lt;%=AppVars.get("home")%&gt;/admin/FacilityManagingServlet" );&#xD;
	request.addQueryParameter( "consultantSpecialtyFacilityLinkId", consultantSpecialtyFacilityLinkId );&#xD;
	request.addQueryParameter( "action", "REMOVE_CONSULTANT" );&#xD;
	var response = request.postToResource(); &#xD;
	if (!isOKResponseCode( response ) ) { &#xD;
		displayError(request.getContentString()); &#xD;
	} else { &#xD;
		try { &#xD;
			parent.SearchFilter.submitFilter() &#xD;
		} catch(ex) {&#xD;
			parent.SearchFilter.submitFilter();&#xD;
		}&#xD;
	}&#xD;
}</action>
				<css-class>DELETE</css-class>
				<style />
			</result-action>
			<result-column>
				<name>consultantSpecialtyFacLinkId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Surname</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>First Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Specialty</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Entity Search</name>
		<data-source-name>java:comp/env/jdbc/concerto/Concerto</data-source-name>
		<description>Search for Concerto Users in the Concerto Database that belong to a specified group</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>CONVERT( nvarchar(128), familyName.cValue )</order-by>
		<query-string>&lt;%replace%&gt;NOTE: Converts are required otherwise columns will not be sortable&lt;%end replace%&gt;
SELECT cu.name,
	CONVERT( nvarchar(128), familyName.cValue ) + ', ' + CONVERT( nvarchar(128), givenName.cValue ),
	CONVERT( nvarchar(128), familyName.cValue ),
	CONVERT( nvarchar(128), givenName.cValue )
FROM GroupMembership gm, cGroup cg, cUser cu
	LEFT OUTER JOIN UserAttribute familyName ON (cu.uniqueId = familyName.cUser AND familyName.name = 'Full Name.Family Name')
	LEFT OUTER JOIN UserAttribute givenName ON (cu.uniqueId = givenName.cUser AND givenName.name = 'Full Name.Given Name(s)')
WHERE cu.name LIKE N'&lt;%=get("User ID")%&gt;%'
	&lt;%if get("Full Name.Family Name") &lt;&gt; ""%&gt;AND familyName.cValue LIKE N'&lt;%=get("Full Name.Family Name")%&gt;%'&lt;%end if%&gt;
	&lt;%if get("Full Name.Given Name(s)") &lt;&gt; ""%&gt;AND givenName.cValue LIKE N'&lt;%=get("Full Name.Given Name(s)")%&gt;%'&lt;%end if%&gt;
	AND cu.uniqueId = gm.cuser
	AND gm.cGroup = cg.uniqueId
	AND cg.name = '&lt;%=get("entityGroupName")%&gt;'

UNION

SELECT cu.name,
	CONVERT( nvarchar(128), familyName.cValue ) + ', ' + CONVERT( nvarchar(128), givenName.cValue ),
	CONVERT( nvarchar(128), familyName.cValue ),
	CONVERT( nvarchar(128), givenName.cValue )
FROM RoleMembership rm, GroupRole gr, cGroup cg, cUser cu
	LEFT OUTER JOIN UserAttribute familyName ON (cu.uniqueId = familyName.cUser AND familyName.name = 'Full Name.Family Name')
	LEFT OUTER JOIN UserAttribute givenName ON (cu.uniqueId = givenName.cUser AND givenName.name = 'Full Name.Given Name(s)')
WHERE cu.name LIKE N'&lt;%=get("User ID")%&gt;%'
	&lt;%if get("Full Name.Family Name") &lt;&gt; ""%&gt;AND familyName.cValue LIKE N'&lt;%=get("Full Name.Family Name")%&gt;%'&lt;%end if%&gt;
	&lt;%if get("Full Name.Given Name(s)") &lt;&gt; ""%&gt;AND givenName.cValue LIKE N'&lt;%=get("Full Name.Given Name(s)")%&gt;%'&lt;%end if%&gt;
	AND cu.uniqueId = rm.cuser AND rm.role = gr.role AND gr.cGroup = cg.uniqueId
	AND cg.name = '&lt;%=get("entityGroupName")%&gt;'</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>Entity Popup Search</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>entityGroupName</name>
				<index>0</index>
				<default-value />
				<display-name>entityGroupName</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Full Name</name>
				<index>1</index>
				<default-value />
				<display-name>Full Name</display-name>
				<input-type>Full Name</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setNamePart("Given Name(s)")%&gt;&lt;%exec config.setNamePart("Family Name")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>User ID</name>
				<index>2</index>
				<default-value />
				<display-name>User ID</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>User ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Id.UserId</subject-item-name>
			</result-column>
			<result-column>
				<name>Full Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%if value &lt;&gt; ", "%&gt;&lt;%=(html)value%&gt;&lt;%end if%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName</subject-item-name>
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName.givenName</subject-item-name>
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Facility Search</name>
		<data-source-name>java:comp/env/jdbc/whiteboard</data-source-name>
		<description>Displays a list of Facilities</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT facilityId, name, description&#xD;
FROM facility</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Add Facility</name>
				<index>0</index>
				<action>var application = new Application("cWhiteboard", "Facility Details");&#xD;
concerto.openApplication(application, "&lt;%=ConcertoHome%&gt;");</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>javascript:submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Delete</name>
				<index>0</index>
				<action>var facilityId = row[0];&#xD;
var facilityName = row[1];&#xD;
var text = "&lt;%=(js)Translator.translate( "Are you sure you want to delete \'[0]\'?")%&gt;";&#xD;
text = MessageFormat.format( text, "'"+facilityName+"'" );&#xD;
if (confirm(text)){&#xD;
	var request = new HttpResource( "&lt;%=AppVars.get("home")%&gt;/admin/FacilityManagingServlet" );&#xD;
	request.addQueryParameter( "facilityId", facilityId );&#xD;
	request.addQueryParameter( "action", "DELETE_FACILITY" ); &#xD;
	var response = request.postToResource(); &#xD;
	if (!isOKResponseCode( response ) ) { &#xD;
		displayError(request.getContentString()); &#xD;
	} else { &#xD;
		try { &#xD;
			parent.SearchFilter.submitFilter();&#xD;
		} catch(ex) {&#xD;
			parent.SearchFilter.submitFilter();&#xD;
		}&#xD;
	}&#xD;
}</action>
				<css-class>DELETE</css-class>
				<style />
			</result-action>
			<result-action>
				<name>Copy</name>
				<index>1</index>
				<action>var url = "&lt;%=AppVars.get("home")%&gt;/jsp/admin/FacilityCopy.jsp?facilityId=";&#xD;
url = url + row[0];&#xD;
var features = "dialogHeight:300px; dialogWidth:300px; resizable:no; scroll:no; status:no";&#xD;
var result = window.showModalDialog(url, "", features);&#xD;
if (result == "reload") {&#xD;
	parent.SearchFilter.submitFilter();&#xD;
}</action>
				<css-class>RENAME</css-class>
				<style />
			</result-action>
			<result-column>
				<name>Facility Id</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Description</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application("cWhiteboard", "Facility Details");&#xD;
application.addQueryParameter("facilityId", row[0]);&#xD;
concerto.openApplication(application);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Popup Site Search</name>
		<data-source-name>java:comp/env/jdbc/whiteboard</data-source-name>
		<description>Just a temp site search to set from User Attributes. Need to actually write some JSCRIPT in the Site Search to manage both the popup and others.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT siteId, name, description&#xD;
FROM Site &#xD;
WHERE name like '%&lt;%=get("SiteName")%&gt;%'&#xD;
&lt;%if get("Facility") &lt;&gt; ""%&gt;AND facilityId = &lt;%=get("Facility")%&gt;&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Facility</name>
				<index>0</index>
				<default-value />
				<display-name>Facility</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/whiteboard")%&gt;&lt;%exec config.setSQLQuery("SELECT facilityId, description\r\nFROM facility")%&gt;&lt;%exec config.setOptionColumnName("facilityId")%&gt;&lt;%exec config.setDisplayColumnName("description")%&gt;&lt;%exec config.setIncludeBlankOption("false")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>cWhiteboard Site</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Site Id</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]WhiteboardSite.Id.SiteId</subject-item-name>
			</result-column>
			<result-column>
				<name>Site Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]WhiteboardSite.Co.Name</subject-item-name>
			</result-column>
			<result-column>
				<name>Description</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>var application = new Application("cWhiteboard", "Whiteboard");&#xD;
application.addQueryParameter("siteId", row[0]);&#xD;
concerto.openApplication(application);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Site Search</name>
		<data-source-name>java:comp/env/jdbc/whiteboard</data-source-name>
		<description />
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT siteId, name, description&#xD;
FROM Site &#xD;
WHERE name like '%&lt;%=get("SiteName")%&gt;%'&#xD;
&lt;%if get("Facility") &lt;&gt; ""%&gt;AND facilityId = &lt;%=get("Facility")%&gt;&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Facility</name>
				<index>0</index>
				<default-value />
				<display-name>Facility</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/whiteboard")%&gt;&lt;%exec config.setSQLQuery("SELECT facilityId, description\r\nFROM facility")%&gt;&lt;%exec config.setOptionColumnName("facilityId")%&gt;&lt;%exec config.setDisplayColumnName("description")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SiteName</name>
				<index>1</index>
				<default-value />
				<display-name>Site Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-action>
				<name>Patient Map</name>
				<index>0</index>
				<action>var application = new Application("cWhiteboard", "Site Patient Map");&#xD;
application.addQueryParameter("siteId", row[0]);&#xD;
concerto.openApplication(application);</action>
				<css-class />
				<style>background-image: url(/whiteboard/images/icons/environment_view.gif); width: 16px; height: 16px; padding-left: 12px;</style>
			</result-action>
			<result-column>
				<name>Site Id</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Site Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Description</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>executeJavaScript</row-select-action-type>
			<select-row-action>var application = new Application("cWhiteboard", "Whiteboard");&#xD;
application.addQueryParameter("siteId", row[0]);&#xD;
concerto.openApplication(application);</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Unassigned Consultants by Specialty/Facility Search</name>
		<data-source-name>java:comp/env/jdbc/whiteboard</data-source-name>
		<description>Displays a list of Consultants that has not been assigned to the given Specialty at a particular Facility</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by>consultant.surname, consultant.firstGivenName</order-by>
		<query-string>SELECT consultant.consultantId,&#xD;
	consultant.surname,&#xD;
	consultant.firstGivenName&#xD;
FROM Consultant consultant&#xD;
WHERE NOT EXISTS (&#xD;
	SELECT 1&#xD;
	FROM ConsultantSpecialtyFacLink consultantSpecialtyFacilityLink&#xD;
	WHERE consultantSpecialtyFacilityLink.specialtyFacilityLinkId = &lt;%=get("specialtyFacilityLinkId")%&gt;&#xD;
	AND consultantSpecialtyFacilityLink.consultantId = consultant.consultantId&#xD;
)&#xD;
&lt;%if get("First Name")&lt;&gt;""%&gt;&#xD;
AND consultant.firstGivenName LIKE '&lt;%=get("First Name")%&gt;%'&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Surname")&lt;&gt;""%&gt;&#xD;
AND consultant.surname LIKE '&lt;%=get("Surname")%&gt;%'&#xD;
&lt;%end if%&gt;</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>specialtyFacilityLinkId</name>
				<index>0</index>
				<default-value />
				<display-name>specialtyFacilityLinkId</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>First Name</name>
				<index>1</index>
				<default-value />
				<display-name>First Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Surname</name>
				<index>2</index>
				<default-value />
				<display-name>Surname</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>consultantId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>1</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Id.UserId</subject-item-name>
			</result-column>
			<result-column>
				<name>Surname</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>First Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format />
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName.givenName</subject-item-name>
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<system-object>false</system-object>
	<windowlet>
		<name>Whiteboard</name>
		<minimized-entry-point>
			<name>My Ward</name>
			<application>
				<name>cWhiteboard</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<application>
	<name>iPM Web Services Integration</name>
	<access-controller>
		<allowed-group>
			<name>Community</name>
		</allowed-group>
		<allowed-group>
			<name>Generic Community User</name>
		</allowed-group>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>Referral Consumed SOAP Service</name>
		<protected>false</protected>
		<value>ReferralConsumedSoapService</value>
	</application-variable>
	<application-variable>
		<name>Referral WSDL URL</name>
		<protected>false</protected>
		<value>/cws/ws/ReferralSOAPService?wsdl</value>
	</application-variable>
	<application-variable>
		<name>displayPatientInformation</name>
		<protected>false</protected>
		<value>true</value>
	</application-variable>
	<application-variable>
		<name>iPM.Generic Department</name>
		<protected>false</protected>
		<value>WEBSERVICES</value>
	</application-variable>
	<application-variable>
		<name>iPM.Generic Password</name>
		<protected>false</protected>
		<value>websrvdev</value>
	</application-variable>
	<application-variable>
		<name>iPM.Generic User Name</name>
		<protected>false</protected>
		<value>WEBSRV</value>
	</application-variable>
	<application-variable>
		<name>iPM.Generic Workstation ID</name>
		<protected>false</protected>
		<value>WEBSERVICES</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Appointment Port Name</name>
		<protected>false</protected>
		<value>OutpatientAppointmentEndPoint</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Appointments.Action.Get Appointment by OID</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace/OutpatientAttendanceContract/GetOutpatientAppointmentByAppointmentOid</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Appointments.Action.Get Appointments by Patient</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace/OutpatientAttendanceContract/GetOutpatientAppointmentByPatientOid</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Appointments.Action.Update Appointment</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace/OutpatientAttendanceContract/UpdateOutpatientAppointmentAttendance</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Base Location URL</name>
		<protected>false</protected>
		<value>https://actpaswebservices.test.act.gov.au:2124/iPM_WEB_API?wsdl</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Community Contact  Port Name</name>
		<protected>false</protected>
		<value>CommunityContactServiceEndPoint</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Contacts.Action.Add Community Contact</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.CommunityContactNamespace/CommunityContactContract/AddCommunityContact</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Contacts.Action.Delete Community Contact</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.CommunityContactNamespace/CommunityContactContract/DeleteCommunityContact</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Contacts.Action.Get Community Contact by OID</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.CommunityContactNamespace/CommunityContactContract/GetCommunityContactByContactOid</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Contacts.Action.Get Community Contacts by Patient</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.CommunityContactNamespace/CommunityContactContract/GetCommunityContactByPatientOid</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Contacts.Action.Update Community Contact</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.CommunityContactNamespace/CommunityContactContract/UpdateCommunityContact</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Contacts.Namespace</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.CommunityContactNamespace</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.OPD.Appointments.Namespace</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Referral Port Name</name>
		<protected>false</protected>
		<value>ReferralServiceEndPoint</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Referrals.Action.Add Referral</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/AddReferral</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Referrals.Action.Get Referral by OID</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/GetReferralByReferralOid</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Referrals.Action.Get Referrals by Patient</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/GetReferralByPatientOid</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Referrals.Action.GetPatientByID</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/GetPatientByPatientId</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Referrals.Action.Update Referral</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/UpdateReferral</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Referrals.Namespace</name>
		<protected>false</protected>
		<value>http://iSOFT.ANZ.PatientManagerService.ReferralNamespace</value>
	</application-variable>
	<application-variable>
		<name>iPM.WS.Timeout</name>
		<protected>false</protected>
		<value>10000</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation.get("Patient ID") &lt;&gt; ""%&gt;&lt;%=SecureInformation.get("Patient ID")%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-icon-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>/concerto/icons/XP Style/network and security/network/client-server/client_network.gif</url>
	</default-icon-redirection>
	<description>Application to group and maintain entry points and generic searches for the iPM web services to Portal integration for referrals, Outpatient appointments and Community contacts. these can be embedded or copied and used in a given workflow or applcation ( e.g. popup within a CWS form, embed an entry point in a context or document view etc.) The application contains one document view which can be used to test the functions of this Integration</description>
	<entry-point>
		<name>ACTPAS Clinician ID</name>
		<access-controller>
			<allowed-group>
				<name>Community</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Redirects to the 'Get ACTPAS Clinician Details' search - allowing the user to search for and select a Clinicians details as stored in ACTPAS.&#xD;
Note this list contains both Active as well as historic referrers (so can be used if processing older information.</description>
		<display-name>Get ACTPAS Clinician ID</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Redirects to the 'Get ACTPAS Clinician Details search - allowing the user to search for and select a Clinicians details as stored in ACTPAS.</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>iPM Web Services Integration</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Get ACTPAS Clinician Details</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>ACTPAS Current Clinician ID</name>
		<access-controller>
			<allowed-group>
				<name>Community</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Redirects to the Search used to retrieve the list of Current ( active, not retired or archived) clinicians within ACTPAS</description>
		<display-name>Get ACTPAS Clinician ID</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>Redirects to the 'Get ACTPAS Current Clinician Details search - allowing the user to search for and select a Clinicians details as stored in ACTPAS.</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>iPM Web Services Integration</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Get ACTPAS Current Clinician Details</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>ACTPAS Outpatient Appointments</name>
		<access-controller>
			<allowed-group>
				<name>Community</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Displays the list of active outpatient appointments retrieved from the iPM web service</description>
		<display-name>ACTPAS Outpatient Appointments</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>iPM Web Services Integration</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Get Outpatient Appointments</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Create/Link  ACTPAS OP Referral</name>
		<access-controller>
			<allowed-group>
				<name>Community</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Redirects to the search to create a new community / Acute referral. While this search can be accessed directly via the entrypoint in a document view the intended use is within the Clinical Referral ad-hoc workflow to retrieve / create a PAS ID and return this to be associated with the CWS Clinical Referral metadata</description>
		<display-name>Register Community Referral</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>iPM Web Services Integration</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Link ACTPAS Referral</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>2</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientNamespace</name>
					<index>3</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Get Main Facility</name>
		<access-controller>
			<allowed-group>
				<name>Community</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>true</allow-custom-user-agents>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>Used to search and select the owner Health Org - aka the Facility. Note not all HEORGS are valid as input for this filed inthe web service and review with ACT may support reducing the size of the list</description>
		<display-name>Owner Health Organisation</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>iPM Web Services Integration</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Get Health Organisation from Facility</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>/concerto/sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Get Referral List</name>
		<access-controller>
			<allowed-group>
				<name>Community</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Insecure EP Used to retrieve a list of existing referrals via ACTPAS VIEWS  for use in workflows - e.g. a popup search to associate an existing referral to the curent workflow</description>
		<display-name>Choose Existing Referral:</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>iPM Web Services Integration</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Referral List View</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.patientIdentifier</name>
					<index>2</index>
					<value>&lt;%=Request.patientIdentifier%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Update Appointment</name>
		<access-controller />
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>Redirects to the Generic search used for updating OPD appointments via the Integration to iPM Webservices.&#xD;
This EP is insecure as values may be passsed from the embedded lists for the appointment to update, The user is still required to validate and execute the search parameters manually, and the appoitnment OID required is not typically exposed via the UI of either Portal or ACTPAS.</description>
		<display-name>Update Appointment (ACTPAS)</display-name>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>iPM Web Services Integration</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Edit Appointment</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Appointment OID</name>
					<index>2</index>
					<value>&lt;%=Request.get("AppointmentOID")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Appointment Clinician</name>
					<index>3</index>
					<value>&lt;%=Request.get("Seen By Clinician")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Patient ID</name>
					<index>4</index>
					<value>&lt;%=Request.get("Patient ID")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.Date</name>
					<index>5</index>
					<value>&lt;%if Request.get("appointTime")&lt;&gt;""%&gt;&lt;%=DateFormat.format(Request.get("appointTime"), "yyyy-MM-dd")%&gt;&lt;%else%&gt;&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "HH:mm:ss")%&gt;  &lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.ArrivedAt</name>
					<index>6</index>
					<value>&lt;%if Request.get("ArrivedAt")&lt;&gt;""%&gt;&lt;%=DateFormat.format(Request.get("ArrivedAt"), "HH:mm:ss")%&gt;&lt;%else%&gt;00:00:00&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.CalledAt</name>
					<index>7</index>
					<value>&lt;%if Request.get("CalledAt")&lt;&gt;""%&gt;&lt;%=DateFormat.format(Request.get("CalledAt"), "HH:mm:ss")%&gt;&lt;%else%&gt;00:00:00&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.SeenAt</name>
					<index>8</index>
					<value>&lt;%if Request.get("SeenAt")&lt;&gt;""%&gt;&lt;%=DateFormat.format(Request.get("SeenAt"), "HH:mm:ss")%&gt;&lt;%else%&gt;00:00:00&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.DepartedAt</name>
					<index>9</index>
					<value>&lt;%if Request.get("DepartedAt")&lt;&gt;""%&gt;&lt;%=DateFormat.format(Request.get("DepartedAt"), "HH:mm:ss")%&gt;&lt;%else%&gt;&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "HH:mm:ss")%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>attribute.CancelledAt</name>
					<index>10</index>
					<value>&lt;%if Request.get("CancelledAt")&lt;&gt;""%&gt;&lt;%=DateFormat.format(Request.get("CancelledAt"), "HH:mm:ss")%&gt;&lt;%else%&gt;&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "HH:mm:ss")%&gt;&lt;%end if%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<login-redirection-script />
	<login-timeout>300000</login-timeout>
	<logout-redirection-script />
	<search>
		<name>Create ACTPAS Referral</name>
		<data-source-name>java:comp/env/jdbc/osgi_ws</data-source-name>
		<description>FM 22 Dec 2014 - main search used to link the ACTPAS referral to the Clinical Referral through the PAS ID integration feature of CR 3.1. &#xD;
This search allows the user to either &#xD;
a- select an existing referral via a filter &#xD;
or &#xD;
b- create a new referral via the ACTPAS web services which, if succesful, will then be linked to the clinical referral via the Referral OID.</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
Results.ReferralOID as pasReferralId,&#xD;
Results.pasReferralIdNamespace as pasReferralIdNamespace, &#xD;
Results.Status as Status, &#xD;
Results.Message as Message&#xD;
FROM {{&#xD;
    // this call is to the web service to add a new referral - the generic search will provide a set of variables which are then used to populate the required message fields based on user input &#xD;
    // this will require  sequence of 3 calls &#xD;
    // call 1 - get the patient OID &#xD;
    // call 2 add a new referral for the patient &#xD;
    // call 3 - call to get referrals with a from datetime constraint of the date passed in from the generic search. Note although constrained this call could return multiple rows - so we will traverse and look for a match based on the same &#xD;
    // criteria used to create the referral to find the OID as ACTPAS returns an e007 error if you try to create 2 with the same criteria so the one in the system must be the one we create if we recieve an A000 to the second web service call&#xD;
    &#xD;
    // general variables &#xD;
	//determine if this is being called in smoke test mode &#xD;
    var testing = '&lt;%=(js) AppVars.get("Test Mode") %&gt;' ; &#xD;
	&#xD;
	//once CCR-509 is fixed and you want to test it change this to true and it will hide the demo workaround for our test users&#xD;
	// NOTE : exisiting referrals in the database that have been created before the fix is deployed will have a metadata referred By value that is incorrect - either &#xD;
	// delete them from the database OR only use internal referrals created after the fix is applied to test	&#xD;
	var is509fixed = false ;  &#xD;
    var messageID =  new java.util.UUID.randomUUID().toString();&#xD;
    var logger = org.apache.log4j.Logger.getLogger("com.orchestral.common.webservice.WebService");&#xD;
    var portalUserID =  '&lt;%=(js)User.userID%&gt;' ; &#xD;
	//first try to set up the patient ID from the Request filter parameters - in case this was called from a workflow where the patient is not in context&#xD;
    var patientURN =  '&lt;%= (js) get("Patient Id")%&gt;'  ;&#xD;
	//otherwise pull the patient ID from the standard application variable / template processing - in general this means the seach is triggered with a patient in context&#xD;
	if (patientURN ==='') &#xD;
	{&#xD;
		patientURN = '&lt;%=(js) AppVars.get("patientId") %&gt;'; &#xD;
	} &#xD;
	//this one is just used for smoke testing&#xD;
	if (testing == 'true') &#xD;
	{&#xD;
		//if we are in test mode retrieve the test patient URN from the appvars, use this in the test sequence to retrieve patient OID and create a referral&#xD;
		patientURN = '&lt;%=(js) AppVars.get("Test Patient") %&gt;'; 		&#xD;
	}&#xD;
    // original line modified 27th November to use the filter parameter from referrals screens var patientURN =   ((testing) ? '20157946' : '&lt;%=(js)Context.get("Patient.Id.MRN")%&gt;' );&#xD;
    &#xD;
    var actpasPatientOID = '' ; &#xD;
    var noErrors = true ;  &#xD;
    &#xD;
    var workstationID =  '&lt;%=(js)AppVars.get("iPM.Generic Workstation ID") %&gt;'  ; &#xD;
    var timeout =   '&lt;%=(js)AppVars.get("iPM.WS.Timeout")%&gt;'  ;         &#xD;
    var isACTPASUser =  &lt;%=(js)User.isMemberOf("Community") %&gt; ; &#xD;
    //these will contain null if the template processing fails to find the group or if the user is not a member - which is why we set the boolean value to control processing decisions&#xD;
    //note these already set the value to the defaults if the user entered value is null - change this to the app vars &#xD;
    var actpasUserName =  '&lt;%= (js)User.getAttribute("Community", "ACTPAS User Name")%&gt;'  ; &#xD;
    //this is fail safe - if the user enters their user ID but not their password an error will return from the webservice that tells them to change their password&#xD;
    var actpasPassword =  '&lt;%=(js)User.getAttribute("Community","ACTPAS Password")%&gt;'  ; &#xD;
	//set to the fallback values if the current values are not configured&#xD;
	if (actpasUserName === '') {&#xD;
&#xD;
		actpasUserName =  '&lt;%= (js) AppVars.get("iPM.Generic User Name") %&gt;'; &#xD;
		actpasPassword = '&lt;%= (js) AppVars.get("iPM.Generic Password") %&gt;'; 	&#xD;
	}&#xD;
   &#xD;
    &#xD;
    //these hold the resultset to return to Portal after execution &#xD;
    var rows = [];&#xD;
    var row = new Object;&#xD;
    //set this to true to add additonal information to the log4j output, and to us test values configured as application variables  - useful when hitting the test button in Generic search config where you dont have a patient in context etc. &#xD;
    // note : in test mode for squirrel you will need to provide hardcoded string values for the left term of the ternary otherwise you will get the left term as a literal string - template processing does not occur for Integration driver calls from Squirrel&#xD;
    &#xD;
    //variables from the geneneric search form &#xD;
&#xD;
    var RecvdDttm = '&lt;%=(js) RecvdDttm%&gt;' ;  &#xD;
    var ReferralReason = '&lt;%=(js) ReferralReason%&gt;' ;  &#xD;
    var SentDttm = '&lt;%=(js) SentDttm1%&gt;'; &#xD;
    var Priority = '&lt;%=(js) Priority%&gt;'; &#xD;
    var OrdtaDttm = '&lt;%=(js) OrdtaDttm%&gt;';&#xD;
    var AdministrativeCategory = '&lt;%=(js) AdministrativeCategory%&gt;' ; &#xD;
    var SourceofReferral  = '&lt;%=(js) SourceofReferral%&gt;' ;  &#xD;
    var ExpiryDttm = '&lt;%=(js) ExpiryDttm1%&gt;'; &#xD;
    var Comments = '&lt;%=(js) Comments%&gt;';&#xD;
    var ReferralType ='&lt;%=(js) ReferralType%&gt;';&#xD;
    //old fversion below - used to be done via a popup search filter, new version we are using a filter request variable passed to us fromt he CWS form &#xD;
    var ReferredByClinician = '&lt;%=(js) get("Referrer Id")%&gt;' ; // old now replacing the search with the data from the request form'&lt;%=(js) ReferredByClinician%&gt;' ;&#xD;
    var ReferredBySpecialty = '&lt;%=(js) ReferredBySpecialty%&gt;' ;&#xD;
    var AccidentRelatedStatus = '&lt;%=(js) AccidentRelatedStatus%&gt;' ; &#xD;
    var ReferredToClinician = '&lt;%=(js) ReferredToClinician%&gt;' ;&#xD;
    var ReferredToSpecialty = '&lt;%=(js) ReferredToSpecialty%&gt;' ; &#xD;
    var ReferredToHealthOrganisation = '&lt;%=(js) ReferredToHealthOrganisation%&gt;' ;  &#xD;
    //on advice from ACT project team we are hardcoding this value to ACTCC - may need to change back to using a list . &#xD;
    //Note the original search used a filter configured with a popup search - the entry point for that popup search is Get Main Facility within the &#xD;
    //iPM applicaiton. this filter is now hidden in the current search form &#xD;
    // old : var OwnerHealthOrganisation = '&lt;%=(js) OwnerHealthOrganisation%&gt;' ;  // this may need to be changed&#xD;
    //new : &#xD;
    var OwnerHealthOrganisation = 'ACTCC' ; &#xD;
    var ReferredToStaffTeam = '&lt;%=(js) ReferredTST%&gt;' ; &#xD;
    var Status = "";&#xD;
    var Message = "";&#xD;
    var hasErrors = false; &#xD;
    var timeSuffix = "T00:00:00" ; &#xD;
    var referralReferralOID = "";  // this will hold the OID of the referral once we successfully create one &#xD;
    var pasReferralIdNamespace = "ACTPAS01" ;  // hadrcoded value - name space is required to differentiate PAS ID from different PAS, ACT has only one PAS so this will be hardcoded for ACTPAS &#xD;
    var existingReferralOID = '&lt;%=(js) existingReferralOID %&gt;'  ; // this holds the OID of an existing referral if the user selected one rather than creating one &#xD;
    &#xD;
    // web service variables &#xD;
    //base URL for WSDL and service &#xD;
    var webserviceName =  '&lt;%=(js)AppVars.get("iPM.WS.Base Location URL") %&gt;' ;&#xD;
    //all methods in this sequence use the same Namespace and port - they only differ in the action to call &#xD;
    var referralWSNamespace =  '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Namespace") %&gt;' ; &#xD;
    var referralsWSPort = '&lt;%=(js)AppVars.get("iPM.WS.Referral Port Name") %&gt;';  &#xD;
    // these are used to retrieve the patient OID for use in later web service calls    &#xD;
&#xD;
    var getPatientWSAction =  '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Action.GetPatientByID") %&gt;'; &#xD;
    var getPatientSuccess = false;  &#xD;
    &#xD;
    //these are used to call the method to add the new referral &#xD;
    var addReferralWSAction =  '&lt;%= (js)AppVars.get("iPM.WS.Referrals.Action.Add Referral") %&gt;';&#xD;
    var addReferralSuccess = false; &#xD;
    &#xD;
    //these are used after the call to add a referral to call all the referrals made after or equal to  the RecvdDttm we use in our messages &#xD;
    // this will be a list of 1 or more referrals to be travered looking for the unique combinaiton of the mandatory fields wich will enable us to then retrieve the &#xD;
    //referral OID related to the add referral transaction  - note if the add step is successful but the get fails (e.g. timeout) we shoudl inform the user .. project needs to decide what happens then ?&#xD;
    //Note this would be avoided if the iPM web service was made more robust by adding the OID to the response message &#xD;
    &#xD;
    var getReferralsWSAction =  '&lt;%= (js)AppVars.get("iPM.WS.Referrals.Action.Get Referrals by Patient") %&gt;' ; &#xD;
    var getReferralsSuccess = false; &#xD;
&#xD;
    //logger.info("iPM Add Referrals Generic Search init");&#xD;
&#xD;
    &#xD;
    // verify none of the mandatory fields are blank - note their may be others that ACT needs to ake mandatory, these are the minimum for the web service to successsfully add &#xD;
    // 1. Owner Health Organisation ; 2. Patient OID ( passed via context)  3. Referral Reason 4. Recieved date time and 5. source of referral &#xD;
    // Note this combination also ensures uniqueness - if you try and add 2 referrals with these details the same the system will reject it with an error code E007. &#xD;
    // note it's unclear if owner health organisation is the org who referred the patient or the org who fulfils it from the documentation neeed to raise &#xD;
    // Note there is no equivalent field in the ACTPAS GUI - for now will set both referred to and owner HO to the same value &#xD;
    &#xD;
    if (OwnerHealthOrganisation === "") {&#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please select the Owner Health Orginisation for the referral.\n";&#xD;
    }&#xD;
    &#xD;
    if (ReferralReason === "") {&#xD;
    &#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please select the Referral Reason\n"; &#xD;
    &#xD;
    }&#xD;
    if (RecvdDttm ==="") {&#xD;
        &#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please enter the date the Referral was recieved\n"; &#xD;
        &#xD;
    }&#xD;
    if (SourceofReferral ==="") {&#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please select the Source of the Referral\n" ; &#xD;
    }&#xD;
    if (ReferralType ==="") {&#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please select the Referral Type\n" ; &#xD;
        &#xD;
    &#xD;
    }&#xD;
    //check if they are in the group required to execute the requried calls to the ACTPAS web services &#xD;
    //note due to the need to create referrals for a given logged in Clinician/ user we need to review the original &#xD;
    // design decision to use the default values for web service calls ( becuase this would also mean using the same value . will also impact settign defaults  . &#xD;
    // raise an additional quesiton to ACT : &#xD;
    // should we use the default value in all places , or should we force the user to always configure the ACTPAS user details ? &#xD;
    &#xD;
    if (!isACTPASUser) {&#xD;
        hasErrors = true; &#xD;
        Status = 'EOH0003';&#xD;
        Message = "You are not a member of the ACTPAS users Group - please engage your support team to resolve this issue"; &#xD;
    }&#xD;
    //this is a workaround for demo purposes only until we add the drop down for the user to select the referrer as part of creating an internal referral &#xD;
    // needs some onput from ACT - we need ot verify that normally not all user ID's are vaid clinicain ID's (however if this is nto the case then dev is seet up badly and we can rely on this) &#xD;
    &#xD;
	if (!is509fixed) {&#xD;
		if ( (ReferredByClinician == 'Carlie.Maxwell') || (ReferredByClinician == 'Edith.Minnie') || (ReferredByClinician == 'Sammie.Jenkins')  || (ReferredByClinician == 'Dominique.Jose') || (ReferredByClinician == 'Kit.Blur') || (ReferredByClinician == 'Aaron.Mansell') || (ReferredByClinician == 'Bobbie.Samper'))  {&#xD;
			// note neither of these worked so don't use them as methods to work around the issue &#xD;
			// identifying the clinician ID by matching against the portal user ID - there's no defined pattern &#xD;
			// replacing the clinician ID with the ACTPAS user ID - not all user ID's are clinician ID's  - at least in the view we have been providd so we need to &#xD;
			// validate it with the ACT team &#xD;
			// note to make the demo lok good pick the matchign doctor - Abhishek Sharma&#xD;
			ReferredByClinician = 'ABHSHA' ;    &#xD;
			}&#xD;
    &#xD;
    }&#xD;
    &#xD;
&#xD;
    &#xD;
    &#xD;
    //if there are no errors, the user is an actpas user and the user has not selected an existing referral ID create a new one &#xD;
    // otherwise pass the selected OID back as the return value - this is to support integration with CWS referrals so that the user &#xD;
    // can either select an existing referral or create a new one via the one workflow, at the end of which the action within Clinical Referrals &#xD;
    // to associate the PAS referral ID to the Clinical Referral ID &#xD;
    // at the completion either as OID has been returned in the rowset, or the OID is null  (see documentation for reasons this may occur) &#xD;
    // returning null is safe as this is essentially the same (from a Clinical Referrals workflow persepctive) as if the Workflow Action  has&#xD;
    // never been completed  - which means the user will need to take steps to resolve before the action may be completed &#xD;
    // (for example change paramters, select an existing OID, work around an issue with the remote host being unavailable by completing the &#xD;
    // action at a later time and so on. &#xD;
    &#xD;
    &#xD;
    &#xD;
    if (existingReferralOID != "" ) {&#xD;
        Status = "Success AOH000" ; &#xD;
        Message = "Please click here to continue" ;  // note we probably don't need the user to click anything in the CWS workflow - leave in until we know how we pass the result columns back to the workflow action &#xD;
        referralReferralOID = existingReferralOID ; &#xD;
    }&#xD;
    else {&#xD;
    &#xD;
        if (!hasErrors &amp;&amp; isACTPASUser ) {&#xD;
        //format the dates as required for the web service : note ACTPAS GUI has no input for the time part so we will follow the same amout of specificity and set all to 00:00:00&#xD;
        RecvdDttm += timeSuffix; &#xD;
        &#xD;
            //logger.info("ACTPAS User Group evaluated to |" +  isACTPASUser + " |\n" );&#xD;
            //logger.info("ACTPAS user is |" + '&lt;%= (js)User.getAttribute("Community", "ACTPAS User Name")%&gt;' + "|\n") ; &#xD;
            &#xD;
        &#xD;
            try {&#xD;
            &#xD;
            //try to get patient OID &#xD;
            //logger.info("\nCalling iPM Webservice to Get Patient OID by pas ID\n") ;&#xD;
            var webservice = webServiceFactory.createWebService(webserviceName);&#xD;
            &#xD;
            webservice.setPortName(referralWSNamespace, referralsWSPort); &#xD;
            webservice.setMessageMode();  // we will supply the full envelope and message components so set the mode to message&#xD;
            //next line should not be required in message mode but there is a bug - not setting this explicitly results in a null action being set by the calls to JAX-WS and that causes a SOAP Fault for the iPM webservices &#xD;
            webservice.setSoapAction(getPatientWSAction);&#xD;
&#xD;
            webservice.setRequestTimeout(java.lang.Integer.parseInt(timeout));&#xD;
            webservice.setConnectTimeout(java.lang.Integer.parseInt(timeout));&#xD;
                    &#xD;
            webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
                                     &lt;soapenv:Header/&gt;&#xD;
                                         &lt;soapenv:Body&gt;&#xD;
                                              &lt;isof:GetPatientByPatientId&gt;                                              &#xD;
                                                 &lt;isof:PatientId&gt;{patientURN}&lt;/isof:PatientId&gt;&#xD;
                                              &lt;/isof:GetPatientByPatientId&gt;&#xD;
                                           &lt;/soapenv:Body&gt;&#xD;
                                    &lt;/soapenv:Envelope&gt; ;&#xD;
            logger.info("iPM.WS :: Calling Referrals Service to retrieve patient OID. Portal User ID is : " + portalUserID + "\nMessage ID is :  " + messageID + "\n Request Message is :" + webserviceRequest); &#xD;
                    &#xD;
            var webserviceResponse = webservice.call(webserviceRequest); &#xD;
             &#xD;
&#xD;
            // now to process the response - for some reason this is less likely to fail if you declare the defaults first &#xD;
            default xml namespace = "";&#xD;
            &#xD;
            var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
            var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
            var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
            //var GetPatientByPatientIdResponse = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace");&#xD;
&#xD;
            var xmlInfo = webserviceResponse.s::Body.elements() ; &#xD;
            &#xD;
            //var Header = webserviceResponse.s::Header.elements();     // this works but needs more investigation as to why the preferred methodreturns something other than the expected value &#xD;
            // the header contains an activity id which is unique per message response from the server  - it's not documented but useful for logging &#xD;
            var responseUID =  webserviceResponse.s::Header[0].*[0];        // test to see what happens if you create a response with more than one element in the header &#xD;
            //var Header =  webserviceResponse.s::Header.elements().ActivityId ;            &#xD;
            var PatientOID = xmlInfo..a::Patient..a::PatientOid.toString(); // call this explicitly otherwise e4x will try and put the entire element structure in the next xml object when we use the patientID &#xD;
            var responseStatus = xmlInfo..a::ResultCode ; &#xD;
            var responseMessage = xmlInfo..a::ResultDescription; &#xD;
            &#xD;
            if ( responseStatus == 'A000') {&#xD;
            &#xD;
            getPatientSuccess = true; &#xD;
            Status = "Success" ;&#xD;
            Message += "Successfully retrieved Patient OID\n" ; &#xD;
            //log output has to be masked if successful as the response to the getPatient by ID service returns a lot of PII in the response SOAP object &#xD;
            logger.info("iPM.WS :: Response from Get Patient by Patient id  web Service was :\n" + "AOOO - Success\n Actual response message suppressed as it contains PII\n"  + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
            &#xD;
            }&#xD;
            else {&#xD;
            Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
            Message += "Could not retrieve Patient OID from ACTPAS web service.\nUnable to create referral. Web service message was :\n" + responseMessage ;    &#xD;
            //note this next line is safe as the error responses only contain the message UID, error response code and error response message - no PII&#xD;
            logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
            }&#xD;
            &#xD;
            &#xD;
            // if no errors try and add referral &#xD;
            &#xD;
            if (getPatientSuccess) &#xD;
            {&#xD;
                webservice.setSoapAction(addReferralWSAction);&#xD;
                messageID =  new java.util.UUID.randomUUID().toString(); // unique ID for each request in the series &#xD;
                //logger.info("\n\n\nin the loop to try and add a referral\n");&#xD;
                &#xD;
					webserviceRequest = &#xD;
						&lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace" &#xD;
							xmlns:isof1="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary" &#xD;
							xmlns:isof2="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts" &#xD;
							xmlns:isof3="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts"&#xD;
							xmlns:i="http://www.w3.org/2001/XMLSchema-instance"&gt;&#xD;
&#xD;
							   &lt;soapenv:Header/&gt;&#xD;
							   &lt;soapenv:Body&gt;&#xD;
								  &lt;isof:AddReferral&gt;&#xD;
									 &#xD;
&#xD;
									 &lt;isof:Credential&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:Department&gt;WEBSRV&lt;/isof1:Department&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:Name&gt;{actpasUserName}&lt;/isof1:Name&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:Password&gt;{actpasPassword}&lt;/isof1:Password&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:UserId&gt;{actpasUserName}&lt;/isof1:UserId&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:Workstation&gt;WEBSERVICES&lt;/isof1:Workstation&gt;&#xD;
									 &lt;/isof:Credential&gt;                         &#xD;
									 &#xD;
&#xD;
									 &lt;isof:referral&gt;           &#xD;
									   &lt;!--mandatory field - this is multicampus--&gt; &#xD;
									   &#xD;
&#xD;
										&lt;isof2:ACCApprovalStatus i:nil="true"/&gt;&#xD;
										&lt;isof2:ACCType i:nil="true"/&gt;&#xD;
										&lt;isof2:AccClaimNumber i:nil="true"/&gt;&#xD;
										&lt;isof2:AccNumber i:nil="true"/&gt;&#xD;
										&lt;isof2:AccidentRelatedStatus i:nil="true"/&gt;&#xD;
										&lt;isof2:ActivityType i:nil="true"/&gt;&#xD;
										&lt;isof2:AdministrativeCategory i:nil="true"/&gt;&#xD;
										&lt;isof2:Authorisation i:nil="true"/&gt;&#xD;
										&lt;isof2:AuthorisedByClinician i:nil="true"/&gt;&#xD;
										&lt;isof2:AuthrDttm i:nil="true"/&gt;&#xD;
										&lt;isof2:CancdDttm i:nil="true"/&gt;&#xD;
										&lt;isof2:ClosrDate i:nil="true"/&gt;&#xD;
										&lt;isof2:Comments i:nil="true"/&gt;&#xD;
										&lt;isof2:ExpiryDttm i:nil="true"/&gt;&#xD;
										&lt;isof2:FundingArrangement i:nil="true"/&gt;&#xD;
										&lt;isof2:FundingProgram i:nil="true"/&gt;&#xD;
										&lt;isof2:FundingSubprogram i:nil="true"/&gt;&#xD;
										&lt;isof2:OrdtaDttm i:nil="true"/&gt;         &#xD;
										&lt;isof2:OwnerHealthOrganisation&gt;&#xD;
										   &lt;isof3:Code&gt;{OwnerHealthOrganisation}&lt;/isof3:Code&gt;                                  &#xD;
										&lt;/isof2:OwnerHealthOrganisation&gt;&#xD;
										&lt;isof2:ParntOid i:nil="true"/&gt;&#xD;
										&lt;isof2:PatientOid&gt;{PatientOID}&lt;/isof2:PatientOid&gt;                                    &#xD;
										&lt;isof2:RecvdDttm&gt;{RecvdDttm}&lt;/isof2:RecvdDttm&gt;&#xD;
										&lt;isof2:ReferralCancellationReason i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferralClosureReason i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferralOid i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferralOutcome i:nil="true"/&gt;           &#xD;
										&lt;isof2:ReferralReason&gt;&#xD;
										   &lt;isof3:Code&gt;{ReferralReason}&lt;/isof3:Code&gt;&#xD;
										&lt;/isof2:ReferralReason&gt;     &#xD;
										&lt;isof2:ReferralStatus i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferralType&gt;&#xD;
											&lt;isof3:Code&gt;{ReferralType}&lt;/isof3:Code&gt;&#xD;
										&lt;/isof2:ReferralType&gt;&#xD;
										&lt;isof2:ReferredByClinician i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferredBySpecialty i:nil="true"/&gt;&#xD;
&#xD;
&#xD;
										&lt;isof2:ReferredToClinician i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferredToHealthOrganisation i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferredToSpecialty  i:nil="true"/&gt;										&#xD;
										&lt;isof2:ReferredToStaffTeam i:nil="true"/&gt;									&#xD;
										&lt;isof2:SourceofReferral&gt;&#xD;
										   &lt;isof3:Code&gt;{SourceofReferral}&lt;/isof3:Code&gt;          &#xD;
										&lt;/isof2:SourceofReferral&gt;&#xD;
										&lt;isof2:Urgency i:nil="true"/&gt;&#xD;
									 &lt;/isof:referral&gt;&#xD;
								  &lt;/isof:AddReferral&gt;&#xD;
							   &lt;/soapenv:Body&gt;&#xD;
						&lt;/soapenv:Envelope&gt; ;&#xD;
                   &#xD;
					&#xD;
&#xD;
                &#xD;
                &#xD;
                &#xD;
                var soapenv = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
				var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance") ; &#xD;
                var isof = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"); &#xD;
                var isof1 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary");&#xD;
                var isof2 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts");&#xD;
                var isof3 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
                var xmlReferral = webserviceRequest.soapenv::Body..isof::AddReferral..isof::referral;  // this is just to make the adding of childern to the soap body a little less cumbersome in terms of parent/child nodes&#xD;
&#xD;
                &#xD;
                //need to test if there is a value and insert it as new child nodes.&#xD;
				// this is currently inserting the value corectly for referred to staff team and referred to clinician, but not for referred to specialty &#xD;
				//and is also not yet removing the nil = true value&#xD;
&#xD;
                &#xD;
                if ( SourceofReferral !="6") {&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
					xmlReferral.isof2::ReferredByClinician.isof3::Code += ReferredByClinician ; &#xD;
					delete xmlReferral.isof2::ReferredByClinician.@i::nil ;&#xD;
				}&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
                if (ReferredToClinician ) {&#xD;
                    xmlReferral.isof2::ReferredToClinician.isof3::Code += ReferredToClinician ; &#xD;
					delete  xmlReferral.isof2::ReferredToClinician.@i::nil ;&#xD;
                }&#xD;
                if (ReferredToSpecialty) {&#xD;
                    xmlReferral.isof2::ReferredToSpecialty.isof3::Code += ReferredToSpecialty ;&#xD;
					delete  xmlReferral.isof2::ReferredToSpecialty.@i::nil ;&#xD;
                }&#xD;
                if (ReferredToHealthOrganisation) {&#xD;
                    xmlReferral.isof2::ReferredToHealthOrganisation.isof3::Code += ReferredToHealthOrganisation ; &#xD;
					delete  xmlReferral.isof2::ReferredToHealthOrganisation.@i::nil ;&#xD;
                }&#xD;
                if (ReferredToStaffTeam) {&#xD;
                    xmlReferral.isof2::ReferredToStaffTeam.isof3::Code += ReferredToStaffTeam ; &#xD;
					// remove the nil attribute so the webservice processes &#xD;
					delete xmlReferral.isof2::ReferredToStaffTeam.@i::nil ; &#xD;
                }&#xD;
                &#xD;
                // the following are used to mask the password output in the concerto log, using the string value rather than the e4x literal or we would wind up changing the actual XML element value             &#xD;
                var logMaskedEntryString = webserviceRequest.toString().replace(/&lt;isof1:Password&gt;(.+?)&lt;\/isof1:Password&gt;/, "&lt;isof1:Password&gt;Masked User Entered Password&lt;/isof1:Password&gt;" ) ; &#xD;
                //no PII in the request message so this is safe - it's all coded data   &#xD;
                logger.info("iPM.WS :: Calling Add Referral  Service. Portal User ID is : " + portalUserID + "\n Message ID is " + messageID + "\n Request Message is :\n" + logMaskedEntryString);    &#xD;
                                   &#xD;
                var webserviceResponse = webservice.call(webserviceRequest); &#xD;
                default xml namespace = "";&#xD;
            &#xD;
                var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
                var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary");&#xD;
                var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
            &#xD;
                        &#xD;
                var xmlInfo = webserviceResponse.s::Body.elements() ;   &#xD;
                var responseUID =  webserviceResponse.s::Header[0].*[0]; &#xD;
                var responseStatus = xmlInfo..a::ResultCode ; &#xD;
                var responseMessage = xmlInfo..a::ResultDescription ; &#xD;
                //no PII in the response for this request type - only a UID, status code and status message &#xD;
                logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
                &#xD;
                &#xD;
                if ( responseStatus == 'A000') {&#xD;
                &#xD;
                addReferralSuccess = true ; &#xD;
                Status = "Success" ;&#xD;
                Message = "\n Successfully added a new referral \n" ; &#xD;
                &#xD;
                &#xD;
                }&#xD;
                else {&#xD;
                Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
                Message = "Could not Create a new referral. Web service error message was :\n" + responseMessage ;                  &#xD;
                }&#xD;
                &#xD;
&#xD;
            &#xD;
            &#xD;
            &#xD;
            &#xD;
            } // end of adding a referral &#xD;
            &#xD;
            // if no errors try and retrieve the OID for the referral &#xD;
            &#xD;
            // cut from here &#xD;
            //just doing this for testing until the database transaction log issue is resolved by SSICT &#xD;
            if  (addReferralSuccess) {&#xD;
                &#xD;
                    webservice.setSoapAction(getReferralsWSAction);&#xD;
                    referralsMessageID =  new java.util.UUID.randomUUID().toString(); // unique ID for each request in the series &#xD;
                    &#xD;
                    &#xD;
                    //note this message type will use the optional from date time parameter - with the date die set to the recievedDttm we used to create the referral in the prior step&#xD;
                    // this should reduce the numebr of referrals in the response that we have to iterate over &#xD;
                    webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
                                               &lt;soapenv:Header/&gt;&#xD;
                                               &lt;soapenv:Body&gt;&#xD;
                                                  &lt;isof:GetReferralByPatientOid&gt;&#xD;
                                                     &#xD;
                                                     &lt;isof:PatientOid&gt;{PatientOID}&lt;/isof:PatientOid&gt;&#xD;
                                                     &lt;isof:FromDttm&gt;{RecvdDttm}&lt;/isof:FromDttm&gt;&#xD;
                                                     &lt;isof:ToDttm&gt;{RecvdDttm}&lt;/isof:ToDttm&gt;&#xD;
                                                    &#xD;
                                                  &lt;/isof:GetReferralByPatientOid&gt;&#xD;
                                               &lt;/soapenv:Body&gt;&#xD;
                                            &lt;/soapenv:Envelope&gt; ; &#xD;
&#xD;
                    //no PII in the message for this service call - all coded data &#xD;
                    logger.info("iPM.WS:: Calling to get Patient Referrals by patient OID. Portal user ID : " + portalUserID + "\nUnique Source  Message ID  : " + referralsMessageID + "\n Relates to Patient OID from message : " + messageID + "\n Request message is : \n" + webserviceRequest +"\n *******END OF REQUEST TRANSACTION*******\n");&#xD;
                                    &#xD;
                    var webserviceResponse = webservice.call(webserviceRequest);&#xD;
&#xD;
                    // the namespaces change in different response types hence we need to set them up again : &#xD;
                    var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts") ; &#xD;
                    var b = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
                    &#xD;
                    var referralsXML = webserviceResponse.s::Body.elements() ; &#xD;
                    &#xD;
                    var Header =  webserviceResponse.s::Header[0].*[0];         // UID for the response message from the web service is contained within the header &#xD;
&#xD;
                    var resultCode = referralsXML..a::ResultCode ; &#xD;
                    var resultMessage = referralsXML..a::ResultDescription ; &#xD;
                    &#xD;
                    var referralsList = "" ; &#xD;
&#xD;
                    logger.info("iPM.WS :: Response from Referrals Service was :" + webserviceResponse + "\n Response Unique Message ID was : " + Header + "\nrelates to Source Message ID :" + referralsMessageID + "\n *****END OF RESPONSE TRANSACTION ********\n") ; &#xD;
                    if (referralsXML..a::ResultCode == 'A000'){&#xD;
                        //iPM use the same namespace object to hold all the referrals as they do for each individual referral&#xD;
                        //to avoid needing to test for null for the first array element we need to extract all of the outpatient appointment descendents that are one level below the first : &#xD;
                        &#xD;
                        referralsList = referralsXML..a::Referral..a::Referral;  // there can be more than one per response&#xD;
                        //test to see if this happens - we may simply get an E004 or E008 in which case we can remove this logic &#xD;
                        &#xD;
                        if (referralsList.length() == 0 ) {&#xD;
                        // if there were no referrals returned in the message response return an error message to the user &#xD;
                        Status = "Error." ; &#xD;
                        Message = "Referral was added but we could not retrieve the OID from the ACTPAS web service. You may need to manually resolve this issue. " ; &#xD;
                        }&#xD;
                        else{&#xD;
                            //there is at lease one referrral in the response now we need to process it and see if we find a match for the values used when creating the referral in the earlier steps &#xD;
                                     &#xD;
                                    var referralRecvdDttm = ""; &#xD;
                                    var referralSourceofReferral = ""; &#xD;
                                    var referralReferralReason = "" ; &#xD;
                                    var referralReferralTypeCode = "" ; &#xD;
                                    var referralReferredToClinicianCode = "" ;   // currently there looks to be a bug in web service processing - leave out for now &#xD;
                                    var referralReferredToSpecialtyCode = "" ;   // same &#xD;
                                    var referralReferredToHealthOrganisation = "" ;  // web service func spec says this is one of the mandatory check fields but either the doc is wrong or the web service is using the wrong field as this is ignored in testing &#xD;
                                    var referralOwnerHealthOrganisation = "" ;  // however this field is not listed in the interface processing rules but will result in error if not specific AND will result in rejection ala the funcitonal specificaiton w.r.t. the referred to health org &#xD;
                                    &#xD;
                                    for (var i = 0 ; i &lt; referralsList.length() ; i++) &#xD;
                                    {&#xD;
                                        &#xD;
                                        &#xD;
                                        referralRecvdDttm = referralsList[i]..a::RecvdDttm;&#xD;
                                        referralReferralReason = referralsList[i]..a::ReferralReason..b::Code ;&#xD;
                                        referralReferralTypeCode = referralsList[i]..a::ReferralType..b::Code;&#xD;
                                        referralSourceofReferral = referralsList[i]..a::SourceofReferral..b::Code;&#xD;
                                        referralReferredToClinicianCode = referralsList[i]..a::ReferredToClinician..b::Code[0] ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
                                        referralReferredToSpecialtyCode = referralsList[i]..a::ReferredToSpecialty..b::Code ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
                                        referralReferredToHealthOrganisation = referralsList[i]..a::ReferredToHealthOrganisation..b::Code ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
                                        referralOwnerHealthOrganisation =  referralsList[i]..a::OwnerHealthOrganisation..b::Code ;&#xD;
                                        &#xD;
                                        // test to see if this row matches our input variables &#xD;
                                        &#xD;
                                        if ( referralRecvdDttm == RecvdDttm  &amp;&amp; referralSourceofReferral == SourceofReferral  &amp;&amp;  referralReferralReason == ReferralReason &amp;&amp; referralReferralTypeCode == ReferralType  &amp;&amp; referralOwnerHealthOrganisation == OwnerHealthOrganisation) {&#xD;
                                            referralReferralOID =  referralsList[i]..a::ReferralOid ; &#xD;
                                        }   &#xD;
                                        &#xD;
                                        &#xD;
                                        &#xD;
                                    } //loop checking to find the OID &#xD;
                                    &#xD;
                                    if (referralReferralOID) {&#xD;
                            &#xD;
                                        Status = "Success AOH000" ; &#xD;
                                        Message = "Please click here to continue" ; &#xD;
                                        &#xD;
                                    }&#xD;
                                    else {&#xD;
                                        Status = "Error E0H0001" ; &#xD;
                                        Message = "Referral Created but no matching OID was retrieved from the web service - this will require manual resolution" ; &#xD;
                                    &#xD;
                                    }&#xD;
                                    &#xD;
                            } // end of else condition - we recieved referrals data back &#xD;
                        &#xD;
                        &#xD;
                    } //  end if result code A000 - success calling web service to get referrals &#xD;
                    else {&#xD;
                    //we got an error message from the retreive referrals web service, but previously got success to add the referral so we need to tell this to the user &#xD;
                    Status = "EOH0002" ; &#xD;
                    Message = "Referral Created but the Webservice could not return Referral OID. Error Code was : " + resultCode + "\n Message was : " + resultMessage ; &#xD;
                &#xD;
                &#xD;
                    }&#xD;
                &#xD;
                &#xD;
                } // end add referral success if block &#xD;
            //to here &#xD;
            &#xD;
            &#xD;
            &#xD;
            } // try &#xD;
            catch (ex) &#xD;
            {&#xD;
                //this needs to be updated to account for the situation where the referral is created but the call to get the OID experiences a timeout or other exception&#xD;
            &#xD;
                logger.info("trapped an exception info as follows\n") ; &#xD;
                logger.info(ex.toString()); &#xD;
                &#xD;
                //add condition checking for the type of exception as well as the boolean state to determine how far through the processing the error was encountered &#xD;
                // and return a more meaningful message to the end user &#xD;
                Status = "Error - encountered an exception" ; &#xD;
                Message = "Could not complete action due to an unexpected exception"  ; &#xD;
            &#xD;
            &#xD;
            &#xD;
            &#xD;
            } &#xD;
            &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        } // end web service processing if there were no initial errors and the user is a member of the ACTPAS users group &#xD;
    } // end of the else statement that determines if the user was choosing an existing referral vs. creating a new one &#xD;
    &#xD;
    //regardless of success or failure return the following to the caller as the result set  - if status is not AOH000 the status code &#xD;
    // and the message will describe the kind of error that has been envcountered &#xD;
    &#xD;
    row.Status = Status;&#xD;
    row.Message = Message; &#xD;
    row.ReferralOID = referralReferralOID ; &#xD;
    row.pasReferralIdNamespace = pasReferralIdNamespace ; &#xD;
     &#xD;
    &#xD;
    rows[0] = row;&#xD;
    rows;&#xD;
    &#xD;
        }}&#xD;
AS Results</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Create / Link</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>2</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>RecvdDttm</name>
				<index>0</index>
				<default-value />
				<display-name>Date Received *</display-name>
				<input-type>Date</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("d-M-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-MM-dd")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 6</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferralReason</name>
				<index>2</index>
				<default-value />
				<display-name>Reason *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'REASN' and [ARCHV_FLAG] NOT IN ('D','Y') \r\nORDER BY DESCRIPTION")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 4</name>
				<index>3</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>SourceofReferral</name>
				<index>4</index>
				<default-value />
				<display-name>Source of Referral *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'SORRF' and [ARCHV_FLAG] NOT IN ('D','Y') \r\n --WHERE MAIN_CODE = 'REASN'\r\nORDER BY DESCRIPTION")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 5</name>
				<index>5</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferralType</name>
				<index>6</index>
				<default-value />
				<display-name>ACTPAS Referral Type *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'RETYP' and [ARCHV_FLAG] NOT IN ('D','Y') \r\nORDER BY DESCRIPTION")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler3</name>
				<index>7</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>OwnerHealthOrganisation</name>
				<index>8</index>
				<default-value />
				<display-name>Owner Health Organisation *</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Main Facility")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Location")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 8</name>
				<index>9</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Filler 12</name>
				<index>10</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Additional Fields for CHI</name>
				<index>11</index>
				<default-value />
				<display-name>---Additional  (Optional) Fields for CHI</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank format field 1</name>
				<index>12</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToSpecialty</name>
				<index>13</index>
				<default-value />
				<display-name>Referred To Specialty</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [MAIN_IDENT]\r\n      ,[DESCRIPTION]\r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[SPECIALTIES]\r\n  WHERE [ARCHV_FLAG] NOT IN ('D', 'Y') ")%&gt;&lt;%exec config.setOptionColumnName("MAIN_IDENT")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 9</name>
				<index>14</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredTST</name>
				<index>15</index>
				<default-value />
				<display-name>Referred To Staff Team</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [DESCRIPTION]\r\n      ,[CODE]\r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[STAFF_TEAMS]")%&gt;&lt;%exec config.setOptionColumnName("CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 3</name>
				<index>16</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredByClinician</name>
				<index>17</index>
				<default-value />
				<display-name>Referred By Clinician</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("ACTPAS Clinician ID")%&gt;&lt;%exec config.setReturnValueName("Clinician ID")%&gt;&lt;%exec config.setDisplayValueName("Clinician")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 6</name>
				<index>18</index>
				<default-value />
				<display-name />
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredBySpecialty</name>
				<index>19</index>
				<default-value />
				<display-name>Referred By Specialty</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT SpecialtyCode, Specialty\r\n      \r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CliniciansSpecialty]")%&gt;&lt;%exec config.setOptionColumnName("SpecialtyCode")%&gt;&lt;%exec config.setDisplayColumnName("Specialty")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 7</name>
				<index>20</index>
				<default-value />
				<display-name />
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred To Label</name>
				<index>21</index>
				<default-value />
				<display-name>--- Additional (Optional) Fields for Acute</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 5</name>
				<index>22</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToClinician</name>
				<index>23</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("ACTPAS Clinician ID")%&gt;&lt;%exec config.setReturnValueName("Clinician ID")%&gt;&lt;%exec config.setDisplayValueName("Clinician")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 7</name>
				<index>24</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToHealthOrganisation</name>
				<index>25</index>
				<default-value />
				<display-name>Referred To Health Organisation (?*)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Health Organisations")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Location")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Test Fields</name>
				<index>26</index>
				<default-value />
				<display-name>The following are just to test/show passing</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>another blank</name>
				<index>27</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>test fields 2</name>
				<index>28</index>
				<default-value />
				<display-name>data values via filters that replace manual selection</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>test field blank 2</name>
				<index>29</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred to Blank</name>
				<index>30</index>
				<default-value />
				<display-name />
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Patient Id</name>
				<index>31</index>
				<default-value />
				<display-name>Patient Id</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>blank 15</name>
				<index>32</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referrer Id</name>
				<index>33</index>
				<default-value />
				<display-name>Referrer Id</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 11</name>
				<index>34</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referral Service</name>
				<index>35</index>
				<default-value />
				<display-name>Referral Service (form)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 12</name>
				<index>36</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referral Type</name>
				<index>37</index>
				<default-value />
				<display-name>Referral Type (form)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 13</name>
				<index>38</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Reciever Code</name>
				<index>39</index>
				<default-value />
				<display-name>Reciever Code (form)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 14</name>
				<index>40</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Source Id</name>
				<index>41</index>
				<default-value />
				<display-name>Source Id (form)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message>Enter Referral details above and press "Create / Link"</initial-message>
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open New Referral Request</name>
				<application>
					<name>Referral Request</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>pasReferralId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pasReferralIdNamespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Message</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (row.get(0) != "Success AOH000") {&#xD;
alert("There are errors requiring your attention before you can continue") ;&#xD;
&#xD;
}&#xD;
&#xD;
else {&#xD;
&#xD;
// Concerto object to redirect to a referral request entry point to create a new clinical referral&#xD;
//this stuff is the more supported-by-api way of doing it now  : &#xD;
&#xD;
//var requestApplication = new Application("Referral Request", "New CHI Referral ACTPAS TEST");&#xD;
&#xD;
var requestApplication = new Application("Referral Request", "Open New Referral Request");&#xD;
&#xD;
requestApplication.addQueryParameter('referralService', 'community_health');&#xD;
requestApplication.addQueryParameter('referralType', 'int_cr_internal');&#xD;
requestApplication.addQueryParameter('pasReferralId', row.get(2));&#xD;
//use the singleton instance reference to the Concerto object : &#xD;
&#xD;
concerto.openApplication(requestApplication); &#xD;
&#xD;
//return; &#xD;
		&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Edit Appointment</name>
		<data-source-name>java:comp/env/jdbc/osgi_ws</data-source-name>
		<description>FM 22DEC2014 - Search used to allow the user to update appointment status information based on the appointment row item they selected from the Appointments list</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
Results.Status as Status, &#xD;
Results.Message as Message,&#xD;
Results.ClinicianCode as ClinicianCode, &#xD;
Results.AppointmentOID as AppointmentOID, &#xD;
Results.PatientOID as PatientOID&#xD;
FROM {{ &#xD;
&#xD;
var rows = [] ;  &#xD;
var row = new Object ;  &#xD;
//variables which get passed from the filter parameters&#xD;
var appointmentOID = '&lt;%=(js)get("Appointment OID")%&gt;' ;  // this is the OID of the appointment from the row selected by the user &#xD;
var updateType = '&lt;%=(js)get("UpdateType") %&gt;';&#xD;
var updateDate = '&lt;%=(js)get("Date") %&gt;'; &#xD;
var arrivedAtTime = '&lt;%=(js)get("ArrivedAt") %&gt;';&#xD;
var calledAtTime = '&lt;%=(js)get("CalledAt") %&gt;'; &#xD;
var seenAtTime = '&lt;%=(js)get("SeenAt") %&gt;';&#xD;
var departedAtTime = '&lt;%=(js)get("DepartedAt") %&gt;' ; &#xD;
//note the next one is called Attendance Indicator by the web service, but the ACTPAS user screen &#xD;
//labels it "Attend Status" - so the filter is named / displayed that way for user familiarity&#xD;
//this next value is hidden from users - iPM web spec says to use a hardcoded '5' for this which we are&#xD;
//but if ACT need to use other values then this filter should be unhidden, and the field in the message changed to use this variable&#xD;
var attendStatus = '&lt;%= (js) get("AttendStatus") %&gt;' ;&#xD;
//note for this next variable : this is optional, the clinician code from the appointment details &#xD;
//in ACTPAS is passed to the entry point as "Appointment Clinician" , if they provide a value in the &#xD;
//search filters we will override it - i.e. when actualised the patient was seen by a different clinician&#xD;
var seenByClinician = '&lt;%= (js) get("SeenByClinician") %&gt;' ;&#xD;
var bookedClinicianCode = '&lt;%= (js) get("Appointment Clinician") %&gt;' ;&#xD;
var appointmentOutcome = '&lt;%= (js) get("AppointmentOutcome") %&gt;' ;&#xD;
var cancelledAtTime = '&lt;%= (js) get("CancelledAt") %&gt;' ;&#xD;
var cancelledBy = '&lt;%= (js) get("CancelledBy") %&gt;' ;&#xD;
var cancellationReason = '&lt;%= (js) get("CancellationReason") %&gt;' ;&#xD;
&#xD;
// standard web service variables &#xD;
&#xD;
var messageID =  new java.util.UUID.randomUUID().toString();&#xD;
var logger = org.apache.log4j.Logger.getLogger(" com.orchestral.common.webservice.WebService");&#xD;
var portalUserID =  '&lt;%=(js)User.userID%&gt;' ; &#xD;
//old method tok the value from context directly, new method retrieves via template processing to get the corrent URN for the patient. &#xD;
//var patientURN =  '&lt;%=(js)Context.get("Patient.Id.MRN")%&gt;';&#xD;
var patientURN =  '&lt;%=(js)get("Patient ID")%&gt;' ; &#xD;
var patientName =  "&lt;%=(js)Context.PatientName.familyName.toString().toUpperCase()%&gt;" + ", " + "&lt;%=(js)Context.PatientName.givenName.toString()%&gt;" ; &#xD;
var workstationID = '&lt;%=(js)AppVars.get("iPM.Generic Workstation ID") %&gt;'; &#xD;
var timeout =  '&lt;%=(js)AppVars.get("iPM.WS.Timeout")%&gt;' ; &#xD;
var isACTPASUser =  '&lt;%=(js)User.isMemberOf("Community") %&gt;' ; &#xD;
&#xD;
var actpasUserName =  '&lt;%=(js)User.getAttribute("Community","ACTPAS User Name")%&gt;'  ; &#xD;
var actpasPassword = '&lt;%=(js)User.getAttribute("Community","ACTPAS Password")%&gt;'  ; &#xD;
  if (actpasUserName === '') {&#xD;
    &#xD;
    actpasUserName =  '&lt;%= (js) AppVars.get("iPM.Generic User Name") %&gt;'; &#xD;
    actpasPassword = '&lt;%= (js) AppVars.get("iPM.Generic Password") %&gt;';   &#xD;
    logger.info("actpasUsername was empty, using default values: user = " + actpasUserName + " password = " + actpasPassword) ; &#xD;
    logger.info("value of isACTPASuser is : " + isACTPASUser) ; &#xD;
  }&#xD;
&#xD;
var actpasDepartment =   '&lt;%=(js)AppVars.get("iPM.Generic Department")%&gt;' ; &#xD;
var actpasWorkstation = '&lt;%=(js)AppVars.get("iPM.Generic Workstation ID")%&gt;' ; &#xD;
var actpasSpeciality =  '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;'  ; &#xD;
// this update sequence is simpler than other sequences against the iPM services as we already have the OID for the appointment - no need to get the patient ID or a list of appointments&#xD;
var webservice = '' ; &#xD;
var webserviceName =  '&lt;%=(js)AppVars.get("iPM.WS.Base Location URL") %&gt;' ;&#xD;
var getPatientWSPort = '&lt;%=(js)AppVars.get("iPM.WS.Referral Port Name") %&gt;'; &#xD;
var getPatientWSAction = '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Action.GetPatientByID") %&gt;'; &#xD;
var referralWSNamespace = '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Namespace") %&gt;' ; &#xD;
var opdAppointmentNamespace =  '&lt;%=(js) AppVars.get("iPM.WS.OPD.Appointments.Namespace") %&gt;'  ; &#xD;
var opdAppointmentsWSPort = '&lt;%=(js) AppVars.get("iPM.WS.Appointment Port Name") %&gt;'  ;&#xD;
var getAppointmentsWSAction =  '&lt;%= (js)AppVars.get("iPM.WS.Appointments.Action.Get Appointments by Patient") %&gt;' ; &#xD;
var updateAppointmentWSAction = '&lt;%= (js) AppVars.get("iPM.WS.Appointments.Action.Update Appointment") %&gt;' ;  &#xD;
var Status = ''; &#xD;
var Message = ''; &#xD;
var hasErrors = false ; &#xD;
var webServiceRequest = '' ;&#xD;
var webserviceResponse = '' ; &#xD;
//the request messages don;t appear to be updating in the if loops so am using the following two variables to troubeshoot via log output&#xD;
var updateWebServiceRequest = ''; &#xD;
var updateWebServiceResponse = '';   &#xD;
var PatientOID = ''; &#xD;
var responseStatus = '' ; &#xD;
var responseMessage = ''; &#xD;
var getPatientSuccess = false ; &#xD;
var arrivedAtDttm = '';&#xD;
var calledAtDttm = '';&#xD;
var seenAtDttm = '';&#xD;
var depatedAtDttm = ''; &#xD;
var cancelledAtDttm = ''; &#xD;
&#xD;
//function for validating the time fields input for this generic search - only 24 our format is valid&#xD;
&#xD;
&#xD;
  function checkTime24(field) {&#xD;
     var errorMsg = "";&#xD;
     // regular expression to match required time format &#xD;
     re = /^(\d{1,2}):(\d{2})(:00)?([ap]m)?$/; &#xD;
     if(field.value != '') { &#xD;
        if(regs = field.value.match(re)) { &#xD;
          if(regs[4]) { &#xD;
            // 12-hour time format with am/pm&#xD;
            if(regs[1] &lt; 1 || regs[1] &gt; 12) { &#xD;
              errorMsg = "Invalid value for hours: " + regs[1]; &#xD;
            } &#xD;
          } &#xD;
          else { &#xD;
            // 24-hour time format &#xD;
            if(regs[1] &gt; 23) { &#xD;
              errorMsg = "Invalid value for hours: " + regs[1]; &#xD;
            } &#xD;
          } &#xD;
          if(!errorMsg &amp;&amp; regs[2] &gt; 59) { &#xD;
            errorMsg = "Invalid value for minutes: " + regs[2]; &#xD;
          } &#xD;
        } &#xD;
        else { errorMsg = "Invalid time format: " + field.value; } &#xD;
      } &#xD;
    if(errorMsg != "") { &#xD;
        alert(errorMsg); &#xD;
        field.focus(); &#xD;
        return false; &#xD;
      } &#xD;
    return true; &#xD;
    //end of function&#xD;
  }&#xD;
&#xD;
&#xD;
//check to see if the user is in the required group to execute this call &#xD;
if (isACTPASUser === 'false') {&#xD;
    hasErrors = true; &#xD;
    Status += 'EOH0001';&#xD;
    Message += "* You are not a member of the ACTPAS users Group - please engage your support team to resolve this issue";  &#xD;
    logger.info("actpas user is false and has errors is : " + hasErrors) ; &#xD;
  }&#xD;
&#xD;
//Validate the input values :&#xD;
//user didn't select the type of update &#xD;
 if (updateType ==='') {&#xD;
  hasErrors = true; &#xD;
  Status += 'EOH0002A'; &#xD;
  Message += "* You must select the type of update\n"; &#xD;
  }&#xD;
  else{&#xD;
  // the user doesn't have to provide further input if the update type is DNA so these are only &#xD;
  //checked if the user selected a differentupdate type &#xD;
    if (updateType != 'DNA') {&#xD;
      if (updateDate === '') {&#xD;
      hasErrors = true; &#xD;
      Status += 'EOH0003A'; &#xD;
      Message += "* You must provide the date \n"; &#xD;
      &#xD;
      }&#xD;
      //check the rest of the values based on the type of update &#xD;
      if (updateType === 'Attended') {&#xD;
        //Note - we do minimal checking here if the user does something really against business process &#xD;
        //Such as entering a date time before the appointment date we will let the web service error and pass&#xD;
        //the error message back to the user. this validation is just to avoid simple user errors &#xD;
        &#xD;
        //check the prvided times are different, and time order correct - otherwise the web service will error &#xD;
        &#xD;
        if ( (arrivedAtTime ==='00:00') || (calledAtTime &lt;= arrivedAtTime ) || (seenAtTime &lt; calledAtTime) || (departedAtTime &lt;= seenAtTime ) ){&#xD;
          hasErrors = true; &#xD;
          Status += 'EOH0004A'; &#xD;
          Message += "* Time values not entered correctly.\n"; &#xD;
        &#xD;
        } //end checking to see if the times are entered correctly &#xD;
        &#xD;
      &#xD;
      &#xD;
      } else {&#xD;
      //update type is cancelled&#xD;
        if ((cancelledAtTime === '') || (cancelledAtTime ==='00:00')) {&#xD;
          hasErrors = true; &#xD;
          Status += 'EOH0005A'; &#xD;
          Message += "* You must provide the Cancelled At time\n";    &#xD;
        }&#xD;
        &#xD;
      }&#xD;
    }  // end error checking for date and time input &#xD;
  }//end of error checking based on update type selected by user&#xD;
&#xD;
  //if there are no errors proceed with the updating &#xD;
&#xD;
  // get the patient OID first (exit if we can't retrieve this) &#xD;
  try {&#xD;
        //logger.info("\nCalling iPM Webservice to Get Patient OID by pas ID\n") ;&#xD;
        webservice = webServiceFactory.createWebService(webserviceName);&#xD;
        &#xD;
        webservice.setPortName(referralWSNamespace, getPatientWSPort); &#xD;
        //webservice.setMessageMode();  // we will supply the full envelope and message components so set the mode to message&#xD;
        //next line should not be required in message mode but there is a bug - not setting this explicitly results in a null action being set by the calls to JAX-WS and that causes a SOAP Fault for the iPM webservices &#xD;
        webservice.setSoapAction(getPatientWSAction);&#xD;
&#xD;
        webservice.setRequestTimeout(java.lang.Integer.parseInt(timeout));&#xD;
        webservice.setConnectTimeout(java.lang.Integer.parseInt(timeout));&#xD;
        &#xD;
        &#xD;
        webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
                     &lt;soapenv:Header/&gt;&#xD;
                       &lt;soapenv:Body&gt;&#xD;
                          &lt;isof:GetPatientByPatientId&gt;                        &#xD;
                           &lt;isof:PatientId&gt;{patientURN}&lt;/isof:PatientId&gt;&#xD;
                          &lt;/isof:GetPatientByPatientId&gt;&#xD;
                         &lt;/soapenv:Body&gt;&#xD;
                    &lt;/soapenv:Envelope&gt; ;&#xD;
        logger.info("iPM.WS :: Calling Referrals Service to get Patient OID. Message ID is " + messageID +  "\nPortal User ID is :" + portalUserID + "\n Request Message is :\n" + webserviceRequest  ); &#xD;
            &#xD;
        webserviceResponse = webservice.call(webserviceRequest); &#xD;
         &#xD;
&#xD;
        // now to process the response - for some reason this is less likely to fail if you declare the defaults first &#xD;
        default xml namespace = "";&#xD;
        &#xD;
        var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
        var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
        var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
        &#xD;
&#xD;
        var xmlInfo = webserviceResponse.s::Body.elements() ; &#xD;
        &#xD;
        var responseUID =  webserviceResponse.s::Header[0].*[0];    // test to see what happens if you create a response with more than one element in the header &#xD;
        PatientOID = xmlInfo..a::Patient..a::PatientOid.toString(); // call this explicitly otherwise e4x will try and put the entire element structure in the next xml object when we use the patientID &#xD;
        responseStatus = xmlInfo..a::ResultCode ; &#xD;
        responseMessage = xmlInfo..a::ResultDescription; &#xD;
        &#xD;
        if ( responseStatus == 'A000') {&#xD;
        &#xD;
          getPatientSuccess = true; &#xD;
          logger.info("iPM.WS :: Response from Get Patient by Patient id  web Service was :\n" + "AOOO - Success\n Actual response message suppressed as it contains PII\n"  + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
        &#xD;
        }&#xD;
        else {&#xD;
          Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
          Message += "Could not retrieve Patient OID from ACTPAS web service. Web service message was :\n" + responseMessage ;  &#xD;
          //note this next line is safe as the error responses only contain the message UID, error response code and error response message - no PII&#xD;
          logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
        }&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
  } catch (ex) {&#xD;
    var exStr = ex.toString(); &#xD;
      // handle to two common types of exception we see with the calls to web services and provide a usefullmessage, &#xD;
      // then use a fallback for the remainder - which could literally be anything from server faults, memory issues and so on. &#xD;
      &#xD;
      if ( exStr.indexOf("SOAPFaultException") &gt; -1 ) &#xD;
      {&#xD;
        Status = "Error. Encountered an exception connecting to Web service "; &#xD;
        Message = "Unexpected fault from ACTPAS Get Patient Web Service is : " + ex  ;      &#xD;
        logger.info("iPM.WS :: SOAP Fault recieved for message ID" +  messageID + "\n Server response as follows\n" + updateWebServiceResponse + "\n exception is : \n" + ex ) ; &#xD;
      }&#xD;
      else if ( exStr.indexOf("SocketTimeoutException") &gt; -1 ) {&#xD;
        Status = "Error. Timeout Error. "; &#xD;
        Message = "No response recieved from remote host. Try again and if the error persists please notify your support team.  " ;       &#xD;
        logger.info("iPM.WS :: Timeout for message ID " +  messageID + "\n no response recieved from ACTPAS system within " + timeout + "ms\n\n")  ; &#xD;
      } &#xD;
      else {&#xD;
        Status = "Error. Unexpected system error. "; &#xD;
        Message = "Details of exception are : " + ex  ;       &#xD;
        logger.info("iPM.WS :: Exception raised durring execution was :\n" + ex + "\n if there was a response message from the ACTPAS web server it is shown below here:\n" + updateWebServiceResponse + "\n ---- end log output for iPM::WS execution") ; &#xD;
      &#xD;
      }&#xD;
    hasErrors = true ;  &#xD;
    &#xD;
    &#xD;
  } //end try catch block &#xD;
&#xD;
//}&#xD;
&#xD;
  if (!hasErrors &amp;&amp; isACTPASUser &amp;&amp; getPatientSuccess) {&#xD;
    &#xD;
    //convert the entered datetime values to the required format for ACTPAS &#xD;
    arrivedAtDttm = updateDate + "T"  + arrivedAtTime; &#xD;
    calledAtDttm = updateDate + "T"  + calledAtTime; &#xD;
    seenAtDttm = updateDate + "T"  + seenAtTime; &#xD;
    depatedAtDttm = updateDate + "T"  + departedAtTime; &#xD;
    cancelledAtDttm = updateDate + "T"  + cancelledAtTime  ; &#xD;
    &#xD;
    //retrieve the patient OID for this appointment update  - note this is required even though we &#xD;
    //already know what the appointment OID is (the iPM service calls are very inefficient) &#xD;
    &#xD;
    &#xD;
    //somethign wierd going on with the webservice requests - may need a different variable as it doesn't seem to reset here &#xD;
    &#xD;
    // Set up the type of message based on the kind of update selected by the user&#xD;
    //retrieve the patient OID for this appointment update  - note this is required even though we &#xD;
    //alreay know what the appointment OID is (the iPM service calls are very inefficient) &#xD;
    if (updateType === 'DNA') {&#xD;
      //NB the other webservices use an isof:credential element to contain the web service security token however &#xD;
      // update Appointment uses an isof:st element - just be aware in case iPM ever bothers to standardise and fixes it&#xD;
      // may break this &#xD;
      //also note based on the iPM web service spec the DNA coded values are not optional and ar hardcoded. If they change&#xD;
      //this message will need to be updated&#xD;
      updateWebServiceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace" xmlns:isof1="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary" xmlns:isof2="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts"&gt;&#xD;
                   &lt;soapenv:Header/&gt;&#xD;
                   &lt;soapenv:Body&gt;&#xD;
                    &lt;isof:UpdateOutpatientAppointmentAttendance&gt;&#xD;
                     &#xD;
                     &lt;isof:st&gt;                    &#xD;
                      &lt;isof1:Department&gt;{actpasDepartment}&lt;/isof1:Department&gt;&#xD;
                      &#xD;
                      &lt;isof1:Name&gt;{actpasUserName}&lt;/isof1:Name&gt;&#xD;
                      &#xD;
                      &lt;isof1:Password&gt;{actpasPassword}&lt;/isof1:Password&gt;&#xD;
                      &#xD;
                      &lt;isof1:UserId&gt;{actpasUserName}&lt;/isof1:UserId&gt;&#xD;
                      &#xD;
                      &lt;isof1:Workstation&gt;{actpasWorkstation}&lt;/isof1:Workstation&gt;&#xD;
                     &lt;/isof:st&gt;&#xD;
                     &#xD;
                     &lt;isof:PatientOid&gt;{PatientOID}&lt;/isof:PatientOid&gt;&#xD;
                     &lt;isof:AppointmentOid&gt;{appointmentOID}&lt;/isof:AppointmentOid&gt;  &#xD;
                     &lt;isof:AttendanceIndicator&gt;&#xD;
                      &lt;isof2:Code&gt;DNA&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:AttendanceIndicator&gt;&#xD;
                     &lt;isof:OutcomeOfSchedule&gt;&#xD;
                      &lt;isof2:Code&gt;DNA&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:OutcomeOfSchedule&gt;&#xD;
                     &lt;isof:DidNotAttendReason&gt;&#xD;
                      &lt;isof2:Code&gt;GENDNA&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:DidNotAttendReason&gt;&#xD;
                     &lt;isof:OwnerHealthOrganisation&gt;&#xD;
                      &lt;isof2:Code&gt;ACTCC&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:OwnerHealthOrganisation&gt;&#xD;
                    &lt;/isof:UpdateOutpatientAppointmentAttendance&gt;&#xD;
                   &lt;/soapenv:Body&gt;&#xD;
              &lt;/soapenv:Envelope&gt; ;&#xD;
      messageID =  new java.util.UUID.randomUUID().toString();&#xD;
       // the following are used to mask the password output in the concerto log, using the string value rather than the e4x literal or we would wind up changing the actual XML element value             &#xD;
            var logMaskedEntryString = updateWebServiceRequest.toString().replace(/&lt;isof1:Password&gt;(.+?)&lt;\/isof1:Password&gt;/, "&lt;isof1:Password&gt;Masked User Entered Password&lt;/isof1:Password&gt;" ) ; &#xD;
      logger.info("iPM.WS :: Calling Appointment Update  Service for DNA.\n Portal User ID is : " + portalUserID + "\nMessage ID is : " + messageID + "\n\n Request Message is :" + logMaskedEntryString); &#xD;
      //code to call web service and extract response goes here once unit test passes&#xD;
    &#xD;
    }&#xD;
    else if (updateType === 'Cancelled') {&#xD;
    &#xD;
    updateWebServiceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace" xmlns:isof1="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary" xmlns:isof2="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts"&gt;&#xD;
                   &lt;soapenv:Header/&gt;&#xD;
                   &lt;soapenv:Body&gt;&#xD;
                    &lt;isof:UpdateOutpatientAppointmentAttendance&gt;&#xD;
                     &#xD;
                     &lt;isof:st&gt;&#xD;
                      &#xD;
                      &lt;isof1:Department&gt;{actpasDepartment}&lt;/isof1:Department&gt;&#xD;
                      &#xD;
                      &lt;isof1:Name&gt;{actpasUserName}&lt;/isof1:Name&gt;&#xD;
                      &#xD;
                      &lt;isof1:Password&gt;{actpasPassword}&lt;/isof1:Password&gt;&#xD;
                      &#xD;
                      &lt;isof1:UserId&gt;{actpasUserName}&lt;/isof1:UserId&gt;&#xD;
                      &#xD;
                      &lt;isof1:Workstation&gt;{actpasWorkstation}&lt;/isof1:Workstation&gt;&#xD;
                     &lt;/isof:st&gt;&#xD;
                     &#xD;
                     &lt;isof:PatientOid&gt;{PatientOID}&lt;/isof:PatientOid&gt;&#xD;
                     &lt;isof:AppointmentOid&gt;{appointmentOID}&lt;/isof:AppointmentOid&gt;  &#xD;
                     &lt;isof:CancdDttm&gt;{cancelledAtDttm}&lt;/isof:CancdDttm&gt;&#xD;
                     &lt;isof:CancellationBy&gt;&#xD;
                      &lt;isof2:Code&gt;{cancelledBy}&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:CancellationBy&gt;&#xD;
                     &lt;isof:CancellationReason&gt;&#xD;
                      &lt;isof2:Code&gt;{cancellationReason}&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:CancellationReason&gt;&#xD;
                     &lt;isof:OwnerHealthOrganisation&gt;&#xD;
                      &lt;isof2:Code&gt;ACTCC&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:OwnerHealthOrganisation&gt;&#xD;
                    &lt;/isof:UpdateOutpatientAppointmentAttendance&gt;&#xD;
                   &lt;/soapenv:Body&gt;&#xD;
              &lt;/soapenv:Envelope&gt; ;&#xD;
      messageID =  new java.util.UUID.randomUUID().toString();&#xD;
       // the following are used to mask the password output in the concerto log, using the string value rather than the e4x literal or we would wind up changing the actual XML element value             &#xD;
            var logMaskedEntryString = updateWebServiceRequest.toString().replace(/&lt;isof1:Password&gt;(.+?)&lt;\/isof1:Password&gt;/, "&lt;isof1:Password&gt;Masked User Entered Password&lt;/isof1:Password&gt;" ) ; &#xD;
      logger.info("iPM.WS :: Calling Appointment Update  Service for Cancellation.\n Portal User ID is: " + portalUserID + "\nMessage ID is " + messageID + "\n\n Request Message is :" + logMaskedEntryString); &#xD;
      //code to call web service and extract response goes here once unit test passes&#xD;
    &#xD;
    }&#xD;
    else {&#xD;
      //update type is attended&#xD;
      //if the user doesn't provide a specific clinician to override the seenBy value use the clinicain code the appointment&#xD;
      //was booked against otherwise use the user supplied value. &#xD;
      //NB : as the web service will error if you don't provide this information it's assumed ACT have configured "staff teams" as&#xD;
      //clinicians with a valid code OR that they will assign the correct clinician code when updating via this method&#xD;
      if (seenByClinician === '') { &#xD;
          seenByClinician = bookedClinicianCode ; &#xD;
        } &#xD;
      updateWebServiceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace" xmlns:isof1="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary" xmlns:isof2="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts"&gt;&#xD;
                   &lt;soapenv:Header/&gt;&#xD;
                   &lt;soapenv:Body&gt;&#xD;
                    &lt;isof:UpdateOutpatientAppointmentAttendance&gt;&#xD;
                     &#xD;
                     &lt;isof:st&gt;&#xD;
                      &#xD;
                      &lt;isof1:Department&gt;{actpasDepartment}&lt;/isof1:Department&gt;&#xD;
                      &#xD;
                      &lt;isof1:Name&gt;{actpasUserName}&lt;/isof1:Name&gt;&#xD;
                      &#xD;
                      &lt;isof1:Password&gt;{actpasPassword}&lt;/isof1:Password&gt;&#xD;
                      &#xD;
                      &lt;isof1:UserId&gt;{actpasUserName}&lt;/isof1:UserId&gt;&#xD;
                      &#xD;
                      &lt;isof1:Workstation&gt;{actpasWorkstation}&lt;/isof1:Workstation&gt;&#xD;
                     &lt;/isof:st&gt;&#xD;
                     &#xD;
                     &lt;isof:PatientOid&gt;{PatientOID}&lt;/isof:PatientOid&gt;&#xD;
                     &lt;isof:AppointmentOid&gt;{appointmentOID}&lt;/isof:AppointmentOid&gt;&#xD;
                     &lt;isof:ArrivedDttm&gt;{arrivedAtDttm}&lt;/isof:ArrivedDttm&gt;&#xD;
                     &lt;isof:CalledDttm&gt;{calledAtDttm}&lt;/isof:CalledDttm&gt;&#xD;
                     &lt;isof:SeenDttm&gt;{seenAtDttm}&lt;/isof:SeenDttm&gt;&#xD;
                     &lt;isof:DepartedDttm&gt;{depatedAtDttm}&lt;/isof:DepartedDttm&gt;&#xD;
                     &lt;isof:AttendanceIndicator&gt;&#xD;
                      &lt;isof2:Code&gt;{attendStatus}&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:AttendanceIndicator&gt;&#xD;
                     &lt;isof:SeenByClinician&gt;&#xD;
                      &lt;isof2:Code&gt;{seenByClinician}&lt;/isof2:Code&gt;                    &#xD;
                     &lt;/isof:SeenByClinician&gt;&#xD;
                     &lt;isof:OutcomeOfSchedule&gt;&#xD;
                      &lt;isof2:Code&gt;{appointmentOutcome}&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:OutcomeOfSchedule&gt;&#xD;
                     &#xD;
                     &lt;isof:OwnerHealthOrganisation&gt;&#xD;
                      &lt;isof2:Code&gt;ACTCC&lt;/isof2:Code&gt;&#xD;
                     &lt;/isof:OwnerHealthOrganisation&gt;&#xD;
                    &lt;/isof:UpdateOutpatientAppointmentAttendance&gt;&#xD;
                   &lt;/soapenv:Body&gt;&#xD;
              &lt;/soapenv:Envelope&gt; ;&#xD;
              &#xD;
       messageID =  new java.util.UUID.randomUUID().toString();&#xD;
       // the following are used to mask the password output in the concerto log, using the string value rather than the e4x literal or we would wind up changing the actual XML element value             &#xD;
            var logMaskedEntryString = updateWebServiceRequest.toString().replace(/&lt;isof1:Password&gt;(.+?)&lt;\/isof1:Password&gt;/, "&lt;isof1:Password&gt;Masked User Entered Password&lt;/isof1:Password&gt;" ) ; &#xD;
      logger.info("iPM.WS :: Calling Appointment Update  Service for Attended.\n Portal User ID is :" + portalUserID + "\nMessage ID is " + messageID + "\n\n Request Message is :" + logMaskedEntryString); &#xD;
      &#xD;
    &#xD;
    } // end of constructing the message type based on the update selection &#xD;
    //the message type has now been constructed depending on the type of update required, the next sequence is where we call the webservice and execute the update method via the message set up in earlier steps&#xD;
    try{&#xD;
      //instance of the webservice&#xD;
      webservice = webServiceFactory.createWebService(webserviceName);&#xD;
      //set port and actions for the update methods &#xD;
      webservice.setPortName(opdAppointmentNamespace, opdAppointmentsWSPort); &#xD;
      webservice.setMessageMode();  // we will supply the full envelope and message components so set the mode to message&#xD;
      //next line should not be required in message mode but there is a bug - not setting this explicitly results in a null action being set by the calls to JAX-WS and that causes a SOAP Fault for the iPM webservices &#xD;
      webservice.setSoapAction(updateAppointmentWSAction) ;&#xD;
      webservice.setRequestTimeout(java.lang.Integer.parseInt(timeout)) ;&#xD;
      webservice.setConnectTimeout(java.lang.Integer.parseInt(timeout)) ;&#xD;
      //now call the web service&#xD;
      updateWebServiceResponse = webservice.call(updateWebServiceRequest) ; &#xD;
      &#xD;
      //set up variales used in processing the response   &#xD;
      default xml namespace = "";&#xD;
        &#xD;
      var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/") ;&#xD;
      var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary");&#xD;
      var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance") ;&#xD;
      var xmlInfo = updateWebServiceResponse.s::Body.elements() ; &#xD;
      //extract the response code - this will be null if the response does not follow the web service specifications, or there was no explicit response (soap fault etc), later processing will handle this &#xD;
      var responseUID =  updateWebServiceResponse.s::Header[0].*[0];    &#xD;
      responseStatus = xmlInfo..a::ResultCode ; &#xD;
      responseMessage = xmlInfo..a::ResultDescription; &#xD;
      logger.info("\niPM.WS :: Response from Calling Appointment Update Service Was :\n" + updateWebServiceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to source message id :" + messageID) ; &#xD;
    &#xD;
      if ( responseStatus == 'A000') {&#xD;
        &#xD;
        Status = "Success" ; &#xD;
        Message += "Successfully updated patient Appointment" ; &#xD;
            &#xD;
      }&#xD;
      else {&#xD;
        Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
        Message += responseMessage ; &#xD;
      }&#xD;
        &#xD;
    &#xD;
    } catch (ex) {&#xD;
    &#xD;
      var exStr = ex.toString(); &#xD;
      // handle to two common types of exception we see with the calls to web services and provide a usefullmessage, &#xD;
      // then use a fallback for the remainder - which could literally be anything from server faults, memory issues and so on. &#xD;
      &#xD;
      if ( exStr.indexOf("SOAPFaultException") &gt; -1 ) &#xD;
      {&#xD;
        Status = "Error. Encountered an exception connecting to Web service "; &#xD;
        Message = "Unexpected fault from ACTPAS Update Appointment Web Service is : " + ex  ;       &#xD;
        logger.info("iPM.WS :: SOAP Fault recieved for message ID" +  messageID + "\n Server response as follows\n" + updateWebServiceResponse + "\n exception is : \n" + ex ) ; &#xD;
      }&#xD;
      else if ( exStr.indexOf("SocketTimeoutException") &gt; -1 ) {&#xD;
        Status = "Error. Timeout Error. "; &#xD;
        Message = "No response recieved from remote host. Try again and if the error persists please notify your support team.  " ;       &#xD;
        logger.info("iPM.WS :: Timeout for message ID " +  messageID + "\n no response recieved from ACTPAS system within " + timeout + "ms\n\n")  ; &#xD;
      } &#xD;
      else {&#xD;
        Status = "Error. Unexpected system error. "; &#xD;
        Message = "Details of exception are : " + ex  ;       &#xD;
        logger.info("iPM.WS :: Exception raised durring execution was :\n" + ex + "\n if there was a response message from the ACTPAS web server it is shown below here:\n" + updateWebServiceResponse + "\n ---- end log output for iPM::WS execution") ; &#xD;
      &#xD;
      }&#xD;
    &#xD;
    } //end try - catch for calling the update web service &#xD;
    &#xD;
  }  // end of processing the update if there were no errors found&#xD;
&#xD;
&#xD;
row.Status  = Status; &#xD;
row.Message = Message; &#xD;
row.ClinicianCode = bookedClinicianCode ; &#xD;
row.AppointmentOID =  appointmentOID ; &#xD;
row.PatientOID = PatientOID ; &#xD;
&#xD;
rows[0] = row ;  &#xD;
rows ;  &#xD;
}} &#xD;
AS Results</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name>Update Appointment (ACTPAS)</display-name>
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Update Appointment</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Patient OID</name>
				<index>0</index>
				<default-value />
				<display-name>Patient OID</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Appointment OID</name>
				<index>1</index>
				<default-value />
				<display-name>Appointment OID</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referral OID</name>
				<index>2</index>
				<default-value />
				<display-name>Referral OID</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>UpdateType</name>
				<index>3</index>
				<default-value />
				<display-name>Type of Update :</display-name>
				<input-type>Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Attended", "")%&gt;&lt;%exec config.setOption("Cancelled", "")%&gt;&lt;%exec config.setOption("DNA", "")%&gt;&lt;%exec config.setOption("", "")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Date</name>
				<index>4</index>
				<default-value />
				<display-name>Appointment Date</display-name>
				<input-type>Date</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("dd-MM-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-MM-dd")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Label1</name>
				<index>5</index>
				<default-value />
				<display-name>Complete these for Attended:</display-name>
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Spacer1</name>
				<index>6</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ArrivedAt</name>
				<index>7</index>
				<default-value>00:00</default-value>
				<display-name>Arrived At</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("5")%&gt;&lt;%exec config.setDefaultValue("00:00")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>CalledAt</name>
				<index>8</index>
				<default-value>00:00</default-value>
				<display-name>Called At</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("5")%&gt;&lt;%exec config.setDefaultValue("00:00")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>SeenAt</name>
				<index>9</index>
				<default-value>00:00</default-value>
				<display-name>Seen At</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("5")%&gt;&lt;%exec config.setDefaultValue("00:00")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>DepartedAt</name>
				<index>10</index>
				<default-value>00:00</default-value>
				<display-name>Departed At</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("5")%&gt;&lt;%exec config.setDefaultValue("00:00")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>AttendStatus</name>
				<index>11</index>
				<default-value />
				<display-name>Attend Status:</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [DESCRIPTION]\r\n      ,[MAIN_CODE]\r\n      \r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CWSReferenceValues]\r\n  WHERE [RFVDM_CODE] = 'ATTND' AND MAIN_CODE NOT IN ('DNA', 'CANCL', '3',  'UTA') \r\n ORDER BY DESCRIPTION")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("false")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Spacer4</name>
				<index>12</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>SeenByClinician</name>
				<index>13</index>
				<default-value />
				<display-name>Seen By:</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("ACTPAS Clinician ID")%&gt;&lt;%exec config.setReturnValueName("Clinician ID")%&gt;&lt;%exec config.setDisplayValueName("Clinician")%&gt;&lt;%exec config.setWidth(800)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Spacer5</name>
				<index>14</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>AppointmentOutcome</name>
				<index>15</index>
				<default-value />
				<display-name>Outcome:</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [DESCRIPTION]\r\n      ,[MAIN_CODE]\r\n      \r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CWSReferenceValues]\r\n  WHERE [RFVDM_CODE] = 'SCOCM'")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("false")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Spacer 2</name>
				<index>16</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Label 2</name>
				<index>17</index>
				<default-value />
				<display-name>Complete these for Cancelled:</display-name>
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Spacer 3</name>
				<index>18</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>CancelledAt</name>
				<index>19</index>
				<default-value>00:00</default-value>
				<display-name>Cancelled At:</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("5")%&gt;&lt;%exec config.setDefaultValue("00:00")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>CancelledBy</name>
				<index>20</index>
				<default-value />
				<display-name>Cancelled By:</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [DESCRIPTION]\r\n      ,[MAIN_CODE]\r\n      \r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CWSReferenceValues]\r\n  WHERE [RFVDM_CODE] = 'CANCB'")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("false")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>CancellationReason</name>
				<index>21</index>
				<default-value />
				<display-name>CancellationReason</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [DESCRIPTION]\r\n      ,[MAIN_CODE]\r\n      \r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CWSReferenceValues]\r\n  WHERE [RFVDM_CODE] = 'CANCR'")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("false")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Appointment Clinician</name>
				<index>22</index>
				<default-value />
				<display-name>Appointment Clinician</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Patient ID</name>
				<index>23</index>
				<default-value />
				<display-name>Patient ID</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Status</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Message</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician Code</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>ACTPAS Appointment ID</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient OID</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Get ACTPAS Clinician Details</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>FM 22DEC2014 - Updated search to use new view against ACTPAS from SSICT. This list returns all details for all ACTPAS referrers, use where historic and current values may be required (e.g. adding the Referring Clinician details in a post date workflow)</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT [ClinicianID]&#xD;
      ,[ClinicianIDType]&#xD;
      ,UPPER([familyname]) + ', ' + [givenname] + '. ' + [title] + '.' AS 'Clinician'     &#xD;
      ,[Facility]&#xD;
  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CWSClinicians]  &#xD;
WHERE 1=1 &#xD;
&#xD;
&lt;%if get("Clinician_Lastname") %&gt;&#xD;
  AND [familyname] LIKE '&lt;%=Clinician_Lastname%&gt;%'&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Clinician Code") %&gt;&#xD;
  AND [ClinicianID] LIKE '&lt;%=get("Clinician Code")%&gt;%'&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
&#xD;
  ORDER BY [familyname]</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Clinician Code</name>
				<index>0</index>
				<default-value />
				<display-name>Clinician Code</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Clinician_Lastname</name>
				<index>1</index>
				<default-value />
				<display-name>Clinician Lastname</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Clinician ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician ID Type</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>true</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Get ACTPAS Current Clinician Details</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>FM 22DEC2014 - this is the current search used to retrieve Current referrers from ACTPAS via the supplied view. The SSICT view does not return retired / archived Clinician details via this search - use where current referrer ID's are required - e.g. current portal user to actpas mapping</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT [ClinicianID]&#xD;
      ,[ClinicianIDType]&#xD;
      ,UPPER([familyname]) + ', ' + [givenname] + '. ' + [title] + '.' AS 'Clinician'     &#xD;
      ,[Facility]&#xD;
  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CWSCurrentClinicians]  &#xD;
WHERE 1=1 &#xD;
&#xD;
&lt;%if get("Clinician_Lastname") %&gt;&#xD;
  AND [familyname] LIKE '&lt;%=Clinician_Lastname%&gt;%'&#xD;
&lt;%end if%&gt;&#xD;
&lt;%if get("Clinician Code") %&gt;&#xD;
  AND [ClinicianID] LIKE '&lt;%=get("Clinician Code")%&gt;%'&#xD;
&lt;%end if%&gt;&#xD;
&#xD;
&#xD;
  ORDER BY [familyname]</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Clinician Code</name>
				<index>0</index>
				<default-value />
				<display-name>Clinician Code</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Clinician_Lastname</name>
				<index>1</index>
				<default-value />
				<display-name>Clinician Lastname</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Clinician ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician ID Type</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Facility</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>true</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Get Health Organisation from Facility</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>FM 24DEC2014 - Retained until we recieve confirmation from ACT that users will not require additonal capability to select Facility HEORG as per CCR-500</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
[CODE]&#xD;
      ,[DESCRIPTION]&#xD;
  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_facilities]&#xD;
  WHERE DESCRIPTION Like '%&lt;%=Location%&gt;%'&#xD;
ORDER BY CODE</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Location</name>
				<index>0</index>
				<default-value />
				<display-name>Location</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Code</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Location</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Get Outpatient Appointments</name>
		<data-source-name>java:comp/env/jdbc/osgi_ws</data-source-name>
		<description>FM : 22DEC2014 : completed and tested but not currently used as the same information is already available via Portal weblets and generic searches which are used to trigger the appointment updates against the web service based on user input. This search is provided as part of the package to support future workflows that may need this component to be triggered from other workflow scenarios. &#xD;
This search returns the full list of active (not retired / deactivated) Outpatient appointments via the ACTPAS web service call.  This requires multiple service calls - first to retrieve the OID for the patient, then the appoitnmetn list for the patient.</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
Results.PatientOID as PatientOID,&#xD;
Results.apptOID as AppointmentOID,&#xD;
Results.referralOID as ReferralOID,&#xD;
Results.apptClinicCode as ClinicCode, &#xD;
Results.apptClinicFriendly as ClinicName,&#xD;
Results.apptDateTime as apptDT,&#xD;
Results.attendanceIndicator as attendanceIxCode, &#xD;
Results.attendanceIndicatorDesc as attendanceIxDesc,&#xD;
Results.calledDT as calledAt, &#xD;
Results.cancelledDT as cancelledAt,&#xD;
Results.cancelledByCode as cancelledByCode,&#xD;
Results.cancelledByDescription as cancelledBy,&#xD;
Results.cancellationReasonCode as cancelledReasonCode, &#xD;
Results.cancellationReasonDescription as cancelledReason,&#xD;
Results.clinicianCode as clinicianCode,&#xD;
Results.clinicianDetails as clinician,&#xD;
Results.departedDT as departedAt,&#xD;
Results.dnaReasonCode as dnaCode,&#xD;
Results.dnaReasonDescription as DNAReason,&#xD;
Results.endDT as endedAt,&#xD;
Results.scocmCode as scocmCode,&#xD;
Results.SCOCM as scocmDescription,&#xD;
Results.ownerHealthOrgCode as ohoCode,&#xD;
Results.ownerHealthOrgDescription as oho,&#xD;
Results.Status as Status, &#xD;
Results.Message as Message&#xD;
FROM {{&#xD;
	&#xD;
	var rows = [];&#xD;
	var row = new Object;&#xD;
	//set this to true to add additonal information to the log4j output, and to us test values configured as application variables  - useful when hitting the test button in Generic search config where you dont have a patient in context etc. &#xD;
	// note : in test mode for squirrel you will need to provide hardcoded string values for the left term of the ternary otherwise you will get the left term as a literal string - template processing does not occur for Integration driver calls from Squirrel&#xD;
	var testing = false; &#xD;
	var messageID =  new java.util.UUID.randomUUID().toString();&#xD;
	var logger = org.apache.log4j.Logger.getLogger(" com.orchestral.common.webservice.WebService");&#xD;
    var portalUserID =  ((testing) ? 'Testing' : '&lt;%=(js)User.userID%&gt;' ) ; &#xD;
    var patientURN =   ((testing) ? '20157946' : '&lt;%=(js)Context.get("Patient.Id.MRN")%&gt;' );&#xD;
    var actpasPatientOID = '' ; &#xD;
    var hasErrors = false ;  &#xD;
    var patientName =  ((testing) ? 'test' : "&lt;%=(js)Context.PatientName.familyName.toString().toUpperCase()%&gt;" + ", " + "&lt;%=(js)Context.PatientName.givenName.toString()%&gt;" ) ; &#xD;
	var workstationID = ((testing) ? 'WEBSVC' : '&lt;%=(js)AppVars.get("iPM.Generic Workstation ID") %&gt;') ; &#xD;
	var timeout =  ((testing) ? 5000 : '&lt;%=(js)AppVars.get("iPM.WS.Timeout")%&gt;' ) ; &#xD;
	var isACTPASUser = ((testing) ? true : '&lt;%=(js)User.isMemberOf("Community") %&gt;') ; &#xD;
&#xD;
	var actpasUserName =  ((testing) ?  'WEBSRV' : '&lt;(%=(js)User.getAttribute("Community","ACTPAS User Name")%&gt;' ) ; &#xD;
	var actpasPassword = ((testing) ? 'websrvdev' : '&lt;%=(js)User.getAttribute("Community","ACTPAS Password")%&gt;' ) ; &#xD;
	var actpasClinicID =  ((testing) ? '&lt;%=(js)AppVars.get("iPM.Generic Clinic ID")%&gt;' :  '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinic ID")%&gt;' ) ; &#xD;
	var actpasSpeciality = ((testing) ? '&lt;%=(js)AppVars.get("iPM.Generic Speciality")%&gt;' : '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;' ) ; &#xD;
&#xD;
&#xD;
	// the webservice base URL , endpoint, action are hardcoded in the testing mode for squirrel - you should be testing against the application variables if you are doing this from Portal, so this code will not appear the same in the Generic Search config&#xD;
	// most interactions will require 2 -3 calls in sequence, only the simple call to get the  patient details use the single call &#xD;
&#xD;
	var webserviceName = ((testing) ? 'http://actpaswebservices:2124/iPM_WEB_API?wsdl' :  '&lt;%=(js)AppVars.get("iPM.WS.Base Location URL") %&gt;') ;&#xD;
	var getPatientWSPort = ((testing) ? 'ReferralServiceEndPoint' : '&lt;%=(js)AppVars.get("iPM.WS.Referral Port Name") %&gt;'); &#xD;
	var getPatientWSAction = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/GetPatientByPatientId' : '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Action.GetPatientByID") %&gt;'); &#xD;
	var referralWSNamespace = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace' : '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Namespace") %&gt;' ); &#xD;
	var opdAppointmentNamespace = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace' : '&lt;%=(js) AppVars.get("iPM.WS.OPD.Appointments.Namespace") %&gt;' ) ; &#xD;
	var getAppointmentsWSPort = ((testing) ? 'OutpatientAppointmentEndPoint' : '&lt;%=(js) AppVars.get("iPM.WS.Appointment Port Name") %&gt;' ) ;&#xD;
	var getAppointmentsWSAction = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace/OutpatientAttendanceContract/GetOutpatientAppointmentByPatientOid' : '&lt;%= (js)AppVars.get("iPM.WS.Appointments.Action.Get Appointments by Patient") %&gt;' ); &#xD;
	&#xD;
	//variables for the Status and Message are used regardless of the outcome of caling the service and will indicate success or failure - the remainder are only declared and set if the web service call sequences are successful&#xD;
	var Status = ""; &#xD;
	var Message = "" ; &#xD;
	var getPatientSuccess = false; &#xD;
	&#xD;
	if (!isACTPASUser) {&#xD;
		hasErrors = true; &#xD;
		Status = 'EOH0003';&#xD;
		Message = "You are not a member of the ACTPAS users Group - please engage your support team to resolve this issue";	&#xD;
	}&#xD;
	&#xD;
	if (isACTPASUser) {&#xD;
&#xD;
		// if the user has provided specific details in user config we use those, otherwise we use the default values&#xD;
		if (!actpasUserName) {&#xD;
		&#xD;
			actpasUserName = '&lt;%=(js)AppVars.get("iPM.Generic User Name")%&gt;' ; &#xD;
			actpasPassword = '&lt;%=(js)AppVars.get("iPM.Generic Password")%&gt;' ; 		&#xD;
		}&#xD;
&#xD;
		// to simplify later processing logic check the clinc ID and speciality have been configured by the user, otherwise set them to the defaults from the application variables &#xD;
		// actually may be simpler not so specify .. although we do need the hospital location code and so on so we shoudl ensure we have values for these - ask which ones we should use as default &#xD;
&#xD;
		if (!actpasClinicID ) {&#xD;
&#xD;
			actpasClinicID = '&lt;%=(js)AppVars.get("iPM.Generic Clinic ID")%&gt;'; 		&#xD;
		}&#xD;
		if (!actpasSpeciality ) {&#xD;
		&#xD;
			actpasSpeciality  = '&lt;%=(js)AppVars.get("iPM.Generic Speciality")%&gt;' ; &#xD;
		}&#xD;
	&#xD;
&#xD;
&#xD;
		// now execute the calls to the web services &#xD;
		&#xD;
		logger.info('iPM::calling sequence to retieve appointments values are | Portal User ID : ' + portalUserID + ' |  Patient URN : ' + patientURN + ' | WorkstationID : ' + workstationID + ' | timeout : ' + timeout + '\n | Is an  ACTPAS User : ' + isACTPASUser) ; &#xD;
	&#xD;
		try {&#xD;
			&#xD;
				&#xD;
				var webserviceRequest = ''; 	&#xD;
				var webserviceResponse = '' ;	&#xD;
				var requestOk = false; &#xD;
				var dateFormat = new java.text.SimpleDateFormat("dd-MMM-yyyy");&#xD;
				var currentTime = dateFormat.format(new java.util.Date());&#xD;
				&#xD;
			  /* still some undefined references we need to try and resolve for portal to access this &#xD;
				if (!testing) {&#xD;
				var userSession = auditClassLoader.loadClass('com.orchestral.core.session.api_6_4.SessionHolder').getMethod('getSession').invoke(null);&#xD;
				var auditService = osgiServiceFactory.getService('com.orchestral.core.audit.api_6_10.AuditLogService');&#xD;
				  var auditClassLoader = auditService.getClass().getClassLoader();&#xD;
					   &#xD;
				  var stringPair = auditClassLoader.loadClass('com.orchestral.common.utility.StringPair').getConstructor(java.lang.String, java.lang.String);&#xD;
					   &#xD;
						&#xD;
						var auditEvent = auditService.log(userSession, "Clinical Portal", "Call to get Patient OID", " " ,&#xD;
							[ stringPair.newInstance('Unique Portal MessageID', messageID),&#xD;
							  stringPair.newInstance('Portal User ID', portalUserID ),&#xD;
							  stringPair.newInstance('Web Service Location', webserviceName), &#xD;
							  stringPair.newInstance('Patient ID - URN', patientURN), &#xD;
							  stringPair.newInstance('ID Type', 'ACT URN'), &#xD;
							  stringPair.newInstance('Patient Name', patientName), &#xD;
							  stringPair.newInstance('ACTPAS User', actpasUserName), &#xD;
							  stringPair.newInstance('ACTPAS User Type ', actpasUserType), &#xD;
							  stringPair.newInstance('Worksstation ID ', workstationID)&#xD;
							]);&#xD;
				 }&#xD;
			*/ 			&#xD;
				logger.info("iPM.WS :: Calling service to retrieve patient ID") ; &#xD;
&#xD;
				//get the OID of the patient currently in context &#xD;
				var webservice = webServiceFactory.createWebService(webserviceName);&#xD;
				webservice.setPortName(referralWSNamespace, getPatientWSPort); &#xD;
				webservice.setMessageMode();  // we will supply the full envelope and message components so set the mode to message&#xD;
				&#xD;
				//next line should not be required in message mode but there is a bug - not setting this explicitly results in a null action being set by the calls to JAX-WS and that causes a SOAP Fault for the iPM webservices &#xD;
				webservice.setSoapAction(getPatientWSAction);&#xD;
		&#xD;
				webservice.setRequestTimeout(java.lang.Integer.parseInt(timeout));&#xD;
				webservice.setConnectTimeout(java.lang.Integer.parseInt(timeout));&#xD;
							&#xD;
					webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
											 &lt;soapenv:Header/&gt;&#xD;
												 &lt;soapenv:Body&gt;&#xD;
													  &lt;isof:GetPatientByPatientId&gt;												&#xD;
														 &lt;isof:PatientId&gt;{patientURN}&lt;/isof:PatientId&gt;&#xD;
													  &lt;/isof:GetPatientByPatientId&gt;&#xD;
												   &lt;/soapenv:Body&gt;&#xD;
											&lt;/soapenv:Envelope&gt; ;&#xD;
				logger.info("iPM.WS :: Calling Referrals Service. Message ID is " + messageID + " Request Message is :" + webserviceRequest); &#xD;
							&#xD;
				var webserviceResponse = webservice.call(webserviceRequest); &#xD;
					 &#xD;
	&#xD;
				// now to process the response - for some reason this is less likely to fail if you declare the defaults first &#xD;
				default xml namespace = "";&#xD;
					&#xD;
				var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
				var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
				var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
				//var GetPatientByPatientIdResponse = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace");&#xD;
	&#xD;
				var xmlInfo = webserviceResponse.s::Body.elements() ; &#xD;
					&#xD;
				//var Header = webserviceResponse.s::Header.elements();  	// this works but needs more investigation as to why the preferred methodreturns something other than the expected value &#xD;
				var Header =  webserviceResponse.s::Header[0].*[0]; 		// test to see what happens if you create a response with more than one element in the header &#xD;
				//var Header =  webserviceResponse.s::Header.elements().ActivityId ; 			&#xD;
&#xD;
				//logger.info("iPM.WS :: Response from Referrals Service was :" + webserviceResponse + "/n Response Unique Message ID was : " + Header + "\n *****END OF RESPONSE TRANSACTION for Source Message ID : " + messageID + " ********\n") ; &#xD;
&#xD;
				//assign the Patient OID that is contained within the response message &#xD;
&#xD;
				if(xmlInfo..a::ResultCode == 'A000')  // A000 is the response code for success, anything else - including no patient found will give us an error &#xD;
				{				&#xD;
					//call to string explicitly here - the e4x processing will assign the XML node rather than the value if you execute the {variable substitution} otherwise later in the sequence &#xD;
					actpasPatientOID = xmlInfo..a::Patient..a::PatientOid.toString();&#xD;
					getPatientSuccess = true; &#xD;
					//log output has to be masked if successful as the response to the getPatient by ID service returns a lot of PII in the response SOAP object &#xD;
					logger.info("iPM.WS :: Response from Get Patient by Patient id  web Service was :\n" + "AOOO - Success\n Actual response message suppressed as it contains PII\n"  + "\n Response Unique Message ID was : " + Header + "\n relates to Source Message UID : " + messageID) ; &#xD;
		&#xD;
										&#xD;
				}&#xD;
				else {&#xD;
					hasErrors = true;  &#xD;
					// NOT CURRENTLY PROCESSING THIS ERROR&#xD;
					Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
					Message += "Could not retrieve Patient OID from ACTPAS web service.\nUnable to create referral. Web service message was :\n" + responseMessage ; 	&#xD;
					//note this next line is safe as the error responses only contain the message UID, error response code and error response message - no PII&#xD;
					logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + Header + "\n relates to Source Message UID : " + messageID) ; &#xD;
&#xD;
					//process error message &#xD;
					&#xD;
				}&#xD;
				//if the call to get the patient ID was successful we can now try to retrieve the list of appointments for the patient &#xD;
				if(getPatientSuccess) {&#xD;
&#xD;
&#xD;
				appointmentsMessageID = new java.util.UUID.randomUUID().toString(); &#xD;
				&#xD;
				webservice.setPortName(opdAppointmentNamespace, getAppointmentsWSPort); &#xD;
								&#xD;
				//next line should not be required in message mode but there is a bug - not setting this explicitly results in a null action being set by the calls to JAX-WS and that causes a SOAP Fault for the iPM webservices &#xD;
				webservice.setSoapAction(getAppointmentsWSAction);&#xD;
				webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.OutpatientAttendanceNamespace"&gt;&#xD;
								   &lt;soapenv:Header/&gt;&#xD;
								   &lt;soapenv:Body&gt;&#xD;
									  &lt;isof:GetOutpatientAppointmentByPatientOid&gt;&#xD;
										&#xD;
										 &lt;isof:PatientOid&gt;{actpasPatientOID}&lt;/isof:PatientOid&gt;&#xD;
										&#xD;
									  &lt;/isof:GetOutpatientAppointmentByPatientOid&gt;&#xD;
								   &lt;/soapenv:Body&gt;&#xD;
								&lt;/soapenv:Envelope&gt;; &#xD;
&#xD;
				logger.info("iPM.WS:: Calling to get Patient Appointments. Unique Source  Message ID  : " + appointmentsMessageID + "\n Relates to Patient OID from message : " + messageID + "\n Request message is : \n" + webserviceRequest +"\n *******END OF REQUEST TRANSACTION*******\n");&#xD;
								&#xD;
				webserviceResponse = webservice.call(webserviceRequest);&#xD;
&#xD;
				// the namespaces change in different response types hence we need to set them up again : &#xD;
				var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.OutpatientDataContracts") ; &#xD;
				var b = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
				&#xD;
				var appointmentsXML = webserviceResponse.s::Body.elements() ; &#xD;
				&#xD;
				var Header =  webserviceResponse.s::Header[0].*[0]; 		// UID for the response message from the web service is contained within the header &#xD;
&#xD;
				var resultCode = appointmentsXML..a::ResultCode ; &#xD;
				&#xD;
				logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + Header + "\n relates to Source Message UID : " + appointmentsMessageID) ; &#xD;
				if (appointmentsXML..a::ResultCode == 'A000'){&#xD;
					//iPM use the same namespace object to hold all the appointments as they do for each individual appointment&#xD;
					//to avoid needing to test for null for the first array element we need to extract all of the outpatient appointment descendents that are one level below the first : &#xD;
					&#xD;
					var appointmentsList = appointmentsXML..a::OutpatientAppointment..a::OutpatientAppointment; &#xD;
					&#xD;
					if (appointmentsList.length() == 0 ) {&#xD;
					//come back and look at changing this to be an empty row so that we just display the inbuilt defined  no results message&#xD;
					 &#xD;
					}&#xD;
					else {&#xD;
&#xD;
						//loop through the list of one or more apppintments and add to the rowset for return 	&#xD;
						for (var i = 0 ; i &lt; appointmentsList.length() ; i++) &#xD;
						{&#xD;
							/* as a temporary workaround to the issue described in CPO-19609 with root cause to be resolved in CPO-19632 we will pass the OIDs for the&#xD;
							 * patient, appointment and referral to the entrypoint for processing the appointment update and from there will use those along with the &#xD;
							 * extra information input by the end user to update the appointment Status - this will work for this workflow as there is &#xD;
							 * limited data that can be updated by the web service for Outpatient Appointments&#xD;
							 * Note the following: &#xD;
							 * the workaround relies on a silent failure - the row object only supports a limited number of data types, if you try and pass an incompatible &#xD;
							 * object type then it will fail silently  ( i.e. nothing in the logs and the column is left as null) . &#xD;
							 * This issue in turn is resolved in Portal versions from 8.1 - which means CPO-19632 must be resolved AND all row elements must have toString() called explicitly &#xD;
							 * before the customer can upgrade to version 8.1+  or it will result in errors ( since the resolution to the row obhject conversion issue is simply to output an error &#xD;
							 * message) &#xD;
							 * note there will also be a redundant call to the webservice to retrieve the appointment details a second time in the next sequence to ensure that the &#xD;
							 * existing appoitment data is not removed ( which is the case if you don't pass it back to the webservice) &#xD;
							 * Also note the reason for keeping the large number of columns as per below is because we need them to display to the end user so they know which appoitnment to select&#xD;
							 * these display fine but do not get passed as part of the Row Object / SecureInformation unless you call toString() explicitly &#xD;
							 */ &#xD;
							row = new Object(); &#xD;
							row.PatientOID = actpasPatientOID.toString(); &#xD;
							row.apptOID = appointmentsList[i]..a::AppointmentOid.toString(); &#xD;
							row.referralOID = appointmentsList[i]..a::ReferralOid.toString(); &#xD;
							row.apptClinicCode = appointmentsList[i]..a::Clinic..b::Code; &#xD;
							row.apptClinicFriendly = appointmentsList[i]..a::Clinic..b::Description; &#xD;
							row.apptDateTime = formatDateString(appointmentsList[i]..a::StartDttm.toString() );&#xD;
							row.attendanceIndicator = appointmentsList[i]..a::AttendanceIndicator..b::Code; &#xD;
							row.attendanceIndicatorDesc = appointmentsList[i]..a::AttendanceIndicator..b::Description; &#xD;
							row.calledDT = formatDateString(appointmentsList[i]..a::CalledDttm.toString()); &#xD;
							row.cancelledDT = formatDateString(appointmentsList[i]..a::CancdDttm.toString()); &#xD;
							row.cancelledByCode = appointmentsList[i]..a::CancellationBy..b::Code;&#xD;
							row.cancelledByDescription = appointmentsList[i]..a::CancellationBy..b::Description;&#xD;
							row.cancellationReasonCode = appointmentsList[i]..a::CancellationReason..b::Code;&#xD;
							row.cancellationReasonDescription = appointmentsList[i]..a::CancellationReason..b::Description;&#xD;
							row.clinicianCode = appointmentsList[i]..a::Clinician..b::Code[0];  //this returns a list as iPM have more than one code descendent in this element- the first item is the clinician code &#xD;
							row.clinicianDetails = appointmentsList[i]..a::Clinician..b::Surname.toString().toUpperCase() + ", " + appointmentsList[i]..a::Clinician..b::Forename.toString() + "." + appointmentsList[i]..a::Clinician..b::Title..b::Description.toString(); &#xD;
							row.departedDT = formatDateString(appointmentsList[i]..a::DepartedDttm.toString()); &#xD;
							row.dnaReasonCode = appointmentsList[i]..a::DidNotAttendReason..b::Code;&#xD;
							row.dnaReasonDescription = appointmentsList[i]..a::DidNotAttendReason..b::Description; &#xD;
							row.endDT = formatDateString(appointmentsList[i]..a::EndDttm.toString());&#xD;
							row.scocmCode = appointmentsList[i]..a::OutcomeOfSchedule..b::Code; &#xD;
							row.SCOCM = appointmentsList[i]..a::OutcomeOfSchedule..b::Description ; &#xD;
							row.ownerHealthOrgCode = appointmentsList[i]..a::OwnerHealthOrganisation..b::Code; &#xD;
							row.ownerHealthOrgDescription = appointmentsList[i]..a::OwnerHealthOrganisation..b::Description; 						&#xD;
							row.Status = appointmentsXML..a::ResultCode ; &#xD;
							row.Message = appointmentsXML..a::ResultDescription;&#xD;
							rows[i] = row; &#xD;
&#xD;
						} // end for loop &#xD;
&#xD;
					} // end appointment list processing &#xD;
				&#xD;
					&#xD;
					&#xD;
					&#xD;
				} // end of success response from web service for appointments &#xD;
				else{&#xD;
					// there was an error respose from the webservice - process and display the message to the user &#xD;
					&#xD;
					//error E006 simply means there are no appointments for this patient so we will return an empty row, which will then show "no results found" for a cleaner response to the user &#xD;
						&#xD;
					row = new Object();&#xD;
					if (appointmentsXML..a::ResultCode == 'E006') {&#xD;
						//do nothing - the row will be empty &#xD;
					}&#xD;
					else{&#xD;
							row.PatientOID = actpasPatientOID;&#xD;
							row.Status = appointmentsXML..a::ResultCode ; &#xD;
							row.Message = appointmentsXML..a::ResultDescription;&#xD;
							rows[rows.length] = row;&#xD;
						}&#xD;
				&#xD;
					} // end of error response &#xD;
				&#xD;
				} // end processing of appointments list retrieval &#xD;
&#xD;
				&#xD;
					&#xD;
			} catch (ex) {&#xD;
					&#xD;
				// need to flush this out with the different kinds of exception we may encounter - i.e. soap fault, network timeout - the remainder can be left as the generic exception and just logged with a simple error back tothe user &#xD;
				logger.info("trapped an exception info as follows\n") ; &#xD;
				logger.info(ex.toString()); &#xD;
				&#xD;
				//add condition checking for the type of exception as well as the boolean state to determine how far through the processing the error was encountered &#xD;
				// and return a more meaningful message to the end user &#xD;
				row = new Object();&#xD;
				row.Status = "EOH00X" ; &#xD;
				row.Message = "Error. Could not complete action due to an unexpected exception"  ; &#xD;
				rows[0] = row;&#xD;
		&#xD;
			}&#xD;
&#xD;
	}	// end if an ACTPAS user &#xD;
	&#xD;
		function formatDateString (apptDttmStr) &#xD;
		{&#xD;
			 // utility funciton to format the dateTIme data returened by ACTPAS into the same format as is generally dispayed for ACT&#xD;
			 // the Template processing DateTime.format and DateTime.parse do not appear to recognise / work with  ISO 8601 types of dates &#xD;
			 // as returned by ACTPAS / SQLSVR necessitating this workaround &#xD;
			 &#xD;
			var year = apptDttmStr.substring(0,4); &#xD;
			var month = apptDttmStr.substring(5,7);&#xD;
			switch(month) {&#xD;
				case '01':&#xD;
					month = 'Jan'; &#xD;
					break; &#xD;
				case '02':&#xD;
					month = 'Feb'; &#xD;
					break;&#xD;
				case '03':&#xD;
					month = 'Mar' ;&#xD;
					break;&#xD;
				case '04' :&#xD;
					month = 'Apr' ; &#xD;
					break;&#xD;
				case '05' :&#xD;
					month = 'May';&#xD;
					break;&#xD;
				case '06':&#xD;
					month = 'Jun';&#xD;
					break;&#xD;
				case '07' :&#xD;
					month = 'Jul'; &#xD;
					break; &#xD;
				case '08' :&#xD;
					month = 'Aug';&#xD;
					break; &#xD;
				case '09' :&#xD;
					month = 'Sep';&#xD;
					break;&#xD;
				case '10' :&#xD;
					month = 'Oct';&#xD;
					break; &#xD;
				case '11':&#xD;
					month= 'Nov';&#xD;
					break;&#xD;
				case '12':&#xD;
					month = 'Dec';&#xD;
					break; &#xD;
				} // end of the switch statement &#xD;
				&#xD;
			var day = apptDttmStr.substring(8,10) ;&#xD;
			var time = apptDttmStr.substring(11,19);&#xD;
			&#xD;
			var apptDateTime = day + '-' + month + '-' + year + ' ' + time ; &#xD;
			return apptDateTime ; &#xD;
			&#xD;
		}&#xD;
	//returns the resultset&#xD;
	rows;&#xD;
&#xD;
}}&#xD;
AS Results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style>Hidden</style>
			</filter-button>
			<initial-message>Select the Update type then select the Appoitnment to Update</initial-message>
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message>No Appointments were found for this patient</no-results-message>
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Patient OID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointment OID</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Referral OID</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinic Code</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinic Name</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Appointment At</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html) value %&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attendance Indicator Code</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Attendance Indicator</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Called At</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Cancelled At</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Cancelled By Code</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Cancelled By</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Cancelled Reason Code</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Cancelled Reason</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician Code</name>
				<index>14</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Clinician Name</name>
				<index>15</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Departed At</name>
				<index>16</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DNA Code</name>
				<index>17</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>DNA Reason</name>
				<index>18</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Ended At</name>
				<index>19</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>SCOCM Code</name>
				<index>20</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Scheduling Outcome</name>
				<index>21</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>OHO Code</name>
				<index>22</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Owner Health Organisation</name>
				<index>23</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>24</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Message</name>
				<index>25</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action>alert ("type chosen was" + '&lt;%= (js) UpdateType %&gt;') ;</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Get Patient ACTPAS OID</name>
		<data-source-name>java:comp/env/jdbc/osgi_ws</data-source-name>
		<description>FM 22DEC2014 - this search is available, however it is not typically of use as a standalone search and is typically used as the first call in a sequence for the consumption of the other methods ( e.g. to add or update ACTPAS information) &#xD;
This call will return the patient object from the referrals service for the current patient in context. &#xD;
The main return value of interest is the Patient OID, but there is other information in the object.</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT &#xD;
Results.PatientOID as PatientOID,&#xD;
Results.PatientName as PatientName,&#xD;
Results.dob as DOB ,&#xD;
Results.sex as Sex,  &#xD;
Results.WebserviceResponse as WebserviceResponse,&#xD;
Results.Status as Status,&#xD;
Results.Message as Message,&#xD;
Results.responseUID as responseUID&#xD;
FROM {{&#xD;
	&#xD;
	var rows = [];&#xD;
	var row = new Object;&#xD;
	//set this to true to add additonal information to the log4j output, and to us test values configured as application variables  - useful when hitting the test button in Generic search config where you dont have a patient in context etc. &#xD;
	// note : in test mode for squirrel you will need to provide hardcoded string values for the left term of the ternary otherwise you will get the left term as a literal string - template processing does not occur for Integration driver calls from Squirrel&#xD;
	var testing = true ; &#xD;
	var messageID =  new java.util.UUID.randomUUID().toString();&#xD;
	var logger = org.apache.log4j.Logger.getLogger(" com.orchestral.common.webservice.WebService");&#xD;
     var portalUserID =  ((testing) ? 'Testing' : '&lt;%=(js)User.userID%&gt;' ) ; &#xD;
     var patientURN =   ((testing) ? '20157946' : '&lt;%=(js)Context.get("Patient.Id.MRN")%&gt;' );&#xD;
     var patientName =  ((testing) ? 'test' : "&lt;%=(js)Context.PatientName.familyName.toString().toUpperCase()%&gt;" + ", " + "&lt;%=(js)Context.PatientName.givenName.toString()%&gt;" ) ; &#xD;
	var workstationID = ((testing) ? 'WEBSVC' : '&lt;%=(js)AppVars.get("iPM.Generic Workstation ID") %&gt;') ; &#xD;
	var timeout =  ((testing) ? 5000 : '&lt;%=(js)AppVars.get("iPM.WS.Timeout")%&gt;' ) ; &#xD;
	var isACTPASUser = ((testing) ? true : '&lt;%=(js)User.isMemberOf("Community") %&gt;') ; &#xD;
&#xD;
	var actpasUserName =  ((testing) ?  'WEBSRV' : '&lt;(%=(js)User.getAttribute("Community","ACTPAS User Name")%&gt;' ) ; &#xD;
	var actpasPassword = ((testing) ? 'websrvdev' : '&lt;%=(js)User.getAttribute("Community","ACTPAS Password")%&gt;' ) ; &#xD;
	var actpasClinicID =  ((testing) ? '&lt;%=(js)AppVars.get("iPM.Generic Clinic ID")%&gt;' :  '&lt;%=(js)User.getAttribute("Community","ACTPAS Clinic ID")%&gt;' ) ; &#xD;
	var actpasSpeciality = ((testing) ? '&lt;%=(js)AppVars.get("iPM.Generic Speciality")%&gt;' : '&lt;%=(js)User.getAttribute("Community","ACTPAS Speciality")%&gt;' ) ; &#xD;
&#xD;
	// the webservice base URL , endpoint, action are hardcoded in the testing mode for squirrel - you should be testing against the application variables if you are doing this from Portal, so this code will not appear the same in the Generic Search config&#xD;
	// most interactions will require 2 -3 calls in sequence, only the simple call to get the  patient details use the single call &#xD;
&#xD;
	var getPatientWSName = ((testing) ? 'https://actpaswebservices.test.act.gov.au:2124/iPM_WEB_API/' :  '&lt;%=(js)AppVars.get("iPM.WS.Base Location URL") %&gt;') ;&#xD;
	var getPatientWSPort = ((testing) ? 'ReferralServiceEndPoint' : '&lt;%=(js)AppVars.get("iPM.WS.Referral Port Name") %&gt;'); &#xD;
	var getPatientWSAction = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace/ReferralContract/GetPatientByPatientId' : '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Action.GetPatientByID") %&gt;'); &#xD;
	var referralWSNamespace = ((testing) ? 'http://iSOFT.ANZ.PatientManagerService.ReferralNamespace' : '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Namespace") %&gt;' ); &#xD;
	&#xD;
	if (isACTPASUser) {&#xD;
&#xD;
		// if the user has provided specific details in user config we use those, otherwise we use the default values&#xD;
		if (!actpasUserName) {&#xD;
		&#xD;
			actpasUserName = '&lt;%=(js)AppVars.get("iPM.Generic User Name")%&gt;' ; &#xD;
			actpasPassword = '&lt;%=(js)AppVars.get("iPM.Generic Password")%&gt;' ; 		&#xD;
		}&#xD;
&#xD;
		// to simplify later processing logic check the clinc ID and speciality have been configured by the user, otherwise set them to the defaults from the application variables &#xD;
		// actually may be simpler not so specify .. although we do need the hospital location code and so on so we shoudl ensure we have values for these - ask which ones we should use as default &#xD;
&#xD;
		if (!actpasClinicID ) {&#xD;
&#xD;
			actpasClinicID = '&lt;%=(js)AppVars.get("iPM.Generic Clinic ID")%&gt;'; &#xD;
		&#xD;
		}&#xD;
		if (!actpasSpeciality ) {&#xD;
		&#xD;
			actpasSpeciality  = '&lt;%=(js)AppVars.get("iPM.Generic Speciality")%&gt;' ; &#xD;
&#xD;
		}&#xD;
&#xD;
&#xD;
		// now execute the calls to the web services &#xD;
		logger.info('values are | Portal User ID : ' + portalUserID + ' |  Patient URN : ' + patientURN + ' | WorkstationID : ' + workstationID + ' | timeout : ' + timeout + '\n | Is an  ACTPAS User : ' + isACTPASUser) ; &#xD;
	&#xD;
		 	try {&#xD;
				&#xD;
					&#xD;
			&#xD;
				&#xD;
					var resultMsg = ''; &#xD;
					&#xD;
				&#xD;
				&#xD;
					&#xD;
					var webserviceRequest = ''; 	&#xD;
					var webserviceResponse = 'Bad juju' ;	&#xD;
					var requestOk = false; &#xD;
					var dateFormat = new java.text.SimpleDateFormat("dd-MMM-yyyy");&#xD;
				 	var currentTime = dateFormat.format(new java.util.Date());&#xD;
				 	&#xD;
				  /* still some undefined references we need to try and resolve for portal to access this &#xD;
				 	if (!testing) {&#xD;
				 	var userSession = auditClassLoader.loadClass('com.orchestral.core.session.api_6_4.SessionHolder').getMethod('getSession').invoke(null);&#xD;
				 	var auditService = osgiServiceFactory.getService('com.orchestral.core.audit.api_6_10.AuditLogService');&#xD;
				 	  var auditClassLoader = auditService.getClass().getClassLoader();&#xD;
						   &#xD;
					  var stringPair = auditClassLoader.loadClass('com.orchestral.common.utility.StringPair').getConstructor(java.lang.String, java.lang.String);&#xD;
						   &#xD;
							&#xD;
							var auditEvent = auditService.log(userSession, "Clinical Portal", "Call to get Patient OID", " " ,&#xD;
							    [ stringPair.newInstance('Unique Portal MessageID', messageID),&#xD;
							      stringPair.newInstance('Portal User ID', portalUserID ),&#xD;
							      stringPair.newInstance('Web Service Location', webserviceName), &#xD;
							      stringPair.newInstance('Patient ID - URN', patientURN), &#xD;
							      stringPair.newInstance('ID Type', 'ACT URN'), &#xD;
							      stringPair.newInstance('Patient Name', patientName), &#xD;
							      stringPair.newInstance('ACTPAS User', actpasUserName), &#xD;
							      stringPair.newInstance('ACTPAS User Type ', actpasUserType), &#xD;
								  stringPair.newInstance('Worksstation ID ', workstationID)&#xD;
							    ]);&#xD;
					 }&#xD;
				*/ 			&#xD;
					logger.info("iPM.WS :: In try block, init webservice variables") ; &#xD;
					&#xD;
					var webservice = webServiceFactory.createWebService(getPatientWSName);&#xD;
						webservice.setPortName(referralWSNamespace, getPatientWSPort); &#xD;
						webservice.setMessageMode();  // we will supply the full envelope and message components so set the mode to message&#xD;
						//next line should not be required in message mode but there is a bug - not setting this explicitly results in a null action being set by the calls to JAX-WS and that causes a SOAP Fault for the iPM webservices &#xD;
						webservice.setSoapAction(getPatientWSAction);&#xD;
			&#xD;
						webservice.setRequestTimeout(java.lang.Integer.parseInt(timeout));&#xD;
						webservice.setConnectTimeout(java.lang.Integer.parseInt(timeout));&#xD;
								&#xD;
						webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
												 &lt;soapenv:Header/&gt;&#xD;
													 &lt;soapenv:Body&gt;&#xD;
														  &lt;isof:GetPatientByPatientId&gt;												&#xD;
															 &lt;isof:PatientId&gt;{patientURN}&lt;/isof:PatientId&gt;&#xD;
														  &lt;/isof:GetPatientByPatientId&gt;&#xD;
													   &lt;/soapenv:Body&gt;&#xD;
												&lt;/soapenv:Envelope&gt; ;&#xD;
						logger.info("iPM.WS :: Calling Referrals Service. Message ID is " + messageID + " Request Message is :" + webserviceRequest); &#xD;
								&#xD;
						var webserviceResponse = webservice.call(webserviceRequest); &#xD;
						logger.info("iPM.WS :: Response from Referrals Service was :" + webserviceResponse) ; &#xD;
		&#xD;
						// now to process the response - for some reason this is less likely to fail if you declare the defaults first &#xD;
						default xml namespace = "";&#xD;
						&#xD;
						var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
						var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
						var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
						//var GetPatientByPatientIdResponse = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace");&#xD;
		&#xD;
						var xmlInfo = webserviceResponse.s::Body.elements() ; &#xD;
						&#xD;
						//var Header = webserviceResponse.s::Header.elements();  	// this works but needs more investigation as to why the preferred methodreturns something other than the expected value &#xD;
						var Header =  webserviceResponse.s::Header[0].*[0]; 		// test to see what happens if you create a response with more than one element in the header &#xD;
						//var Header =  webserviceResponse.s::Header.elements().ActivityId ; 			&#xD;
						row.PatientOID = xmlInfo..a::Patient..a::PatientOid;&#xD;
						row.PatientName =  xmlInfo..a::Patient..a::Surname.toUpperCase()+ ', ' + xmlInfo..a::Patient..a::PrefrdForename  ; &#xD;
						row.dob = xmlInfo..a::Patient..a::DttmOfBirth ; &#xD;
						row.sex = xmlInfo..a::Patient..a::Sex..a::Description ;						&#xD;
						row.WebserviceResponse = webserviceResponse ; &#xD;
						row.Status = xmlInfo..a::ResultCode ; &#xD;
						row.Message = xmlInfo..a::ResultDescription; &#xD;
						row.responseUID = Header;  &#xD;
						rows[rows.length] = row;&#xD;
&#xD;
						&#xD;
						&#xD;
					} catch (ex) {&#xD;
						&#xD;
						// need to flush this out with the different kinds of exception we may encounter - i.e. soap fault, network timeout - the remainder can be left as the generic exception and just logged with a simple error back tothe user &#xD;
						row.PatientOID = 'N/A' ;&#xD;
						row.WebserviceResponse = 'Error'; &#xD;
						row.Status = 'Error' ; &#xD;
						row.Message = ex.toString(); &#xD;
						rows[rows.length] = row;&#xD;
			&#xD;
			&#xD;
					}&#xD;
&#xD;
	}	&#xD;
&#xD;
	else{&#xD;
&#xD;
 &#xD;
		&#xD;
	}&#xD;
	&#xD;
&#xD;
&#xD;
&#xD;
				&#xD;
			&#xD;
			rows;&#xD;
		}}&#xD;
AS Results</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message>Connecting to ACTPAS Web Services</initial-message>
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Patient OID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Patient Name</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Date of Birth</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Sex</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WS Message</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WS Response</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>WS Status</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Response UID</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Integration Driver Version</name>
		<data-source-name>java:comp/env/jdbc/osgi_ws</data-source-name>
		<description>This search is provided to return the current integration driver version as may be required to ensure functionality is supported in a given environment; or where confirmation of the version is required by Orion Health Support teams.</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>select version from {{com.orionhealth.jdbc.integration.JdbcIntegrationDriverVersions.driverVersion}} as version</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Version</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Link ACTPAS Referral</name>
		<data-source-name>java:comp/env/jdbc/osgi_ws</data-source-name>
		<description>FM 22 Dec 2014 - main search used to link the ACTPAS referral to the Clinical Referral through the PAS ID integration feature of CR 3.1. &#xD;
This search allows the user to either &#xD;
a- select an existing referral via a filter &#xD;
or &#xD;
b- create a new referral via the ACTPAS web services which, if succesful, will then be linked to the clinical referral via the Referral OID.</description>
		<escape-quote-as>'</escape-quote-as>
		<order-by />
		<query-string>SELECT&#xD;
Results.ReferralOID as pasReferralId,&#xD;
Results.pasReferralIdNamespace as pasReferralIdNamespace, &#xD;
Results.Status as Status, &#xD;
Results.Message as Message&#xD;
FROM {{&#xD;
    // this call is to the web service to add a new referral - the generic search will provide a set of variables which are then used to populate the required message fields based on user input &#xD;
    // this will require  sequence of 3 calls &#xD;
    // call 1 - get the patient OID &#xD;
    // call 2 add a new referral for the patient &#xD;
    // call 3 - call to get referrals with a from datetime constraint of the date passed in from the generic search. Note although constrained this call could return multiple rows - so we will traverse and look for a match based on the same &#xD;
    // criteria used to create the referral to find the OID as ACTPAS returns an e007 error if you try to create 2 with the same criteria so the one in the system must be the one we create if we recieve an A000 to the second web service call&#xD;
    &#xD;
    // general variables &#xD;
	//determine if this is being called in smoke test mode &#xD;
    var testing = '&lt;%=(js) AppVars.get("Test Mode") %&gt;' ; &#xD;
	&#xD;
	//once CCR-509 is fixed and you want to test it change this to true and it will hide the demo workaround for our test users&#xD;
	// NOTE : exisiting referrals in the database that have been created before the fix is deployed will have a metadata referred By value that is incorrect - either &#xD;
	// delete them from the database OR only use internal referrals created after the fix is applied to test	&#xD;
	var is509fixed = false ;  &#xD;
    var messageID =  new java.util.UUID.randomUUID().toString();&#xD;
    var logger = org.apache.log4j.Logger.getLogger("com.orchestral.common.webservice.WebService");&#xD;
    var portalUserID =  '&lt;%=(js)User.userID%&gt;' ; &#xD;
	//first try to set up the patient ID from the Request filter parameters - in case this was called from a workflow where the patient is not in context&#xD;
    var patientURN =  '&lt;%= (js) get("Patient Id")%&gt;'  ;&#xD;
	//otherwise pull the patient ID from the standard application variable / template processing - in general this means the seach is triggered with a patient in context&#xD;
	if (patientURN ==='') &#xD;
	{&#xD;
		patientURN = '&lt;%=(js) AppVars.get("patientId") %&gt;'; &#xD;
	} &#xD;
	//this one is just used for smoke testing&#xD;
	if (testing == 'true') &#xD;
	{&#xD;
		//if we are in test mode retrieve the test patient URN from the appvars, use this in the test sequence to retrieve patient OID and create a referral&#xD;
		patientURN = '&lt;%=(js) AppVars.get("Test Patient") %&gt;'; 		&#xD;
	}&#xD;
    // original line modified 27th November to use the filter parameter from referrals screens var patientURN =   ((testing) ? '20157946' : '&lt;%=(js)Context.get("Patient.Id.MRN")%&gt;' );&#xD;
    &#xD;
    var actpasPatientOID = '' ; &#xD;
    var noErrors = true ;  &#xD;
    &#xD;
    var workstationID =  '&lt;%=(js)AppVars.get("iPM.Generic Workstation ID") %&gt;'  ; &#xD;
    var timeout =   '&lt;%=(js)AppVars.get("iPM.WS.Timeout")%&gt;'  ;         &#xD;
    var isACTPASUser =  &lt;%=(js)User.isMemberOf("Community") %&gt; ; &#xD;
    //these will contain null if the template processing fails to find the group or if the user is not a member - which is why we set the boolean value to control processing decisions&#xD;
    //note these already set the value to the defaults if the user entered value is null - change this to the app vars &#xD;
    var actpasUserName =  '&lt;%= (js)User.getAttribute("Community", "ACTPAS User Name")%&gt;'  ; &#xD;
    //this is fail safe - if the user enters their user ID but not their password an error will return from the webservice that tells them to change their password&#xD;
    var actpasPassword =  '&lt;%=(js)User.getAttribute("Community","ACTPAS Password")%&gt;'  ; &#xD;
	//set to the fallback values if the current values are not configured&#xD;
	if (actpasUserName === '') {&#xD;
&#xD;
		actpasUserName =  '&lt;%= (js) AppVars.get("iPM.Generic User Name") %&gt;'; &#xD;
		actpasPassword = '&lt;%= (js) AppVars.get("iPM.Generic Password") %&gt;'; 	&#xD;
	}&#xD;
   &#xD;
    &#xD;
    //these hold the resultset to return to Portal after execution &#xD;
    var rows = [];&#xD;
    var row = new Object;&#xD;
    //set this to true to add additonal information to the log4j output, and to us test values configured as application variables  - useful when hitting the test button in Generic search config where you dont have a patient in context etc. &#xD;
    // note : in test mode for squirrel you will need to provide hardcoded string values for the left term of the ternary otherwise you will get the left term as a literal string - template processing does not occur for Integration driver calls from Squirrel&#xD;
    &#xD;
    //variables from the geneneric search form &#xD;
&#xD;
    var RecvdDttm = '&lt;%=(js) RecvdDttm%&gt;' ;  &#xD;
    var ReferralReason = '&lt;%=(js) ReferralReason%&gt;' ;  &#xD;
    var SentDttm = '&lt;%=(js) SentDttm1%&gt;'; &#xD;
    var Priority = '&lt;%=(js) Priority%&gt;'; &#xD;
    var OrdtaDttm = '&lt;%=(js) OrdtaDttm%&gt;';&#xD;
    var AdministrativeCategory = '&lt;%=(js) AdministrativeCategory%&gt;' ; &#xD;
    var SourceofReferral  = '&lt;%=(js) SourceofReferral%&gt;' ;  &#xD;
    var ExpiryDttm = '&lt;%=(js) ExpiryDttm1%&gt;'; &#xD;
    var Comments = '&lt;%=(js) Comments%&gt;';&#xD;
    var ReferralType ='&lt;%=(js) ReferralType%&gt;';&#xD;
    //old fversion below - used to be done via a popup search filter, new version we are using a filter request variable passed to us fromt he CWS form &#xD;
    var ReferredByClinician = '&lt;%=(js) get("Referrer Id")%&gt;' ; // old now replacing the search with the data from the request form'&lt;%=(js) ReferredByClinician%&gt;' ;&#xD;
    var ReferredBySpecialty = '&lt;%=(js) ReferredBySpecialty%&gt;' ;&#xD;
    var AccidentRelatedStatus = '&lt;%=(js) AccidentRelatedStatus%&gt;' ; &#xD;
    var ReferredToClinician = '&lt;%=(js) ReferredToClinician%&gt;' ;&#xD;
    var ReferredToSpecialty = '&lt;%=(js) ReferredToSpecialty%&gt;' ; &#xD;
    var ReferredToHealthOrganisation = '&lt;%=(js) ReferredToHealthOrganisation%&gt;' ;  &#xD;
    //on advice from ACT project team we are hardcoding this value to ACTCC - may need to change back to using a list . &#xD;
    //Note the original search used a filter configured with a popup search - the entry point for that popup search is Get Main Facility within the &#xD;
    //iPM applicaiton. this filter is now hidden in the current search form &#xD;
    // old : var OwnerHealthOrganisation = '&lt;%=(js) OwnerHealthOrganisation%&gt;' ;  // this may need to be changed&#xD;
    //new : &#xD;
    var OwnerHealthOrganisation = 'ACTCC' ; &#xD;
    var ReferredToStaffTeam = '&lt;%=(js) ReferredTST%&gt;' ; &#xD;
    var Status = "";&#xD;
    var Message = "";&#xD;
    var hasErrors = false; &#xD;
    var timeSuffix = "T00:00:00" ; &#xD;
    var referralReferralOID = "";  // this will hold the OID of the referral once we successfully create one &#xD;
    var pasReferralIdNamespace = "ACTPAS01" ;  // hadrcoded value - name space is required to differentiate PAS ID from different PAS, ACT has only one PAS so this will be hardcoded for ACTPAS &#xD;
    var existingReferralOID = '&lt;%=(js) existingReferralOID %&gt;'  ; // this holds the OID of an existing referral if the user selected one rather than creating one &#xD;
    &#xD;
    // web service variables &#xD;
    //base URL for WSDL and service &#xD;
    var webserviceName =  '&lt;%=(js)AppVars.get("iPM.WS.Base Location URL") %&gt;' ;&#xD;
    //all methods in this sequence use the same Namespace and port - they only differ in the action to call &#xD;
    var referralWSNamespace =  '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Namespace") %&gt;' ; &#xD;
    var referralsWSPort = '&lt;%=(js)AppVars.get("iPM.WS.Referral Port Name") %&gt;';  &#xD;
    // these are used to retrieve the patient OID for use in later web service calls    &#xD;
&#xD;
    var getPatientWSAction =  '&lt;%=(js)AppVars.get("iPM.WS.Referrals.Action.GetPatientByID") %&gt;'; &#xD;
    var getPatientSuccess = false;  &#xD;
    &#xD;
    //these are used to call the method to add the new referral &#xD;
    var addReferralWSAction =  '&lt;%= (js)AppVars.get("iPM.WS.Referrals.Action.Add Referral") %&gt;';&#xD;
    var addReferralSuccess = false; &#xD;
    &#xD;
    //these are used after the call to add a referral to call all the referrals made after or equal to  the RecvdDttm we use in our messages &#xD;
    // this will be a list of 1 or more referrals to be travered looking for the unique combinaiton of the mandatory fields wich will enable us to then retrieve the &#xD;
    //referral OID related to the add referral transaction  - note if the add step is successful but the get fails (e.g. timeout) we shoudl inform the user .. project needs to decide what happens then ?&#xD;
    //Note this would be avoided if the iPM web service was made more robust by adding the OID to the response message &#xD;
    &#xD;
    var getReferralsWSAction =  '&lt;%= (js)AppVars.get("iPM.WS.Referrals.Action.Get Referrals by Patient") %&gt;' ; &#xD;
    var getReferralsSuccess = false; &#xD;
&#xD;
    //logger.info("iPM Add Referrals Generic Search init");&#xD;
&#xD;
    &#xD;
    // verify none of the mandatory fields are blank - note their may be others that ACT needs to ake mandatory, these are the minimum for the web service to successsfully add &#xD;
    // 1. Owner Health Organisation ; 2. Patient OID ( passed via context)  3. Referral Reason 4. Recieved date time and 5. source of referral &#xD;
    // Note this combination also ensures uniqueness - if you try and add 2 referrals with these details the same the system will reject it with an error code E007. &#xD;
    // note it's unclear if owner health organisation is the org who referred the patient or the org who fulfils it from the documentation neeed to raise &#xD;
    // Note there is no equivalent field in the ACTPAS GUI - for now will set both referred to and owner HO to the same value &#xD;
    &#xD;
    if (OwnerHealthOrganisation === "") {&#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please select the Owner Health Orginisation for the referral.\n";&#xD;
    }&#xD;
    &#xD;
    if (ReferralReason === "") {&#xD;
    &#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please select the Referral Reason\n"; &#xD;
    &#xD;
    }&#xD;
    if (RecvdDttm ==="") {&#xD;
        &#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please enter the date the Referral was recieved\n"; &#xD;
        &#xD;
    }&#xD;
    if (SourceofReferral ==="") {&#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please select the Source of the Referral\n" ; &#xD;
    }&#xD;
    if (ReferralType ==="") {&#xD;
        hasErrors = true; &#xD;
        Status = "Failed with input error" ; &#xD;
        Message += "\n * Please select the Referral Type\n" ; &#xD;
        &#xD;
    &#xD;
    }&#xD;
    //check if they are in the group required to execute the requried calls to the ACTPAS web services &#xD;
    //note due to the need to create referrals for a given logged in Clinician/ user we need to review the original &#xD;
    // design decision to use the default values for web service calls ( becuase this would also mean using the same value . will also impact settign defaults  . &#xD;
    // raise an additional quesiton to ACT : &#xD;
    // should we use the default value in all places , or should we force the user to always configure the ACTPAS user details ? &#xD;
    &#xD;
    if (!isACTPASUser) {&#xD;
        hasErrors = true; &#xD;
        Status = 'EOH0003';&#xD;
        Message = "You are not a member of the ACTPAS users Group - please engage your support team to resolve this issue"; &#xD;
    }&#xD;
    //this is a workaround for demo purposes only until we add the drop down for the user to select the referrer as part of creating an internal referral &#xD;
    // needs some onput from ACT - we need ot verify that normally not all user ID's are vaid clinicain ID's (however if this is nto the case then dev is seet up badly and we can rely on this) &#xD;
    &#xD;
	if (!is509fixed) {&#xD;
		if ( (ReferredByClinician == 'Carlie.Maxwell') || (ReferredByClinician == 'Edith.Minnie') || (ReferredByClinician == 'Sammie.Jenkins')  || (ReferredByClinician == 'Dominique.Jose') || (ReferredByClinician == 'Kit.Blur') || (ReferredByClinician == 'Aaron.Mansell') || (ReferredByClinician == 'Bobbie.Samper'))  {&#xD;
			// note neither of these worked so don't use them as methods to work around the issue &#xD;
			// identifying the clinician ID by matching against the portal user ID - there's no defined pattern &#xD;
			// replacing the clinician ID with the ACTPAS user ID - not all user ID's are clinician ID's  - at least in the view we have been providd so we need to &#xD;
			// validate it with the ACT team &#xD;
			// note to make the demo lok good pick the matchign doctor - Abhishek Sharma&#xD;
			ReferredByClinician = 'ABHSHA' ;    &#xD;
			}&#xD;
    &#xD;
    }&#xD;
    &#xD;
&#xD;
    &#xD;
    &#xD;
    //if there are no errors, the user is an actpas user and the user has not selected an existing referral ID create a new one &#xD;
    // otherwise pass the selected OID back as the return value - this is to support integration with CWS referrals so that the user &#xD;
    // can either select an existing referral or create a new one via the one workflow, at the end of which the action within Clinical Referrals &#xD;
    // to associate the PAS referral ID to the Clinical Referral ID &#xD;
    // at the completion either as OID has been returned in the rowset, or the OID is null  (see documentation for reasons this may occur) &#xD;
    // returning null is safe as this is essentially the same (from a Clinical Referrals workflow persepctive) as if the Workflow Action  has&#xD;
    // never been completed  - which means the user will need to take steps to resolve before the action may be completed &#xD;
    // (for example change paramters, select an existing OID, work around an issue with the remote host being unavailable by completing the &#xD;
    // action at a later time and so on. &#xD;
    &#xD;
    &#xD;
    &#xD;
    if (existingReferralOID != "" ) {&#xD;
        Status = "Success AOH000" ; &#xD;
        Message = "Please click here to continue" ;  // note we probably don't need the user to click anything in the CWS workflow - leave in until we know how we pass the result columns back to the workflow action &#xD;
        referralReferralOID = existingReferralOID ; &#xD;
    }&#xD;
    else {&#xD;
    &#xD;
        if (!hasErrors &amp;&amp; isACTPASUser ) {&#xD;
        //format the dates as required for the web service : note ACTPAS GUI has no input for the time part so we will follow the same amout of specificity and set all to 00:00:00&#xD;
        RecvdDttm += timeSuffix; &#xD;
        &#xD;
            //logger.info("ACTPAS User Group evaluated to |" +  isACTPASUser + " |\n" );&#xD;
            //logger.info("ACTPAS user is |" + '&lt;%= (js)User.getAttribute("Community", "ACTPAS User Name")%&gt;' + "|\n") ; &#xD;
            &#xD;
        &#xD;
            try {&#xD;
            &#xD;
            //try to get patient OID &#xD;
            //logger.info("\nCalling iPM Webservice to Get Patient OID by pas ID\n") ;&#xD;
            var webservice = webServiceFactory.createWebService(webserviceName);&#xD;
            &#xD;
            webservice.setPortName(referralWSNamespace, referralsWSPort); &#xD;
            webservice.setMessageMode();  // we will supply the full envelope and message components so set the mode to message&#xD;
            //next line should not be required in message mode but there is a bug - not setting this explicitly results in a null action being set by the calls to JAX-WS and that causes a SOAP Fault for the iPM webservices &#xD;
            webservice.setSoapAction(getPatientWSAction);&#xD;
&#xD;
            webservice.setRequestTimeout(java.lang.Integer.parseInt(timeout));&#xD;
            webservice.setConnectTimeout(java.lang.Integer.parseInt(timeout));&#xD;
                    &#xD;
            webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
                                     &lt;soapenv:Header/&gt;&#xD;
                                         &lt;soapenv:Body&gt;&#xD;
                                              &lt;isof:GetPatientByPatientId&gt;                                              &#xD;
                                                 &lt;isof:PatientId&gt;{patientURN}&lt;/isof:PatientId&gt;&#xD;
                                              &lt;/isof:GetPatientByPatientId&gt;&#xD;
                                           &lt;/soapenv:Body&gt;&#xD;
                                    &lt;/soapenv:Envelope&gt; ;&#xD;
            logger.info("iPM.WS :: Calling Referrals Service to retrieve patient OID. Portal User ID is : " + portalUserID + "\nMessage ID is :  " + messageID + "\n Request Message is :" + webserviceRequest); &#xD;
                    &#xD;
            var webserviceResponse = webservice.call(webserviceRequest); &#xD;
             &#xD;
&#xD;
            // now to process the response - for some reason this is less likely to fail if you declare the defaults first &#xD;
            default xml namespace = "";&#xD;
            &#xD;
            var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
            var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
            var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
            //var GetPatientByPatientIdResponse = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace");&#xD;
&#xD;
            var xmlInfo = webserviceResponse.s::Body.elements() ; &#xD;
            &#xD;
            //var Header = webserviceResponse.s::Header.elements();     // this works but needs more investigation as to why the preferred methodreturns something other than the expected value &#xD;
            // the header contains an activity id which is unique per message response from the server  - it's not documented but useful for logging &#xD;
            var responseUID =  webserviceResponse.s::Header[0].*[0];        // test to see what happens if you create a response with more than one element in the header &#xD;
            //var Header =  webserviceResponse.s::Header.elements().ActivityId ;            &#xD;
            var PatientOID = xmlInfo..a::Patient..a::PatientOid.toString(); // call this explicitly otherwise e4x will try and put the entire element structure in the next xml object when we use the patientID &#xD;
            var responseStatus = xmlInfo..a::ResultCode ; &#xD;
            var responseMessage = xmlInfo..a::ResultDescription; &#xD;
            &#xD;
            if ( responseStatus == 'A000') {&#xD;
            &#xD;
            getPatientSuccess = true; &#xD;
            Status = "Success" ;&#xD;
            Message += "Successfully retrieved Patient OID\n" ; &#xD;
            //log output has to be masked if successful as the response to the getPatient by ID service returns a lot of PII in the response SOAP object &#xD;
            logger.info("iPM.WS :: Response from Get Patient by Patient id  web Service was :\n" + "AOOO - Success\n Actual response message suppressed as it contains PII\n"  + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
            &#xD;
            }&#xD;
            else {&#xD;
            Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
            Message += "Could not retrieve Patient OID from ACTPAS web service.\nUnable to create referral. Web service message was :\n" + responseMessage ;    &#xD;
            //note this next line is safe as the error responses only contain the message UID, error response code and error response message - no PII&#xD;
            logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
            }&#xD;
            &#xD;
            &#xD;
            // if no errors try and add referral &#xD;
            &#xD;
            if (getPatientSuccess) &#xD;
            {&#xD;
                webservice.setSoapAction(addReferralWSAction);&#xD;
                messageID =  new java.util.UUID.randomUUID().toString(); // unique ID for each request in the series &#xD;
                //logger.info("\n\n\nin the loop to try and add a referral\n");&#xD;
                &#xD;
					webserviceRequest = &#xD;
						&lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace" &#xD;
							xmlns:isof1="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary" &#xD;
							xmlns:isof2="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts" &#xD;
							xmlns:isof3="http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts"&#xD;
							xmlns:i="http://www.w3.org/2001/XMLSchema-instance"&gt;&#xD;
&#xD;
							   &lt;soapenv:Header/&gt;&#xD;
							   &lt;soapenv:Body&gt;&#xD;
								  &lt;isof:AddReferral&gt;&#xD;
									 &#xD;
&#xD;
									 &lt;isof:Credential&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:Department&gt;WEBSRV&lt;/isof1:Department&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:Name&gt;{actpasUserName}&lt;/isof1:Name&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:Password&gt;{actpasPassword}&lt;/isof1:Password&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:UserId&gt;{actpasUserName}&lt;/isof1:UserId&gt;&#xD;
										&#xD;
&#xD;
										&lt;isof1:Workstation&gt;WEBSERVICES&lt;/isof1:Workstation&gt;&#xD;
									 &lt;/isof:Credential&gt;                         &#xD;
									 &#xD;
&#xD;
									 &lt;isof:referral&gt;           &#xD;
									   &lt;!--mandatory field - this is multicampus--&gt; &#xD;
									   &#xD;
&#xD;
										&lt;isof2:ACCApprovalStatus i:nil="true"/&gt;&#xD;
										&lt;isof2:ACCType i:nil="true"/&gt;&#xD;
										&lt;isof2:AccClaimNumber i:nil="true"/&gt;&#xD;
										&lt;isof2:AccNumber i:nil="true"/&gt;&#xD;
										&lt;isof2:AccidentRelatedStatus i:nil="true"/&gt;&#xD;
										&lt;isof2:ActivityType i:nil="true"/&gt;&#xD;
										&lt;isof2:AdministrativeCategory i:nil="true"/&gt;&#xD;
										&lt;isof2:Authorisation i:nil="true"/&gt;&#xD;
										&lt;isof2:AuthorisedByClinician i:nil="true"/&gt;&#xD;
										&lt;isof2:AuthrDttm i:nil="true"/&gt;&#xD;
										&lt;isof2:CancdDttm i:nil="true"/&gt;&#xD;
										&lt;isof2:ClosrDate i:nil="true"/&gt;&#xD;
										&lt;isof2:Comments i:nil="true"/&gt;&#xD;
										&lt;isof2:ExpiryDttm i:nil="true"/&gt;&#xD;
										&lt;isof2:FundingArrangement i:nil="true"/&gt;&#xD;
										&lt;isof2:FundingProgram i:nil="true"/&gt;&#xD;
										&lt;isof2:FundingSubprogram i:nil="true"/&gt;&#xD;
										&lt;isof2:OrdtaDttm i:nil="true"/&gt;         &#xD;
										&lt;isof2:OwnerHealthOrganisation&gt;&#xD;
										   &lt;isof3:Code&gt;{OwnerHealthOrganisation}&lt;/isof3:Code&gt;                                  &#xD;
										&lt;/isof2:OwnerHealthOrganisation&gt;&#xD;
										&lt;isof2:ParntOid i:nil="true"/&gt;&#xD;
										&lt;isof2:PatientOid&gt;{PatientOID}&lt;/isof2:PatientOid&gt;                                    &#xD;
										&lt;isof2:RecvdDttm&gt;{RecvdDttm}&lt;/isof2:RecvdDttm&gt;&#xD;
										&lt;isof2:ReferralCancellationReason i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferralClosureReason i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferralOid i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferralOutcome i:nil="true"/&gt;           &#xD;
										&lt;isof2:ReferralReason&gt;&#xD;
										   &lt;isof3:Code&gt;{ReferralReason}&lt;/isof3:Code&gt;&#xD;
										&lt;/isof2:ReferralReason&gt;     &#xD;
										&lt;isof2:ReferralStatus i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferralType&gt;&#xD;
											&lt;isof3:Code&gt;{ReferralType}&lt;/isof3:Code&gt;&#xD;
										&lt;/isof2:ReferralType&gt;&#xD;
										&lt;isof2:ReferredByClinician i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferredBySpecialty i:nil="true"/&gt;&#xD;
&#xD;
&#xD;
										&lt;isof2:ReferredToClinician i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferredToHealthOrganisation i:nil="true"/&gt;&#xD;
										&lt;isof2:ReferredToSpecialty  i:nil="true"/&gt;										&#xD;
										&lt;isof2:ReferredToStaffTeam i:nil="true"/&gt;									&#xD;
										&lt;isof2:SourceofReferral&gt;&#xD;
										   &lt;isof3:Code&gt;{SourceofReferral}&lt;/isof3:Code&gt;          &#xD;
										&lt;/isof2:SourceofReferral&gt;&#xD;
										&lt;isof2:Urgency i:nil="true"/&gt;&#xD;
									 &lt;/isof:referral&gt;&#xD;
								  &lt;/isof:AddReferral&gt;&#xD;
							   &lt;/soapenv:Body&gt;&#xD;
						&lt;/soapenv:Envelope&gt; ;&#xD;
                   &#xD;
					&#xD;
&#xD;
                &#xD;
                &#xD;
                &#xD;
                var soapenv = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
				var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance") ; &#xD;
                var isof = new Namespace("http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"); &#xD;
                var isof1 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary");&#xD;
                var isof2 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts");&#xD;
                var isof3 = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
                var xmlReferral = webserviceRequest.soapenv::Body..isof::AddReferral..isof::referral;  // this is just to make the adding of childern to the soap body a little less cumbersome in terms of parent/child nodes&#xD;
&#xD;
                &#xD;
                //need to test if there is a value and insert it as new child nodes.&#xD;
				// this is currently inserting the value corectly for referred to staff team and referred to clinician, but not for referred to specialty &#xD;
				//and is also not yet removing the nil = true value&#xD;
&#xD;
                &#xD;
                if ( SourceofReferral !="6") {&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
					xmlReferral.isof2::ReferredByClinician.isof3::Code += ReferredByClinician ; &#xD;
					delete xmlReferral.isof2::ReferredByClinician.@i::nil ;&#xD;
				}&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
                if (ReferredToClinician ) {&#xD;
                    xmlReferral.isof2::ReferredToClinician.isof3::Code += ReferredToClinician ; &#xD;
					delete  xmlReferral.isof2::ReferredToClinician.@i::nil ;&#xD;
                }&#xD;
                if (ReferredToSpecialty) {&#xD;
                    xmlReferral.isof2::ReferredToSpecialty.isof3::Code += ReferredToSpecialty ;&#xD;
					delete  xmlReferral.isof2::ReferredToSpecialty.@i::nil ;&#xD;
                }&#xD;
                if (ReferredToHealthOrganisation) {&#xD;
                    xmlReferral.isof2::ReferredToHealthOrganisation.isof3::Code += ReferredToHealthOrganisation ; &#xD;
					delete  xmlReferral.isof2::ReferredToHealthOrganisation.@i::nil ;&#xD;
                }&#xD;
                if (ReferredToStaffTeam) {&#xD;
                    xmlReferral.isof2::ReferredToStaffTeam.isof3::Code += ReferredToStaffTeam ; &#xD;
					// remove the nil attribute so the webservice processes &#xD;
					delete xmlReferral.isof2::ReferredToStaffTeam.@i::nil ; &#xD;
                }&#xD;
                &#xD;
                // the following are used to mask the password output in the concerto log, using the string value rather than the e4x literal or we would wind up changing the actual XML element value             &#xD;
                var logMaskedEntryString = webserviceRequest.toString().replace(/&lt;isof1:Password&gt;(.+?)&lt;\/isof1:Password&gt;/, "&lt;isof1:Password&gt;Masked User Entered Password&lt;/isof1:Password&gt;" ) ; &#xD;
                //no PII in the request message so this is safe - it's all coded data   &#xD;
                logger.info("iPM.WS :: Calling Add Referral  Service. Portal User ID is : " + portalUserID + "\n Message ID is " + messageID + "\n Request Message is :\n" + logMaskedEntryString);    &#xD;
                                   &#xD;
                var webserviceResponse = webservice.call(webserviceRequest); &#xD;
                default xml namespace = "";&#xD;
            &#xD;
                var s = new Namespace("http://schemas.xmlsoap.org/soap/envelope/");&#xD;
                var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary");&#xD;
                var i = new Namespace("http://www.w3.org/2001/XMLSchema-instance");&#xD;
            &#xD;
                        &#xD;
                var xmlInfo = webserviceResponse.s::Body.elements() ;   &#xD;
                var responseUID =  webserviceResponse.s::Header[0].*[0]; &#xD;
                var responseStatus = xmlInfo..a::ResultCode ; &#xD;
                var responseMessage = xmlInfo..a::ResultDescription ; &#xD;
                //no PII in the response for this request type - only a UID, status code and status message &#xD;
                logger.info("iPM.WS :: Response from web Service was :\n" + webserviceResponse + "\n Response Unique Message ID was : " + responseUID + "\n relates to Source Message UID : " + messageID) ; &#xD;
                &#xD;
                &#xD;
                if ( responseStatus == 'A000') {&#xD;
                &#xD;
                addReferralSuccess = true ; &#xD;
                Status = "Success" ;&#xD;
                Message = "\n Successfully added a new referral \n" ; &#xD;
                &#xD;
                &#xD;
                }&#xD;
                else {&#xD;
                Status = "Error. Error code from iPM Web Service was : "  + responseStatus ; &#xD;
                Message = "Could not Create a new referral. Web service error message was :\n" + responseMessage ;                  &#xD;
                }&#xD;
                &#xD;
&#xD;
            &#xD;
            &#xD;
            &#xD;
            &#xD;
            } // end of adding a referral &#xD;
            &#xD;
            // if no errors try and retrieve the OID for the referral &#xD;
            &#xD;
            // cut from here &#xD;
            //just doing this for testing until the database transaction log issue is resolved by SSICT &#xD;
            if  (addReferralSuccess) {&#xD;
                &#xD;
                    webservice.setSoapAction(getReferralsWSAction);&#xD;
                    referralsMessageID =  new java.util.UUID.randomUUID().toString(); // unique ID for each request in the series &#xD;
                    &#xD;
                    &#xD;
                    //note this message type will use the optional from date time parameter - with the date die set to the recievedDttm we used to create the referral in the prior step&#xD;
                    // this should reduce the numebr of referrals in the response that we have to iterate over &#xD;
                    webserviceRequest = &lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:isof="http://iSOFT.ANZ.PatientManagerService.ReferralNamespace"&gt;&#xD;
                                               &lt;soapenv:Header/&gt;&#xD;
                                               &lt;soapenv:Body&gt;&#xD;
                                                  &lt;isof:GetReferralByPatientOid&gt;&#xD;
                                                     &#xD;
                                                     &lt;isof:PatientOid&gt;{PatientOID}&lt;/isof:PatientOid&gt;&#xD;
                                                     &lt;isof:FromDttm&gt;{RecvdDttm}&lt;/isof:FromDttm&gt;&#xD;
                                                     &lt;isof:ToDttm&gt;{RecvdDttm}&lt;/isof:ToDttm&gt;&#xD;
                                                    &#xD;
                                                  &lt;/isof:GetReferralByPatientOid&gt;&#xD;
                                               &lt;/soapenv:Body&gt;&#xD;
                                            &lt;/soapenv:Envelope&gt; ; &#xD;
&#xD;
                    //no PII in the message for this service call - all coded data &#xD;
                    logger.info("iPM.WS:: Calling to get Patient Referrals by patient OID. Portal user ID : " + portalUserID + "\nUnique Source  Message ID  : " + referralsMessageID + "\n Relates to Patient OID from message : " + messageID + "\n Request message is : \n" + webserviceRequest +"\n *******END OF REQUEST TRANSACTION*******\n");&#xD;
                                    &#xD;
                    var webserviceResponse = webservice.call(webserviceRequest);&#xD;
&#xD;
                    // the namespaces change in different response types hence we need to set them up again : &#xD;
                    var a = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts.ReferralDataContracts") ; &#xD;
                    var b = new Namespace("http://schemas.datacontract.org/2004/07/iSOFT.ANZ.PatientManagerServiceLibrary.CommonDataContracts");&#xD;
                    &#xD;
                    var referralsXML = webserviceResponse.s::Body.elements() ; &#xD;
                    &#xD;
                    var Header =  webserviceResponse.s::Header[0].*[0];         // UID for the response message from the web service is contained within the header &#xD;
&#xD;
                    var resultCode = referralsXML..a::ResultCode ; &#xD;
                    var resultMessage = referralsXML..a::ResultDescription ; &#xD;
                    &#xD;
                    var referralsList = "" ; &#xD;
&#xD;
                    logger.info("iPM.WS :: Response from Referrals Service was :" + webserviceResponse + "\n Response Unique Message ID was : " + Header + "\nrelates to Source Message ID :" + referralsMessageID + "\n *****END OF RESPONSE TRANSACTION ********\n") ; &#xD;
                    if (referralsXML..a::ResultCode == 'A000'){&#xD;
                        //iPM use the same namespace object to hold all the referrals as they do for each individual referral&#xD;
                        //to avoid needing to test for null for the first array element we need to extract all of the outpatient appointment descendents that are one level below the first : &#xD;
                        &#xD;
                        referralsList = referralsXML..a::Referral..a::Referral;  // there can be more than one per response&#xD;
                        //test to see if this happens - we may simply get an E004 or E008 in which case we can remove this logic &#xD;
                        &#xD;
                        if (referralsList.length() == 0 ) {&#xD;
                        // if there were no referrals returned in the message response return an error message to the user &#xD;
                        Status = "Error." ; &#xD;
                        Message = "Referral was added but we could not retrieve the OID from the ACTPAS web service. You may need to manually resolve this issue. " ; &#xD;
                        }&#xD;
                        else{&#xD;
                            //there is at lease one referrral in the response now we need to process it and see if we find a match for the values used when creating the referral in the earlier steps &#xD;
                                     &#xD;
                                    var referralRecvdDttm = ""; &#xD;
                                    var referralSourceofReferral = ""; &#xD;
                                    var referralReferralReason = "" ; &#xD;
                                    var referralReferralTypeCode = "" ; &#xD;
                                    var referralReferredToClinicianCode = "" ;   // currently there looks to be a bug in web service processing - leave out for now &#xD;
                                    var referralReferredToSpecialtyCode = "" ;   // same &#xD;
                                    var referralReferredToHealthOrganisation = "" ;  // web service func spec says this is one of the mandatory check fields but either the doc is wrong or the web service is using the wrong field as this is ignored in testing &#xD;
                                    var referralOwnerHealthOrganisation = "" ;  // however this field is not listed in the interface processing rules but will result in error if not specific AND will result in rejection ala the funcitonal specificaiton w.r.t. the referred to health org &#xD;
                                    &#xD;
                                    for (var i = 0 ; i &lt; referralsList.length() ; i++) &#xD;
                                    {&#xD;
                                        &#xD;
                                        &#xD;
                                        referralRecvdDttm = referralsList[i]..a::RecvdDttm;&#xD;
                                        referralReferralReason = referralsList[i]..a::ReferralReason..b::Code ;&#xD;
                                        referralReferralTypeCode = referralsList[i]..a::ReferralType..b::Code;&#xD;
                                        referralSourceofReferral = referralsList[i]..a::SourceofReferral..b::Code;&#xD;
                                        referralReferredToClinicianCode = referralsList[i]..a::ReferredToClinician..b::Code[0] ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
                                        referralReferredToSpecialtyCode = referralsList[i]..a::ReferredToSpecialty..b::Code ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
                                        referralReferredToHealthOrganisation = referralsList[i]..a::ReferredToHealthOrganisation..b::Code ; // as at 11 Aug 2014 DO NOT USE in conditional  - bug in web service processing at iPM end &#xD;
                                        referralOwnerHealthOrganisation =  referralsList[i]..a::OwnerHealthOrganisation..b::Code ;&#xD;
                                        &#xD;
                                        // test to see if this row matches our input variables &#xD;
                                        &#xD;
                                        if ( referralRecvdDttm == RecvdDttm  &amp;&amp; referralSourceofReferral == SourceofReferral  &amp;&amp;  referralReferralReason == ReferralReason &amp;&amp; referralReferralTypeCode == ReferralType  &amp;&amp; referralOwnerHealthOrganisation == OwnerHealthOrganisation) {&#xD;
                                            referralReferralOID =  referralsList[i]..a::ReferralOid ; &#xD;
                                        }   &#xD;
                                        &#xD;
                                        &#xD;
                                        &#xD;
                                    } //loop checking to find the OID &#xD;
                                    &#xD;
                                    if (referralReferralOID) {&#xD;
                            &#xD;
                                        Status = "Success AOH000" ; &#xD;
                                        Message = "Please click here to continue" ; &#xD;
                                        &#xD;
                                    }&#xD;
                                    else {&#xD;
                                        Status = "Error E0H0001" ; &#xD;
                                        Message = "Referral Created but no matching OID was retrieved from the web service - this will require manual resolution" ; &#xD;
                                    &#xD;
                                    }&#xD;
                                    &#xD;
                            } // end of else condition - we recieved referrals data back &#xD;
                        &#xD;
                        &#xD;
                    } //  end if result code A000 - success calling web service to get referrals &#xD;
                    else {&#xD;
                    //we got an error message from the retreive referrals web service, but previously got success to add the referral so we need to tell this to the user &#xD;
                    Status = "EOH0002" ; &#xD;
                    Message = "Referral Created but the Webservice could not return Referral OID. Error Code was : " + resultCode + "\n Message was : " + resultMessage ; &#xD;
                &#xD;
                &#xD;
                    }&#xD;
                &#xD;
                &#xD;
                } // end add referral success if block &#xD;
            //to here &#xD;
            &#xD;
            &#xD;
            &#xD;
            } // try &#xD;
            catch (ex) &#xD;
            {&#xD;
                //this needs to be updated to account for the situation where the referral is created but the call to get the OID experiences a timeout or other exception&#xD;
            &#xD;
                logger.info("trapped an exception info as follows\n") ; &#xD;
                logger.info(ex.toString()); &#xD;
                &#xD;
                //add condition checking for the type of exception as well as the boolean state to determine how far through the processing the error was encountered &#xD;
                // and return a more meaningful message to the end user &#xD;
                Status = "Error - encountered an exception" ; &#xD;
                Message = "Could not complete action due to an unexpected exception"  ; &#xD;
            &#xD;
            &#xD;
            &#xD;
            &#xD;
            } &#xD;
            &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        &#xD;
        } // end web service processing if there were no initial errors and the user is a member of the ACTPAS users group &#xD;
    } // end of the else statement that determines if the user was choosing an existing referral vs. creating a new one &#xD;
    &#xD;
    //regardless of success or failure return the following to the caller as the result set  - if status is not AOH000 the status code &#xD;
    // and the message will describe the kind of error that has been envcountered &#xD;
    &#xD;
    row.Status = Status;&#xD;
    row.Message = Message; &#xD;
    row.ReferralOID = referralReferralOID ; &#xD;
    row.pasReferralIdNamespace = pasReferralIdNamespace ; &#xD;
     &#xD;
    &#xD;
    rows[0] = row;&#xD;
    rows;&#xD;
    &#xD;
        }}&#xD;
AS Results</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Create / Link</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Choose Existing Referral ID ------</name>
				<index>0</index>
				<default-value />
				<display-name>Choose Existing Referral ID ------</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Choose ID blank spacer</name>
				<index>1</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>existingReferralOID</name>
				<index>2</index>
				<default-value />
				<display-name>Existing Referral OID</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Referral List")%&gt;&lt;%exec config.setReturnValueName("1")%&gt;&lt;%exec config.setDisplayValueName("1")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Referral OID blank spacer</name>
				<index>3</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Copy of fillerDummy3</name>
				<index>4</index>
				<default-value />
				<display-name>OR :</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Or Blank Spacer</name>
				<index>5</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Create a New Referral Label</name>
				<index>6</index>
				<default-value />
				<display-name>Create a New Referral :</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>fillerdummy5</name>
				<index>7</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>RecvdDttm</name>
				<index>8</index>
				<default-value />
				<display-name>Date Received *</display-name>
				<input-type>Date</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setInputDateFormat("d-M-yyyy")%&gt;&lt;%exec config.setOutputDateFormat("yyyy-MM-dd")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 6</name>
				<index>9</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferralReason</name>
				<index>10</index>
				<default-value />
				<display-name>Reason *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'REASN' and [ARCHV_FLAG] NOT IN ('D','Y') \r\nORDER BY DESCRIPTION")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 4</name>
				<index>11</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>SourceofReferral</name>
				<index>12</index>
				<default-value />
				<display-name>Source of Referral *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'SORRF' and [ARCHV_FLAG] NOT IN ('D','Y') \r\n --WHERE MAIN_CODE = 'REASN'\r\nORDER BY DESCRIPTION")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 5</name>
				<index>13</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferralType</name>
				<index>14</index>
				<default-value />
				<display-name>ACTPAS Referral Type *</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DESCRIPTION\r\n      ,MAIN_CODE\r\n FROM [ACTPAS_CDR_VIEWS].[dbo].[REFERENCE_VALUES]\r\n WHERE [RFVDM_CODE] = 'RETYP' and [ARCHV_FLAG] NOT IN ('D','Y') \r\nORDER BY DESCRIPTION")%&gt;&lt;%exec config.setOptionColumnName("MAIN_CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler3</name>
				<index>15</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>OwnerHealthOrganisation</name>
				<index>16</index>
				<default-value />
				<display-name>Owner Health Organisation *</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Main Facility")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Location")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 8</name>
				<index>17</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Filler 12</name>
				<index>18</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Additional Fields for CHI</name>
				<index>19</index>
				<default-value />
				<display-name>---Additional  (Optional) Fields for CHI</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank format field 1</name>
				<index>20</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToSpecialty</name>
				<index>21</index>
				<default-value />
				<display-name>Referred To Specialty</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [MAIN_IDENT]\r\n      ,[DESCRIPTION]\r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[SPECIALTIES]\r\n  WHERE [ARCHV_FLAG] NOT IN ('D', 'Y') ")%&gt;&lt;%exec config.setOptionColumnName("MAIN_IDENT")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 9</name>
				<index>22</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredTST</name>
				<index>23</index>
				<default-value />
				<display-name>Referred To Staff Team</display-name>
				<input-type>SQL Drop Down List</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT [DESCRIPTION]\r\n      ,[CODE]\r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[STAFF_TEAMS]")%&gt;&lt;%exec config.setOptionColumnName("CODE")%&gt;&lt;%exec config.setDisplayColumnName("DESCRIPTION")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 3</name>
				<index>24</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredByClinician</name>
				<index>25</index>
				<default-value />
				<display-name>Referred By Clinician</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("ACTPAS Clinician ID")%&gt;&lt;%exec config.setReturnValueName("Clinician ID")%&gt;&lt;%exec config.setDisplayValueName("Clinician")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 6</name>
				<index>26</index>
				<default-value />
				<display-name />
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredBySpecialty</name>
				<index>27</index>
				<default-value />
				<display-name>Referred By Specialty</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/actpas_cdr_views")%&gt;&lt;%exec config.setSQLQuery("SELECT DISTINCT SpecialtyCode, Specialty\r\n      \r\n  FROM [ACTPAS_CDR_VIEWS].[dbo].[Orion_CliniciansSpecialty]")%&gt;&lt;%exec config.setOptionColumnName("SpecialtyCode")%&gt;&lt;%exec config.setDisplayColumnName("Specialty")%&gt;&lt;%exec config.setIncludeBlankOption("true")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Blank 7</name>
				<index>28</index>
				<default-value />
				<display-name />
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred To Label</name>
				<index>29</index>
				<default-value />
				<display-name>--- Additional (Optional) Fields for Acute</display-name>
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 5</name>
				<index>30</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToClinician</name>
				<index>31</index>
				<default-value />
				<display-name>Referred To Clinician</display-name>
				<input-type>Popup Search</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("ACTPAS Clinician ID")%&gt;&lt;%exec config.setReturnValueName("Clinician ID")%&gt;&lt;%exec config.setDisplayValueName("Clinician")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Filler 7</name>
				<index>32</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>ReferredToHealthOrganisation</name>
				<index>33</index>
				<default-value />
				<display-name>Referred To Health Organisation (?*)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("iPM Web Services Integration")%&gt;&lt;%exec config.setEntryPointName("Get Health Organisations")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Location")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>Test Fields</name>
				<index>34</index>
				<default-value />
				<display-name>The following are just to test/show passing</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>another blank</name>
				<index>35</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>test fields 2</name>
				<index>36</index>
				<default-value />
				<display-name>data values via filters that replace manual selection</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>test field blank 2</name>
				<index>37</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referred to Blank</name>
				<index>38</index>
				<default-value />
				<display-name />
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Patient Id</name>
				<index>39</index>
				<default-value />
				<display-name>Patient Id</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<filter-field>
				<name>blank 15</name>
				<index>40</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referrer Id</name>
				<index>41</index>
				<default-value />
				<display-name>Referrer Id</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 11</name>
				<index>42</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referral Service</name>
				<index>43</index>
				<default-value />
				<display-name>Referral Service (form)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 12</name>
				<index>44</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Referral Type</name>
				<index>45</index>
				<default-value />
				<display-name>Referral Type (form)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 13</name>
				<index>46</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Reciever Code</name>
				<index>47</index>
				<default-value />
				<display-name>Reciever Code (form)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Blank 14</name>
				<index>48</index>
				<default-value />
				<display-name />
				<input-type>HTML</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Source Id</name>
				<index>49</index>
				<default-value />
				<display-name>Source Id (form)</display-name>
				<input-type>Hidden Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message>Enter Referral details above and press "Create / Link"</initial-message>
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<entry-point>
				<name>Open New Referral Request</name>
				<application>
					<name>Referral Request</name>
				</application>
				<secure-enabled>false</secure-enabled>
			</entry-point>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>pasReferralId</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>pasReferralIdNamespace</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Status</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>Message</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>if (row.get(0) != "Success AOH000") {&#xD;
alert("There are errors requiring your attention before you can continue") ;&#xD;
&#xD;
}&#xD;
&#xD;
else {&#xD;
&#xD;
// Concerto object to redirect to a referral request entry point to create a new clinical referral&#xD;
//this stuff is the more supported-by-api way of doing it now  : &#xD;
&#xD;
//var requestApplication = new Application("Referral Request", "New CHI Referral ACTPAS TEST");&#xD;
&#xD;
var requestApplication = new Application("Referral Request", "Open New Referral Request");&#xD;
&#xD;
requestApplication.addQueryParameter('referralService', 'community_health');&#xD;
requestApplication.addQueryParameter('referralType', 'int_cr_internal');&#xD;
requestApplication.addQueryParameter('pasReferralId', row.get(2));&#xD;
//use the singleton instance reference to the Concerto object : &#xD;
&#xD;
concerto.openApplication(requestApplication); &#xD;
&#xD;
//return; &#xD;
		&#xD;
}</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>true</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Referral List View</name>
		<data-source-name>java:comp/env/jdbc/actpas_cdr_views</data-source-name>
		<description>FM 22DEC2014 : Generic search to return list of comminty referrals information via the ACTPAS CDR VIews :: Orion_CommunityReferrals and  Orion_Clinicians &#xD;
Note this view may be deprecated by SSICT and require update</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>SELECT ocr.referralID as 'Referral ID'&#xD;
      , CAST( ocr.RecievedDate AS datetime) as 'Recieved Date' &#xD;
      , ocr.Priority as 'Referral Priority' &#xD;
      , ocr.ReferredToTeam as 'Referred to Staff Team'&#xD;
      , UPPER( ISNULL(ocl.familyname,'') )  +  ', ' + ISNULL(ocl.givenname,'') + '.' + ISNULL(ocl.title, '')  + '.' as 'Referred To Clinician' &#xD;
      , ocr.ReferredtoSpecialty&#xD;
      , UPPER( ISNULL(cwsr.SURNAME, '') ) + ', ' + ISNULL(cwsr.firstName, '') + '.' + ISNULL(cwsr.title, '') +'.' as 'Referred By Clinician'&#xD;
      , ocr.CompletedDate as 'Completed At' &#xD;
      , ocr.CancelledDate as 'Cancelled On' &#xD;
      , ocr.ReferralType as 'Referral Type' &#xD;
      , ocr.comment as 'Comment'&#xD;
      , ocr.ExpiryDate as 'Expiry Date' &#xD;
      , ocr.LastModifiedBy as 'Last Modified By' &#xD;
      , ocr.Facility as 'Owner Facility'&#xD;
  FROM ACTPAS_CDR_VIEWS.dbo.Orion_CWSReferrals ocr left join ACTPAS_CDR_VIEWS.dbo.Orion_CWSClinicians ocl &#xD;
	ON  ocr.ReferredToClinicianID = ocl.ClinicianID&#xD;
  left join ACTPAS_CDR_VIEWS.dbo.Orion_CWSReferrers cwsr  &#xD;
	ON cwsr.pcpClinicianId = ocr.ReferredByID&#xD;
	WHERE  ocr.PatientId = '&lt;%=(js)get("patientIdentifier")%&gt;' OR ocr.PatientId = '&lt;%=(js)Context.get("Patient.Id.MRN")%&gt;'</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>patientIdentifier</name>
				<index>0</index>
				<default-value />
				<display-name>patientIdentifier</display-name>
				<input-type>Text Field</input-type>
				<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>1</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>RecievedDate</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>3</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>4</name>
				<index>3</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>5</name>
				<index>4</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>6</name>
				<index>5</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>7</name>
				<index>6</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>8</name>
				<index>7</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>9</name>
				<index>8</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>10</name>
				<index>9</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>11</name>
				<index>10</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>12</name>
				<index>11</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)DateFormat.format(value, "dd/MM/yyyy")%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>13</name>
				<index>12</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<result-column>
				<name>14</name>
				<index>13</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>true</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<search>
		<name>Use Update Notification</name>
		<data-source-name>java:comp/env/jdbc/osgi_ws</data-source-name>
		<description>This is notification only search - it is used to advise the user that they should link the ACTPAS referral via the workflow action of "Update PAS ID" rather than from the referral registration screen - this is because testing has shown that for ACT workflows the required data is not available to automatically populate at the pre-registration phase and would require user re-entry.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>select version from {{com.orionhealth.jdbc.integration.JdbcIntegrationDriverVersions.driverVersion}} as version</query-string>
		<search-filter>
			<auto-search>false</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>Message</name>
				<index>0</index>
				<default-value />
				<display-name>NB : You must use the "Update PAS ID" feature to link the ACTPAS referral to this referral</display-name>
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto Privacy Override</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>Integration Driver Version</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>doNothing</row-select-action-type>
			<select-row-action />
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<system-object>false</system-object>
</application>
<application>
	<name>Task List</name>
	<access-controller>
		<allowed-location>
			<name>Everywhere</name>
		</allowed-location>
	</access-controller>
	<application-variable>
		<name>PatientIdContextItemName</name>
		<protected>false</protected>
		<value>Patient.Id.MRN</value>
	</application-variable>
	<application-variable>
		<name>ProviderSearch.DBType</name>
		<protected>false</protected>
		<value>SQL</value>
	</application-variable>
	<application-variable>
		<name>ServerBase</name>
		<protected>false</protected>
		<value>/tasklist</value>
	</application-variable>
	<application-variable>
		<name>TaskListUrl</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.ServerBase%&gt;/TaskList.action</value>
	</application-variable>
	<application-variable>
		<name>dGateAppName</name>
		<protected>false</protected>
		<value>OHCCM</value>
	</application-variable>
	<application-variable>
		<name>dGateAppVersion</name>
		<protected>false</protected>
		<value>2.4</value>
	</application-variable>
	<application-variable>
		<name>dGateSiteId</name>
		<protected>false</protected>
		<value />
	</application-variable>
	<application-variable>
		<name>help</name>
		<protected>false</protected>
		<value>&lt;%=AppVars.helpServer%&gt;/dGate/redirect?application=&lt;%=AppVars.dGateAppName%&gt;&amp;version=&lt;%=AppVars.dGateAppVersion%&gt;&amp;locale=&lt;%=User.SelectedLanguage%&gt;&amp;siteId=&lt;%=AppVars.dGateSiteId%&gt;&amp;page=</value>
	</application-variable>
	<application-variable>
		<name>helpServer</name>
		<protected>false</protected>
		<value>http://doki.orionhealth.com</value>
	</application-variable>
	<application-variable>
		<name>patientId</name>
		<protected>false</protected>
		<value>&lt;%if SecureInformation &lt;&gt; null &amp;&amp; SecureInformation.patientId &lt;&gt; ""%&gt;&lt;%=SecureInformation.patientId%&gt;&lt;%elseif Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</value>
	</application-variable>
	<application-variable>
		<name>patientNamespace</name>
		<protected>false</protected>
		<value>OHCP</value>
	</application-variable>
	<application-variable>
		<name>taskListHomeApplication</name>
		<protected>false</protected>
		<value>Healthcare pathways - CCR</value>
	</application-variable>
	<application-variable>
		<name>taskListHomeEntryPoint</name>
		<protected>false</protected>
		<value>CDV_Patient Overview</value>
	</application-variable>
	<application-variable>
		<name>userNamespace</name>
		<protected>false</protected>
		<value>clinical-portal-user</value>
	</application-variable>
	<default-allowed-user-agent>Firefox</default-allowed-user-agent>
	<default-allowed-user-agent>IE</default-allowed-user-agent>
	<default-help-redirection>
		<index>0</index>
		<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
		<description />
		<method>GET</method>
		<url>&lt;%=AppVars.help%&gt;CaseManHome</url>
	</default-help-redirection>
	<description>Task listing application for workflow and tasks&#xD;
&#xD;
The following variables need to be specified on site:&#xD;
&#xD;
* PatientIdContextItemName - The name of the PatientId Context used within the solution, it can have one of the following values(Patient.Id.MRN, Patient.Id.MPI,Patient.Id.NationalIdNumber, Patient.Id.Alternate)&#xD;
&#xD;
&lt;%if Context.Patient.Id.MRN%&gt;&lt;%=Context.Patient.Id.MRN%&gt;&lt;%elseif Context.Patient.Id.MPI%&gt;&lt;%=Context.Patient.Id.MPI%&gt;&lt;%elseif Context.Patient.Id.NationalIdNumber%&gt;&lt;%=Context.Patient.Id.NationalIdNumber%&gt;&lt;%elseif Context.Patient.Id.Alternate%&gt;&lt;%=Context.Patient.Id.Alternate%&gt;&lt;%end if%&gt;</description>
	<entry-point>
		<name>Open Single Task</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<allowed-custom-user-agent>iPad</allowed-custom-user-agent>
		<description>PSG Facing API Entry point that Opens a Task while hiding the visible elements of the task list. This is considered to be a Public API for use by PSG generic searches.&#xD;
   &#xD;
   This can only be called when a patient is in context and requires that the following be avaliable from secure information&#xD;
   * taskIdentifier - The id of the task to be opened</description>
		<display-name>Open Task (API)</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;OpenSingleTaskAPI</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>POST</method>
				<query-parameter>
					<name>patientNamespace</name>
					<index>0</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>taskListHomeApplication</name>
					<index>2</index>
					<value>&lt;%=AppVars.taskListHomeApplication%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>taskListHomeEntryPoint</name>
					<index>3</index>
					<value>&lt;%=AppVars.taskListHomeEntryPoint%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>showCompleted</name>
					<index>4</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>filterByRole</name>
					<index>5</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>hideList</name>
					<index>6</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>selectedTaskId</name>
					<index>7</index>
					<value>&lt;%=SecureInformation.taskIdentifier%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>formMode</name>
					<index>8</index>
					<value>view</value>
				</query-parameter>
				<redirection-key>cWorkflow</redirection-key>
				<url>&lt;%=AppVars.TaskListUrl%&gt;</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Patient Task List</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
			<allowed-location>
				<name>Everywhere</name>
			</allowed-location>
			<denied-group>
				<name>CCR CHI1</name>
			</denied-group>
			<denied-group>
				<name>CCR CHI2</name>
			</denied-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description>List a user's document-related tasks.</description>
		<display-name>Patient Task List</display-name>
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ThePatientTaskList</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/XP Style/applications/toolbar/edit/edit.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description>groupOption parameters include: ENROLLED_PATHWAY | DUE_DATE</description>
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>patientNamespace</name>
					<index>0</index>
					<value>&lt;%=AppVars.patientNamespace%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>patientId</name>
					<index>1</index>
					<value>&lt;%=AppVars.patientId%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>taskListHomeApplication</name>
					<index>2</index>
					<value>&lt;%=AppVars.taskListHomeApplication%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>taskListHomeEntryPoint</name>
					<index>3</index>
					<value>&lt;%=AppVars.taskListHomeEntryPoint%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>showCompleted</name>
					<index>4</index>
					<value>true</value>
				</query-parameter>
				<query-parameter>
					<name>filterByRole</name>
					<index>5</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>currentDateTime</name>
					<index>6</index>
					<value>&lt;%var calendar = new java.util.Calendar()%&gt;&lt;%=DateFormat.format(calendar.getTime(), "yyyy-MM-dd'T'HH:mm:ss")%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>hideList</name>
					<index>7</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>groupOption</name>
					<index>8</index>
					<value>ENROLLED_PATHWAY</value>
				</query-parameter>
				<query-parameter>
					<name>fromCdvTree</name>
					<index>9</index>
					<value>false</value>
				</query-parameter>
				<query-parameter>
					<name>maxTasks</name>
					<index>10</index>
					<value>50</value>
				</query-parameter>
				<query-parameter>
					<name>minCompletedTasks</name>
					<index>11</index>
					<value>5</value>
				</query-parameter>
				<redirection-key>cWorkflow</redirection-key>
				<url>&lt;%=AppVars.TaskListUrl%&gt;</url>
			</redirection>
		</redirection-script>
		<secure-enabled>true</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Provider Search</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ProviderSearch</url>
		</help-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<encryption-method>Concerto 4.x Security</encryption-method>
				<method>GET</method>
				<query-parameter>
					<name>applicationName</name>
					<index>0</index>
					<value>Healthcare pathways - CCR ACTPAS</value>
				</query-parameter>
				<query-parameter>
					<name>genericSearchName</name>
					<index>1</index>
					<value>Community User Search</value>
				</query-parameter>
				<query-parameter>
					<name>editReadRoles</name>
					<index>2</index>
					<value>&lt;%=Request.editReadRoles%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>noAccessRoles</name>
					<index>3</index>
					<value>&lt;%=Request.noAccessRoles%&gt;</value>
				</query-parameter>
				<query-parameter>
					<name>permissive</name>
					<index>4</index>
					<value>&lt;%=Request.permissive%&gt;</value>
				</query-parameter>
				<redirection-key>Local User Key</redirection-key>
				<url>sqlSearch/SQLSearch.htm</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<entry-point>
		<name>Tasks Search</name>
		<access-controller>
			<allowed-group>
				<name>Generic Community Clinician</name>
			</allowed-group>
		</access-controller>
		<allow-custom-user-agents>false</allow-custom-user-agents>
		<allowed-custom-user-agent>Firefox</allowed-custom-user-agent>
		<allowed-custom-user-agent>IE</allowed-custom-user-agent>
		<description />
		<display-name />
		<help-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>&lt;%=AppVars.help%&gt;ViewingSearchesofTasks</url>
		</help-redirection>
		<icon-redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<method>GET</method>
			<url>/concerto/icons/search/AgencySearch.gif</url>
		</icon-redirection>
		<permit-user-override>false</permit-user-override>
		<reauthentication-required>false</reauthentication-required>
		<redirection-script>
			<redirection>
				<index>0</index>
				<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
				<description />
				<method>GET</method>
				<query-parameter>
					<name>maxRowsPerPage</name>
					<index>0</index>
					<value>10</value>
				</query-parameter>
				<url>&lt;%=AppVars.ServerBase%&gt;/TasksSearch.action</url>
			</redirection>
		</redirection-script>
		<secure-enabled>false</secure-enabled>
	</entry-point>
	<login-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>GET</method>
			<query-parameter>
				<name>username</name>
				<index>0</index>
				<value>&lt;%=User.userID%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>concertoHome</name>
				<index>1</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>patientIdContextItemName</name>
				<index>2</index>
				<value>&lt;%=AppVars.PatientIdContextItemName%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userNamespace</name>
				<index>3</index>
				<value>&lt;%=AppVars.userNamespace%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>userSessionId</name>
				<index>4</index>
				<value>&lt;%=UserSessionId%&gt;</value>
			</query-parameter>
			<query-parameter>
				<name>internalConcertoHome</name>
				<index>5</index>
				<value>&lt;%=ConcertoHome%&gt;</value>
			</query-parameter>
			<redirection-key>cWorkflow</redirection-key>
			<url>&lt;%=AppVars.ServerBase%&gt;/TasklistLogin</url>
		</redirection>
	</login-redirection-script>
	<login-timeout>300000</login-timeout>
	<logout-redirection-script>
		<redirection>
			<index>0</index>
			<apply-xsl-stylesheet>false</apply-xsl-stylesheet>
			<description />
			<encryption-method>Concerto 4.x Security</encryption-method>
			<method>GET</method>
			<redirection-key>cWorkflow</redirection-key>
			<url>&lt;%=AppVars.ServerBase%&gt;/TasklistLogout</url>
		</redirection>
	</logout-redirection-script>
	<search>
		<name>Provider Search</name>
		<data-source-name>java:comp/env/jdbc/concerto/Concerto</data-source-name>
		<description>A search for all providers in Concerto.</description>
		<escape-quote-as>''</escape-quote-as>
		<order-by />
		<query-string>select&#xD;
    cUser.name, &#xD;
    CONVERT( nvarchar(256), GivenNames.cValue ),&#xD;
    CONVERT( nvarchar(256), FamilyName.cValue ), &#xD;
    '&lt;%=AppVars.userNamespace%&gt;'&#xD;
from&#xD;
    cUser&#xD;
left outer join &#xD;
    (select &#xD;
        cUser, name, cValue &#xD;
    from &#xD;
        UserAttribute &#xD;
    where &#xD;
        name = 'Full Name.Given Name(s)'&#xD;
    ) GivenNames&#xD;
    on GivenNames.cUser = cUser.uniqueId &#xD;
left outer join &#xD;
    (select &#xD;
    cUser, name, cValue &#xD;
    from &#xD;
        UserAttribute &#xD;
    where &#xD;
        name = 'Full Name.Family Name'&#xD;
    ) &#xD;
    FamilyName &#xD;
    on FamilyName.cUser = cUser.uniqueId&#xD;
where&#xD;
   &lt;%if get("User Id") &lt;&gt; ""%&gt;&#xD;
        cUser.name = '&lt;%=get("User Id")%&gt;' and &#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("Forename") &lt;&gt; ""%&gt; &#xD;
        UPPER(GivenNames.cValue) like UPPER('&lt;%=get("Forename")%&gt;%') and &#xD;
    &lt;%end if%&gt;&#xD;
    &lt;%if get("Surname") &lt;&gt; ""%&gt; &#xD;
        UPPER(FamilyName.cValue) like UPPER('&lt;%=get("Surname")%&gt;%') and &#xD;
    &lt;%end if%&gt;&#xD;
&#xD;
    &lt;%var editReadRoles = StringUtil.join(StringUtil.tokenize(Request.get("editReadRoles"),",", true), ",")%&gt;&#xD;
    &lt;%var escapedEditReadRoles = editReadRoles.replace("'", "''")%&gt;&#xD;
&#xD;
    (cUser.deleted = 0 or cUser.deleted IS NULL)&#xD;
&#xD;
    and cUser.uniqueId in&#xD;
    (&#xD;
        select cUser.uniqueId from cUser &#xD;
        join &#xD;
            GroupMembership on GroupMembership.cUser = cUser.uniqueId &#xD;
        join &#xD;
            cGroup on cGroup.uniqueId = GroupMembership.cGroup  &#xD;
        union&#xD;
        select cUser.uniqueId from cUser &#xD;
        join &#xD;
            RoleMembership on RoleMembership.cUser = cUser.uniqueId &#xD;
        join&#xD;
            GroupRole on GroupRole.role = RoleMembership.role&#xD;
        join &#xD;
            cGroup on cGroup.uniqueId = GroupRole.cGroup  &#xD;
        union&#xD;
        select cUser.uniqueId from cUser &#xD;
        join &#xD;
            RoleMembership on RoleMembership.cUser = cUser.uniqueId &#xD;
        join&#xD;
            Role on Role.uniqueId = RoleMembership.role &#xD;
 )</query-string>
		<search-filter>
			<auto-search>true</auto-search>
			<custom-filter-url />
			<custom-filter-used>false</custom-filter-used>
			<custom-html />
			<display-name />
			<filter-button>
				<name>Reset</name>
				<index>0</index>
				<action>resetFilter();</action>
				<css-class>Button</css-class>
				<default>false</default>
				<style />
			</filter-button>
			<filter-button>
				<name>Search</name>
				<index>1</index>
				<action>submitFilter();</action>
				<css-class>Button</css-class>
				<default>true</default>
				<style />
			</filter-button>
			<filter-field>
				<name>User Id</name>
				<index>0</index>
				<default-value />
				<display-name>User Id</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Forename</name>
				<index>1</index>
				<default-value />
				<display-name>Given Name(s)</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Spacer</name>
				<index>2</index>
				<default-value />
				<display-name />
				<input-type>Blank Field</input-type>
				<parameter-string />
			</filter-field>
			<filter-field>
				<name>Surname</name>
				<index>3</index>
				<default-value />
				<display-name>Family Name</display-name>
				<input-type>Text Field</input-type>
				<parameter-string />
			</filter-field>
			<initial-message />
			<remember-search-filter-criteria>false</remember-search-filter-criteria>
			<stylesheet-url />
		</search-filter>
		<search-results>
			<allow-csv-download>false</allow-csv-download>
			<auto-select-single-row>false</auto-select-single-row>
			<context-view>
				<name>Concerto User</name>
			</context-view>
			<display-disclaimer>false</display-disclaimer>
			<display-result-counts>false</display-result-counts>
			<enable-pdf-results>false</enable-pdf-results>
			<enable-suppression>false</enable-suppression>
			<enable-work-list>false</enable-work-list>
			<maximum-results-per-page>15</maximum-results-per-page>
			<no-results-message />
			<pdf-search-results>
				<formatting-object-stylesheet-url>/concerto/sqlSearch/PDFResults.xsl</formatting-object-stylesheet-url>
				<maximum-rows-per-page>50</maximum-rows-per-page>
			</pdf-search-results>
			<result-column>
				<name>ID</name>
				<index>0</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Id.UserId</subject-item-name>
			</result-column>
			<result-column>
				<name>Given Name(s)</name>
				<index>1</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName.givenName</subject-item-name>
			</result-column>
			<result-column>
				<name>Family Name</name>
				<index>2</index>
				<allow-ordering>true</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>0</hidden>
				<style />
				<subject-item-name>[orionhealth.com]User.Co.FullName.familyName</subject-item-name>
			</result-column>
			<result-column>
				<name>userNamespace</name>
				<index>3</index>
				<allow-ordering>false</allow-ordering>
				<context-transformation />
				<display-format>&lt;%=(html)value%&gt;</display-format>
				<hidden>1</hidden>
				<style />
				<subject-item-name />
			</result-column>
			<row-select-action-type>setContext</row-select-action-type>
			<select-row-action>alert('hello!');</select-row-action>
			<stylesheet-url />
			<suppression-limit>20</suppression-limit>
			<suppression-message>Too many results were returned. Please refine your search criteria.</suppression-message>
			<use-database-column-name>false</use-database-column-name>
		</search-results>
		<secure>false</secure>
		<use-jdbc1>false</use-jdbc1>
		<use-prepared-statements>false</use-prepared-statements>
	</search>
	<system-object>false</system-object>
	<windowlet>
		<name>Autoenroll</name>
		<minimized-entry-point>
			<name>Open Single Task</name>
			<application>
				<name>Task List</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>My Tasks</name>
		<minimized-entry-point>
			<name>Open Single Task</name>
			<application>
				<name>Task List</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
	<windowlet>
		<name>Patient Enrollment</name>
		<minimized-entry-point>
			<name>Open Single Task</name>
			<application>
				<name>Task List</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</minimized-entry-point>
	</windowlet>
</application>
<configuration>
	<name>DEFAULT</name>
	<property>
		  <name>worklist.sizeLimit</name>
		  <property-value>
		  <value>200</value>
		  </property-value>
	</property>
</configuration>
<context-subject>
	<name>Certificate</name>
	<parent>
		<name>User</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>User</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>An</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>UserName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>XPN</data-type>
		<multi-valued>false</multi-valued>
		<role>An</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>An</type>
</context-subject>
<context-subject>
	<name>Coding</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Code</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>CodingSystem</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>Contact</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Contact</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Fax</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>Document</name>
	<parent>
		<name>Patient</name>
	</parent>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>DocumentID</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>IdNumber</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Repository</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>RepositoryName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>DocumentType</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Code</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>Encounter</name>
	<parent>
		<name>Patient</name>
	</parent>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>AccountNumber</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>AdmissionType</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>IS</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>AdmitDateTime</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>TS</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>AlternateVisitId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>AssignedPatientLocation</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>PL</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>DischargeDateTime</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>TS</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>PatientClass</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>IS</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>PatientType</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>IS</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ServicingFacility</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>PL</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>VisitIndicator</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>IS</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>VisitNumber</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>Observation</name>
	<parent>
		<name>Patient</name>
	</parent>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Date_Time</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>TS</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Filler_Order_Number</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>EI</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Placer_Order_Number</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>EI</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Service_Desc</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>EI</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Service_Id</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>System_Id</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>HD</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>PCEHR</name>
	<parent>
		<name>Patient</name>
	</parent>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>IHI</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<name-suffixe>
			<value>IHI</value>
		</name-suffixe>
		<role>Id</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>IHI_Status</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<name-suffixe>
			<value>IHI_Status</value>
		</name-suffixe>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>IHI_Verified</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<name-suffixe>
			<value>IHI_Verified</value>
		</name-suffixe>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>IhiRetrieved</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>accessCodeRequired</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<name-suffixe>
			<value>accessCodeRequired</value>
		</name-suffixe>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>doesPCEHRExist</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<name-suffixe>
			<value>doesPCEHRExist</value>
		</name-suffixe>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>Patient</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>AliasName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>XPN</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Alternate</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Campus</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>DLN</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>DLN</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>DateTimeOfBirth</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>TS</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Facility</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Language</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>MPI</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>MRN</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>NationalIdNumber</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>PatientName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>XPN</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>SSN</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Sex</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>IS</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>Provider</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Clinic</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ClinicId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>HMSMailbox</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>InternalProviderID</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Mailbox</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>MailboxType</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Notify</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ProviderID</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ProviderIDAndType</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ProviderIDAndTypeAndName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ProviderIDClinicID</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ProviderIDCo</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ProviderIDType</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ProviderName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ProviderNameClinicName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>RecordStatus</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Role</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>StatusEffectiveDate</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>Referrals</name>
	<security-level>none</security-level>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>ReferralsWS</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>ReferralOID</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>User</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Logon</name-prefix>
		<case-sensitive>true</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<name-suffixe>
			<value>Concerto</value>
		</name-suffixe>
		<role>Id</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>XPN</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]AccountPolicy</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Application</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]AuditEvent</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>EventId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>OverriddenPolicy</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>PatientId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>PatientIdType</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>PatientName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>SessionId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Time</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>UserId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]ContextAppender</name>
	<parent>
		<name>[orionhealth.com]ContextView</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]ContextSubject</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]ContextView</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]DataAppender</name>
	<parent>
		<name>[orionhealth.com]ContextView</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]DesktopApplication</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]DesktopEntryPoint</name>
	<parent>
		<name>[orionhealth.com]DesktopApplication</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]DocumentRepository</name>
	<parent>
		<name>[orionhealth.com]Application</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]DocumentView</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]EntityAccessPolicy</name>
	<parent>
		<name>[orionhealth.com]ContextView</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]EntryPoint</name>
	<parent>
		<name>[orionhealth.com]Application</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]EventType</name>
	<parent>
		<name>[orionhealth.com]ServiceType</name>
		<parent>
			<name>[orionhealth.com]ContextView</name>
		</parent>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Form</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>FormName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>InformationModelConceptId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ModelId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ModelVersion</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]GenericContextAgent</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Group</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Group</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]InformationAccessPolicy</name>
	<parent>
		<name>[orionhealth.com]ContextView</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]InformationType</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Code</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]InformationTypeRuleset</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Location</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Menu</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Notification</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]PasswordAuthenticationPolicy</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]PolicySelector</name>
	<parent>
		<name>[orionhealth.com]ContextView</name>
	</parent>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]PortalPage</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]PrivacyPolicy</name>
	<parent>
		<name>[orionhealth.com]ContextView</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Referral</name>
	<parent>
		<name>Patient</name>
	</parent>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>ReferralId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Service</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Type</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>ViewId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]ReferralRequest</name>
	<parent>
		<name>Patient</name>
	</parent>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>RequestId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Role</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>RoleId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Search</name>
	<parent>
		<name>[orionhealth.com]Application</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]ServiceType</name>
	<parent>
		<name>[orionhealth.com]ContextView</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]SubjectItem</name>
	<parent>
		<name>[orionhealth.com]ContextSubject</name>
	</parent>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Task</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>DateOfService</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>PatientId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>PatientName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>TaskId</name-prefix>
		<case-sensitive>true</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]User</name>
	<security-level>set-only</security-level>
	<subject-item>
		<name-prefix>Attribute</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<name-suffixe>
			<value>Email</value>
		</name-suffixe>
		<name-suffixe>
			<value>Description</value>
		</name-suffixe>
		<role>Co</role>
		<suffix-allowed>true</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>FullName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>XPN</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>UserId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]WhiteboardSite</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>Name</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>SiteId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>[orionhealth.com]Worklist</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>Context</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>DisplayName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>WorklistName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-subject>
	<name>cWhiteboard</name>
	<security-level>none</security-level>
	<subject-item>
		<name-prefix>SiteName</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>description</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Co</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<subject-item>
		<name-prefix>facilityId</name-prefix>
		<case-sensitive>false</case-sensitive>
		<data-type>ST</data-type>
		<multi-valued>false</multi-valued>
		<role>Id</role>
		<suffix-allowed>false</suffix-allowed>
	</subject-item>
	<type>Id</type>
</context-subject>
<context-view>
	<name>Patient</name>
	<concise-format>&lt;%if MRN%&gt;&lt;%=MRN%&gt;&lt;%end if%&gt;&lt;%=PatientName.familyName.toString().toUpperCase()%&gt;, &lt;%=PatientName.givenName%&gt; &lt;%=PatientName.middleInitialOrName%&gt;</concise-format>
	<context-view-entry-point>
		<index>0</index>
		<entry-point>
			<name>CCR DR Dynamic Patient Summary (Admin View)</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>1</index>
		<entry-point>
			<name>Dynamic Patient Summary</name>
			<application>
				<name>Orion - Dynamic Patient Summary</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>2</index>
		<entry-point>
			<name>CCR Patient Profile</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>3</index>
		<entry-point>
			<name>Patient Task List</name>
			<application>
				<name>Task List</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>4</index>
		<entry-point>
			<name>New Internal Referral Request</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>5</index>
		<entry-point>
			<name>Clinical Documents</name>
			<application>
				<name>Medical Applications Portal</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>6</index>
		<entry-point>
			<name>Place Diagnostics Order</name>
			<application>
				<name>Concerto Orders</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>7</index>
		<entry-point>
			<name>Episode List</name>
			<application>
				<name>Soprano Workflow Medical Templates</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>8</index>
		<entry-point>
			<name>Orders Summary</name>
			<application>
				<name>Concerto Orders</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>9</index>
		<entry-point>
			<name>Manage Circle of Care Relationships</name>
			<application>
				<name>Patient Portal for Providers</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>10</index>
		<entry-point>
			<name>Invite User</name>
			<application>
				<name>Patient Portal for Providers</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>11</index>
		<entry-point>
			<name>PCEHR Document View</name>
			<application>
				<name>PCEHR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<custom-break-the-privacy-seal-url />
	<data-appender-configuration>
		<name>Concerto Groups</name>
		<class-name>com.concerto.contextview.ConcertoGroupAppender</class-name>
		<data-appender-entry>
			<data-type>4</data-type>
			<default-value />
			<input-type>Drop Down List</input-type>
			<key>Concerto user's group memberships</key>
			<parameter-string>&lt;%exec config.setAdvanced(true)%&gt;&lt;%for each group in Concerto.groups%&gt;&lt;%exec config.setOption( group.name, "" )%&gt;&lt;%end for%&gt;</parameter-string>
		</data-appender-entry>
		<data-appender-parameter>
			<name>key</name>
			<value>Concerto user's group memberships</value>
		</data-appender-parameter>
	</data-appender-configuration>
	<data-appender-configuration>
		<name>Concerto Locations</name>
		<class-name>com.concerto.contextview.ConcertoLocationAppender</class-name>
		<data-appender-entry>
			<data-type>4</data-type>
			<default-value />
			<input-type>Drop Down List</input-type>
			<key>Concerto user's locations</key>
			<parameter-string>&lt;%exec config.setAdvanced(true)%&gt;&lt;%for each location in Concerto.locations%&gt;&lt;%exec config.setOption( location.name, "" )%&gt;&lt;%end for%&gt;</parameter-string>
		</data-appender-entry>
		<data-appender-parameter>
			<name>key</name>
			<value>Concerto user's locations</value>
		</data-appender-parameter>
	</data-appender-configuration>
	<data-appender-configuration>
		<name>Concerto Relationships</name>
		<class-name>com.concerto.contextview.ConcertoRelationshipAppender</class-name>
		<data-appender-entry>
			<data-type>4</data-type>
			<default-value />
			<input-type>Drop Down List</input-type>
			<key>Concerto user's relationship to patient</key>
			<parameter-string>&lt;%exec config.setAdvanced(true)%&gt;&lt;%for each relationshipType in Concerto.getContextView( "Patient" ).relationshipTypes%&gt;&lt;%exec config.setOption( relationshipType.name, "" )%&gt;&lt;%end for%&gt;</parameter-string>
		</data-appender-entry>
		<data-appender-parameter>
			<name>key</name>
			<value>Concerto user's relationship to patient</value>
		</data-appender-parameter>
	</data-appender-configuration>
	<data-appender-configuration>
		<name>Concerto Roles</name>
		<class-name>com.concerto.contextview.ConcertoRoleAppender</class-name>
		<data-appender-entry>
			<data-type>4</data-type>
			<input-type>Drop Down List</input-type>
			<key>Concerto user's role memberships</key>
			<parameter-string>&lt;%exec config.setAdvanced(true)%&gt;&lt;%for each role in Concerto.roles%&gt;&lt;%exec config.setOption( role.name, "" )%&gt;&lt;%end for%&gt;</parameter-string>
		</data-appender-entry>
		<data-appender-parameter>
			<name>key</name>
			<value>Concerto user's role memberships</value>
		</data-appender-parameter>
	</data-appender-configuration>
	<data-appender-configuration>
		<name>Concerto User</name>
		<class-name>com.concerto.contextview.ConcertoUserAppender</class-name>
		<data-appender-entry>
			<data-type>1</data-type>
			<default-value />
			<input-type>Popup Search</input-type>
			<key>Concerto user</key>
			<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Concerto")%&gt;&lt;%exec config.setEntryPointName("User Popup Search")%&gt;&lt;%exec config.setReturnValueName("[orionhealth.com]User.Id.UserId")%&gt;&lt;%exec config.setDisplayValueName("[orionhealth.com]User.Co.FullName")%&gt;</parameter-string>
		</data-appender-entry>
		<data-appender-parameter>
			<name>key</name>
			<value>Concerto user</value>
		</data-appender-parameter>
	</data-appender-configuration>
	<description>Displays information from the standard [hl7.org] "Patient" and, if available, "Encounter" context subjects.&#xD;
Displays the first available identifier out of the Medical Record Number (MRN), Master Patient Index (MPI), National Id Number or Alternate Identifier. If a site-defined suffix is used then the Context Format may need to be modified to display this identifier. Following the identifier, the patients family name is displayed in capitals and then the given name in normal case. The patient's middle initials or name are omitted. The Sex and Age of the patient is displayed in a compact format (Sex/Age).&#xD;
Information about the class of the patient (Emergency, Inpatient, Outpatient, Preadmit, Recurring, Obstetrics) is then displayed. The servicing facility location description is also displayed if available. If there is no discharge date then that patient's assigned location description is displayed.&#xD;
Finally, the admit and discharge dates are displayed. If these are the same then only one date is displayed. If there is an admission date but no discharge date then "current" is used.&#xD;
Two favourite context lists are set up, one for recent patients that the user has accessed, and one that the user can add or remove selected patients to.&#xD;
Applications with entry points that open in a patient context should be made available from this context view. In general, this includes Concerto's Clincial Document Viewer.</description>
	<enable-history>true</enable-history>
	<enable-privacy-policies>false</enable-privacy-policies>
	<entity-access-policy>
		<name>Default</name>
		<default>true</default>
		<description>This is the default patient access policy</description>
		<error>false</error>
	</entity-access-policy>
	<entity-access-policy>
		<name>Error</name>
		<default>false</default>
		<description>This is the patient access error policy. If an error occurs when attempting to evaluate the access a user has to a patient then this policy will be applied.&#xD;
&#xD;
If an error occurs while evaluating the access level allowed by this policy, an error will be returned to the user and they won't be able to access any patient information. It is recommended that you only reason against data gathered from the preconfigured Concerto data appenders in the rule conditions in this policy.</description>
		<error>true</error>
	</entity-access-policy>
	<entity-policy-selector-configuration>
		<name>Concerto patient policy selector</name>
		<index>0</index>
		<class-name>com.concerto.contextview.EntityPolicySelector</class-name>
	</entity-policy-selector-configuration>
	<format>&lt;B&gt;&#xD;
&lt;%if MRN%&gt;&#xD;
  &lt;%=(html)MRN%&gt;&#xD;
&lt;%elseif MPI%&gt;&#xD;
  &lt;%=(html)MPI%&gt;&#xD;
&lt;%elseif NationalIdNumber%&gt;&#xD;
  &lt;%=(html)NationalIdNumber%&gt;&#xD;
&lt;%elseif Alternate%&gt;&#xD;
  &lt;%=(html)Alternate%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;/B&gt;&#xD;
&lt;%=(html)PatientName.familyName.toString().toUpperCase()%&gt;,&#xD;
&lt;%=(html)PatientName.givenName%&gt;&#xD;
&lt;%=(html)PatientName.middleInitialOrName%&gt;&#xD;
&lt;small&gt;&#xD;
&lt;%if Sex &lt;&gt; "" || DateTimeOfBirth &lt;&gt; ""%&gt;&#xD;
 &lt;%=(html)DateFormat.format(DateTimeOfBirth, "dd/MM/yyyy")%&gt;&#xD;
(&lt;%=AgeFormat.format(DateTimeOfBirth)%&gt;) &lt;%if Sex%&gt;&lt;%=(html)Sex%&gt; &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;/small&gt;</format>
	<history-print-disclaimer-enabled>false</history-print-disclaimer-enabled>
	<history-print-stylesheet />
	<history-printing-enabled>false</history-printing-enabled>
	<information-access-policy>
		<name>Default</name>
		<default>true</default>
		<description>This is the default information access policy</description>
		<error>false</error>
	</information-access-policy>
	<information-access-policy>
		<name>Error</name>
		<default>false</default>
		<description>This is the information access error policy. If an error occurs when attempting to evaluate the access a user has to a patient's information then this policy will be applied.&#xD;
&#xD;
If an error occurs while evaluating the access level allowed by this policy, an error will be returned to the user and they won't be able to access any patient information. It is recommended that you only reason against data gathered from the preconfigured Concerto data appenders in the rule conditions in this policy.</description>
		<error>true</error>
	</information-access-policy>
	<information-policy-selector-configuration>
		<name>Concerto information policy selector</name>
		<index>0</index>
		<class-name>com.concerto.contextview.InformationPolicySelector</class-name>
	</information-policy-selector-configuration>
	<subject-of-interest>
		<name>Document</name>
		<required>false</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>Encounter</name>
		<required>false</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>PCEHR</name>
		<required>false</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>Patient</name>
		<required>true</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>[orionhealth.com]ContextSubject</name>
		<required>false</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>[orionhealth.com]Referral</name>
		<required>false</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>[orionhealth.com]ReferralRequest</name>
		<required>false</required>
	</subject-of-interest>
	<unique-identifier>
		<name-prefix>MRN</name-prefix>
		<descriptor>hl7.org</descriptor>
		<qualified-name>[hl7.org]Patient.Id.[hl7.org]MRN</qualified-name>
		<role>Id</role>
		<subject-descriptor>hl7.org</subject-descriptor>
		<subject-name>Patient</subject-name>
	</unique-identifier>
	<use-custom-entity-break-seal-page>false</use-custom-entity-break-seal-page>
	<work-list-type>
		<name>Blue</name>
		<auto-populated>false</auto-populated>
		<display-name>Blue</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Green</name>
		<auto-populated>false</auto-populated>
		<display-name>Green</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Orange</name>
		<auto-populated>false</auto-populated>
		<display-name>Orange</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Purple</name>
		<auto-populated>false</auto-populated>
		<display-name>Purple</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Red</name>
		<auto-populated>false</auto-populated>
		<display-name>Red</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Yellow</name>
		<auto-populated>false</auto-populated>
		<display-name>Yellow</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<worklist-column>
		<index>0</index>
		<column-heading>URN</column-heading>
		<display-format>&lt;%=(html)value%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>MRN</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Id.[hl7.org]MRN</qualified-name>
			<role>Id</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-column>
		<index>1</index>
		<column-heading>Name</column-heading>
		<display-format>&lt;%=value.familyName.toString().toUpperCase()%&gt;,&#xD;
&lt;%=value.givenName%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>PatientName</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Co.[hl7.org]PatientName</qualified-name>
			<role>Co</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-column>
		<index>2</index>
		<column-heading>Sex</column-heading>
		<display-format>&lt;%=(html)value%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>Sex</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Co.[hl7.org]Sex</qualified-name>
			<role>Co</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-column>
		<index>3</index>
		<column-heading>Age</column-heading>
		<display-format>&lt;%=(html)AgeFormat.format(value)%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>DateTimeOfBirth</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Co.[hl7.org]DateTimeOfBirth</qualified-name>
			<role>Co</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-column>
		<index>4</index>
		<column-heading>Facility</column-heading>
		<display-format>&lt;%if value.toString().trim().equals("ACTCC")%&gt;&#xD;
ACT Health Public&#xD;
&lt;%elseif value.toString().trim().equals("CHCACT")%&gt;&#xD;
Calvary Health Care&#xD;
&lt;%elseif value.toString().trim().equals("DHHCC")%&gt;&#xD;
ACT Health&#xD;
&lt;%else%&gt;&#xD;
&lt;%=value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>Facility</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Id.[hl7.org]Facility</qualified-name>
			<role>Id</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-print-disclaimer-enabled>false</worklist-print-disclaimer-enabled>
	<worklist-print-stylesheet />
	<worklist-printing-enabled>false</worklist-printing-enabled>
</context-view>
<context-view>
	<name>Referral</name>
	<concise-format>&lt;%=MRN%&gt; &lt;%=PatientName.familyName.toString().toUpperCase()%&gt;, &lt;%=PatientName.givenName%&gt; &lt;%=PatientName.middleInitialOrName%&gt;</concise-format>
	<context-view-entry-point>
		<index>0</index>
		<entry-point>
			<name>CCR DR Referral Context</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>1</index>
		<entry-point>
			<name>CCR DR Dynamic Patient Summary (Admin View)</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>2</index>
		<entry-point>
			<name>CCR Patient Profile</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>3</index>
		<entry-point>
			<name>Patient Task List</name>
			<application>
				<name>Task List</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>4</index>
		<entry-point>
			<name>New Internal Referral Request</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<context-view-entry-point>
		<index>5</index>
		<entry-point>
			<name>Place Diagnostics Order</name>
			<application>
				<name>Concerto Orders</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<shortcut-displayed-in-worklist>false</shortcut-displayed-in-worklist>
		<width>600</width>
	</context-view-entry-point>
	<description>::: CCR ::: Referral context.</description>
	<enable-history>true</enable-history>
	<enable-privacy-policies>false</enable-privacy-policies>
	<format>&lt;B&gt;&#xD;
&lt;%if MRN%&gt;&#xD;
  &lt;%=(html)MRN%&gt;&#xD;
&lt;%elseif MPI%&gt;&#xD;
  &lt;%=(html)MPI%&gt;&#xD;
&lt;%elseif NationalIdNumber%&gt;&#xD;
  &lt;%=(html)NationalIdNumber%&gt;&#xD;
&lt;%elseif Alternate%&gt;&#xD;
  &lt;%=(html)Alternate%&gt;&#xD;
&#xD;
&lt;%end if%&gt;&#xD;
&lt;/B&gt;&#xD;
&lt;%=(html)PatientName.familyName.toString().toUpperCase()%&gt;,&#xD;
&lt;%=(html)PatientName.givenName%&gt;&#xD;
&lt;%=(html)PatientName.middleInitialOrName%&gt;&#xD;
&lt;small&gt;&#xD;
&lt;%if Sex &lt;&gt; "" || DateTimeOfBirth &lt;&gt; ""%&gt;&#xD;
 &lt;%=(html)DateFormat.format(DateTimeOfBirth, "dd/MM/yyyy")%&gt;&#xD;
(&lt;%=AgeFormat.format(DateTimeOfBirth)%&gt;) &lt;%if Sex%&gt;&lt;%=(html)Sex%&gt; &lt;%end if%&gt;&#xD;
&lt;%end if%&gt;&#xD;
&lt;/small&gt;</format>
	<history-print-disclaimer-enabled>false</history-print-disclaimer-enabled>
	<history-print-stylesheet />
	<history-printing-enabled>false</history-printing-enabled>
	<subject-of-interest>
		<name>Patient</name>
		<required>true</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>[orionhealth.com]Referral</name>
		<required>true</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>[orionhealth.com]ReferralRequest</name>
		<required>false</required>
	</subject-of-interest>
	<system-object>false</system-object>
	<unique-identifier>
		<name-prefix>MRN</name-prefix>
		<descriptor>hl7.org</descriptor>
		<qualified-name>[hl7.org]Patient.Id.[hl7.org]MRN</qualified-name>
		<role>Id</role>
		<subject-descriptor>hl7.org</subject-descriptor>
		<subject-name>Patient</subject-name>
	</unique-identifier>
	<use-custom-entity-break-seal-page>false</use-custom-entity-break-seal-page>
	<work-list-type>
		<name>Blue</name>
		<auto-populated>false</auto-populated>
		<display-name>Blue</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Green</name>
		<auto-populated>false</auto-populated>
		<display-name>Green</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Orange</name>
		<auto-populated>false</auto-populated>
		<display-name>Orange</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Purple</name>
		<auto-populated>false</auto-populated>
		<display-name>Purple</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Red</name>
		<auto-populated>false</auto-populated>
		<display-name>Red</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<work-list-type>
		<name>Yellow</name>
		<auto-populated>false</auto-populated>
		<display-name>Yellow</display-name>
		<enabled>true</enabled>
	</work-list-type>
	<worklist-column>
		<index>0</index>
		<column-heading>URN</column-heading>
		<display-format>&lt;%=(html)value%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>MRN</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Id.[hl7.org]MRN</qualified-name>
			<role>Id</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-column>
		<index>1</index>
		<column-heading>Name</column-heading>
		<display-format>&lt;%=value.familyName.toString().toUpperCase()%&gt;,&#xD;
&lt;%=value.givenName%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>PatientName</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Co.[hl7.org]PatientName</qualified-name>
			<role>Co</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-column>
		<index>2</index>
		<column-heading>Sex</column-heading>
		<display-format>&lt;%=(html)value%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>Sex</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Co.[hl7.org]Sex</qualified-name>
			<role>Co</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-column>
		<index>3</index>
		<column-heading>Age</column-heading>
		<display-format>&lt;%=(html)AgeFormat.format(value)%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>DateTimeOfBirth</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Co.[hl7.org]DateTimeOfBirth</qualified-name>
			<role>Co</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-column>
		<index>4</index>
		<column-heading>Facility</column-heading>
		<display-format>&lt;%if value.toString().trim().equals("ACTCC")%&gt;&#xD;
ACT Health Public&#xD;
&lt;%elseif value.toString().trim().equals("CHCACT")%&gt;&#xD;
Calvary Health Care&#xD;
&lt;%elseif value.toString().trim().equals("DHHCC")%&gt;&#xD;
ACT Health&#xD;
&lt;%else%&gt;&#xD;
&lt;%=value%&gt;&#xD;
&lt;%end if%&gt;</display-format>
		<required>false</required>
		<subject-item-name>
			<name-prefix>Facility</name-prefix>
			<descriptor>hl7.org</descriptor>
			<qualified-name>[hl7.org]Patient.Id.[hl7.org]Facility</qualified-name>
			<role>Id</role>
			<subject-descriptor>hl7.org</subject-descriptor>
			<subject-name>Patient</subject-name>
		</subject-item-name>
	</worklist-column>
	<worklist-print-disclaimer-enabled>false</worklist-print-disclaimer-enabled>
	<worklist-print-stylesheet />
	<worklist-printing-enabled>false</worklist-printing-enabled>
</context-view>
<context-view>
	<name>Task</name>
	<concise-format />
	<description />
	<enable-history>false</enable-history>
	<enable-privacy-policies>false</enable-privacy-policies>
	<format />
	<subject-of-interest>
		<name>User</name>
		<required>false</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>[orionhealth.com]Task</name>
		<required>true</required>
	</subject-of-interest>
	<system-object>false</system-object>
	<unique-identifier>
		<name-prefix>TaskId</name-prefix>
		<descriptor>orionhealth.com</descriptor>
		<qualified-name>[orionhealth.com]Task.Id.[orionhealth.com]TaskId</qualified-name>
		<role>Id</role>
		<subject-descriptor>orionhealth.com</subject-descriptor>
		<subject-name>Task</subject-name>
	</unique-identifier>
	<use-custom-entity-break-seal-page>false</use-custom-entity-break-seal-page>
	<work-list-type>
		<name>Blue</name>
	</work-list-type>
	<work-list-type>
		<name>Green</name>
	</work-list-type>
	<work-list-type>
		<name>Orange</name>
	</work-list-type>
	<work-list-type>
		<name>Purple</name>
	</work-list-type>
	<work-list-type>
		<name>Red</name>
	</work-list-type>
	<work-list-type>
		<name>Yellow</name>
	</work-list-type>
	<worklist-print-disclaimer-enabled>false</worklist-print-disclaimer-enabled>
	<worklist-print-stylesheet />
	<worklist-printing-enabled>false</worklist-printing-enabled>
</context-view>
<context-view>
	<name>cWhiteboard Site</name>
	<concise-format />
	<context-view-entry-point>
		<index>0</index>
		<entry-point>
			<name>Whiteboard</name>
			<application>
				<name>cWhiteboard</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</context-view-entry-point>
	<description />
	<enable-history>false</enable-history>
	<enable-privacy-policies>false</enable-privacy-policies>
	<format>&lt;%=(html)Context.get("[orionhealth.com]WhiteboardSite.Co.Name")%&gt;</format>
	<history-print-disclaimer-enabled>false</history-print-disclaimer-enabled>
	<history-print-stylesheet />
	<history-printing-enabled>false</history-printing-enabled>
	<subject-of-interest>
		<name>[orionhealth.com]WhiteboardSite</name>
		<required>true</required>
	</subject-of-interest>
	<subject-of-interest>
		<name>cWhiteboard</name>
		<required>false</required>
	</subject-of-interest>
	<system-object>false</system-object>
	<use-custom-entity-break-seal-page>false</use-custom-entity-break-seal-page>
	<work-list-type>
		<name>Blue</name>
		<auto-populated>false</auto-populated>
		<display-name>Blue</display-name>
		<enabled>false</enabled>
	</work-list-type>
	<work-list-type>
		<name>Green</name>
		<auto-populated>false</auto-populated>
		<display-name>Green</display-name>
		<enabled>false</enabled>
	</work-list-type>
	<work-list-type>
		<name>Orange</name>
		<auto-populated>false</auto-populated>
		<display-name>Orange</display-name>
		<enabled>false</enabled>
	</work-list-type>
	<work-list-type>
		<name>Purple</name>
		<auto-populated>false</auto-populated>
		<display-name>Purple</display-name>
		<enabled>false</enabled>
	</work-list-type>
	<work-list-type>
		<name>Red</name>
		<auto-populated>false</auto-populated>
		<display-name>Red</display-name>
		<enabled>false</enabled>
	</work-list-type>
	<work-list-type>
		<name>Yellow</name>
		<auto-populated>false</auto-populated>
		<display-name>Yellow</display-name>
		<enabled>false</enabled>
	</work-list-type>
	<worklist-print-disclaimer-enabled>false</worklist-print-disclaimer-enabled>
	<worklist-print-stylesheet />
	<worklist-printing-enabled>false</worklist-printing-enabled>
</context-view>
<document-view>
	<name>ACTPAS Integration View</name>
	<cache-enabled>false</cache-enabled>
	<default-grouping>category</default-grouping>
	<description>Document Repository to consolidate the iPM web services related functions for testing</description>
	<display-date-filter>true</display-date-filter>
	<display-importance-flag>true</display-importance-flag>
	<display-sign-off-flag>true</display-sign-off-flag>
	<display-text-filter>true</display-text-filter>
	<display-view-by-category>true</display-view-by-category>
	<summary-entry-point>
		<index>0</index>
		<entry-point>
			<name>ACTPAS Outpatient Appointments</name>
			<application>
				<name>iPM Web Services Integration</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>1</index>
		<entry-point>
			<name>Create/Link  ACTPAS OP Referral</name>
			<application>
				<name>iPM Web Services Integration</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<timeout>5000</timeout>
	<track-read-documents>false</track-read-documents>
</document-view>
<document-view>
	<name>Community</name>
	<cache-enabled>false</cache-enabled>
	<custom-attribute>
		<name>Pathway</name>
		<grouping-allowed>false</grouping-allowed>
	</custom-attribute>
	<custom-attribute>
		<name>Patient ID</name>
		<grouping-allowed>false</grouping-allowed>
	</custom-attribute>
	<custom-attribute>
		<name>Priority</name>
		<grouping-allowed>true</grouping-allowed>
	</custom-attribute>
	<custom-attribute>
		<name>Referral ID</name>
		<grouping-allowed>true</grouping-allowed>
	</custom-attribute>
	<custom-attribute>
		<name>documentID</name>
		<grouping-allowed>false</grouping-allowed>
	</custom-attribute>
	<custom-attribute>
		<name>documentId</name>
	</custom-attribute>
	<custom-attribute>
		<name>status</name>
		<grouping-allowed>true</grouping-allowed>
	</custom-attribute>
	<default-grouping>category</default-grouping>
	<description>::: CCR Community Document view ::: All things community related.</description>
	<display-date-filter>true</display-date-filter>
	<display-importance-flag>true</display-importance-flag>
	<display-sign-off-flag>true</display-sign-off-flag>
	<display-text-filter>true</display-text-filter>
	<display-view-by-category>true</display-view-by-category>
	<document-repository>
		<name>All Form Documents</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR Searches</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Discharge Summary</name>
		<access-controller />
		<application>
			<name>Orion - Discharge Summary Document Repository</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Event Status - Community</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Event Summary - CCR WIC</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Numeric Laboratory Reports</name>
		<access-controller />
		<application>
			<name>Orion - Clinical Data Repository</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Radiology Reports</name>
		<access-controller />
		<application>
			<name>Orion - Clinical Data Repository</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Referrals Repository - Drafts</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR Referrals</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Referrals Repository - EoC</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR Referrals</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Text Laboratory Reports</name>
		<access-controller />
		<application>
			<name>Orion - Clinical Data Repository</name>
		</application>
	</document-repository>
	<summary-entry-point>
		<index>0</index>
		<entry-point>
			<name>CDV_Patient Overview</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>1</index>
		<entry-point>
			<name>CDV_CCR Patient Summary</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>2</index>
		<entry-point>
			<name>CCR ACTPAS - Allergies &amp; Alerts</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>3</index>
		<entry-point>
			<name>CDV_Referrals</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>4</index>
		<entry-point>
			<name>CDV_Assessments (context)</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>5</index>
		<entry-point>
			<name>CDV_Progress_Notes (context)</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>6</index>
		<entry-point>
			<name>CDV_Patient Care Plan (context)</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>7</index>
		<entry-point>
			<name>CDV_Correspondence</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>8</index>
		<entry-point>
			<name>CCR Vital Signs EWS Flow Sheet</name>
			<application>
				<name>cResults</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<timeout>50000</timeout>
	<track-read-documents>true</track-read-documents>
</document-view>
<document-view>
	<name>Community Patient Summary</name>
	<cache-enabled>true</cache-enabled>
	<custom-attribute>
		<name>Pathway</name>
		<grouping-allowed>false</grouping-allowed>
	</custom-attribute>
	<custom-attribute>
		<name>documentID</name>
		<grouping-allowed>false</grouping-allowed>
	</custom-attribute>
	<custom-attribute>
		<name>documentId</name>
	</custom-attribute>
	<custom-attribute>
		<name>status</name>
		<grouping-allowed>false</grouping-allowed>
	</custom-attribute>
	<default-grouping>category</default-grouping>
	<description>::: CCR Community Document view Patient Admin Summary Only :::</description>
	<display-date-filter>true</display-date-filter>
	<display-importance-flag>true</display-importance-flag>
	<display-sign-off-flag>true</display-sign-off-flag>
	<display-text-filter>true</display-text-filter>
	<display-view-by-category>true</display-view-by-category>
	<document-repository>
		<name>All Form Documents</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR Searches</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Discharge Summary</name>
		<access-controller />
		<application>
			<name>Orion - Discharge Summary Document Repository</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Event Status - Community</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Event Summary - CCR WIC</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Numeric Laboratory Reports</name>
		<access-controller />
		<application>
			<name>Orion - Clinical Data Repository</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Radiology Reports</name>
		<access-controller />
		<application>
			<name>Orion - Clinical Data Repository</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Referrals Repository - Drafts</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR Referrals</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Referrals Repository - EoC</name>
		<access-controller />
		<application>
			<name>Healthcare pathways - CCR Referrals</name>
		</application>
	</document-repository>
	<document-repository>
		<name>Text Laboratory Reports</name>
		<access-controller />
		<application>
			<name>Orion - Clinical Data Repository</name>
		</application>
	</document-repository>
	<summary-entry-point>
		<index>0</index>
		<entry-point>
			<name>CDV_CCR Patient Summary</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>1</index>
		<entry-point>
			<name>CDV_Patient Overview</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>2</index>
		<entry-point>
			<name>CCR ACTPAS - Allergies &amp; Alerts</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>3</index>
		<entry-point>
			<name>CDV_Referrals</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>4</index>
		<entry-point>
			<name>CDV_Assessments (context)</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>5</index>
		<entry-point>
			<name>CDV_Progress_Notes (context)</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>6</index>
		<entry-point>
			<name>CDV_Patient Care Plan (context)</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>7</index>
		<entry-point>
			<name>CDV_Correspondence</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<summary-entry-point>
		<index>8</index>
		<entry-point>
			<name>CCR Vital Signs EWS Flow Sheet</name>
			<application>
				<name>cResults</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</summary-entry-point>
	<timeout>50000</timeout>
	<track-read-documents>true</track-read-documents>
</document-view>
<document-view>
	<name>Referrals</name>
	<cache-enabled>false</cache-enabled>
	<default-grouping>category</default-grouping>
	<description>Managment screen for CHI users. Allows CHI users to manage incoming electronic referrals and link them to patients.</description>
	<display-date-filter>true</display-date-filter>
	<display-importance-flag>true</display-importance-flag>
	<display-sign-off-flag>true</display-sign-off-flag>
	<display-text-filter>true</display-text-filter>
	<display-view-by-category>true</display-view-by-category>
	<timeout>5000</timeout>
	<track-read-documents>false</track-read-documents>
</document-view>
<group>
	<name>Administrator User</name>
	<automatic-membership>false</automatic-membership>
	<description>Access to applications and entry points required by the eHealth system administrator</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_Admin_IAM_Health</name>
		<role-id>79ddda77-dbbb-40e2-bc63-b3361cf06723</role-id>
	</role>
	<role>
		<name>ClPtl_Admin</name>
		<role-id>61bde4f2-fd13-42a3-95f6-8b94443ea741</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>CCR CHI1</name>
	<automatic-membership>false</automatic-membership>
	<description>Created as part of Roles and Groups matrix v0.5</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_Intake_IAM_Health</name>
		<role-id>98fe6c63-b044-4466-80f4-81902e4636d8</role-id>
	</role>
	<role>
		<name>ClPtl_CHI Level 1</name>
		<role-id>d320af6f-e94f-458c-9121-7c72b9e520d5</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>f43366ee-8b1e-41c7-b92f-cda91a1f5cdd</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>80d6b9cf-9a44-45ee-a20f-3b10d1fef613</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Admin</name>
		<role-id>cbc88bf9-dde8-4251-a408-7c32b869ef6e</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>CCR CHI2</name>
	<automatic-membership>false</automatic-membership>
	<description>Created as part of Roles and Groups matrix v0.5</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>CCR Clerical Group</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>CHHS User</name>
	<automatic-membership>false</automatic-membership>
	<description>Applications and entry points unique to Canberra Hospital and Health Services</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHHSGeneral_IAM_Health</name>
		<role-id>df405dca-e74b-439d-a370-0105e0c7aa26</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClericalCHHS_IAM_Health</name>
		<role-id>ee57ccc7-c0c6-49d2-b54a-cbaa2771c05c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
		<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_Intake_IAM_Health</name>
		<role-id>98fe6c63-b044-4466-80f4-81902e4636d8</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
		<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>CCR_Clerical</name>
		<role-id>34bf9f65-3406-4fbd-a6fa-e35f79043120</role-id>
	</role>
	<role>
		<name>ClPtl_CHHSGeneral</name>
		<role-id>0a0f6318-95c0-4394-bfd2-ab35952870e0</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCHHS</name>
		<role-id>5e8cff0c-9292-4535-b0e9-83706356011f</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityHealthCentreAdmin</name>
		<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>80d6b9cf-9a44-45ee-a20f-3b10d1fef613</role-id>
	</role>
	<role>
		<name>ClPtl_MedStudentCHHS</name>
		<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>CHI Referrals</name>
	<automatic-membership>false</automatic-membership>
	<description>Group allowed access to Intake</description>
	<group-attribute>
		<name>roles</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>roles</display-name>
		<input-type>SQL List Box</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("jdbc:minerva:sdm##")%&gt;&lt;%exec config.setSQLQuery("SELECT urs.name\r\nFROM [OH_SDM_Workflow].[dbo].[UserRoleSecurity] urs\r\nINNER JOIN [OH_SDM_Workflow].[dbo].[usergroupsecurity] ugs ON urs.userGroupSecurityID = ugs.userGroupSecurityID\r\nWHERE ugs.name = 'CHI Referrals'")%&gt;&lt;%exec config.setOptionColumnName("name")%&gt;&lt;%exec config.setDisplayColumnName("name")%&gt;&lt;%exec config.setIncludeBlankOption("false")%&gt;</parameter-string>
		<user-editable>false</user-editable>
	</group-attribute>
	<group-attribute>
		<name>CHI Centre</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>CHI Centre</display-name>
		<input-type>SQL List Box</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setDataSourceName("java:comp/env/jdbc/cwsclinical")%&gt;&lt;%exec config.setSQLQuery("select cd.id\r\n      ,cd.code\r\n      ,cd.normalizedCode\r\n      ,cd.description as Description\r\nfrom [CodeSet].[CodeDefinition] cd\r\ninner join [CodeSet].[CodeSet] cs on cd.codeSetId=cs.id\r\nwhere cs.identifier = 'com.orchestral.referrals.codeset.api_2_0.ReferralReceiver'")%&gt;&lt;%exec config.setOptionColumnName("Description")%&gt;&lt;%exec config.setDisplayColumnName("Description")%&gt;&lt;%exec config.setIncludeBlankOption("false")%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Calvary User</name>
	<automatic-membership>false</automatic-membership>
	<description>This group should be assigned to Calvary users with a default of Calvary Location.  User Location is a group attribute that can be changed manually by the user.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CalvaryGeneral_IAM_Health</name>
		<role-id>448c9d36-7c9b-45b5-9581-d88f2260b575</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClericalCalvary_IAM_Health</name>
		<role-id>d1161bad-0aaa-4eec-8b7f-a5e0b8900f01</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
		<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCalvary_IAM_Health</name>
		<role-id>27b80918-a6aa-469b-855d-8cac578e2317</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>ClPtl_CalvaryGeneral</name>
		<role-id>6efbfefb-713b-46bf-a351-8e062810f638</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCalvary</name>
		<role-id>209557c3-b018-4e26-9851-3c50ff04b400</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCalvary</name>
		<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCalvary</name>
		<role-id>0f62c137-a797-4223-95af-f139444b99a3</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>CapPathology</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows users to access Capital Pathology</description>
	<group-attribute>
		<name>CapPathologyUserName</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>User Name</display-name>
		<input-type>Text Field</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>CapPathologyPassword</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Password</display-name>
		<input-type>Password</input-type>
		<parameter-string />
		<protected>true</protected>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Clerical Home Page</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Clinical User</name>
	<automatic-membership>false</automatic-membership>
	<description>Access to patient summary, results and clinical documents</description>
	<group-attribute>
		<name>SMT Role</name>
		<index>0</index>
		<default-value>N/A</default-value>
		<display>true</display>
		<display-name>Designation</display-name>
		<input-type>Drop Down List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setOption("Intern", "")%&gt;&lt;%exec config.setOption("Registrar", "")%&gt;&lt;%exec config.setOption("A/Professor", "")%&gt;&lt;%exec config.setOption("VMO", "")%&gt;&lt;%exec config.setOption("Professor", "")%&gt;&lt;%exec config.setOption("JMO", "")%&gt;&lt;%exec config.setOption("Nurse", "")%&gt;&lt;%exec config.setOption("Other", "")%&gt;&lt;%exec config.setOption("Consultant", "")%&gt;&lt;%exec config.setOption("Staff Specialist", "")%&gt;&lt;%exec config.setOption("Senior Staff Specialist", "")%&gt;&lt;%exec config.setOption("SRMO", "")%&gt;&lt;%exec config.setOption("Post Grad Fellow", "")%&gt;&lt;%exec config.setOption("RMO", "")%&gt;&lt;%exec config.setOption("Med Student yr 4", "")%&gt;&lt;%exec config.setOption("Clinical Pharmacist", "")%&gt;&lt;%exec config.setOption("Physician", "")%&gt;&lt;%exec config.setOption("N/A", "")%&gt;&lt;%exec config.setOption("Director", "")%&gt;&lt;%exec config.setOption("CMO", "")%&gt;&lt;%exec config.setDefaultValue("N/A")%&gt;</parameter-string>
		<user-editable>false</user-editable>
	</group-attribute>
	<group-attribute>
		<name>ProviderNumber</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Provider Number</display-name>
		<input-type>Text Field</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>Pager</name>
		<index>2</index>
		<default-value />
		<display>true</display>
		<display-name>Pager</display-name>
		<input-type>Text Field</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>Phone</name>
		<index>3</index>
		<default-value />
		<display>true</display>
		<display-name>Phone</display-name>
		<input-type>Text Field</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>45</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
		<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCalvary_IAM_Health</name>
		<role-id>27b80918-a6aa-469b-855d-8cac578e2317</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
		<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCalvary</name>
		<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCalvary</name>
		<role-id>0f62c137-a797-4223-95af-f139444b99a3</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<role>
		<name>ClPtl_MedStudentCHHS</name>
		<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Clinician Home Page</name>
	<automatic-membership>false</automatic-membership>
	<group-attribute>
		<name>My Patient List</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>My Patient List</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>Referals</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Referals</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Clinician Homepage</name>
	<automatic-membership>false</automatic-membership>
	<group-attribute>
		<name>My Inpatients</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>Show  my Inpatients</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Orion - Clinician Homepage")%&gt;&lt;%exec config.setEntryPointName("Homepage Filter Search - Clinician Search")%&gt;&lt;%exec config.setReturnValueName("Provider.Id.ProviderIDAndType")%&gt;&lt;%exec config.setDisplayValueName("Provider.Co.ProviderName")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>Homepage Worklist</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Worklist to show on My Homepage</display-name>
		<input-type>Popup Search</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Orion - Clinician Homepage")%&gt;&lt;%exec config.setEntryPointName("Homepage Filter Search - My Worklists")%&gt;&lt;%exec config.setReturnValueName("[orionhealth.com]Worklist.Co.WorklistName")%&gt;&lt;%exec config.setDisplayValueName("[orionhealth.com]Worklist.Id.DisplayName")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(300)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>My Outpatients</name>
		<index>2</index>
		<default-value />
		<display>true</display>
		<display-name>Show  my Outpatients for Today</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Orion - Clinician Homepage")%&gt;&lt;%exec config.setEntryPointName("Homepage Filter Search - Outpatient Clinic")%&gt;&lt;%exec config.setReturnValueName("Provider.Co.ClinicID")%&gt;&lt;%exec config.setDisplayValueName("Provider.Co.Clinic")%&gt;&lt;%exec config.setWidth(550)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>My Locations</name>
		<index>3</index>
		<default-value />
		<display>true</display>
		<display-name>Show  my Locations</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Orion - Clinician Homepage")%&gt;&lt;%exec config.setEntryPointName("Homepage Filter Search - Location")%&gt;&lt;%exec config.setReturnValueName("code")%&gt;&lt;%exec config.setDisplayValueName("Ward/Location")%&gt;&lt;%exec config.setWidth(550)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>My Specialties</name>
		<index>4</index>
		<default-value />
		<display>true</display>
		<display-name>Show my Specialties</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Orion - Patient Searches &amp; Demographics")%&gt;&lt;%exec config.setEntryPointName("Specialty Search")%&gt;&lt;%exec config.setReturnValueName("code")%&gt;&lt;%exec config.setDisplayValueName("Specialty")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_ClericalCHHS_IAM_Health</name>
		<role-id>ee57ccc7-c0c6-49d2-b54a-cbaa2771c05c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClericalCalvary_IAM_Health</name>
		<role-id>d1161bad-0aaa-4eec-8b7f-a5e0b8900f01</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
		<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCalvary_IAM_Health</name>
		<role-id>27b80918-a6aa-469b-855d-8cac578e2317</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
		<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	</role>
	<role>
		<name>CCR_Clerical</name>
		<role-id>34bf9f65-3406-4fbd-a6fa-e35f79043120</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCHHS</name>
		<role-id>5e8cff0c-9292-4535-b0e9-83706356011f</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCalvary</name>
		<role-id>209557c3-b018-4e26-9851-3c50ff04b400</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCalvary</name>
		<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCalvary</name>
		<role-id>0f62c137-a797-4223-95af-f139444b99a3</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<role>
		<name>ClPtl_MedStudentCHHS</name>
		<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Clinicians</name>
</group>
<group>
	<name>Community</name>
	<automatic-membership>false</automatic-membership>
	<description>This group is use to store ACTPAS user information as attributes. These may then be used when integrating with ACTPAS - e.g. to call PAS web services</description>
	<group-attribute>
		<name>ACTPAS User Name</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>ACTPAS User Name</display-name>
		<input-type>Text Field</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
		<protected>true</protected>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>ACTPAS Password</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>ACTPAS Password</display-name>
		<input-type>Password</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
		<protected>true</protected>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>Blank</name>
		<index>2</index>
		<default-value />
		<display>true</display>
		<display-name />
		<input-type>HTML</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setHtml("&lt;hr/&gt;&lt;p/&gt;")%&gt;</parameter-string>
		<user-editable>false</user-editable>
	</group-attribute>
	<group-attribute>
		<name>ACTPAS Speciality</name>
		<index>3</index>
		<default-value />
		<display>true</display>
		<display-name>Specialty</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Specialty Search")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Description")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>ACTPAS Clinician ID</name>
		<index>4</index>
		<default-value />
		<display>true</display>
		<display-name>Referred To Clinician</display-name>
		<input-type>Popup Search</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Clinician Search")%&gt;&lt;%exec config.setReturnValueName("clinicianID")%&gt;&lt;%exec config.setDisplayValueName("Name")%&gt;&lt;%exec config.setWidth(800)%&gt;&lt;%exec config.setHeight(1024)%&gt;&lt;%exec config.setOpenInWindow(true)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>ACTPAS Clinic ID</name>
		<index>5</index>
		<default-value />
		<display>true</display>
		<display-name>Clinic</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Community Clinics")%&gt;&lt;%exec config.setReturnValueName("Clinic Code")%&gt;&lt;%exec config.setDisplayValueName("Clinic Name")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>ACTPAS Staff Team</name>
		<index>6</index>
		<default-value />
		<display>true</display>
		<display-name>Staff Team List</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Healthcare pathways - CCR ACTPAS")%&gt;&lt;%exec config.setEntryPointName("CCR Staff Team")%&gt;&lt;%exec config.setReturnValueName("Staff Code")%&gt;&lt;%exec config.setDisplayValueName("Staff Team")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
		<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_Intake_IAM_Health</name>
		<role-id>98fe6c63-b044-4466-80f4-81902e4636d8</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_CHI Level 1</name>
		<role-id>d320af6f-e94f-458c-9121-7c72b9e520d5</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityHealthCentreAdmin</name>
		<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>f43366ee-8b1e-41c7-b92f-cda91a1f5cdd</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>80d6b9cf-9a44-45ee-a20f-3b10d1fef613</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Admin</name>
		<role-id>cbc88bf9-dde8-4251-a408-7c32b869ef6e</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Care Users</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Home Page</name>
	<automatic-membership>false</automatic-membership>
	<group-attribute>
		<name>My Patient List</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>My Patient List</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>Referals</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Referals</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Nurse Practitioner - WiC</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Nursing</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Nutrition</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community OT</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Physio</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Podiatry</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Service</name>
	<automatic-membership>false</automatic-membership>
	<description>The attributes for the community users</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Social Worker</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Community Teamleader</name>
	<automatic-membership>false</automatic-membership>
	<description>Community Teamleaders Clinicians who can assign and triage lists.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Communtiy Health Centre Admin</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
		<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityHealthCentreAdmin</name>
		<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Discharge Summary</name>
	<automatic-membership>false</automatic-membership>
	<description>Read only access to discharge summary</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_ClericalCHHS_IAM_Health</name>
		<role-id>ee57ccc7-c0c6-49d2-b54a-cbaa2771c05c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClericalCalvary_IAM_Health</name>
		<role-id>d1161bad-0aaa-4eec-8b7f-a5e0b8900f01</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
		<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCalvary_IAM_Health</name>
		<role-id>27b80918-a6aa-469b-855d-8cac578e2317</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
		<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_Intake_IAM_Health</name>
		<role-id>98fe6c63-b044-4466-80f4-81902e4636d8</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
		<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	</role>
	<role>
		<name>CCR_Clerical</name>
		<role-id>34bf9f65-3406-4fbd-a6fa-e35f79043120</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCHHS</name>
		<role-id>5e8cff0c-9292-4535-b0e9-83706356011f</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCalvary</name>
		<role-id>209557c3-b018-4e26-9851-3c50ff04b400</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCalvary</name>
		<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCalvary</name>
		<role-id>0f62c137-a797-4223-95af-f139444b99a3</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityHealthCentreAdmin</name>
		<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>f43366ee-8b1e-41c7-b92f-cda91a1f5cdd</role-id>
	</role>
	<role>
		<name>ClPtl_MedStudentCHHS</name>
		<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>DischargeSummaryAudit</name>
	<automatic-membership>false</automatic-membership>
	<description>View audit history for discharge summary</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>DischargeSummaryAuthorisation</name>
	<automatic-membership>false</automatic-membership>
	<description>Access to the Discharge Summary Authorisation Search</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_Admin_IAM_Health</name>
		<role-id>79ddda77-dbbb-40e2-bc63-b3361cf06723</role-id>
	</role>
	<role>
		<name>ClPtl_Admin</name>
		<role-id>61bde4f2-fd13-42a3-95f6-8b94443ea741</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>DischargeSummaryFinalise</name>
	<automatic-membership>false</automatic-membership>
	<description>Finalise a discharge summary.  Doctor only.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>DischargeSummaryPrint</name>
	<automatic-membership>false</automatic-membership>
	<description>Print discharge summary</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_ClericalCHHS_IAM_Health</name>
		<role-id>ee57ccc7-c0c6-49d2-b54a-cbaa2771c05c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
		<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCHHS</name>
		<role-id>5e8cff0c-9292-4535-b0e9-83706356011f</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCalvary</name>
		<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>DischargeSummaryScript</name>
	<automatic-membership>false</automatic-membership>
	<description>Write discharge script.  Doctor only.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>DischargeSummaryWrite</name>
	<automatic-membership>false</automatic-membership>
	<description>Write discharge summary.  Doctor only.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Disease Management Administrators</name>
	<description>Users who can access the administration screens of Soprano Disease Management</description>
	<system-object>false</system-object>
</group>
<group>
	<name>Disease Management Data Enterers</name>
	<description>Users who can enter data into the Soprano Disease Management system on behalf of provider</description>
	<group-attribute>
		<name>Provider List</name>
		<index>0</index>
		<display-name>Provider List</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Soprano Disease Management")%&gt;&lt;%exec config.setEntryPointName("DM Overdue Tasks")%&gt;&lt;%exec config.setReturnValueName("Provider.Id.ProviderIDAndType")%&gt;&lt;%exec config.setDisplayValueName("Provider.Id.ProviderIDAndTypeAndName")%&gt;</parameter-string>
		<protected>false</protected>
		<user-editable>false</user-editable>
	</group-attribute>
	<system-object>false</system-object>
</group>
<group>
	<name>Disease Management Providers</name>
	<automatic-membership>false</automatic-membership>
	<description>Healthcare Providers that can access the Soprano Disease Management provider and user screens</description>
	<group-attribute>
		<name>DM Provider ID</name>
		<index>0</index>
		<default-value />
		<display>false</display>
		<display-name>DM Provider ID</display-name>
		<input-type>Text Field</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
		<protected>false</protected>
		<user-editable>false</user-editable>
	</group-attribute>
	<group-attribute>
		<name>DM Provider Namespace</name>
		<index>1</index>
		<default-value />
		<display>false</display>
		<display-name>DM Provider Namespace</display-name>
		<input-type>Text Field</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
		<protected>false</protected>
		<user-editable>false</user-editable>
	</group-attribute>
	<group-attribute>
		<name>Default Pathway View</name>
		<index>2</index>
		<default-value />
		<display>false</display>
		<display-name>Default Pathway Name</display-name>
		<input-type>Text Field</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
		<protected>false</protected>
		<user-editable>false</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Disease Management Users</name>
	<automatic-membership>false</automatic-membership>
	<description>Users who can access the Soprano Disease Management user screens</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Doctor CHHS User</name>
	<automatic-membership>false</automatic-membership>
	<description>Functionality unique to CHHS doctor users</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Doctor Calvary User</name>
	<automatic-membership>false</automatic-membership>
	<description>This group is for Calvary Doctors, it has no attributes or entry points at this stage.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Forms Administrators</name>
	<automatic-membership>false</automatic-membership>
	<description>Members can access the Forms Administration pages.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Forms Maintainers</name>
	<automatic-membership>false</automatic-membership>
	<description>Users that are able to maintain form designs. Members are able to access the form management related entry points. Members are distinct from Administrators in that they still have restricted access to certain functionality when designing forms.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Forms Users</name>
	<automatic-membership>false</automatic-membership>
	<description>Users with access to view documents created using the Concerto Forms application.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>General User</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHHSGeneral_IAM_Health</name>
		<role-id>df405dca-e74b-439d-a370-0105e0c7aa26</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CalvaryGeneral_IAM_Health</name>
		<role-id>448c9d36-7c9b-45b5-9581-d88f2260b575</role-id>
	</role>
	<role>
		<name>ClPtl_CHHSGeneral</name>
		<role-id>0a0f6318-95c0-4394-bfd2-ab35952870e0</role-id>
	</role>
	<role>
		<name>ClPtl_CalvaryGeneral</name>
		<role-id>6efbfefb-713b-46bf-a351-8e062810f638</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Generic Community Clinician</name>
	<automatic-membership>false</automatic-membership>
	<description>The attributes for the community users</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Generic Community User</name>
	<automatic-membership>false</automatic-membership>
	<description>Group allowed access to Community application screens</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
		<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_Intake_IAM_Health</name>
		<role-id>98fe6c63-b044-4466-80f4-81902e4636d8</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_CHI Level 1</name>
		<role-id>d320af6f-e94f-458c-9121-7c72b9e520d5</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityHealthCentreAdmin</name>
		<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>80d6b9cf-9a44-45ee-a20f-3b10d1fef613</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>f43366ee-8b1e-41c7-b92f-cda91a1f5cdd</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Admin</name>
		<role-id>cbc88bf9-dde8-4251-a408-7c32b869ef6e</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Generic User</name>
	<automatic-membership>false</automatic-membership>
	<description>Access to base Portal functionality.  CHHS and Calvary clinicians, doctors and clerical staff have access to this group.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_Admin_IAM_Health</name>
		<role-id>79ddda77-dbbb-40e2-bc63-b3361cf06723</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClericalCHHS_IAM_Health</name>
		<role-id>ee57ccc7-c0c6-49d2-b54a-cbaa2771c05c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClericalCalvary_IAM_Health</name>
		<role-id>d1161bad-0aaa-4eec-8b7f-a5e0b8900f01</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
		<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCalvary_IAM_Health</name>
		<role-id>27b80918-a6aa-469b-855d-8cac578e2317</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
		<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_Intake_IAM_Health</name>
		<role-id>98fe6c63-b044-4466-80f4-81902e4636d8</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
		<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>CCR_Clerical</name>
		<role-id>34bf9f65-3406-4fbd-a6fa-e35f79043120</role-id>
	</role>
	<role>
		<name>ClPtl_Admin</name>
		<role-id>61bde4f2-fd13-42a3-95f6-8b94443ea741</role-id>
	</role>
	<role>
		<name>ClPtl_CHI Level 1</name>
		<role-id>d320af6f-e94f-458c-9121-7c72b9e520d5</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCHHS</name>
		<role-id>5e8cff0c-9292-4535-b0e9-83706356011f</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCalvary</name>
		<role-id>209557c3-b018-4e26-9851-3c50ff04b400</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCalvary</name>
		<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCalvary</name>
		<role-id>0f62c137-a797-4223-95af-f139444b99a3</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityHealthCentreAdmin</name>
		<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>f43366ee-8b1e-41c7-b92f-cda91a1f5cdd</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>80d6b9cf-9a44-45ee-a20f-3b10d1fef613</role-id>
	</role>
	<role>
		<name>ClPtl_MedStudentCHHS</name>
		<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Admin</name>
		<role-id>cbc88bf9-dde8-4251-a408-7c32b869ef6e</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>MedMan - Complete Full Review</name>
	<automatic-membership>false</automatic-membership>
	<description>Users who can complete a draft Full Review and publish it as final.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>MedMan - Create Draft Full Review</name>
	<automatic-membership>false</automatic-membership>
	<description>Users who can perform all actions in the Full Review page except completing Full Review.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>MedMan - Create Script</name>
	<automatic-membership>false</automatic-membership>
	<description>Users who can update supply and print a prescription.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>MedMan - Update Medication Administration</name>
	<automatic-membership>false</automatic-membership>
	<description>Users who can perform updates on medication administrations.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>MedMan - Update Medication Record</name>
	<automatic-membership>false</automatic-membership>
	<description>Users who can perform ad hoc add, change and stop for the patient's current medication list.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>MedMan - View Medication Record</name>
	<automatic-membership>false</automatic-membership>
	<description>Users who can view the patient's current medication list.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
		<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_Intake_IAM_Health</name>
		<role-id>98fe6c63-b044-4466-80f4-81902e4636d8</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_CHI Level 1</name>
		<role-id>d320af6f-e94f-458c-9121-7c72b9e520d5</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityHealthCentreAdmin</name>
		<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>80d6b9cf-9a44-45ee-a20f-3b10d1fef613</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Admin</name>
		<role-id>cbc88bf9-dde8-4251-a408-7c32b869ef6e</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Nursing - WiC</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_WiC</name>
		<role-id>ffe9d265-c8c9-401e-9069-6585c5e1a428</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>PACSViewer</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows user to access PACSViewer</description>
	<group-attribute>
		<name>PACSViewerUserName</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>User Name</display-name>
		<input-type>Text Field</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>PACSViewerPassword</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Password</display-name>
		<input-type>Password</input-type>
		<parameter-string />
		<protected>false</protected>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
		<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<role>
		<name>ClPtl_MedStudentCHHS</name>
		<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>PCEHR View</name>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>PRISM Administrators</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows users to access PRISM application as PRISM Admin user</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_Admin_IAM_Health</name>
		<role-id>79ddda77-dbbb-40e2-bc63-b3361cf06723</role-id>
	</role>
	<role>
		<name>ClPtl_Admin</name>
		<role-id>61bde4f2-fd13-42a3-95f6-8b94443ea741</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>PRISM Users</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows users to access PRISM application.</description>
	<group-attribute>
		<name>PRISMUserName</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>User Name</display-name>
		<input-type>Text Field</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>PRISMPassword</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Password</display-name>
		<input-type>Password</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setSize("20")%&gt;&lt;%exec config.setDefaultValue("")%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Patient Portal Provider</name>
	<automatic-membership>false</automatic-membership>
	<description>Patient Portal invitation and management. Must be specifically requested by user to be applied as an adhoc group</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Patient Search</name>
	<system-object>false</system-object>
</group>
<group>
	<name>Pharmacy Homepage</name>
	<automatic-membership>false</automatic-membership>
	<description>The home page for the pharmacists consist of the following windowlets:&#xD;
	My Inpatients&#xD;
	Hospital-wide Patients with No MRF</description>
	<group-attribute>
		<name>My Wards</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>My Wards</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Orion - Patient Searches &amp; Demographics")%&gt;&lt;%exec config.setEntryPointName("Unit Search")%&gt;&lt;%exec config.setReturnValueName("Code")%&gt;&lt;%exec config.setDisplayValueName("Location")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>My Medical Team</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>My Medical Team</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Orion - Patient Searches &amp; Demographics")%&gt;&lt;%exec config.setEntryPointName("Clinician Search")%&gt;&lt;%exec config.setReturnValueName("Provider.Id.ProviderIDAndType")%&gt;&lt;%exec config.setDisplayValueName("Provider.Co.ProviderName")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Restricted Administrator User</name>
	<automatic-membership>false</automatic-membership>
	<description>Access required by approved Clinical Records and GP Liaison staff to audit and report on discharge summaries.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_ClericalCHHS_IAM_Health</name>
		<role-id>ee57ccc7-c0c6-49d2-b54a-cbaa2771c05c</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Riskman</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows users to access Riskman (ACT Health Incident Management System).</description>
	<group-attribute>
		<name>RiskmanUserName</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>User Name</display-name>
		<input-type>Text Field</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>RiskmanPassword</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Password</display-name>
		<input-type>Password</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
		<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
		<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
		<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_Intake_IAM_Health</name>
		<role-id>98fe6c63-b044-4466-80f4-81902e4636d8</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
		<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CNTeamleader</name>
		<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityAlliedHealth</name>
		<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityHealthCentreAdmin</name>
		<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_Intake</name>
		<role-id>80d6b9cf-9a44-45ee-a20f-3b10d1fef613</role-id>
	</role>
	<role>
		<name>ClPtl_MedStudentCHHS</name>
		<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Task List Users</name>
	<automatic-membership>false</automatic-membership>
	<description>Users who are able to view/modify tasks</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
		<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
		<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_CHILevel2</name>
		<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityClinician</name>
		<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>Team Leader - CN</name>
	<automatic-membership>false</automatic-membership>
	<description>Community Teamleaders Clinicians who can assign and triage lists.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>WiC Admin Home Page</name>
	<automatic-membership>false</automatic-membership>
	<group-attribute>
		<name>Referals</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>Referals</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>Whiteboard</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Whiteboard</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("cWhiteboard")%&gt;&lt;%exec config.setEntryPointName("Whiteboard")%&gt;&lt;%exec config.setReturnValueName("")%&gt;&lt;%exec config.setDisplayValueName("")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>WiC Nursing</name>
	<automatic-membership>false</automatic-membership>
	<inactivity-timeout>15</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>WiC Nursing Home Page</name>
	<automatic-membership>false</automatic-membership>
	<group-attribute>
		<name>My Patient List</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>My Patient List</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<group-attribute>
		<name>Referals</name>
		<index>1</index>
		<default-value />
		<display>true</display>
		<display-name>Referals</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string />
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Add Alerts and Diagnosis</name>
	<automatic-membership>false</automatic-membership>
	<description />
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Administer Medication</name>
	<automatic-membership>false</automatic-membership>
	<description>Provides user with ability to record medicaiton administration events.
Usually provided to nurses and doctors.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Administration</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows access to administration tasks such as configuration screens for Concerto Orders.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_Admin_IAM_Health</name>
		<role-id>79ddda77-dbbb-40e2-bc63-b3361cf06723</role-id>
	</role>
	<role>
		<name>ClPtl_Admin</name>
		<role-id>61bde4f2-fd13-42a3-95f6-8b94443ea741</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Alerts and Diagnosis</name>
	<automatic-membership>false</automatic-membership>
	<description />
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Create Prescription</name>
	<automatic-membership>false</automatic-membership>
	<description>Provides the user ability to place orders for Medications.
Usually provided to doctors and nurses with prescribing abilities.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Diagnostics Proxy Orderer</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows the user to place orders on behalf of one or more diagnostics orderers.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Doctor</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows access to orderable items for Doctors</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - NIX OPD/ED</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows access to orderable items for NIX OPD/ED</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - NIX Thoracic/CCU</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows access to orderable items for NIX Thoracic/CCU</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - NIX WIC</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows access to orderable items for NIX WIC</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Order Laboratory</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows the user to place orders for Laboratory. 
Usually assigned to doctors and limited nurses.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Order Medications</name>
	<automatic-membership>false</automatic-membership>
	<description>Provides the user ability to place orders for Medications.
Usually provided to doctors and nurses with prescribing abilities.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Order Radiology</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows the user to place orders for Radiology. 
Usually assigned to doctors and limited nurses.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Patient Plan</name>
	<automatic-membership>false</automatic-membership>
	<description>Used to control who has access to the patient plan screen.
This allows to the user to place laboratory/radiology and medication orders from a single screen.
Usually assigned to all roles that have the ability to order laboratory/radiology and medication orders.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - Phlebotomy</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows users to perform phlebotomy tasks.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - View Laboratory</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows the user to review Laboratory orders that have been placed.
Usually assigned to all doctors and nurses.
This group may also be used to control who can view laboratory results as usually the permission to view laboratory orders is linked with permission to view results.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - View Medications</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows the user to view the medications the patient is on.
Usually assigned to Doctors and Nurses.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - View Patient Record</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows the user to view the Dynamic patient summary and document tree.
Usually assigned to Nurses, Doctors and some clerks.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - View Prescription</name>
	<automatic-membership>false</automatic-membership>
	<description />
	<inactivity-timeout>0</inactivity-timeout>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cOrders - View Radiology</name>
	<automatic-membership>false</automatic-membership>
	<description>Allows the user to review Radiology orders that have been placed.
Usually assigned to all doctors and nurses.
This group may also be used to control who can view radiology results as usually the permission to view radiology orders is linked with permission to view results.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
		<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCalvary_IAM_Health</name>
		<role-id>27b80918-a6aa-469b-855d-8cac578e2317</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
		<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCalvary</name>
		<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCalvary</name>
		<role-id>0f62c137-a797-4223-95af-f139444b99a3</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<role>
		<name>ClPtl_MedStudentCHHS</name>
		<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Doctor</name>
	<automatic-membership>false</automatic-membership>
	<description />
	<group-attribute>
		<name>MyWard</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>My Ward</display-name>
		<input-type>Popup Search</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("cWhiteboard")%&gt;&lt;%exec config.setEntryPointName("Popup Site Search")%&gt;&lt;%exec config.setReturnValueName("[orionhealth.com]WhiteboardSite.Id.SiteId")%&gt;&lt;%exec config.setDisplayValueName("[orionhealth.com]WhiteboardSite.Co.Name")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Doctor Handover</name>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Doctor Seenby</name>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Edit Location</name>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Medical Discharge</name>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Nurse</name>
	<automatic-membership>false</automatic-membership>
	<description />
	<group-attribute>
		<name>MyWard</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>My Ward</display-name>
		<input-type>Popup Search</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("cWhiteboard")%&gt;&lt;%exec config.setEntryPointName("Popup Site Search")%&gt;&lt;%exec config.setReturnValueName("[orionhealth.com]WhiteboardSite.Id.SiteId")%&gt;&lt;%exec config.setDisplayValueName("[orionhealth.com]WhiteboardSite.Co.Name")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Nurse Handover</name>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Nurse Seenby</name>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Physical Discharge</name>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Remove Physical Discharge</name>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Update Note</name>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard Update Triage Category</name>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard View</name>
	<role>
		<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
		<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_CommunityHealthCentreAdmin</name>
		<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>cWhiteboard View Patient Summary</name>
	<role>
		<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
		<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_WiCNurse</name>
		<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	</role>
	<role>
		<name>ClPtl_WiC_Whitboard</name>
		<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	</role>
	<system-object>false</system-object>
</group>
<group>
	<name>canViewBreastScreeningAuditLog</name>
	<system-object>false</system-object>
</group>
<group>
	<name>eReferral Administrator</name>
	<automatic-membership>false</automatic-membership>
	<description>eReferral Administrator entrypoints, Must be specifically requested by user to be applied as an adhoc group</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_Admin_IAM_Health</name>
		<role-id>79ddda77-dbbb-40e2-bc63-b3361cf06723</role-id>
	</role>
	<role>
		<name>ClPtl_Admin</name>
		<role-id>61bde4f2-fd13-42a3-95f6-8b94443ea741</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>eReferral Amend</name>
	<automatic-membership>false</automatic-membership>
	<description>Access to view, manage and amend eReferrals.  CHHS doctors only.</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>eReferral User</name>
	<automatic-membership>false</automatic-membership>
	<group-attribute>
		<name>Specialty</name>
		<index>0</index>
		<default-value />
		<display>true</display>
		<display-name>Specialty</display-name>
		<input-type>Dynamic List</input-type>
		<parameter-string>&lt;%exec config.setAdvanced( false )%&gt;&lt;%exec config.setApplicationName("Soprano Referrals")%&gt;&lt;%exec config.setEntryPointName("Specialty Search")%&gt;&lt;%exec config.setReturnValueName("Specialty")%&gt;&lt;%exec config.setDisplayValueName("Specialty")%&gt;&lt;%exec config.setWidth(500)%&gt;&lt;%exec config.setHeight(600)%&gt;&lt;%exec config.setOpenInWindow(false)%&gt;</parameter-string>
		<user-editable>true</user-editable>
	</group-attribute>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_ClericalCHHS_IAM_Health</name>
		<role-id>ee57ccc7-c0c6-49d2-b54a-cbaa2771c05c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
		<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
		<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>CCR_Clerical</name>
		<role-id>34bf9f65-3406-4fbd-a6fa-e35f79043120</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCHHS</name>
		<role-id>5e8cff0c-9292-4535-b0e9-83706356011f</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCalvary</name>
		<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	</role>
	<role>
		<name>ClPtl_DrCHHS</name>
		<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<group>
	<name>eReferral View</name>
	<automatic-membership>false</automatic-membership>
	<description>View only access to eReferrals.  CHHS and Calvary clinicians and doctors</description>
	<inactivity-timeout>0</inactivity-timeout>
	<role>
		<name>Apps_ClPtl_ClericalCHHS_IAM_Health</name>
		<role-id>ee57ccc7-c0c6-49d2-b54a-cbaa2771c05c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClericalCalvary_IAM_Health</name>
		<role-id>d1161bad-0aaa-4eec-8b7f-a5e0b8900f01</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
		<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
		<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
		<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_ClnPhrmCalvary_IAM_Health</name>
		<role-id>27b80918-a6aa-469b-855d-8cac578e2317</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
		<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	</role>
	<role>
		<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
		<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	</role>
	<role>
		<name>CCR_Clerical</name>
		<role-id>34bf9f65-3406-4fbd-a6fa-e35f79043120</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCHHS</name>
		<role-id>5e8cff0c-9292-4535-b0e9-83706356011f</role-id>
	</role>
	<role>
		<name>ClPtl_ClericalCalvary</name>
		<role-id>209557c3-b018-4e26-9851-3c50ff04b400</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCHHS</name>
		<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	</role>
	<role>
		<name>ClPtl_ClinicianCalvary</name>
		<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCHHS</name>
		<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	</role>
	<role>
		<name>ClPtl_ClnPhrmCalvary</name>
		<role-id>0f62c137-a797-4223-95af-f139444b99a3</role-id>
	</role>
	<role>
		<name>ClPtl_DrCalvary</name>
		<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	</role>
	<role>
		<name>ClPtl_MedStudentCHHS</name>
		<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	</role>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
	<system-object>false</system-object>
</group>
<menu>
	<name>Forms</name>
	<index>0</index>
	<description>Entry points for the Forms application.</description>
	<menu-entry-point>
		<index>0</index>
		<entry-point>
			<name>Form Designer Main Page</name>
			<application>
				<name>Forms</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>1</index>
		<entry-point>
			<name>Search for Form</name>
			<application>
				<name>Soprano Forms</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>2</index>
		<entry-point>
			<name>Search for Shared Lookups</name>
			<application>
				<name>Forms</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>3</index>
		<entry-point>
			<name>Clear Caches</name>
			<application>
				<name>Forms</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>4</index>
		<entry-point>
			<name>Show Recently Used Forms</name>
			<application>
				<name>Soprano Forms</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>5</index>
		<entry-point>
			<name>Lookup List</name>
			<application>
				<name>Forms Admin</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<system-object>false</system-object>
</menu>
<menu>
	<name>Patients</name>
	<index>1</index>
	<description />
	<menu-entry-point>
		<index>0</index>
		<entry-point>
			<name>Demographic Search</name>
			<application>
				<name>Orion - Patient Searches &amp; Demographics</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>1</index>
		<entry-point>
			<name>Inpatient Search</name>
			<application>
				<name>Orion - Patient Searches &amp; Demographics</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>2</index>
		<entry-point>
			<name>Outpatient Search</name>
			<application>
				<name>Orion - Patient Searches &amp; Demographics</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>3</index>
		<entry-point>
			<name>Worklists</name>
			<application>
				<name>Orion - Worklists</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>4</index>
		<entry-point>
			<name>ReviewEDS</name>
			<application>
				<name>ReviewEDS</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>5</index>
		<entry-point>
			<name>ED Patient Search</name>
			<application>
				<name>Orion - Patient Searches &amp; Demographics</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>6</index>
		<entry-point>
			<name>Recent Patients</name>
			<application>
				<name>Medical Applications Portal</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<system-object>false</system-object>
</menu>
<menu>
	<name>Referrals</name>
	<index>2</index>
	<description>Referrals menu item</description>
	<menu-entry-point>
		<index>0</index>
		<entry-point>
			<name>Menu - All</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>1</index>
		<entry-point>
			<name>Menu - Awaiting Pre Reg (received)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>2</index>
		<entry-point>
			<name>Menu - Awaiting Pre Reg (declined)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>3</index>
		<entry-point>
			<name>Menu - Awaiting Reg (received)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>4</index>
		<entry-point>
			<name>Menu - Awaiting Triage (registered)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>5</index>
		<entry-point>
			<name>Menu - Awaiting Booking (triaged)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>6</index>
		<entry-point>
			<name>Menu - Returned (returned)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>7</index>
		<entry-point>
			<name>Menu - Booked</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>8</index>
		<entry-point>
			<name>Menu - Completed</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>9</index>
		<entry-point>
			<name>Menu - Draft</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>10</index>
		<entry-point>
			<name>Rejected Referrals</name>
			<application>
				<name>Referral Request</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<system-object>false</system-object>
</menu>
<menu>
	<name>cWhiteboard Admin</name>
	<index>5</index>
	<menu-entry-point>
		<index>0</index>
		<entry-point>
			<name>Facility Manager</name>
			<application>
				<name>cWhiteboard</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</menu-entry-point>
	<menu-entry-point>
		<index>1</index>
		<entry-point>
			<name>Integrated Managers</name>
			<application>
				<name>cWhiteboard</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</menu-entry-point>
	<system-object>false</system-object>
</menu>
<menu>
	<name>cWhiteboard</name>
	<index>7</index>
	<menu-entry-point>
		<index>0</index>
		<entry-point>
			<name>Site Search</name>
			<application>
				<name>cWhiteboard</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</menu-entry-point>
	<menu-entry-point>
		<index>1</index>
		<entry-point>
			<name>My Ward</name>
			<application>
				<name>cWhiteboard</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
	</menu-entry-point>
	<system-object>false</system-object>
</menu>
<menu>
	<name>DMA Administration</name>
	<index>9</index>
	<description />
	<menu-entry-point>
		<index>0</index>
		<entry-point>
			<name>Add New DMA</name>
			<application>
				<name>Healthcare pathways - WIC Form Admin</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>1</index>
		<entry-point>
			<name>EP - DMA List</name>
			<application>
				<name>Healthcare pathways - WIC Form Admin</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>2</index>
		<entry-point>
			<name>Patient - WiC Daily Reporting</name>
			<application>
				<name>Healthcare pathways - WIC</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<height>400</height>
		<open-type>normal</open-type>
		<width>600</width>
	</menu-entry-point>
	<system-object>false</system-object>
</menu>
<menu>
	<name>Resources</name>
	<index>16</index>
	<description>Useful web resources for Community Health Intake users.</description>
	<menu-entry-point>
		<index>0</index>
		<entry-point>
			<name>Level 1 Flip Chart</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>window</open-type>
		<width>600</width>
	</menu-entry-point>
	<menu-entry-point>
		<index>1</index>
		<entry-point>
			<name>Level 2 Flip Chart</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
			<secure-enabled>false</secure-enabled>
		</entry-point>
		<features />
		<height>400</height>
		<open-type>window</open-type>
		<width>600</width>
	</menu-entry-point>
	<system-object>false</system-object>
</menu>
<portal-page>
	<name>CCR CHI1 Home Page</name>
	<description>:::: CHI Level 1 :::: Homepage - for final layout</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<first-node>
				<first>true</first>
				<first-node>
					<first>true</first>
					<first-node>
						<first>true</first>
						<portal-page-windowlet>
							<portal-page>
								<name>CCR CHI1 Home Page</name>
							</portal-page>
							<windowlet>
								<name>Awaiting Pre-Registration (Received)</name>
								<application>
									<name>Healthcare pathways - CCR Referrals</name>
								</application>
							</windowlet>
						</portal-page-windowlet>
						<terminal>true</terminal>
					</first-node>
					<layout>horizontal</layout>
					<second-node>
						<first>false</first>
						<portal-page-windowlet>
							<portal-page>
								<name>CCR CHI1 Home Page</name>
							</portal-page>
							<windowlet>
								<name>Awaiting Pre-Registration (Declined)</name>
								<application>
									<name>Healthcare pathways - CCR Referrals</name>
								</application>
							</windowlet>
						</portal-page-windowlet>
						<terminal>true</terminal>
					</second-node>
					<terminal>false</terminal>
				</first-node>
				<layout>horizontal</layout>
				<second-node>
					<first>false</first>
					<portal-page-windowlet>
						<portal-page>
							<name>CCR CHI1 Home Page</name>
						</portal-page>
						<windowlet>
							<name>Awaiting Registration</name>
							<application>
								<name>Healthcare pathways - CCR Referrals</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</second-node>
				<terminal>false</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<portal-page-windowlet>
					<portal-page>
						<name>CCR CHI1 Home Page</name>
					</portal-page>
					<windowlet>
						<name>Awaiting Triage</name>
						<application>
							<name>Healthcare pathways - CCR Referrals</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</second-node>
			<terminal>false</terminal>
		</first-node>
		<layout>horizontal</layout>
		<second-node>
			<first>false</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>CCR CHI1 Home Page</name>
					</portal-page>
					<windowlet>
						<name>Awaiting Triage (Transferred)</name>
						<application>
							<name>Healthcare pathways - CCR Referrals</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<first-node>
					<first>true</first>
					<portal-page-windowlet>
						<portal-page>
							<name>CCR CHI1 Home Page</name>
						</portal-page>
						<windowlet>
							<name>Awaiting Triage (Call Back)</name>
							<application>
								<name>Healthcare pathways - CCR Referrals</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</first-node>
				<layout>horizontal</layout>
				<second-node>
					<first>false</first>
					<first-node>
						<first>true</first>
						<portal-page-windowlet>
							<portal-page>
								<name>CCR CHI1 Home Page</name>
							</portal-page>
							<windowlet>
								<name>Awaiting Booking</name>
								<application>
									<name>Healthcare pathways - CCR Referrals</name>
								</application>
							</windowlet>
						</portal-page-windowlet>
						<terminal>true</terminal>
					</first-node>
					<layout>horizontal</layout>
					<second-node>
						<first>false</first>
						<portal-page-windowlet>
							<portal-page>
								<name>CCR CHI1 Home Page</name>
							</portal-page>
							<windowlet>
								<name>Recent Patients</name>
								<application>
									<name>Medical Applications Portal</name>
								</application>
							</windowlet>
						</portal-page-windowlet>
						<terminal>true</terminal>
					</second-node>
					<terminal>false</terminal>
				</second-node>
				<terminal>false</terminal>
			</second-node>
			<terminal>false</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Booking</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Pre-Registration (Declined)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Pre-Registration (Received)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Registration</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Triage</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Triage (Call Back)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Triage (Transferred)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Completed</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Enrolled</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Pending Referrals</name>
			<application>
				<name>Referral Request</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Recent Patients</name>
			<application>
				<name>Medical Applications Portal</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>CCR CHI2 Home Page</name>
	<description>:::: CHI Level 2 :::: Homepage - for final layout</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>CCR CHI2 Home Page</name>
					</portal-page>
					<windowlet>
						<name>Awaiting Pre-Registration (Received)</name>
						<application>
							<name>Healthcare pathways - CCR Referrals</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<first-node>
					<first>true</first>
					<portal-page-windowlet>
						<portal-page>
							<name>CCR CHI2 Home Page</name>
						</portal-page>
						<windowlet>
							<name>Awaiting Registration</name>
							<application>
								<name>Healthcare pathways - CCR Referrals</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</first-node>
				<layout>horizontal</layout>
				<second-node>
					<first>false</first>
					<portal-page-windowlet>
						<portal-page>
							<name>CCR CHI2 Home Page</name>
						</portal-page>
						<windowlet>
							<name>Awaiting Triage</name>
							<application>
								<name>Healthcare pathways - CCR Referrals</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</second-node>
				<terminal>false</terminal>
			</second-node>
			<terminal>false</terminal>
		</first-node>
		<layout>horizontal</layout>
		<second-node>
			<first>false</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>CCR CHI2 Home Page</name>
					</portal-page>
					<windowlet>
						<name>Awaiting Triage (Transferred)</name>
						<application>
							<name>Healthcare pathways - CCR Referrals</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<first-node>
					<first>true</first>
					<first-node>
						<first>true</first>
						<portal-page-windowlet>
							<portal-page>
								<name>CCR CHI2 Home Page</name>
							</portal-page>
							<windowlet>
								<name>Awaiting Triage (Call Back)</name>
								<application>
									<name>Healthcare pathways - CCR Referrals</name>
								</application>
							</windowlet>
						</portal-page-windowlet>
						<terminal>true</terminal>
					</first-node>
					<layout>horizontal</layout>
					<second-node>
						<first>false</first>
						<portal-page-windowlet>
							<portal-page>
								<name>CCR CHI2 Home Page</name>
							</portal-page>
							<windowlet>
								<name>Awaiting Booking</name>
								<application>
									<name>Healthcare pathways - CCR Referrals</name>
								</application>
							</windowlet>
						</portal-page-windowlet>
						<terminal>true</terminal>
					</second-node>
					<terminal>false</terminal>
				</first-node>
				<layout>horizontal</layout>
				<second-node>
					<first>false</first>
					<portal-page-windowlet>
						<portal-page>
							<name>CCR CHI2 Home Page</name>
						</portal-page>
						<windowlet>
							<name>Recent Patients</name>
							<application>
								<name>Medical Applications Portal</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</second-node>
				<terminal>false</terminal>
			</second-node>
			<terminal>false</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Booking</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Pre-Registration (Declined)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Pre-Registration (Received)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Registration</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Triage</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Triage (Call Back)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Triage (Transferred)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Completed</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Enrolled</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Recent Patients</name>
			<application>
				<name>Medical Applications Portal</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>CCR Community Clinician Homepage</name>
	<description>:::: CCR :::: Community Clinician Homepage</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<portal-page-windowlet>
				<portal-page>
					<name>CCR Community Clinician Homepage</name>
				</portal-page>
				<windowlet>
					<name>My Appointments Booked (ACTPAS)</name>
					<application>
						<name>Healthcare pathways - CCR ACTPAS</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</first-node>
		<layout>horizontal</layout>
		<second-node>
			<first>false</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>CCR Community Clinician Homepage</name>
					</portal-page>
					<windowlet>
						<name>My Contacts (ACTPAS)</name>
						<application>
							<name>Healthcare pathways - CCR ACTPAS</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<portal-page-windowlet>
					<portal-page>
						<name>CCR Community Clinician Homepage</name>
					</portal-page>
					<windowlet>
						<name>Recent Patients</name>
						<application>
							<name>Medical Applications Portal</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</second-node>
			<terminal>false</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>My Appointments Booked (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>My Contacts (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Recent Patients</name>
			<application>
				<name>Medical Applications Portal</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>CCR Service Home Page</name>
	<description>:::: CHI Services :::: Homepage - for final layout</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<portal-page-windowlet>
				<portal-page>
					<name>CCR Service Home Page</name>
				</portal-page>
				<windowlet>
					<name>My Appointments Booked (ACTPAS)</name>
					<application>
						<name>Healthcare pathways - CCR ACTPAS</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</first-node>
		<layout>horizontal</layout>
		<second-node>
			<first>false</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>CCR Service Home Page</name>
					</portal-page>
					<windowlet>
						<name>My Contacts (ACTPAS)</name>
						<application>
							<name>Healthcare pathways - CCR ACTPAS</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<portal-page-windowlet>
					<portal-page>
						<name>CCR Service Home Page</name>
					</portal-page>
					<windowlet>
						<name>Recent Patients</name>
						<application>
							<name>Medical Applications Portal</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</second-node>
			<terminal>false</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Booking</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Review</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Enrolled</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>My Appointments Booked (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>My Contacts (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Recent Patients</name>
			<application>
				<name>Medical Applications Portal</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Referrals (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>CCR Teamleader Home Page</name>
	<description>:::: CCR Teamleader :::: Home Page</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<portal-page-windowlet>
				<portal-page>
					<name>CCR Teamleader Home Page</name>
				</portal-page>
				<windowlet>
					<name>Referrals (Speciality/Staff team)</name>
					<application>
						<name>Healthcare pathways - CCR Referrals</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</first-node>
		<layout>horizontal</layout>
		<portal-page-windowlet>
			<portal-page>
				<name>CCR Teamleader Home Page</name>
			</portal-page>
			<windowlet>
				<name>Awaiting Booking</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
			</windowlet>
		</portal-page-windowlet>
		<second-node>
			<first>false</first>
			<first-node>
				<first>true</first>
				<first-node>
					<first>true</first>
					<portal-page-windowlet>
						<portal-page>
							<name>CCR Teamleader Home Page</name>
						</portal-page>
						<windowlet>
							<name>Appointments Booked Homepage</name>
							<application>
								<name>Healthcare pathways - CCR ACTPAS</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</first-node>
				<layout>horizontal</layout>
				<second-node>
					<first>false</first>
					<portal-page-windowlet>
						<portal-page>
							<name>CCR Teamleader Home Page</name>
						</portal-page>
						<windowlet>
							<name>My Contacts (ACTPAS)</name>
							<application>
								<name>Healthcare pathways - CCR ACTPAS</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</second-node>
				<terminal>false</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<portal-page-windowlet>
					<portal-page>
						<name>CCR Teamleader Home Page</name>
					</portal-page>
					<windowlet>
						<name>Recent Patients</name>
						<application>
							<name>Medical Applications Portal</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</second-node>
			<terminal>false</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Appointments Booked Homepage</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Booking</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Review</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Enrolled</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>My Contacts (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Recent Patients</name>
			<application>
				<name>Medical Applications Portal</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Referrals</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Referrals (Speciality/Staff team)</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Clerical Homepage</name>
	<description>:::: WiC :::: WiC Admin Home Page</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Clerical Homepage</name>
					</portal-page>
					<windowlet>
						<name>Awaiting Pre-Registration</name>
						<application>
							<name>Healthcare pathways - CCR Referrals</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<first-node>
					<first>true</first>
					<portal-page-windowlet>
						<portal-page>
							<name>Clerical Homepage</name>
						</portal-page>
						<windowlet>
							<name>Awaiting Registration</name>
							<application>
								<name>Healthcare pathways - CCR Referrals</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</first-node>
				<layout>horizontal</layout>
				<second-node>
					<first>false</first>
					<portal-page-windowlet>
						<portal-page>
							<name>Clerical Homepage</name>
						</portal-page>
						<windowlet>
							<name>Awaiting Booking</name>
							<application>
								<name>Healthcare pathways - CCR Referrals</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</second-node>
				<terminal>false</terminal>
			</second-node>
			<terminal>false</terminal>
		</first-node>
		<layout>horizontal</layout>
		<portal-page-windowlet>
			<portal-page>
				<name>Clerical Homepage</name>
			</portal-page>
			<windowlet>
				<name>Recent Patients</name>
				<application>
					<name>Medical Applications Portal</name>
				</application>
			</windowlet>
		</portal-page-windowlet>
		<second-node>
			<first>false</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Clerical Homepage</name>
				</portal-page>
				<windowlet>
					<name>Recent Patients</name>
					<application>
						<name>Medical Applications Portal</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Booking</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Pre-Registration</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Registration</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Recent Patients</name>
			<application>
				<name>Medical Applications Portal</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Community Appointment Context Switch</name>
	<description>:::: CCR :::: Appointment and Context Switch components</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Community Appointment Context Switch</name>
					</portal-page>
					<windowlet>
						<name>My Appointments Booked (ACTPAS)</name>
						<application>
							<name>Healthcare pathways - CCR ACTPAS</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Community Appointment Context Switch</name>
					</portal-page>
					<windowlet>
						<name>My Contacts (ACTPAS)</name>
						<application>
							<name>Healthcare pathways - CCR ACTPAS</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</second-node>
			<terminal>false</terminal>
		</first-node>
		<layout>vertical</layout>
		<second-node>
			<first>false</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Appointment Context Switch</name>
				</portal-page>
				<windowlet>
					<name>ACTPAS</name>
					<application>
						<name>Healthcare pathways - CCR ACTPAS</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>ACTPAS</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>My Appointments Booked (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>My Contacts (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Community Correspondence</name>
	<description>:::: CCR :::: Correspondence</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Correspondence</name>
				</portal-page>
				<windowlet>
					<name>Event Status Update</name>
					<application>
						<name>Healthcare pathways - CCR Referrals</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</first-node>
		<layout>horizontal</layout>
		<portal-page-windowlet>
			<portal-page>
				<name>Community Correspondence</name>
			</portal-page>
			<windowlet>
				<name>Event Status Update</name>
				<application>
					<name>Healthcare pathways - CCR Referrals</name>
				</application>
			</windowlet>
		</portal-page-windowlet>
		<second-node>
			<first>false</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Correspondence</name>
				</portal-page>
				<windowlet>
					<name>Event Summary</name>
					<application>
						<name>Healthcare pathways - CCR Referrals</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Event Status Update</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Event Summary</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Community Demographic Context Switch</name>
	<description>:::: CCR ::::  This holds the Demographic and ACTPAS context switch windowlet.</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Demographic Context Switch</name>
				</portal-page>
				<windowlet>
					<name>Patient Demographics</name>
					<application>
						<name>Context Switching</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</first-node>
		<layout>vertical</layout>
		<second-node>
			<first>false</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Demographic Context Switch</name>
				</portal-page>
				<windowlet>
					<name>ACTPAS</name>
					<application>
						<name>Healthcare pathways - CCR ACTPAS</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>ACTPAS</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Demographics</name>
			<application>
				<name>Orion - Dynamic Patient Summary</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Patient Demographics</name>
			<application>
				<name>Context Switching</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Community Patient Overview</name>
	<description>:::: CCR Patient Profile :::: Patient overview and the entry point into a patient profile view that everyone in Community can view and update.</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Patient Overview</name>
				</portal-page>
				<windowlet>
					<name>Pathway Enrolments</name>
					<application>
						<name>Healthcare pathways - CCR Searches</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</first-node>
		<layout>horizontal</layout>
		<portal-page-windowlet>
			<portal-page>
				<name>Community Patient Overview</name>
			</portal-page>
			<windowlet>
				<name>Pathway Enrolments</name>
				<application>
					<name>Healthcare pathways - CCR Searches</name>
				</application>
			</windowlet>
		</portal-page-windowlet>
		<second-node>
			<first>false</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Community Patient Overview</name>
					</portal-page>
					<windowlet>
						<name>Referrals</name>
						<application>
							<name>Healthcare pathways - CCR Referrals</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<first-node>
					<first>true</first>
					<portal-page-windowlet>
						<portal-page>
							<name>Community Patient Overview</name>
						</portal-page>
						<windowlet>
							<name>Vital Signs and Observations</name>
							<application>
								<name>Healthcare pathways - CCR Searches</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</first-node>
				<layout>horizontal</layout>
				<second-node>
					<first>false</first>
					<first-node>
						<first>true</first>
						<portal-page-windowlet>
							<portal-page>
								<name>Community Patient Overview</name>
							</portal-page>
							<windowlet>
								<name>Adverse Reactions &amp; Alerts</name>
								<application>
									<name>Healthcare pathways - CCR ACTPAS</name>
								</application>
							</windowlet>
						</portal-page-windowlet>
						<terminal>true</terminal>
					</first-node>
					<layout>horizontal</layout>
					<second-node>
						<first>false</first>
						<first-node>
							<first>true</first>
							<portal-page-windowlet>
								<portal-page>
									<name>Community Patient Overview</name>
								</portal-page>
								<windowlet>
									<name>Medications</name>
									<application>
										<name>Healthcare pathways - CCR Searches</name>
									</application>
								</windowlet>
							</portal-page-windowlet>
							<terminal>true</terminal>
						</first-node>
						<layout>horizontal</layout>
						<second-node>
							<first>false</first>
							<first-node>
								<first>true</first>
								<portal-page-windowlet>
									<portal-page>
										<name>Community Patient Overview</name>
									</portal-page>
									<windowlet>
										<name>Medication Orders</name>
										<application>
											<name>Healthcare pathways - CCR Searches</name>
										</application>
									</windowlet>
								</portal-page-windowlet>
								<terminal>true</terminal>
							</first-node>
							<layout>horizontal</layout>
							<second-node>
								<first>false</first>
								<first-node>
									<first>true</first>
									<portal-page-windowlet>
										<portal-page>
											<name>Community Patient Overview</name>
										</portal-page>
										<windowlet>
											<name>Administered Medications</name>
											<application>
												<name>Healthcare pathways - CCR Searches</name>
											</application>
										</windowlet>
									</portal-page-windowlet>
									<terminal>true</terminal>
								</first-node>
								<layout>horizontal</layout>
								<second-node>
									<first>false</first>
									<first-node>
										<first>true</first>
										<portal-page-windowlet>
											<portal-page>
												<name>Community Patient Overview</name>
											</portal-page>
											<windowlet>
												<name>Immunisations</name>
												<application>
													<name>Healthcare pathways - CCR Searches</name>
												</application>
											</windowlet>
										</portal-page-windowlet>
										<terminal>true</terminal>
									</first-node>
									<layout>horizontal</layout>
									<second-node>
										<first>false</first>
										<first-node>
											<first>true</first>
											<portal-page-windowlet>
												<portal-page>
													<name>Community Patient Overview</name>
												</portal-page>
												<windowlet>
													<name>Treatment Orders</name>
													<application>
														<name>Healthcare pathways - CCR Searches</name>
													</application>
												</windowlet>
											</portal-page-windowlet>
											<terminal>true</terminal>
										</first-node>
										<layout>horizontal</layout>
										<second-node>
											<first>false</first>
											<first-node>
												<first>true</first>
												<portal-page-windowlet>
													<portal-page>
														<name>Community Patient Overview</name>
													</portal-page>
													<windowlet>
														<name>Medical History</name>
														<application>
															<name>Healthcare pathways - CCR Searches</name>
														</application>
													</windowlet>
												</portal-page-windowlet>
												<terminal>true</terminal>
											</first-node>
											<layout>horizontal</layout>
											<second-node>
												<first>false</first>
												<first-node>
													<first>true</first>
													<portal-page-windowlet>
														<portal-page>
															<name>Community Patient Overview</name>
														</portal-page>
														<windowlet>
															<name>Surgical History</name>
															<application>
																<name>Healthcare pathways - CCR Searches</name>
															</application>
														</windowlet>
													</portal-page-windowlet>
													<terminal>true</terminal>
												</first-node>
												<layout>horizontal</layout>
												<second-node>
													<first>false</first>
													<first-node>
														<first>true</first>
														<portal-page-windowlet>
															<portal-page>
																<name>Community Patient Overview</name>
															</portal-page>
															<windowlet>
																<name>Obstetric History</name>
																<application>
																	<name>Healthcare pathways - CCR Searches</name>
																</application>
															</windowlet>
														</portal-page-windowlet>
														<terminal>true</terminal>
													</first-node>
													<layout>horizontal</layout>
													<second-node>
														<first>false</first>
														<first-node>
															<first>true</first>
															<portal-page-windowlet>
																<portal-page>
																	<name>Community Patient Overview</name>
																</portal-page>
																<windowlet>
																	<name>Social History</name>
																	<application>
																		<name>Healthcare pathways - CCR Searches</name>
																	</application>
																</windowlet>
															</portal-page-windowlet>
															<terminal>true</terminal>
														</first-node>
														<layout>horizontal</layout>
														<second-node>
															<first>false</first>
															<first-node>
																<first>true</first>
																<portal-page-windowlet>
																	<portal-page>
																		<name>Community Patient Overview</name>
																	</portal-page>
																	<windowlet>
																		<name>Lifestyle Factors</name>
																		<application>
																			<name>Healthcare pathways - CCR Searches</name>
																		</application>
																	</windowlet>
																</portal-page-windowlet>
																<terminal>true</terminal>
															</first-node>
															<layout>horizontal</layout>
															<second-node>
																<first>false</first>
																<first-node>
																	<first>true</first>
																	<portal-page-windowlet>
																		<portal-page>
																			<name>Community Patient Overview</name>
																		</portal-page>
																		<windowlet>
																			<name>Progress Notes</name>
																			<application>
																				<name>Healthcare pathways - CCR Searches</name>
																			</application>
																		</windowlet>
																	</portal-page-windowlet>
																	<terminal>true</terminal>
																</first-node>
																<layout>horizontal</layout>
																<second-node>
																	<first>false</first>
																	<portal-page-windowlet>
																		<portal-page>
																			<name>Community Patient Overview</name>
																		</portal-page>
																		<windowlet>
																			<name>Global Forms</name>
																			<application>
																				<name>Healthcare pathways - CCR Searches</name>
																			</application>
																		</windowlet>
																	</portal-page-windowlet>
																	<terminal>true</terminal>
																</second-node>
																<terminal>false</terminal>
															</second-node>
															<terminal>false</terminal>
														</second-node>
														<terminal>false</terminal>
													</second-node>
													<terminal>false</terminal>
												</second-node>
												<terminal>false</terminal>
											</second-node>
											<terminal>false</terminal>
										</second-node>
										<terminal>false</terminal>
									</second-node>
									<terminal>false</terminal>
								</second-node>
								<terminal>false</terminal>
							</second-node>
							<terminal>false</terminal>
						</second-node>
						<terminal>false</terminal>
					</second-node>
					<terminal>false</terminal>
				</second-node>
				<terminal>false</terminal>
			</second-node>
			<terminal>false</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Administered Medications</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Adverse Reactions &amp; Alerts</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Global Forms</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Immunisations</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Lifestyle Factors</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Medical History</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Medication Orders</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Medications</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Obstetric History</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Pathway Enrolments</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Progress Notes</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Referrals</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Social History</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Surgical History</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Treatment Orders</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Vital Signs and Observations</name>
			<application>
				<name>Healthcare pathways - CCR Searches</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Community Patient Summary</name>
	<description>:::: Patient Summary Admin :::: Patient summary of encounters / appointments and bookings</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Community Patient Summary</name>
					</portal-page>
					<windowlet>
						<name>Patient Demographics</name>
						<application>
							<name>Context Switching</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<first-node>
					<first>true</first>
					<portal-page-windowlet>
						<portal-page>
							<name>Community Patient Summary</name>
						</portal-page>
						<windowlet>
							<name>ACTPAS</name>
							<application>
								<name>Healthcare pathways - CCR ACTPAS</name>
							</application>
						</windowlet>
					</portal-page-windowlet>
					<terminal>true</terminal>
				</first-node>
				<layout>horizontal</layout>
				<second-node>
					<first>false</first>
					<first-node>
						<first>true</first>
						<portal-page-windowlet>
							<portal-page>
								<name>Community Patient Summary</name>
							</portal-page>
							<windowlet>
								<name>Referrals</name>
								<application>
									<name>Healthcare pathways - CCR Referrals</name>
								</application>
							</windowlet>
						</portal-page-windowlet>
						<terminal>true</terminal>
					</first-node>
					<layout>horizontal</layout>
					<second-node>
						<first>false</first>
						<portal-page-windowlet>
							<portal-page>
								<name>Community Patient Summary</name>
							</portal-page>
							<windowlet>
								<name>Referrals (ACTPAS)</name>
								<application>
									<name>Healthcare pathways - CCR ACTPAS</name>
								</application>
							</windowlet>
						</portal-page-windowlet>
						<terminal>true</terminal>
					</second-node>
					<terminal>false</terminal>
				</second-node>
				<terminal>false</terminal>
			</second-node>
			<terminal>false</terminal>
		</first-node>
		<layout>horizontal</layout>
		<second-node>
			<first>false</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Community Patient Summary</name>
					</portal-page>
					<windowlet>
						<name>My Appointments Booked (ACTPAS)</name>
						<application>
							<name>Healthcare pathways - CCR ACTPAS</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Community Patient Summary</name>
					</portal-page>
					<windowlet>
						<name>My Contacts (ACTPAS)</name>
						<application>
							<name>Healthcare pathways - CCR ACTPAS</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</second-node>
			<terminal>false</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>ACTPAS</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Allergies &amp; Alerts</name>
			<application>
				<name>Orion - Dynamic Patient Summary</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Encounter History</name>
			<application>
				<name>Orion - Dynamic Patient Summary</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Future Appointments</name>
			<application>
				<name>Orion - Dynamic Patient Summary</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>My Appointments Booked (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>My Contacts (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Patient Demographics</name>
			<application>
				<name>Context Switching</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Patient Enrollment</name>
			<application>
				<name>Task List</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Patient Profile Check</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Referrals</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Referrals (ACTPAS)</name>
			<application>
				<name>Healthcare pathways - CCR ACTPAS</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Community Referrals Overview</name>
	<description>::::Referrals Overview::::</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Referrals Overview</name>
				</portal-page>
				<windowlet>
					<name>Referrals</name>
					<application>
						<name>Healthcare pathways - CCR Referrals</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</first-node>
		<layout>horizontal</layout>
		<second-node>
			<first>false</first>
			<first-node>
				<first>true</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Community Referrals Overview</name>
					</portal-page>
					<windowlet>
						<name>Closed</name>
						<application>
							<name>Healthcare pathways - CCR Referrals</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Community Referrals Overview</name>
					</portal-page>
					<windowlet>
						<name>Pending Referrals</name>
						<application>
							<name>Referral Request</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</second-node>
			<terminal>false</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Closed</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Pending Referrals</name>
			<application>
				<name>Referral Request</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Referrals</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Community Team Lead Home Page</name>
	<description />
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<first-node>
				<first>true</first>
				<terminal>true</terminal>
			</first-node>
			<layout>horizontal</layout>
			<second-node>
				<first>false</first>
				<portal-page-windowlet>
					<portal-page>
						<name>Community Team Lead Home Page</name>
					</portal-page>
					<windowlet>
						<name>Current Task List</name>
						<application>
							<name>Soprano Disease Management</name>
						</application>
					</windowlet>
				</portal-page-windowlet>
				<terminal>true</terminal>
			</second-node>
			<terminal>false</terminal>
		</first-node>
		<layout>horizontal</layout>
		<second-node>
			<first>false</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Team Lead Home Page</name>
				</portal-page>
				<windowlet>
					<name>Received Messages</name>
					<application>
						<name>User Messaging</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Current Task List</name>
			<application>
				<name>Soprano Disease Management</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Received Messages</name>
			<application>
				<name>User Messaging</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Community Wound Assessment</name>
	<description />
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Wound Assessment</name>
				</portal-page>
				<windowlet>
					<name>Wound Observations</name>
					<application>
						<name>Healthcare pathways - CCR</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</first-node>
		<layout>horizontal</layout>
		<portal-page-windowlet>
			<portal-page>
				<name>Community Wound Assessment</name>
			</portal-page>
			<windowlet>
				<name>Wound Observations</name>
				<application>
					<name>Healthcare pathways - CCR</name>
				</application>
			</windowlet>
		</portal-page-windowlet>
		<second-node>
			<first>false</first>
			<portal-page-windowlet>
				<portal-page>
					<name>Community Wound Assessment</name>
				</portal-page>
				<windowlet>
					<name>Wounds</name>
					<application>
						<name>Healthcare pathways - CCR</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Wound Observations</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Wounds</name>
			<application>
				<name>Healthcare pathways - CCR</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page>
<portal-page>
	<name>Communtiy Health Centre Admin</name>
	<description>Community Health Centre Admin Home Page</description>
	<node>
		<first>false</first>
		<portal-page-windowlet>
			<portal-page>
				<name>Communtiy Health Centre Admin</name>
			</portal-page>
			<windowlet>
				<name>Demographics</name>
				<application>
					<name>Orion - Dynamic Patient Summary</name>
				</application>
			</windowlet>
		</portal-page-windowlet>
		<terminal>true</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Awaiting Booking</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Demographics</name>
			<application>
				<name>Orion - Dynamic Patient Summary</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<portal-page-windowlet>
		<windowlet>
			<name>Enrolled</name>
			<application>
				<name>Healthcare pathways - CCR Referrals</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>true</user-configurable>
</portal-page>
<portal-page>
	<name>WiC Nursing Home Page</name>
	<description>:::WiC::: WiC Nursing Home Page</description>
	<node>
		<first>false</first>
		<first-node>
			<first>true</first>
			<portal-page-windowlet>
				<portal-page>
					<name>WiC Nursing Home Page</name>
				</portal-page>
				<windowlet>
					<name>Whiteboard</name>
					<application>
						<name>cWhiteboard</name>
					</application>
				</windowlet>
			</portal-page-windowlet>
			<terminal>true</terminal>
		</first-node>
		<layout>horizontal</layout>
		<portal-page-windowlet>
			<portal-page>
				<name>WiC Nursing Home Page</name>
			</portal-page>
			<windowlet>
				<name>Whiteboard</name>
				<application>
					<name>cWhiteboard</name>
				</application>
			</windowlet>
		</portal-page-windowlet>
		<second-node>
			<first>false</first>
			<terminal>true</terminal>
		</second-node>
		<terminal>false</terminal>
	</node>
	<portal-page-windowlet>
		<windowlet>
			<name>Whiteboard</name>
			<application>
				<name>cWhiteboard</name>
			</application>
		</windowlet>
	</portal-page-windowlet>
	<user-configurable>false</user-configurable>
</portal-page><role>
	<name>Apps_ClPtl_Admin_IAM_Health</name>
	<description>Access to functionality required by the eHealth Support system administrators</description>
	<role-id>79ddda77-dbbb-40e2-bc63-b3361cf06723</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_CHHSGeneral_IAM_Health</name>
	<description>Access to baseline Portal functionality for CHHS users</description>
	<role-id>df405dca-e74b-439d-a370-0105e0c7aa26</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_CHILevel1_IAM_Health</name>
	<deleted>true</deleted>
	<role-id>7f9c0288-e537-4747-b863-bc16e33a033c</role-id>
</role>
<role>
	<name>Apps_ClPtl_CHILevel2_IAM_Health</name>
	<description>::: CCR ::: CHI Level 2</description>
	<role-id>a74d182d-b849-424e-b584-608faa7482b7</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_CNTeamleader_IAM_Health</name>
	<description>Team leaders</description>
	<role-id>49be4d54-8073-4469-ad5f-cdce660caa5d</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_CalvaryGeneral_IAM_Health</name>
	<description>Access to baseline Portal functionality for Calvary users</description>
	<role-id>448c9d36-7c9b-45b5-9581-d88f2260b575</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_ClericalCHHS_IAM_Health</name>
	<description>Read only access for clerical staff required for the management of referrals and appointments</description>
	<role-id>ee57ccc7-c0c6-49d2-b54a-cbaa2771c05c</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_ClericalCalvary_IAM_Health</name>
	<description>Access to baseline Portal functionality</description>
	<role-id>d1161bad-0aaa-4eec-8b7f-a5e0b8900f01</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_ClinicianCHHS_IAM_Health</name>
	<description>For nursing or allied health staff working at Canberra Hospital and Health Services.  Read only access to discharge summaries, eReferrals, results and orders</description>
	<role-id>9b3ffdb5-d49e-4cc9-8000-4375f8e68f99</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_ClinicianCalvary_IAM_Health</name>
	<description>For nursing or allied health staff working at Calvary Hospital.  Read only access to discharge summaries, eReferrals and results.</description>
	<role-id>7c58ab5d-d95d-4126-ac3a-fc389625dbe6</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_ClnPhrmCHHS_IAM_Health</name>
	<description>For pharmacists working at Canberra Hospital and Health Services.  Read only access to discharge summaries</description>
	<role-id>1ec6dfda-553a-46fa-88ad-1697f133afdf</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_ClnPhrmCalvary_IAM_Health</name>
	<description>For pharmacists working at the Calvary Hospital.  Read only access to discharge summaries</description>
	<role-id>27b80918-a6aa-469b-855d-8cac578e2317</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_CommunityAlliedHealth_IAM_Health</name>
	<description>::: CCR :::</description>
	<role-id>62d13684-2570-43ff-b3fe-1e8c0a2db339</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_CommunityClinician_IAM_Health</name>
	<description>::: CCR :::</description>
	<role-id>7c732503-0a9d-491a-a8d1-fed3c5b1275a</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_CommunityHealthCentreAdmin_IAM_Health</name>
	<description>::: WiC ::: Clerical</description>
	<role-id>3cd85b50-c62d-40f1-975a-8080409757b7</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_DrCHHS_IAM_Health</name>
	<description>For doctors working at the Canberra Hospital and Health Services.  Write and print discharge summaries,  eReferral amend and Orders access</description>
	<role-id>46bf30ab-b731-4292-aaeb-b0cf8cd11cb7</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_DrCalvary_IAM_Health</name>
	<description>For doctors working at the Calvary Hospital.  Discharge Summary write and print access for Calvary episodes.</description>
	<role-id>81af8ff8-f9c8-4fb2-a12c-64f317f5864c</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_Intake_IAM_Health</name>
	<description>Ambulatory Clerical</description>
	<role-id>98fe6c63-b044-4466-80f4-81902e4636d8</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_MedStudentCHHS_IAM_Health</name>
	<description>For final year medical students working at Canberra Hospital and Health Services.  Read only access.</description>
	<role-id>9eb903bf-fec7-4734-9cab-7958d2c5a6d3</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>Apps_ClPtl_WiCNurse_IAM_Health</name>
	<description>WiC Advance Practice Nurse</description>
	<role-id>1bb7eabe-630a-498e-9b2c-ba7a19f04501</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>CCR_Clerical</name>
	<deleted>true</deleted>
	<description>Read only access for clerical staff required for the management of referrals and appointments</description>
	<role-id>34bf9f65-3406-4fbd-a6fa-e35f79043120</role-id>
	<synchronise-ldap-membership>true</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_Admin</name>
	<description>Access to functionality required by the eHealth Support system administrators</description>
	<role-id>61bde4f2-fd13-42a3-95f6-8b94443ea741</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_CHHSGeneral</name>
	<description>Access to baseline Portal functionality for CHHS users</description>
	<role-id>0a0f6318-95c0-4394-bfd2-ab35952870e0</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_CHI Level 1</name>
	<deleted>true</deleted>
	<description>Level 1 admin staff within CHI who process standard referrals only.</description>
	<role-id>d320af6f-e94f-458c-9121-7c72b9e520d5</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_CHILevel2</name>
	<description>CHI Level 2 Users</description>
	<role-id>9539c3b2-b2c3-4fa0-a8e0-f73ec026e98a</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_CNTeamleader</name>
	<description>Community Nursing Team Lead</description>
	<role-id>1f753182-1e64-4892-a760-54afd9501a91</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_CalvaryGeneral</name>
	<description>Access to baseline Portal functionality for Calvary users</description>
	<role-id>6efbfefb-713b-46bf-a351-8e062810f638</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_ClericalCHHS</name>
	<description>Read only access for clerical staff required for the management of referrals and appointments</description>
	<role-id>5e8cff0c-9292-4535-b0e9-83706356011f</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_ClericalCalvary</name>
	<description>Access to baseline Portal functionality</description>
	<role-id>209557c3-b018-4e26-9851-3c50ff04b400</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_ClinicianCHHS</name>
	<description>For nursing or allied health staff working at Canberra Hospital and Health Services.  Read only access to discharge summaries, eReferrals, results and orders</description>
	<role-id>b0e466cf-1415-465f-b209-03582fcc7e3c</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_ClinicianCalvary</name>
	<description>For nursing or allied health staff working at Calvary Hospital.  Read only access to discharge summaries, eReferrals and results.</description>
	<role-id>bec0adb9-9923-4650-813e-cb7bc3e1bca6</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_ClnPhrmCHHS</name>
	<description>For pharmacists working at Canberra Hospital and Health Services.  Read only access to discharge summaries</description>
	<role-id>2102d7f7-2ef3-4066-abf6-15b140772919</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_ClnPhrmCalvary</name>
	<description>For pharmacists working at the Calvary Hospital.  Read only access to discharge summaries</description>
	<role-id>0f62c137-a797-4223-95af-f139444b99a3</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_Community Service</name>
	<deleted>true</deleted>
	<description>For Community Clinic Clinicians</description>
	<role-id>4e644ea1-09f8-42cf-9593-d7ab271077ff</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_Community Teamleader</name>
	<deleted>true</deleted>
	<role-id>f8e561c0-f647-4c7e-a8d4-bbafe6746eb6</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_CommunityAlliedHealth</name>
	<description>This will be expanded in release 2 or later</description>
	<role-id>4ef3f6c1-724a-4bd6-948e-260dfb460b69</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_CommunityClinician</name>
	<description>Community Nurse</description>
	<role-id>6ebe0377-cac8-4436-89f8-1acd9600d780</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_CommunityHealthCentreAdmin</name>
	<description>Health Centre Clerical</description>
	<role-id>715d1b86-9206-47b5-84a1-669d6c3531ad</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_DrCHHS</name>
	<description>For doctors working at the Canberra Hospital and Health Services.  Write and print discharge summaries,  eReferral amend and Orders access</description>
	<role-id>9302b542-405e-4447-9b9d-e13fd6eb91cd</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_DrCalvary</name>
	<description>For doctors working at the Calvary Hospital.  Discharge Summary write and print access for Calvary episodes.</description>
	<role-id>a6def1c7-ee0b-4767-9760-0acdf1f9f501</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_Intake</name>
	<description>::::CCR:::: Admin CHI intake.</description>
	<role-id>80d6b9cf-9a44-45ee-a20f-3b10d1fef613</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_Intake</name>
	<description>CHI Level 1 Users</description>
	<role-id>f43366ee-8b1e-41c7-b92f-cda91a1f5cdd</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_MedStudentCHHS</name>
	<description>For final year medical students working at Canberra Hospital and Health Services.  Read only access.</description>
	<role-id>4320d602-4357-4b7d-a046-67708905bb4b</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_WiC</name>
	<deleted>true</deleted>
	<description>For Community Clinic Clinicians</description>
	<role-id>ffe9d265-c8c9-401e-9069-6585c5e1a428</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_WiCNurse</name>
	<description>WiC Nurse Practioner</description>
	<role-id>e5cd0fa7-bdf2-428c-87d4-b5f3b96319d2</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_WiC_Admin</name>
	<deleted>true</deleted>
	<description>Walk-in-Centre admin</description>
	<role-id>3c9a2e66-fa9e-40df-81cc-927ed9fb0bdd</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_WiC_Admin</name>
	<deleted>true</deleted>
	<description>Level 1 admin staff within CHI who process standard referrals only.</description>
	<role-id>cbc88bf9-dde8-4251-a408-7c32b869ef6e</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>ClPtl_WiC_Whitboard</name>
	<deleted>true</deleted>
	<description>For WiC Users to access Whiteboard</description>
	<role-id>a494ce6a-18b6-44ea-ba59-61ce3f6e6f37</role-id>
	<synchronise-ldap-membership>false</synchronise-ldap-membership>
</role>
<role>
	<name>Tester</name>
	<deleted>true</deleted>
	<role-id>f1133d45-0c4a-4d1c-a875-4c60fe6c0e6a</role-id>
</role>
</concerto>
